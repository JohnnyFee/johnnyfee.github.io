<!DOCTYPE html>
<html>
<head>
    
<!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-43567748-2', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<!-- End Google Analytics -->


    

    



    <meta charset="utf-8">
    
    <meta name="google-site-verification" content="true">
    
    
    
    <title>Android NDK Quick Start | Balance | 大道至简</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="android,ndk,jni">
    <meta name="description" content="以下配置均在Windows8 x64系统下配置。
搭建NDK环境
下载并安装jdk
下载ADT Bundle的最新版本http://developer.android.com/sdk/index.html
下载NDK最新版本http://developer.android.com/tools/sdk/ndk/index.html
配置ADT Bundle的ndk路径， Eclipse/Window">
<meta property="og:type" content="article">
<meta property="og:title" content="Android NDK Quick Start">
<meta property="og:url" content="http://blog.inching.org/Android/2013-09-24-android-ndk-quick-start.html">
<meta property="og:site_name" content="Balance">
<meta property="og:description" content="以下配置均在Windows8 x64系统下配置。
搭建NDK环境
下载并安装jdk
下载ADT Bundle的最新版本http://developer.android.com/sdk/index.html
下载NDK最新版本http://developer.android.com/tools/sdk/ndk/index.html
配置ADT Bundle的ndk路径， Eclipse/Window">
<meta property="og:image" content="http://johnnyimages.qiniudn.com/ndk/h.png">
<meta property="og:image" content="http://johnnyimages.qiniudn.com/ndk/extern-tools.png">
<meta property="og:image" content="http://johnnyimages.qiniudn.com/ndk/javap.png">
<meta property="og:image" content="http://johnnyimages.qiniudn.com/ndk/basic-type.png">
<meta property="og:image" content="http://johnnyimages.qiniudn.com/ndk/object-type.png">
<meta property="og:image" content="http://johnnyimages.qiniudn.com/ndk/eclipse.png">
<meta property="og:updated_time" content="2017-11-05T08:22:17.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Android NDK Quick Start">
<meta name="twitter:description" content="以下配置均在Windows8 x64系统下配置。
搭建NDK环境
下载并安装jdk
下载ADT Bundle的最新版本http://developer.android.com/sdk/index.html
下载NDK最新版本http://developer.android.com/tools/sdk/ndk/index.html
配置ADT Bundle的ndk路径， Eclipse/Window">
<meta name="twitter:image" content="http://johnnyimages.qiniudn.com/ndk/h.png">
    
        <link rel="alternate" type="application/atom+xml" title="Balance" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/style/style.css?v=1.6.17">

    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-2846834382442028",
        enable_page_level_ads: true
      });
    </script>

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Cody Fei</h5>
          <a href="mailto:inchingcode@gmail.com" title="inchingcode@gmail.com" class="mail">inchingcode@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                Home
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags/android"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories/Android/"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/inchingorg" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://www.weibo.com/CodyFee" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://www.inesoi.com" target="_blank" >
                <i class="icon icon-lg icon-shopping-bag"></i>
                Shopping Bag
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Android NDK Quick Start</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Android NDK Quick Start</h1>
        <h5 class="subtitle">
            
                <time datetime="2013-09-23T16:00:00.000Z" itemprop="datePublished" class="page-time">
  2013-09-24
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Android/">Android</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#搭建NDK环境"><span class="post-toc-text">搭建NDK环境</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#生成-h文件"><span class="post-toc-text">生成.h文件</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#生成方法签名"><span class="post-toc-text">生成方法签名</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#类型转换"><span class="post-toc-text">类型转换</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#基本类型对应表"><span class="post-toc-text">基本类型对应表</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#引用类型"><span class="post-toc-text">引用类型</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#字符串"><span class="post-toc-text">字符串</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#数组"><span class="post-toc-text">数组</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#C-与Java互调"><span class="post-toc-text">C++与Java互调</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Java调用NDK步骤"><span class="post-toc-text">Java调用NDK步骤</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#NDK调用Java"><span class="post-toc-text">NDK调用Java</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#获取类的属性："><span class="post-toc-text">获取类的属性：</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#执行类的方法："><span class="post-toc-text">执行类的方法：</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#调用构造方法"><span class="post-toc-text">调用构造方法</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#全局变量"><span class="post-toc-text">全局变量</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#异常处理"><span class="post-toc-text">异常处理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#捕获异常"><span class="post-toc-text">捕获异常</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#抛出异常"><span class="post-toc-text">抛出异常</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#线程"><span class="post-toc-text">线程</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#子线程中调用Java"><span class="post-toc-text">子线程中调用Java</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#创建子线程"><span class="post-toc-text">创建子线程</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#用C实现延时"><span class="post-toc-text">用C实现延时</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#构建系统-Android-mk"><span class="post-toc-text">构建系统(Android.mk)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#预编译宏"><span class="post-toc-text">预编译宏</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#构建动态库"><span class="post-toc-text">构建动态库</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#构建静态库"><span class="post-toc-text">构建静态库</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#在同一个NDK工程中构建多个动态库"><span class="post-toc-text">在同一个NDK工程中构建多个动态库</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#添加子文件夹中所有的mk文件"><span class="post-toc-text">添加子文件夹中所有的mk文件</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用预编译方法引用第三方库"><span class="post-toc-text">使用预编译方法引用第三方库</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#通过LOCAL-LDFLAGS引用第三方库："><span class="post-toc-text">通过LOCAL_LDFLAGS引用第三方库：</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#多个NDK工程共享模块"><span class="post-toc-text">多个NDK工程共享模块</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#FAQ"><span class="post-toc-text">FAQ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#在Android-mk中输入变量"><span class="post-toc-text">在Android.mk中输入变量</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ReferenceTable-overflow问题"><span class="post-toc-text">ReferenceTable overflow问题</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#批量添加工程文件"><span class="post-toc-text">批量添加工程文件</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#添加STL"><span class="post-toc-text">添加STL</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Eclipse的编译器问题"><span class="post-toc-text">Eclipse的编译器问题</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#C-C-添加注释"><span class="post-toc-text">C/C++添加注释</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#参考"><span class="post-toc-text">参考</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Tutorial"><span class="post-toc-text">Tutorial</span></a></li></ol>
        </nav>
    </aside>
    
<article id="post-android-ndk-quick-start"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Android NDK Quick Start</h1>
        <div class="post-meta">
            <time class="post-time" title="2013-09-24 00:00:00" datetime="2013-09-23T16:00:00.000Z"  itemprop="datePublished">2013-09-24</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Android/">Android</a></li></ul>



            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p><strong>以下配置均在Windows8 x64系统下配置。</strong></p>
<h2 id="搭建NDK环境"><a href="#搭建NDK环境" class="headerlink" title="搭建NDK环境"></a>搭建NDK环境</h2><ul>
<li>下载并安装jdk</li>
<li>下载ADT Bundle的最新版本<a href="http://developer.android.com/sdk/index.html" target="_blank" rel="external">http://developer.android.com/sdk/index.html</a></li>
<li>下载NDK最新版本<a href="http://developer.android.com/tools/sdk/ndk/index.html" target="_blank" rel="external">http://developer.android.com/tools/sdk/ndk/index.html</a></li>
<li>配置ADT Bundle的ndk路径， Eclipse/Window/Preference/Android/NDK</li>
<li>使用ndk提供的sample测试配置是否正确。</li>
<li>设置NDK Location为ndk的解压路径，如C:/android-ndk-r8e。</li>
</ul>
<p><strong>注意</strong></p>
<p>使用NDK 7以上不再需要安装cygwin，这可以节约你不少折腾的时间。</p>
<p>运行hello-jni时，如果你发现在C/C++代码中下的断点无效，可能是因为GDB初始化的速度没赶上代码的执行速度，请在Android界面添加一个按钮来调用JNI代码。</p>
<p>JDK、ADT Bundle、NDK的平台一定要一致，本人都是用x86版本，亲测可以单步调试C/C++代码。</p>
<a id="more"></a>
<h2 id="生成-h文件"><a href="#生成-h文件" class="headerlink" title="生成.h文件"></a>生成.h文件</h2><p>根据native方法生成JNI对应的头文件，可以直接使用javah命令，也可以将改命令配置为Eclipse的外部工具，便于调用。</p>
<p>对应的jdk命令：</p>
<pre><code>javah -classpath bin/classes -jni com.example.hellojni.HelloJni
</code></pre><p>配置Eclipse工具，javah来生成.h文件<br>Open the Eclipse IDE, and choose <strong>Run –&gt; External Tools–&gt;External Tools Configurations</strong> from the top<br>menu bar. Using the External Tools Configurations dialog, select Program, and then click the New<br>launch configuration button. Using the Main tab, fill in the tool information as follows:</p>
<ul>
<li>Name: Generate C and C++ Header File</li>
<li>Location: C:\Program Files (x86)\Java\jdk1.7.0_25\bin\javah.exe</li>
<li>Working Directory: ${project_loc}/jni</li>
<li>Arguments: -classpath “${project_classpath};${env_var:ANDROID_SDK_HOME}/platforms/android-14/android.jar” ${java_type_name}</li>
</ul>
<p>其中Location需要根据自己的jdk路径调整。</p>
<p>Switch to the Refresh tab; put a checkmark next to the “Refresh resource upon completion” and<br>select “The project containing the selected resource” from the list.</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://johnnyimages.qiniudn.com/ndk/h.png" alt="javah" title="">
                </div>
                <div class="image-caption">javah</div>
            </figure>
<p>Switch to the Common tab, and put a checkmark next to the External Tools under the “Display in<br>favorites menu” group.</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://johnnyimages.qiniudn.com/ndk/extern-tools.png" alt="extern-tools" title="">
                </div>
                <div class="image-caption">extern-tools</div>
            </figure>
<p>Click the OK button to save the external tool configuration. In order to test the new configuration,<br>using the Project Explorer view, select the HelloJni class, then choose <strong>Run –&gt; External Tools–&gt;Generate C and C++ Header File</strong>. The javah tool will parse the selected class file for native<br>methods, and it will generate a C/C++ header file called com_example_hellojni_HelloJni.h under<br>the jni directory with the method descriptions.</p>
<p>Now that you have automated the way to generate the native method declarations, let’s look into the<br>generated method declarations more in detail.</p>
<h2 id="生成方法签名"><a href="#生成方法签名" class="headerlink" title="生成方法签名"></a>生成方法签名</h2><p>在C/C++中调用Java方法，需要知道Java方法或者属性的签名，我们可以使用javap命令方便地得到签名信息。为了方便调用javap命令，我同样提供讲javap配置为Eclipse的外部工具的方法。</p>
<p>对应的jdk命令：</p>
<pre><code>javap -classpath bin/classes -p -s com.example.hellojni.HelloJni
</code></pre><p>Open the Eclipse IDE, and choose <strong>Run –&gt; External Tools Configurations</strong> from the top menu<br>bar. Using the <strong>External Tool Configurations</strong> dialog, select Program, and then click the New launch<br>configuration button. Using the Main tab, fill in the tool information as follows、:</p>
<ul>
<li>Name: Java Class File Disassembler</li>
<li>Location:  C:\Program Files (x86)\Java\jdk1.7.0_25\bin\javap.exe</li>
<li>Working Directory: ${project_loc}</li>
<li>Arguments: -classpath “${project_classpath};${env_var:ANDROID_SDK_HOME}/platforms/android-14/android.jar” -p -s ${java_type_name}</li>
</ul>
<p>Click the OK button to save the external tool configuration. In order to test the new configuration, using<br>the Project Explorer view, select the HelloJni class, then choose <strong>Run –&gt; External Tools –&gt; Java Class</strong>.</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://johnnyimages.qiniudn.com/ndk/javap.png" alt="javah" title="">
                </div>
                <div class="image-caption">javah</div>
            </figure>
<h2 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h2><p>JNI的基本类型可以直接当做Java对应的类型使用，可以通过Eclipse的F3(代码导航)看看JNI的基本类型对应的C/C++类型。JNI的引用类型通过需要通过JNI提供的特定方法转化之后才能被C/C++代码消费。</p>
<h3 id="基本类型对应表"><a href="#基本类型对应表" class="headerlink" title="基本类型对应表"></a>基本类型对应表</h3><p>C++中直接可以使用JNI的基本类型，不需要将JNI类型转化为C++的类型。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://johnnyimages.qiniudn.com/ndk/basic-type.png" alt="基本类型" title="">
                </div>
                <div class="image-caption">基本类型</div>
            </figure>
<h3 id="引用类型"><a href="#引用类型" class="headerlink" title="引用类型"></a>引用类型</h3><p>C++中直接不可以使用JNI的引用类型，需要将JNI类型转化为C++的相应类型后再使用。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://johnnyimages.qiniudn.com/ndk/object-type.png" alt="引用类型" title="">
                </div>
                <div class="image-caption">引用类型</div>
            </figure>
<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><p>创建（C字符串转化为Java字符串）：</p>
<pre><code>jstring javaString = pEnv-&gt;NewStringUTF(&quot;Hello World!&quot;);
</code></pre><p>Java字符串转C字符串：</p>
<pre><code>const char* str;
str = pEnv-&gt;GetStringUTFChars(javaString, &amp;isCopy);
</code></pre><p>释放内存</p>
<pre><code>pEnv-&gt;ReleaseStringUTFChars(javaString, str);
</code></pre><h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><p>创建数组：</p>
<pre><code>jintArray javaArray;
javaArray = pEnv-&gt;NewIntArray(10);
if (0 != javaArray) {
/* You can now use the array. */
}
</code></pre><p>拷贝Java数组到C数组：</p>
<pre><code>jint nativeArray[10];
// 建议使用以下方法，无需涉及内存管理
pEnv-&gt;GetIntArrayRegion(javaArray, 0, 10, nativeArray);
</code></pre><p>拷贝C数组到Java数组：</p>
<pre><code>pEnv-&gt;SetIntArrayRegion(javaArray, 0, 10, nativeArray);
</code></pre><p>直接使用指针：</p>
<pre><code>jint* nativeDirectArray;
jboolean isCopy;
nativeDirectArray = pEnv-&gt;GetIntArrayElements(javaArray, &amp;isCopy);
// 使用该方法需要释放内存
pEnv-&gt;ReleaseIntArrayElements(javaArray, nativeDirectArray, 0);
</code></pre><p>将jbyteArray转化为<code>char*</code></p>
<pre><code>// 转化为jbyte数组
jsize length = pEnv-&gt;GetArrayLength(javaContent);
jbyte* jniContent = pEnv-&gt;GetByteArrayElements(javaContent,
        JNI_FALSE);

// 将jbyte数组存储到本地数组
char* nativeContent = new char[length + 1];

memset(nativeContent, 0, length + 1);
memcpy(nativeContent, jniContent, length);

// 释放由GetByteArrayElements获取到的数组。
pEnv-&gt;ReleaseByteArrayElements(javaContent, jniContent, 0);
pEnv-&gt;DeleteLocalRef(src);
</code></pre><p><code>nativeContent</code>为输出结果。        </p>
<h2 id="C-与Java互调"><a href="#C-与Java互调" class="headerlink" title="C++与Java互调"></a>C++与Java互调</h2><h3 id="Java调用NDK步骤"><a href="#Java调用NDK步骤" class="headerlink" title="Java调用NDK步骤"></a>Java调用NDK步骤</h3><ul>
<li>在Java中编写native方法</li>
<li>使用javah（参考“生成.h文件”）生成对应的C/C++头文件</li>
<li>实现C/C++</li>
<li>在需要调用native方法的类，load相应的so，使用System.loadLibrary(“JniStudy”);</li>
</ul>
<p>其中JniStudy为模块名，对应的文件为libs/assembly/libJniStudy.so</p>
<h3 id="NDK调用Java"><a href="#NDK调用Java" class="headerlink" title="NDK调用Java"></a>NDK调用Java</h3><p>注意：以下方法均在.C中实现，如果在.CPP中，调用JNIEnv的方法为env-&gt;(args)。<br>NDK的方法签名如：<br>类的非静态方法对应的JNI形式如：</p>
<pre><code>Java_com_landi_applib_jni_NativeLog_log(JNIEnv *jobject instance, args);
</code></pre><p>类的静态方法对应的JNI形式如：</p>
<pre><code>Java_com_landi_applib_jni_NativeLog_log(JNIEnv *jclass instance, args);
</code></pre><p>其中env相当于虚拟机，每个线程拥有单独的env，线程间不能共享env。instance为Java对象，对于静态方法，该参数为jclass。</p>
<p>对于静态方法对应的C/C++代码中不能调用JAVA端的任何非静态方法。<a href="http://stackoverflow.com/questions/6584269/android-ndk-problem-for-call-of-java-method-from-c-with-jni" target="_blank" rel="external">Problem for call of Java method from c++ with jni</a></p>
<h3 id="获取类的属性："><a href="#获取类的属性：" class="headerlink" title="获取类的属性："></a>获取类的属性：</h3><p>根据jobject获取jclass</p>
<pre><code>jclass clazz;
clazz = pEnv-&gt;GetObjectClass(instance);
</code></pre><p>获取fieldId</p>
<pre><code>jfieldID instanceFieldId;
instanceFieldId = pEnv-&gt;GetFieldID(clazz,&quot;instanceField&quot;, &quot;Ljava/lang/String;&quot;);
</code></pre><p>获取值</p>
<pre><code>jstring instanceField;
instanceField = pEnv-&gt;GetObjectField(instance, instanceFieldId);
</code></pre><p>对于static域，使用GetStaticFieldID和GetStaticObjectField方法。</p>
<h3 id="执行类的方法："><a href="#执行类的方法：" class="headerlink" title="执行类的方法："></a>执行类的方法：</h3><p>获取MethodId</p>
<pre><code>jmethodID instanceMethodId;
instanceMethodId = pEnv-&gt;GetMethodID(clazz,&quot;instanceMethod&quot;, &quot;()Ljava/lang/String;&quot;);
</code></pre><p>执行方法：</p>
<pre><code>jstring instanceMethodResult;
instanceMethodResult = pEnv-&gt;CallStringMethod(env,instance, instanceMethodId);
</code></pre><p>对于static方法，分别使用GetStaticMethodID和CallStaticStringMethod方法。</p>
<p>参考：<a href="http://developer.51cto.com/art/201204/332810.htm" target="_blank" rel="external">http://developer.51cto.com/art/201204/332810.htm</a></p>
<h3 id="调用构造方法"><a href="#调用构造方法" class="headerlink" title="调用构造方法"></a>调用构造方法</h3><pre><code>// 先获得class对象  
jclass classMyCallback = env-&gt;FindClass(&quot;com/landi/jnistudy/MyCallback&quot;);

// 调用默认构造函数  
jobject obj =  env-&gt;AllocObject(classMyCallback);
构造函数也是方法, 类似调用方法的方式.

// 调用指定的构造函数, 构造函数的名字叫做&lt;init&gt;  
mid = pEnv-&gt;GetMethodID(env, cls, &quot;&lt;init&gt;&quot;, &quot;()V&quot;);  
obj = pEnv-&gt;NewObject(env, cls, mid);  
</code></pre><p>来自 <a href="http://developer.51cto.com/art/201204/332810.htm" target="_blank" rel="external">http://developer.51cto.com/art/201204/332810.htm</a> </p>
<h2 id="全局变量"><a href="#全局变量" class="headerlink" title="全局变量"></a>全局变量</h2><p>通常class信息，object变量，方法ID等获取之后通常要保存到全局变量中，可以通过以下方法创建全局变量，详情请参考<code>参考/最贱实践</code>。</p>
<p>从一个local变量初始化全局变量</p>
<pre><code>jclass localClazz;
jclass globalClazz;
...
localClazz = pEnv-&gt;FindClass(&quot;java/lang/String&quot;);
globalClazz = pEnv-&gt;NewGlobalRef(localClazz);
</code></pre><p>删除全局变量</p>
<pre><code>pEnv-&gt;DeleteLocalRef(localClazz);
</code></pre><p>对于一些不再使用的局部变量，也可以显示调用<code>pEnv-&gt;DeleteLocalRef</code>来删除，以提高效率。</p>
<h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h2><h3 id="捕获异常"><a href="#捕获异常" class="headerlink" title="捕获异常"></a>捕获异常</h3><p>NDK调用Java方法，Java方法抛出异常时（此时Java VM挂起），使用ExceptionOccurred来检查是否有异常，处理完后调用ExceptionClear清除异常。</p>
<pre><code>jthrowable ex;
...
pEnv-&gt;CallVoidMethod(instance, throwingMethodId);
ex = pEnv-&gt;ExceptionOccurred(env);
if (0 != ex) {
    pEnv-&gt;ExceptionClear(env);
    /* Exception handler. */
}
</code></pre><h3 id="抛出异常"><a href="#抛出异常" class="headerlink" title="抛出异常"></a>抛出异常</h3><p>As the code execution of native functions are not under the control of the virtual machine, throwing<br>an exception does not stop the execution of the native function and transfer control to the exception<br>handler.</p>
<pre><code>jclass clazz;
...
clazz = pEnv-&gt;FindClass(&quot;java/lang/NullPointerException&quot;);
if (0 ! = clazz) {
pEnv-&gt;ThrowNew(clazz, &quot;Exception message.&quot;);
// 是否会return，是否会抛到调用者的最外层
}
</code></pre><h2 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h2><h3 id="子线程中调用Java"><a href="#子线程中调用Java" class="headerlink" title="子线程中调用Java"></a>子线程中调用Java</h3><p>在C++的字线程中需要调用Java相关的类、方法、属性，需要调用</p>
<pre><code>JNIEnv *pEnv = NULL;
int ret = pJvm-&gt;AttachCurrentThread(&amp;pNULL);
if (ret != JNI_OK) {
    return;
}
</code></pre><p>否则会崩溃。</p>
<p>即使如此，也不能用获取的pEnv的FindClass来查找Java，需要将object保存到全局变量</p>
<pre><code>gs_object=env-&gt;NewGlobalRef(obj)，
</code></pre><p>然后通过</p>
<pre><code>jclass cls = env-&gt;GetObjectClass(gs_object);
</code></pre><p>来获取jclass信息，再调用java方法或属性。</p>
<h3 id="创建子线程"><a href="#创建子线程" class="headerlink" title="创建子线程"></a>创建子线程</h3><pre><code>pthread_t pth;
pthread_create(&amp;pth, NULL, startServer, NULL);
pthread_join(pth, NULL);
</code></pre><p>来自 <a href="http://stackoverflow.com/questions/8230361/jni-crashing-after-repeatedly-calling-a-method" target="_blank" rel="external">http://stackoverflow.com/questions/8230361/jni-crashing-after-repeatedly-calling-a-method</a> </p>
<h3 id="用C实现延时"><a href="#用C实现延时" class="headerlink" title="用C实现延时"></a>用C实现延时</h3><pre><code>struct timespec delay;
delay.tv_sec = 2;
delay.tv_nsec = 0;
pthread_delay_np( &amp;delay );
</code></pre><p>来自 <a href="http://blog.csdn.net/sojohn/article/details/334719" target="_blank" rel="external">http://blog.csdn.net/sojohn/article/details/334719</a> </p>
<h2 id="构建系统-Android-mk"><a href="#构建系统-Android-mk" class="headerlink" title="构建系统(Android.mk)"></a>构建系统(Android.mk)</h2><p>以下若无说明，都是修改Android.mk</p>
<h3 id="预编译宏"><a href="#预编译宏" class="headerlink" title="预编译宏"></a>预编译宏</h3><pre><code>LOCAL_CFLAGS := -DUSE_FILE32API 
LOCAL_EXPORT_CFLAGS := -DUSE_FILE32API
</code></pre><p>To define additional options or flags in import modules that should be appended to clients options. For<br>example, if a module A defines</p>
<pre><code>LOCAL_EXPORT_LDLIBS := -llog
</code></pre><p><strong>LOCAL_EXPORT_CFLAGS,LOCAL_EXPORT_CPPFLAGS,LOCAL_EXPORT_LDLIBS</strong></p>
<p>because it needs an Android logging module, then a module B that depends on A will be automatically linked to –llog. LOCAL<em>EXPORT</em> variables are not used when compiling the module that exports them. If required, they also need to be specified in their LOCAL counterpart.</p>
<p><strong>LOCAL_CFLAGS,LOCAL_CPPFLAGS,LOCAL_LDLIBS</strong></p>
<p>To specify any options, flags, or macro definitions, forcompilation and linking. The first one works for bothC and C++, the second one is for C++ only, and the lastone is for the linker.</p>
<h3 id="构建动态库"><a href="#构建动态库" class="headerlink" title="构建动态库"></a>构建动态库</h3><pre><code>LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE := avilib
LOCAL_SRC_FILES := avilib.c platform_posix.c

#放在最后一行
include $(BUILD_SHARED_LIBRARY)
</code></pre><p>在C++消费动态库</p>
<pre><code>include $(CLEAR_VARS)
LOCAL_MODULE := module
LOCAL_SRC_FILES := module.c
LOCAL_SHARED_LIBRARIES += avilib
</code></pre><h3 id="构建静态库"><a href="#构建静态库" class="headerlink" title="构建静态库"></a>构建静态库</h3><p>将构建动态库中的最后一行修改为</p>
<pre><code>include $(BUILD_STATIC_LIBRARY)
</code></pre><p>在C++消费静态库</p>
<pre><code>include $(CLEAR_VARS)
LOCAL_MODULE := module
LOCAL_SRC_FILES := module.c
LOCAL_STATIC_LIBRARIES += avilib
</code></pre><p>也可以通过</p>
<pre><code>LOCAL_WHOLE_STATIC_LIBRARIES := cocos_libpng_static
</code></pre><p>使用LOCAL_WHOLE_STATIC_LIBRARIES后，编译器会将静态库完整链接而不会进行删减优化。</p>
<p>注：不可以直接在Android应用程序中使用静态库，需要编译到动态库中才能被Android应用程序消费。</p>
<h3 id="在同一个NDK工程中构建多个动态库"><a href="#在同一个NDK工程中构建多个动态库" class="headerlink" title="在同一个NDK工程中构建多个动态库"></a>在同一个NDK工程中构建多个动态库</h3><pre><code>LOCAL_PATH := $(call my-dir)
#
# Module 1
#
include $(CLEAR_VARS)
LOCAL_MODULE := module1
LOCAL_SRC_FILES := module1.c
CHAPTER 2: Exploring the Android NDK 55
include $(BUILD_SHARED_LIBRARY)

#
# Module 2
#
include $(CLEAR_VARS)
LOCAL_MODULE := module2
LOCAL_SRC_FILES := module2.c
include $(BUILD_SHARED_LIBRARY)
</code></pre><h3 id="添加子文件夹中所有的mk文件"><a href="#添加子文件夹中所有的mk文件" class="headerlink" title="添加子文件夹中所有的mk文件"></a>添加子文件夹中所有的mk文件</h3><pre><code>include $(call all-subdir-makefiles)

来自 &lt;http://stackoverflow.com/questions/6942730/android-ndk-how-to-include-android-mk-into-another-android-mk&gt; 
</code></pre><h3 id="使用预编译方法引用第三方库"><a href="#使用预编译方法引用第三方库" class="headerlink" title="使用预编译方法引用第三方库"></a>使用预编译方法引用第三方库</h3><pre><code>#------------------
#预编译app-lib

include $(CLEAR_VARS)
LOCAL_MODULE := app-lib
LOCAL_SRC_FILES := ../../../app-lib/src/app-lib/libs/armeabi/libapp-lib.so
include $(PREBUILT_SHARED_LIBRARY)
#------------------
</code></pre><p>引用第三方库</p>
<pre><code>LOCAL_SHARED_LIBRARIES += app-lib
</code></pre><p>也可以通过LOCAL_LDFLAGS引用第三方库的方式导入预编译后的so。</p>
<p>通过该方法导入的库如果不存在于Android系统中，则必须存在于<code>libs/armeabi/</code>目录下，且要在Java端通过loadLibrary加载该库。<br>来自 <a href="http://www.kandroid.org/ndk/docs/IMPORT-MODULE.html" target="_blank" rel="external">http://www.kandroid.org/ndk/docs/IMPORT-MODULE.html</a> </p>
<h3 id="通过LOCAL-LDFLAGS引用第三方库："><a href="#通过LOCAL-LDFLAGS引用第三方库：" class="headerlink" title="通过LOCAL_LDFLAGS引用第三方库："></a>通过LOCAL_LDFLAGS引用第三方库：</h3><pre><code>LOCAL_LDFLAGS +=  -L$(LOCAL_PATH)/../../../../app-lib/src/app-lib/libs/$(TARGET_ARCH_ABI)/ -lapp-lib
</code></pre><p>其中，-L指定动态库的路径，-l指定动态库的名称。通过该方法导入的库如果不存在于Android系统中，则必须存在于libs/armeabi/目录下，且要在Java端通过loadLibrary加载该库。</p>
<h3 id="多个NDK工程共享模块"><a href="#多个NDK工程共享模块" class="headerlink" title="多个NDK工程共享模块"></a>多个NDK工程共享模块</h3><p>该种方式未经实践，仅供参考。</p>
<p>共享库的Android.mk，假设位于<code>C:\android\shared-modules\transcode\avilib</code>.</p>
<pre><code>LOCAL_PATH := $(call my-dir)
#
# 3rd party AVI library
#
include $(CLEAR_VARS)
LOCAL_MODULE := avilib
LOCAL_SRC_FILES := avilib.c platform_posix.c
include $(BUILD_SHARED_LIBRARY)
</code></pre><p>NDK工程的Android.mk，引用第三方库（未实现）<br>可参考Link shared library under Android NDK</p>
<pre><code>LOCAL_SHARED_LIBRARIES := avilib
include $(BUILD_SHARED_LIBRARY)

#位于最后一行
$(call import-module,transcode/avilib)    
</code></pre><p>The import-module function macro needs to first locate the shared module and then import it into the NDK project. By default, only the &lt; Android NDK&gt; sources directory is searched by the import-module function macro. In order to include the <code>c:\android\shared-modules</code> directory into the search, define a new environment variable called NDK_MODULE_PATH and set it to the root directory of shared modules, such as <code>c:\android\shared-modules</code>.</p>
<p><strong>如添加工程中下的libjpeg库</strong><br>来自 <a href="http://www.cfanz.cn/?c=article&amp;a=read&amp;id=38462" target="_blank" rel="external">http://www.cfanz.cn/?c=article&amp;a=read&amp;id=38462</a></p>
<p>添加外部导入库目录 </p>
<pre><code>$(call import-add-path,$(LOCAL_PATH)) 
</code></pre><p>添加导入库（基于上一行添加的导入库目录） </p>
<pre><code>$(call import-module,platform/third_party/android/prebuilt/libjpeg)
</code></pre><h2 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h2><h3 id="在Android-mk中输入变量"><a href="#在Android-mk中输入变量" class="headerlink" title="在Android.mk中输入变量"></a>在Android.mk中输入变量</h3><pre><code>$(warning $(LOCAL_PATH))
</code></pre><h3 id="ReferenceTable-overflow问题"><a href="#ReferenceTable-overflow问题" class="headerlink" title="ReferenceTable overflow问题"></a>ReferenceTable overflow问题</h3><p>对于频繁调用的方法，其中的一些局部变量需要及时释放，否会导致ReferenceTable overflow问题，如FindClass返回值，jbyteArray类型，通过NewString/NewStringUTF/NewObject/GetObjectField生成的变量。</p>
<p>参考 <a href="http://bbs.csdn.net/topics/380134134?page=1#post-393496160" target="_blank" rel="external">http://bbs.csdn.net/topics/380134134?page=1#post-393496160</a> </p>
<h3 id="批量添加工程文件"><a href="#批量添加工程文件" class="headerlink" title="批量添加工程文件"></a>批量添加工程文件</h3><p><a href="http://www.cfanz.cn/?c=article&amp;a=read&amp;id=38462" target="_blank" rel="external">http://www.cfanz.cn/?c=article&amp;a=read&amp;id=38462</a></p>
<h3 id="添加STL"><a href="#添加STL" class="headerlink" title="添加STL"></a>添加STL</h3><p>在jni目录下添加Application.mk，并添加以下内容：</p>
<pre><code>APP_STL := stlport_static
APP_PLATFORM = android-10
</code></pre><p>修改Android.mk</p>
<pre><code>LOCAL_SHARED_LIBRARIES := libstlport
</code></pre><h3 id="Eclipse的编译器问题"><a href="#Eclipse的编译器问题" class="headerlink" title="Eclipse的编译器问题"></a>Eclipse的编译器问题</h3><p>对于可以通过ndk-build命令编译成功，而Eclipse中报编译错误的原因为，Java对于C/C++的编译器存在问题，可以通过禁用Eclispe一个错误提示来解决。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://johnnyimages.qiniudn.com/ndk/eclipse.png" alt="Eclipse的编译器问题" title="">
                </div>
                <div class="image-caption">Eclipse的编译器问题</div>
            </figure>
<p>将所有的勾去掉。</p>
<h3 id="C-C-添加注释"><a href="#C-C-添加注释" class="headerlink" title="C/C++添加注释"></a>C/C++添加注释</h3><ul>
<li>安装eclox插件 <a href="http://home.gna.org/eclox/#download" target="_blank" rel="external">http://home.gna.org/eclox/#download</a></li>
<li>In c/c++-&gt;Editor-&gt;Documentation tool comments, Workspace default set doxygen. Then above a function write /** and press return.</li>
</ul>
<p>See <a href="http://stackoverflow.com/questions/3537542/a-doxygen-eclipse-plugin-with-automatic-code-completion" target="_blank" rel="external">http://stackoverflow.com/questions/3537542/a-doxygen-eclipse-plugin-with-automatic-code-completion</a></p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="http://dl.dbank.com/c0z1lurn5u" target="_blank" rel="external">Apress.Pro.Android.CPP.with.the.NDK.Dec.2012.pdf</a></li>
<li><p><a href="http://www.salttiger.com/android-native-development-kit-cookbook/" target="_blank" rel="external">Android Native Development Kit Cookbook</a></p>
</li>
<li><p>我的收藏 <a href="https://delicious.com/johnnyfee/ndk" target="_blank" rel="external">https://delicious.com/johnnyfee/ndk</a></p>
</li>
<li>最佳实践 <a href="http://www.ibm.com/developerworks/cn/java/j-jni/" target="_blank" rel="external">http://www.ibm.com/developerworks/cn/java/j-jni/</a></li>
<li>系列教程 <a href="http://www.cnblogs.com/oxgen/tag/Android%20JNI/" target="_blank" rel="external">http://www.cnblogs.com/oxgen/tag/Android%20JNI/</a></li>
<li>NDK-Home <a href="http://www.kandroid.org/ndk/docs/IMPORT-MODULE.html" target="_blank" rel="external">http://www.kandroid.org/ndk/docs/IMPORT-MODULE.html</a></li>
<li><p>Oracle DOC <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/jniTOC.html" target="_blank" rel="external">http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/jniTOC.html</a></p>
</li>
<li><p><a href="http://www.tudou.com/programs/view/edkMm1D6gjY/" target="_blank" rel="external">NDK 视频教程</a></p>
</li>
</ul>
<h2 id="Tutorial"><a href="#Tutorial" class="headerlink" title="Tutorial"></a>Tutorial</h2><p><a href="http://blog.csdn.net/xyang81/article/details/41759643" target="_blank" rel="external">JNI/NDK开发指南（开山篇）</a></p>

        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2017-11-05T08:22:17.000Z" itemprop="dateUpdated">2017-11-05 16:22:17</time>
</span><br>


        
        这里可以写作者留言，标签和 hexo 中所有变量及辅助函数等均可调用，示例：<a href="/Android/2013-09-24-android-ndk-quick-start.html" target="_blank" rel="external">http://blog.inching.org/Android/2013-09-24-android-ndk-quick-start.html</a>
        
    </div>
    <footer>
        <a href="http://blog.inching.org">
            <img src="/img/avatar.png" alt="Cody Fei">
            Cody Fei
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jni/">jni</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ndk/">ndk</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.inching.org/Android/2013-09-24-android-ndk-quick-start.html&title=《Android NDK Quick Start》 — Balance&pic=http://blog.inching.org/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.inching.org/Android/2013-09-24-android-ndk-quick-start.html&title=《Android NDK Quick Start》 — Balance&source=以下配置均在Windows8 x64系统下配置。
搭建NDK环境
下载并安装jdk
下载ADT Bundle的最新版本http://developer.a..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.inching.org/Android/2013-09-24-android-ndk-quick-start.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Android NDK Quick Start》 — Balance&url=http://blog.inching.org/Android/2013-09-24-android-ndk-quick-start.html&via=http://blog.inching.org" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.inching.org/Android/2013-09-24-android-ndk-quick-start.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/Spring/2013-09-25-spring-roo-addon.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Spring Roo 插件</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/Spring/2013-09-24-spring-roo-i18n.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Spring Roo 国际化</h4>
      </a>
    </div>
  
</nav>



    











</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢大爷~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.JPG" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.JPG" data-alipay="/img/alipay.JPG">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top" style="display:none">
        

        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>footer.license</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Cody Fei &copy; 2012 - 2017</span>
            <span style="display:none">
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.inching.org/Android/2013-09-24-android-ndk-quick-start.html&title=《Android NDK Quick Start》 — Balance&pic=http://blog.inching.org/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.inching.org/Android/2013-09-24-android-ndk-quick-start.html&title=《Android NDK Quick Start》 — Balance&source=以下配置均在Windows8 x64系统下配置。
搭建NDK环境
下载并安装jdk
下载ADT Bundle的最新版本http://developer.a..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.inching.org/Android/2013-09-24-android-ndk-quick-start.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Android NDK Quick Start》 — Balance&url=http://blog.inching.org/Android/2013-09-24-android-ndk-quick-start.html&via=http://blog.inching.org" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.inching.org/Android/2013-09-24-android-ndk-quick-start.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACtUlEQVR42u3a0Y7CMAwEQP7/p+9ekY6mazsBdJo+oULbDEhJWPvxiI+fp+P5zNUnr87k7+ZP3HDg4eHhDYb+90g+sx5KQlqfWV91NQY8PDy807z1FF+d0NcDzefw+bKEh4eH9w28fNDrz+R3wMPDw/sfvCSwSDbNu7bpeHh4eO/n5bdeX5V8TWtqNcLYlrXg4eHhxbw8Jvie10fqe3h4eHjjqnoeqk5C2OqyURgtHh4e3gFeL06tnp9P9NXgGA8PD+89vOpf/TwO6AUH+QKzji3w8PDwTvDyYlh101zdTCfLwIZ4Ag8PD2/Aq0YMexsFJoW0ZPuOh4eHd5qXT8r5QOeNXEkbwaN6GR4eHt6Yl7c69b6IHqy3cb+s7+Hh4eFt5VUHNGGcu8+LO+Ph4eEd4J1roqoW+3t3jp6Fh4eHt5WXT77VMHfeBLAh1MDDw8M7wMsj3bwNa5KjTqKHGyQeHh7eVl5v8q1O5RsKWnE7V6HjAA8PD2/AOxE99FqpepHuTSSBh4eHt4k3f2S+GFS32vlCcvlj4OHh4R3g9QpLvQJVXnKrRr03XzceHh7eVl41VqhuvnstU9Vl5iaZxsPDw9vKm0/HuyKJ6oYeDw8P71O8/IJq6JCUqaoLRr6Q3GQteHh4eANevoGuNhBMwPN38fDw8D7FSxaJSaQb9TX0AojJfhwPDw+vyMuHmLdSTZq68raDyzvg4eHhvZ23axDVkltvqRjlInh4eHgtWHUBqBbS8im+V0i7abrCw8PDG/N2LR55nJEPKy+eleMJPDw8vDEvj1yrLQWTolqhxLUeCR4eHt4xXt7YtH5Ab9CPcwceHh7eF/B2hb+9aDh/jYeHh/c9vIQ92VhXWxBulhY8PDy8Y7xea9SuclQy6GZhDA8PD+8Ar/ePft5kMN9MHwws8PDw8F4fv/8ESt8kGRtZAAAAAElFTkSuQmCC" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="/js/main.min.js?v=1.6.17"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.6.17" async></script>










</body>
</html>
