<!DOCTYPE html>
<html>
<head>
    
<!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-43567748-2', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<!-- End Google Analytics -->


    

    



    <meta charset="utf-8">
    
    <meta name="google-site-verification" content="true">
    
    
    
    <title>WordPress Widgets | Balance | 大道至简</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="tutorial,wordpress">
    <meta name="description" content="Widgets allow you to place contained pieces of code and content in various widget areas throughout your WordPress site. The most typical use cases are to add widgets to a sidebar or footer area. You c">
<meta property="og:type" content="article">
<meta property="og:title" content="WordPress Widgets">
<meta property="og:url" content="http://blog.inching.org/WordPress/2015-06-09-wordpress-widgets.html">
<meta property="og:site_name" content="Balance">
<meta property="og:description" content="Widgets allow you to place contained pieces of code and content in various widget areas throughout your WordPress site. The most typical use cases are to add widgets to a sidebar or footer area. You c">
<meta property="og:image" content="http://johnnyimages.qiniudn.com/wordpress-widget.png">
<meta property="og:updated_time" content="2017-11-05T08:22:17.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="WordPress Widgets">
<meta name="twitter:description" content="Widgets allow you to place contained pieces of code and content in various widget areas throughout your WordPress site. The most typical use cases are to add widgets to a sidebar or footer area. You c">
<meta name="twitter:image" content="http://johnnyimages.qiniudn.com/wordpress-widget.png">
    
        <link rel="alternate" type="application/atom+xml" title="Balance" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/css/style.css?v=1.6.17">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Cody Fei</h5>
          <a href="mailto:inchingcode@gmail.com" title="inchingcode@gmail.com" class="mail">inchingcode@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                Home
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags/android"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories/Android/"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/inchingorg" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://www.weibo.com/CodyFee" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://www.inesoi.com" target="_blank" >
                <i class="icon icon-lg icon-shopping-bag"></i>
                Shopping Bag
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">WordPress Widgets</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">WordPress Widgets</h1>
        <h5 class="subtitle">
            
                <time datetime="2015-06-08T16:00:00.000Z" itemprop="datePublished" class="page-time">
  2015-06-09
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/WordPress/">WordPress</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Before-You-Add-Your-Own-Widget"><span class="post-toc-text">Before You Add Your Own Widget</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Adding-Widgets"><span class="post-toc-text">Adding Widgets</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Defining-a-Widget-Area"><span class="post-toc-text">Defining a Widget Area</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#undefined"><span class="post-toc-text">)    </span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Embedding-a-Widget-Outside-of-a-Dynamic-Sidebar"><span class="post-toc-text">Embedding a Widget Outside of a Dynamic Sidebar</span></a></li></ol>
        </nav>
    </aside>
    
<article id="post-wordpress-widgets"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">WordPress Widgets</h1>
        <div class="post-meta">
            <time class="post-time" title="2015-06-09 00:00:00" datetime="2015-06-08T16:00:00.000Z"  itemprop="datePublished">2015-06-09</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/WordPress/">WordPress</a></li></ul>



            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p>Widgets allow you to place contained pieces of code and content in various widget areas throughout your WordPress site. The most typical use cases are to add widgets to a sidebar or footer area. You could always hardcode these sections on a website, but using widgets allows your nondevelopers to drag and drop widgets from one area to another or to tweak their settings through the widgets page in the admin dashboard.</p>
<a id="more"></a>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://johnnyimages.qiniudn.com/wordpress-widget.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<p>Plenty of plugins also include widgets for showing various content. We won’t go into the use and styling of widgets here, since their use is covered well in the <a href="http://bit.ly/widgets-codex" target="_blank" rel="external">WordPress Codex page on widgets</a>, but we will cover how to add widgets and widget areas to your plugins and themes.</p>
<h3 id="Before-You-Add-Your-Own-Widget"><a href="#Before-You-Add-Your-Own-Widget" class="headerlink" title="Before You Add Your Own Widget"></a>Before You Add Your Own Widget</h3><p>Before you go about developing a new widget, it’s worth spending some time to see if an existing widget will work for you. If you get creative, you can sometimes avoid building a new widget.</p>
<p>Search the repository for plugins that may already have the widget you need. If so, double-check the code there and see if it will work.</p>
<p>Text widgets can be used to add arbitrary text into a widget space. You can also embed JavaScript code this way or add a shortcode to the text area and use a shortcode to output the functionality you want (you may have created the shortcode already for other use) instead of creating a new widget.</p>
<p>If your widget is displaying a list of links, it might make sense to build a menu of those links and use the Custom Menu widget that is built into WordPress. Other widgets that display recent posts from a category will often work with CPTs and custom taxonomies either out of the box or with a little bit of effort.</p>
<p>If you do need to add a brand-new widget, the following section will cover the steps required.</p>
<h3 id="Adding-Widgets"><a href="#Adding-Widgets" class="headerlink" title="Adding Widgets"></a>Adding Widgets</h3><p>To add a new widget to WordPress, you must create a new PHP class for the widget that extends the WP_Widget class of WordPress. The WP_Widget class can be found in <em>wp-includes/widgets.php</em> and is a good read. The comments in the code explain how the class works and which methods you must override to build your own widget class. There are four main methods that you must override, shown clearly in the following code by the sample widget class from the <a href="http://codex.wordpress.org/Widgets_API" target="_blank" rel="external">WordPress Codex page for the Widgets API</a>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">/*</div><div class="line">  Taken from the Widgets API Codex Page at:</div><div class="line">  http://codex.wordpress.org/Widgets_API</div><div class="line">*/</div><div class="line">class My_Widget extends WP_Widget &#123;</div><div class="line"></div><div class="line">        public function __construct() &#123;</div><div class="line">                // widget actual processes</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        public function widget( $args, $instance ) &#123;</div><div class="line">                // outputs the content of the widget</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        public function form( $instance ) &#123;</div><div class="line">                // outputs the options form on admin</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        public function update( $new_instance, $old_instance ) &#123;</div><div class="line">                // processes widget options to be saved</div><div class="line">        &#125;</div><div class="line">&#125;</div><div class="line">add_action( &apos;widgets_init&apos;, function()&#123;</div><div class="line">     register_widget( &apos;My_Widget&apos; );</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>The <code>add_action()</code> call passes an anonymous function as the second parameter, which is only supported in PHP versions 5.3 and higher. Technically, WordPress only requires PHP version 5.2.4 or higher. The alternative is to use the <code>create_function()</code> function of PHP, which is slower and potentially less secure than using an anonymous function. However, if you plan to release your code to a wide audience, you might want to use the alternative method shown in the following code:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">/*</div><div class="line">  Taken from the Widgets API Codex Page at:</div><div class="line">  http://codex.wordpress.org/Widgets_API</div><div class="line">*/</div><div class="line">add_action(&apos;widgets_init&apos;,</div><div class="line">     create_function(&apos;&apos;, &apos;return register_widget(&quot;My_Widget&quot;);&apos;)</div><div class="line">);</div></pre></td></tr></table></figure>
<p>This widget will show either a globally defined note set in the widget settings or a note specific to the current BuddyPress group set by the group admins.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"><span class="comment">/*</span></div><div class="line">  Widget to show the current class note.</div><div class="line">  Teachers (Group Admins) can change note for each group.</div><div class="line">  Shows the global note set in the widget settings if non-empty.</div><div class="line">*/</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SchoolPress_Note_Widget</span> <span class="keyword">extends</span> <span class="title">WP_Widget</span></span></div><div class="line">&#123;</div><div class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">parent</span>::__construct(</div><div class="line">    <span class="string">'schoolpress_note'</span>,</div><div class="line">        <span class="string">'SchoolPress Note'</span>,</div><div class="line">        <span class="keyword">array</span>( <span class="string">'description'</span> =&gt; <span class="string">'Note to Show on Group Pages'</span> );</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">widget</span><span class="params">( $args, $instance )</span> </span>&#123;</div><div class="line">        <span class="keyword">global</span> $current_user;</div><div class="line"></div><div class="line">        <span class="comment">//saving a note edit?</span></div><div class="line">        <span class="keyword">if</span> ( !<span class="keyword">empty</span>( $_POST[<span class="string">'schoolpress_note_text'</span>] )</div><div class="line">                &amp;&amp; !<span class="keyword">empty</span>( $_POST[<span class="string">'class_id'</span>] ) ) &#123;</div><div class="line">          <span class="comment">//make sure this is an admin</span></div><div class="line">          <span class="keyword">if</span>(groups_is_user_admin($current_user-&gt;ID,intval($_POST[<span class="string">'class_id'</span>])))&#123;</div><div class="line">                <span class="comment">//should escape the text and possibly use a nonce</span></div><div class="line">                update_option(</div><div class="line">                        <span class="string">'schoolpress_note_'</span> . intval( $_POST[<span class="string">'class_id'</span>] ),</div><div class="line">                        $_POST[<span class="string">'schoolpress_note_text'</span>]</div><div class="line">                );</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">//look for a global note</span></div><div class="line">        $note = $instance[<span class="string">'note'</span>];</div><div class="line"></div><div class="line">        <span class="comment">//get class id for this group</span></div><div class="line">        $class_id = bp_get_current_group_id();</div><div class="line"></div><div class="line">        <span class="comment">//look for a class note</span></div><div class="line">        <span class="keyword">if</span> ( <span class="keyword">empty</span>( $note ) &amp;&amp; !<span class="keyword">empty</span>( $class_id ) ) &#123;</div><div class="line">                $note = get_option( <span class="string">"schoolpress_note_"</span> . $class_id );</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">//display note</span></div><div class="line">        <span class="keyword">if</span> ( !<span class="keyword">empty</span>( $note ) ) &#123;</div><div class="line">                <span class="meta">?&gt;</span></div><div class="line">                &lt;div id=<span class="string">"schoolpress_note"</span>&gt;</div><div class="line">                        <span class="meta">&lt;?php</span> <span class="keyword">echo</span> wpautop( $note );<span class="meta">?&gt;</span></div><div class="line">                &lt;/div&gt;</div><div class="line">                <span class="meta">&lt;?php</span></div><div class="line"></div><div class="line">                <span class="comment">//show edit for group admins</span></div><div class="line">                <span class="keyword">if</span> ( groups_is_user_admin( $current_user-&gt;ID, $class_id ) ) &#123;</div><div class="line">                <span class="meta">?&gt;</span></div><div class="line">                &lt;a id=<span class="string">"schoolpress_note_edit_trigger"</span>&gt;Edit&lt;/a&gt;</div><div class="line">                &lt;div id=<span class="string">"schoolpress_note_edit"</span> style=<span class="string">"display: none;"</span>&gt;</div><div class="line">                &lt;form action=<span class="string">""</span> method=<span class="string">"post"</span>&gt;</div><div class="line">                &lt;input type=<span class="string">"hidden"</span></div><div class="line">                        name=<span class="string">"class_id"</span></div><div class="line">                        value=<span class="string">"&lt;?php echo intval($class_id);?&gt;"</span> /&gt;</div><div class="line">                &lt;textarea name=<span class="string">"schoolpress_note_text"</span> cols=<span class="string">"30"</span> rows=<span class="string">"5"</span>&gt;</div><div class="line">                <span class="meta">&lt;?php</span> <span class="keyword">echo</span> esc_textarea(get_option(<span class="string">'schoolpress_note_'</span>.$class_id))</div><div class="line">                ;<span class="meta">?&gt;</span></div><div class="line">                &lt;/textarea&gt;</div><div class="line">                &lt;input type=<span class="string">"submit"</span> value=<span class="string">"Save"</span> /&gt;</div><div class="line">                &lt;a id=<span class="string">"schoolpress_note_edit_cancel"</span> href=<span class="string">"javascript:void(0);"</span>&gt;</div><div class="line">                        Cancel</div><div class="line">                &lt;/a&gt;</div><div class="line">                &lt;/form&gt;</div><div class="line">                &lt;/div&gt;</div><div class="line">                &lt;script&gt;</div><div class="line">                jQuery(document).ready(<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</div><div class="line">                        jQuery(<span class="string">'#schoolpress_note_edit_trigger'</span>).click(<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</div><div class="line">                                jQuery(<span class="string">'#schoolpress_note'</span>).hide();</div><div class="line">                                jQuery(<span class="string">'#schoolpress_note_edit'</span>).show();</div><div class="line">                        &#125;);</div><div class="line">                        jQuery(<span class="string">'#schoolpress_note_edit_cancel'</span>).click(<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</div><div class="line">                                jQuery(<span class="string">'#schoolpress_note'</span>).show();</div><div class="line">                                jQuery(<span class="string">'#schoolpress_note_edit'</span>).hide();</div><div class="line">                        &#125;);</div><div class="line">                &#125;);</div><div class="line">                &lt;/script&gt;</div><div class="line">                <span class="meta">&lt;?php</span></div><div class="line">                &#125;</div><div class="line">        &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">form</span><span class="params">( $instance )</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> ( <span class="keyword">isset</span>( $instance[<span class="string">'note'</span>] ) )</div><div class="line">                $note = $instance[<span class="string">'note'</span>];</div><div class="line">        <span class="keyword">else</span></div><div class="line">                $note = <span class="string">""</span>;</div><div class="line">        <span class="meta">?&gt;</span></div><div class="line">        &lt;p&gt;</div><div class="line">                &lt;label <span class="keyword">for</span>=<span class="string">"&lt;?php echo $this-&gt;get_field_id( 'note' ); ?&gt;"</span>&gt;</div><div class="line">                        <span class="meta">&lt;?php</span> _e( <span class="string">'Note:'</span> ); <span class="meta">?&gt;</span></div><div class="line">                &lt;/label&gt;</div><div class="line">                &lt;textarea id=<span class="string">"&lt;?php echo $this-&gt;get_field_id( 'note' ); ?&gt;"</span></div><div class="line">                        name=<span class="string">"&lt;?php echo $this-&gt;get_field_name( 'note' ); ?&gt;"</span>&gt;</div><div class="line">                        <span class="meta">&lt;?php</span> <span class="keyword">echo</span> esc_textarea( $note );<span class="meta">?&gt;</span></div><div class="line">                &lt;/textarea&gt;</div><div class="line">        &lt;/p&gt;</div><div class="line">        <span class="meta">&lt;?php</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">update</span><span class="params">( $new_instance, $old_instance )</span> </span>&#123;</div><div class="line">        $instance = <span class="keyword">array</span>();</div><div class="line">        $instance[<span class="string">'note'</span>] = $new_instance[<span class="string">'note'</span>];</div><div class="line"></div><div class="line">        <span class="keyword">return</span> $instance;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">add_action( <span class="string">'widgets_init'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</div><div class="line">                register_widget( <span class="string">'SchoolPress_Note_Widget'</span> );</div><div class="line">        &#125; );</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h3 id="Defining-a-Widget-Area"><a href="#Defining-a-Widget-Area" class="headerlink" title="Defining a Widget Area"></a>Defining a Widget Area</h3><p>In order to add widget areas or sidebar to your theme, you need to do two things. First, you need to register the widget area with WordPress. Then you need to add code to your theme at the point where you want your widget area to appear.</p>
<p><code>Registering a widget area is fairly straightforward using the</code>register_sidebar()<code>function, which takes an array of arguments as its only parameter. The available arguments are as follows, taken from the [WordPress Codex page on the</code>register_sidebar()<code>function](http://bit.ly/reg-sidebar):</code></p>
<dl><br>    <dt><br>        name<br>    </dt><br>    <dd><br>        <code>Sidebar name (defaults to _</code>\Sidebar#<code>_, where</code>#<code>is the ID of the sidebar)</code><br>    </dd><br>    <dt><br>        id<br>    </dt><br>    <dd><br>        Sidebar ID—must be all in lowercase, with no spaces (default is a numeric auto-incremented ID)<br>    </dd><br>    <dt><br>        description<br>    </dt><br>    <dd><br>        Text description of what/where the sidebar is. Shown on widget management screen since 2.9 (default: empty)<br>    </dd><br>    <dt><br>        class<br>    </dt><br>    <dd><br>        CSS class name to assign to the widget HTML (default: empty)<br>    </dd><br>    <dt><br>        before_widget<br>    </dt><br>    <dd><br>        <code>HTML to place before every widget (default:</code><li id="%1$s" class="widget %2$s"><code>); uses sprintf for variable substitution</code><br>    </li></dd><br>    <dt><br>        after_widget<br>    </dt><br>    <dd><br>        <code>HTML to place after every widget (default:</code>\n<code>)</code><br>    </dd><br>    <dt><br>        before_title<br>    </dt><br>    <dd><br>        <code>HTML to place before every title (default:</code><h2 class="widgettitle"><code>)</code><br>    </h2></dd><br>    <dt><br>        after_title<br>    </dt><br>    <dd><br>        <code>HTML to place after every title (default:</code>\n<code>)</code><br>    </dd><br></dl>

<p>To register a bare-bones sidebar for the assignment pages of our SchoolPress theme, we would add the following code to our theme’s <em>functions.php</em> or <em>includes/sidebars.php</em> file:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">register_sidebar(array(</div><div class="line">  &apos;name&apos; =&gt; &apos;Assignment Pages Sidebar&apos;,</div><div class="line">  &apos;id&apos; =&gt; &apos;schoolpress_assignment_pages&apos;,</div><div class="line">  &apos;description&apos; =&gt; &apos;Sidebar used on assignment pages.&apos;,</div><div class="line">  &apos;before_widget&apos; =&gt; &apos;&apos;,</div><div class="line">  &apos;after_widget&apos; =&gt; &apos;&apos;,</div><div class="line">  &apos;before_title&apos; =&gt; &apos;&apos;,</div><div class="line">  &apos;after_title&apos; =&gt; &apos;&apos;</div><div class="line">));</div></pre></td></tr></table></figure>
<p>The values for <code>before/after_widget</code> and <code>before/after_title</code> would be set based on how our theme styles widgets and titles. Some expect <code>&lt;li&gt;</code> elements; others use <code>&lt;div&gt;</code> elements. But if all of the styling is handled by our widget’s code, we can just set everything to empty strings.Next we need to actually embed the widget area into our theme. This is done using the <code>dynamic_sidebar()</code> function, which takes the ID of a registered sidebar as its only parameter:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">if(!dynamic_sidebar(&apos;schoolpress_student_status&apos;))</div><div class="line">&#123;</div><div class="line">  //fallback code in case my_widget_area sidebar was not found</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The code will load the <code>schoolpress_student_status</code> sidebar if found. If it is not found, <code>dynamic_sidebar()</code> will return <code>false</code> and the code inside of the curly braces there will be executed instead. This can be used to show default content in a sidebar area if the sidebar area doesn’t have any widgets inside of it or doesn’t exist at all.</p>
<p>Historically, WordPress themes were developed with a sidebar area, and themes would hardcode certain features into them. Widgets were first introduced primarily to replace these static sidebars with dynamic sidebars that could be controlled through the Widgets page of the dashboard. This is why the term <em>sidebar</em> is used to define widget areas, even though widgets are used in places other than just sidebars.</p>
<p>If you need to know whether a sidebar is registered and in use (has widgets) without actually embedding the widgets, you can use the <code>is_active_sidebar()</code> function. Just pass in the ID of the sidebar, and the function will return <code>true</code> if the sidebar is registered or <code>false</code> if it is not. The Twenty Thirteen theme uses this function to check that a sidebar has widgets before rendering the wrapping HTML for the sidebar:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">//from twenty-thirteen/sidebar.php</div><div class="line">if ( is_active_sidebar( 'sidebar-2' ) ) : ?&gt;</div><div class="line">        &lt;div id="tertiary" class="sidebar-container" role="complementary"&gt;</div><div class="line">                &lt;div class="sidebar-inner"&gt;</div><div class="line">                        &lt;div class="widget-area"&gt;</div><div class="line">                                &lt;?php dynamic_sidebar( 'sidebar-2' ); ?&gt;</div><div class="line">                        &lt;/div&gt;&lt;!-- .widget-area --&gt;</div><div class="line">                &lt;/div&gt;&lt;!-- .sidebar-inner --&gt;</div><div class="line">        &lt;/div&gt;&lt;!-- #tertiary --&gt;</div><div class="line">&lt;?php endif; ?&gt;</div></pre></td></tr></table></figure>
<h3 id="Embedding-a-Widget-Outside-of-a-Dynamic-Sidebar"><a href="#Embedding-a-Widget-Outside-of-a-Dynamic-Sidebar" class="headerlink" title="Embedding a Widget Outside of a Dynamic Sidebar"></a>Embedding a Widget Outside of a Dynamic Sidebar</h3><p>The normal process to add widgets to your pages is described in the previous section, where you define a dynamic sidebar and then add your widget to the sidebar through the Widgets page in the admin dashboard.</p>
<p>Alternatively, if you know exactly which widget you want to include somewhere and don’t want the placement of the widget left up to the admins controlling the Widgets settings in the dashboard, you can embed a widget using the <code>the_widget($widget, $instance, $args)</code> function:</p>
<ul>
<li>$widget—The PHP class name for your widget</li>
<li>$instance—An array containing the settings for your widget</li>
<li>$args—An array containing the arguments normally passed to `register_sidebar()</li>
</ul>
<p>Besides hardcoding the placement of the widget, using the <code>the_widget()</code> function also allows you to set the settings of the widget programmatically. In the following code, we embed the StudentPress Note widget directly into a theme page. We set the instance array to include an empty string for the <code>$note</code> value, ensuring that the group note is shown if available:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">//show note widget, overriding global note</div><div class="line">the_widget(&apos;SchoolPress_Note_Widget&apos;,  //classname</div><div class="line">                  array(&apos;note&apos;=&gt;&apos;&apos;),            //instance vars</div><div class="line">                  array(                        //widget vars</div><div class="line">                        &apos;before_widget&apos; =&gt; &apos;&apos;,</div><div class="line">                        &apos;after_widget&apos; =&gt; &apos;&apos;,</div><div class="line">                        &apos;before_title&apos; =&gt; &apos;&apos;,</div><div class="line">                        &apos;after_title&apos; =&gt; &apos;&apos;</div><div class="line">                  )</div><div class="line">);</div></pre></td></tr></table></figure>

        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2017-11-05T08:22:17.000Z" itemprop="dateUpdated">2017-11-05 16:22:17</time>
</span><br>


        
        这里可以写作者留言，标签和 hexo 中所有变量及辅助函数等均可调用，示例：<a href="/WordPress/2015-06-09-wordpress-widgets.html" target="_blank" rel="external">http://blog.inching.org/WordPress/2015-06-09-wordpress-widgets.html</a>
        
    </div>
    <footer>
        <a href="http://blog.inching.org">
            <img src="/img/avatar.png" alt="Cody Fei">
            Cody Fei
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tutorial/">tutorial</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/wordpress/">wordpress</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.inching.org/WordPress/2015-06-09-wordpress-widgets.html&title=《WordPress Widgets》 — Balance&pic=http://blog.inching.org/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.inching.org/WordPress/2015-06-09-wordpress-widgets.html&title=《WordPress Widgets》 — Balance&source=Widgets allow you to place contained pieces of code and content in various wi..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.inching.org/WordPress/2015-06-09-wordpress-widgets.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《WordPress Widgets》 — Balance&url=http://blog.inching.org/WordPress/2015-06-09-wordpress-widgets.html&via=http://blog.inching.org" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.inching.org/WordPress/2015-06-09-wordpress-widgets.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/WordPress/2015-06-11-wordpress-dashboard.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">WordPress Dashboard</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/WordPress/2015-06-08-wordpress-shortcodes.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">WordPress ShortCodes</h4>
      </a>
    </div>
  
</nav>



    











</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢大爷~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.JPG" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.JPG" data-alipay="/img/alipay.JPG">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top" style="display:none">
        

        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>footer.license</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Cody Fei &copy; 2012 - 2017</span>
            <span style="display:none">
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.inching.org/WordPress/2015-06-09-wordpress-widgets.html&title=《WordPress Widgets》 — Balance&pic=http://blog.inching.org/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.inching.org/WordPress/2015-06-09-wordpress-widgets.html&title=《WordPress Widgets》 — Balance&source=Widgets allow you to place contained pieces of code and content in various wi..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.inching.org/WordPress/2015-06-09-wordpress-widgets.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《WordPress Widgets》 — Balance&url=http://blog.inching.org/WordPress/2015-06-09-wordpress-widgets.html&via=http://blog.inching.org" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.inching.org/WordPress/2015-06-09-wordpress-widgets.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACrUlEQVR42u3a0W7jMAwEwP7/T/deezgoWZKimwPGT0XiWBoXMOWlvr7i4/vH8fOT3jmvf5Vf7dqBh4eHN5j6v0cy2Gng1+dXvz19cpozHh4e3javN7lkgOPAwS1O5vPGgoeHh/cBvCo4WaAnM8HDw8P733knWD65/PiFwoCHh4cX8HqXTpbRk+tcKEV4eHh4C7y8i/Q5f6/09/Dw8PDGXfW8GVbdHFBts/UOPDw8vA1e/sDNW1z5FoHJlq/CmXh4eHhXeUkLaj7dSVBb/eSv6+Dh4eE9wutFEtV4N49lq+20qLOHh4eHN+BV20sJ7G7DrBdS4OHh4e3x8lb9hcyj1dAaXQcPDw9vmZdXkuSxPglwb7XH8PDw8DZ4eRAwiWKri+nqkj1KXPDw8PAu8fIotteayhfr1etEKQseHh7eAi//QfJonlw5B+eZAx4eHt4Gr/rYzVv7twrGpHTh4eHhPcNLikEyQC/2nZeZ8hsDHh4e3oB3qxj0FsTV9lt50xUeHh7eVd5kc0BeHpLn9mSpfQwj8PDw8NZ4k6n3ikoyVh5tHMMIPDw8vAXevKGVnBlNKHjo52Ph4eHhbfCSd/b5hKqbBvJx8fDw8J7n5Q2weQnp3ftkrOP18fDw8BZ4SZtqErbm5SG/Hcn5URsMDw8Pb8x7HTTkm7FyTLUA9AIRPDw8vG1eIcMIYPO21vyfgYeHh/ckbyNEqC7fr4UReHh4eJd438WjVwyqgWzSGIuKBx4eHt4Cb/7y32tx5cviuxuz8PDw8G7xevFrvomq1yrLo4c3/zc8PDy8NV7+kl+NfZ9piR1/i4eHh/cBvN6jvNfcqn67nlLj4eHhXeIlzbD8FuQbBaLigYeHh7fGmze9qvHBrbjhzSh4eHh4C7zy6/24nFTjhuoWBDw8PLw13h87iFS5N8Y73gAAAABJRU5ErkJggg==" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="/js/main.min.js?v=1.6.17"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.6.17" async></script>










</body>
</html>
