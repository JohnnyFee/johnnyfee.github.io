<!DOCTYPE html>
<html>
<head>
    
<!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-43567748-2', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<!-- End Google Analytics -->


    

    



    <meta charset="utf-8">
    
    <meta name="google-site-verification" content="true">
    
    
    
    <title>JavaScript 模块规范 | Balance | 大道至简</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="javascript">
    <meta name="description" content="CommonJSCommonJS规范为JavaScript制定了一个美好的愿景——希望JavaScript能够在任何地方运行。CommonJS是服务器端模块的规范，Node.js采用了这个规范。
Web在发展，浏览器中出现了更多的标准API，这些过程发生在前端，后端JavaScript的规范却远远落后。对于JavaScript自身而言，它的规范依然是薄弱的，还有以下缺陷。
规范内容参考： Java">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript 模块规范">
<meta property="og:url" content="http://blog.inching.org/JavaScript/2014-02-15-javascript-module.html">
<meta property="og:site_name" content="Balance">
<meta property="og:description" content="CommonJSCommonJS规范为JavaScript制定了一个美好的愿景——希望JavaScript能够在任何地方运行。CommonJS是服务器端模块的规范，Node.js采用了这个规范。
Web在发展，浏览器中出现了更多的标准API，这些过程发生在前端，后端JavaScript的规范却远远落后。对于JavaScript自身而言，它的规范依然是薄弱的，还有以下缺陷。
规范内容参考： Java">
<meta property="og:image" content="http://johnnyimages.qiniudn.com/2012031920341233.png">
<meta property="og:updated_time" content="2017-11-05T08:22:17.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JavaScript 模块规范">
<meta name="twitter:description" content="CommonJSCommonJS规范为JavaScript制定了一个美好的愿景——希望JavaScript能够在任何地方运行。CommonJS是服务器端模块的规范，Node.js采用了这个规范。
Web在发展，浏览器中出现了更多的标准API，这些过程发生在前端，后端JavaScript的规范却远远落后。对于JavaScript自身而言，它的规范依然是薄弱的，还有以下缺陷。
规范内容参考： Java">
<meta name="twitter:image" content="http://johnnyimages.qiniudn.com/2012031920341233.png">
    
        <link rel="alternate" type="application/atom+xml" title="Balance" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/style/style.css?v=1.6.17">

    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-2846834382442028",
        enable_page_level_ads: true
      });
    </script>

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Cody Fei</h5>
          <a href="mailto:inchingcode@gmail.com" title="inchingcode@gmail.com" class="mail">inchingcode@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                Home
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags/android"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories/Android/"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/inchingorg" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://www.weibo.com/CodyFee" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://www.inesoi.com" target="_blank" >
                <i class="icon icon-lg icon-shopping-bag"></i>
                Shopping Bag
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">JavaScript 模块规范</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">JavaScript 模块规范</h1>
        <h5 class="subtitle">
            
                <time datetime="2014-02-14T16:00:00.000Z" itemprop="datePublished" class="page-time">
  2014-02-15
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/JavaScript/">JavaScript</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#CommonJS"><span class="post-toc-text">CommonJS</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#文档"><span class="post-toc-text">文档</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#CommonJS-Modules"><span class="post-toc-text">CommonJS Modules</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#规范内容"><span class="post-toc-text">规范内容</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#定义模块"><span class="post-toc-text">定义模块</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#加载模块"><span class="post-toc-text">加载模块</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#参考"><span class="post-toc-text">参考</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Modules-Transport"><span class="post-toc-text">Modules/Transport</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#参考-1"><span class="post-toc-text">参考</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Modules-Wrappings"><span class="post-toc-text">Modules/Wrappings</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#规范内容-1"><span class="post-toc-text">规范内容</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#定义模块-1"><span class="post-toc-text">定义模块</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#和AMD的区别"><span class="post-toc-text">和AMD的区别</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#参考-2"><span class="post-toc-text">参考</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#AMD"><span class="post-toc-text">AMD</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#规范内容-2"><span class="post-toc-text">规范内容</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#定义模块-2"><span class="post-toc-text">定义模块</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#加载模块-1"><span class="post-toc-text">加载模块</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#文档-1"><span class="post-toc-text">文档</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#工具"><span class="post-toc-text">工具</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#实现"><span class="post-toc-text">实现</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#chenmnkken-seed"><span class="post-toc-text">chenmnkken / seed</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#RequireJS"><span class="post-toc-text">RequireJS</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#其他实现"><span class="post-toc-text">其他实现</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#参考-3"><span class="post-toc-text">参考</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#CMD"><span class="post-toc-text">CMD</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#定义模块-3"><span class="post-toc-text">定义模块</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#与AMD的区别"><span class="post-toc-text">与AMD的区别</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#seajs"><span class="post-toc-text">seajs</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#与-RequireJS-的异同"><span class="post-toc-text">与 RequireJS 的异同</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#UMD"><span class="post-toc-text">UMD</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#实现-1"><span class="post-toc-text">实现</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#参考-4"><span class="post-toc-text">参考</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ES-Harmony-Modules"><span class="post-toc-text">ES Harmony/Modules</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#定义模块-4"><span class="post-toc-text">定义模块</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#加载模块-2"><span class="post-toc-text">加载模块</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#参考-5"><span class="post-toc-text">参考</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#工具-1"><span class="post-toc-text">工具</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#参考链接"><span class="post-toc-text">参考链接</span></a></li></ol>
        </nav>
    </aside>
    
<article id="post-javascript-module"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">JavaScript 模块规范</h1>
        <div class="post-meta">
            <time class="post-time" title="2014-02-15 00:00:00" datetime="2014-02-14T16:00:00.000Z"  itemprop="datePublished">2014-02-15</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/JavaScript/">JavaScript</a></li></ul>



            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h2 id="CommonJS"><a href="#CommonJS" class="headerlink" title="CommonJS"></a>CommonJS</h2><p>CommonJS规范为JavaScript制定了一个美好的愿景——希望JavaScript能够在任何地方运行。CommonJS是服务器端模块的规范，Node.js采用了这个规范。</p>
<p>Web在发展，浏览器中出现了更多的标准API，这些过程发生在前端，后端JavaScript的规范却远远落后。对于JavaScript自身而言，它的规范依然是薄弱的，还有以下缺陷。</p>
<p>规范内容参考： <a href="http://www.feeldesignstudio.com/2013/09/javascript-module-pattern-commonjs" target="_blank" rel="external">JavaScript模块化开发（二）——CommonJS规范</a></p>
<a id="more"></a>
<ul>
<li>没有模块系统。</li>
<li>标准库较少。ECMAScript仅定义了部分核心库，对于文件系统，I/O流等常见需求却没有标准的API。就HTML5的发展状况而言，W3C标准化在一定意义上是在推进这个过程，但是它仅限于浏览器端。</li>
<li>没有标准接口。在JavaScript中，几乎没有定义过如Web服务器或者数据库之类的标准统一接口。</li>
<li>缺乏包管理系统。这导致JavaScript应用中基本没有自动加载和安装依赖的能力。</li>
</ul>
<p>CommonJS规范的提出，主要是为了弥补当前JavaScript没有标准的缺陷，以达到像Python、Ruby和Java具备开发大型应用的基础能力，而不是停留在小脚本程序的阶段。他们期望那些用CommonJS API写出的应用可以具备跨宿主环境执行的能力，这样不仅可以利用JavaScript开发富客户端应用，而且还可以编写以下应用。</p>
<ul>
<li>服务器端JavaScript应用程序。</li>
<li>命令行工具。</li>
<li>桌面图形界面应用程序。</li>
<li>混合应用（Titanium和Adobe AIR等形式的应用）。</li>
</ul>
<p>CommonJS 规范包括了模块（modules）、包（packages）、系统（system）、二进制（binary）、控制台（console）、编码（encodings）、文件系统（filesystems）、套接字（sockets）、单元测试（unit testing）等部分。目前大部分标准都在拟定和讨论之中，已经发布的标准有 Modules/1.0、Modules/1.1、Modules/1.1.1、Packages/1.0、System/1.0。</p>
<p><strong>参考：</strong></p>
<ul>
<li><a href="http://book.douban.com/reading/29343570/" target="_blank" rel="external">《深入浅出Node.js》试读：2.1　CommonJS规范</a>。</li>
<li><a href="http://www.ituring.com.cn/article/5793" target="_blank" rel="external">图灵社区 : 图书 : 1.6　CommonJS</a></li>
</ul>
<h3 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h3><ul>
<li><a href="http://www.commonjs.org/" target="_blank" rel="external">CommonJS: JavaScript Standard Library</a></li>
<li><a href="http://www.commonjs.org/specs/" target="_blank" rel="external">CommonJS: CommonJS API</a></li>
<li><a href="http://wiki.commonjs.org/wiki/CommonJS" target="_blank" rel="external">CommonJS Spec Wiki</a></li>
<li><a href="http://wiki.commonjs.org/wiki/Implementations" target="_blank" rel="external">Implementations - CommonJS Spec Wiki</a></li>
</ul>
<h2 id="CommonJS-Modules"><a href="#CommonJS-Modules" class="headerlink" title="CommonJS Modules"></a><a href="http://wiki.commonjs.org/wiki/Modules" target="_blank" rel="external">CommonJS Modules</a></h2><p>提供CommonJS的模块加载规范。目前有三个版本，其中1.1.1还在制定中。</p>
<ul>
<li><a href="http://wiki.commonjs.org/wiki/Modules/1.0" title="Modules/1.0" target="_blank" rel="external">1.0</a></li>
<li><a href="/wiki/Modules/1.1" title="Modules/1.1">1.1</a> (<a href="/wiki/Modules/1.0" title="Modules/1.0">1.0</a> + <a href="/wiki/Modules/Meta" title="Modules/Meta">Module Meta-object Amendment</a>).</li>
<li><a href="/wiki/Modules/1.1.1" title="Modules/1.1.1">1.1.1</a> relaxes details for “main” and enumerability requirements.</li>
</ul>
<p>Modules/1.1较1.0仅增加了标示符module，require函数增加了main和paths属性。而仔细比对1.1与1.1.1后发现除了格式调整了下几乎没有变化。</p>
<p>Nodejs实现了其中的1.0版本，参考<a href="http://wiki.commonjs.org/wiki/Implementations/node.js" target="_blank" rel="external">Implementations/node.js - CommonJS Spec Wiki</a>。</p>
<h3 id="规范内容"><a href="#规范内容" class="headerlink" title="规范内容"></a>规范内容</h3><p>CommonJS module基本要求如下</p>
<p>1.require仅有一个参数为字符串，该字符串须遵守<a href="http://wiki.commonjs.org/wiki/Modules/1.0#Module_Identifiers" target="_blank" rel="external">Module Identifiers</a>的6点规定</p>
<ol>
<li>require方法返回指定的模块API</li>
<li>如果存在依赖的其它模块，那么依次加载</li>
<li>require不能返回，则抛异常</li>
<li>仅能使用标示符exports导出API</li>
</ol>
<h3 id="定义模块"><a href="#定义模块" class="headerlink" title="定义模块"></a>定义模块</h3><p><strong>根据CommonJS规范，一个单独的文件就是一个模块。</strong>加载模块使用require方法，该方法读取一个文件并执行，最后返回文件内部的exports对象。下面就是一个简单的模块文件example.js。</p>
<pre><code>console.log(&quot;evaluating example.js&quot;);

var invisible = function () {
  console.log(&quot;invisible&quot;);
}

exports.message = &quot;hi&quot;;

exports.say = function () {
  console.log(message);
}
</code></pre><p>再看一个复杂一点的例子。</p>
<pre><code>// foobar.js
function foobar(){
        this.foo = function(){
                console.log(&apos;Hello foo&apos;);
        }

        this.bar = function(){
                console.log(&apos;Hello bar&apos;);
        }
}

exports.foobar = foobar;
</code></pre><h3 id="加载模块"><a href="#加载模块" class="headerlink" title="加载模块"></a>加载模块</h3><p>不论是核心模块还是文件模块，require()方法对相同模块的二次加载都一律采用缓存优先的方式，这是第一优先级的。不同之处在于核心模块的缓存检查先于文件模块的缓存检查。</p>
<p>调用该模块的方法如下：</p>
<pre><code>var foobar = require(&apos;./foobar&apos;).foobar,
    test   = new foobar();

test.bar(); // &apos;Hello bar&apos;
</code></pre><p>js文件名前面需要加上路径，可以是相对路径（相对于使用require方法的文件），也可以是绝对路径。如果省略路径，node.js会认为，你要加载一个核心模块，或者已经安装在本地 node_modules 目录中的模块。如果加载的是一个目录，node.js会首先寻找该目录中的 package.json 文件，加载该文件 main 属性提到的模块，否则就寻找该目录下的 index.js 文件。</p>
<p>有时，不需要exports返回一个对象，只需要它返回一个函数。这时，就要写成module.exports。</p>
<pre><code>module.exports = function () {
  console.log(&quot;hello world&quot;)
}
</code></pre><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="http://www.infoq.com/cn/articles/nodejs-module-mechanism" target="_blank" rel="external">深入浅出Node.js（三）：深入Node.js的模块机制</a></li>
<li><a href="http://www.cnblogs.com/snandy/archive/2012/03/08/2378441.html" target="_blank" rel="external">JavaScript中模块“写法” - snandy - 博客园</a></li>
</ul>
<h2 id="Modules-Transport"><a href="#Modules-Transport" class="headerlink" title="Modules/Transport"></a><a href="http://wiki.commonjs.org/wiki/Modules/Transport" target="_blank" rel="external">Modules/Transport</a></h2><p>提供模块从服务器到浏览器的多种传中方式。参考<a href="">Modules/Transport - CommonJS Spec Wiki</a>  A variety of ways to transport a module from a server to a browser。</p>
<p>Modules/1.1.1 规范里，只定义了模块的基本特性，并没有定义模块的存在形态。为了让模块能在不同的环境下都适用，CommonJS 需要定义 Module/Transport 规范，同时支持同步和异步。</p>
<h3 id="参考-1"><a href="#参考-1" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="http://www.zhihu.com/question/20789867" target="_blank" rel="external">CommonJS 的 Modules/Transport 和 Modules/Wrappings 规范有什么区别？</a></li>
</ul>
<h2 id="Modules-Wrappings"><a href="#Modules-Wrappings" class="headerlink" title="Modules/Wrappings"></a><a href="http://wiki.commonjs.org/wiki/Modules/Wrappings" target="_blank" rel="external">Modules/Wrappings</a></h2><p>Modules/Wrappings是CommonJS提出的另外一个基于浏览器模块加载器。CMD其实就是基于这个规范发展而来的，因为SeaJS实现了Modules/Wrappings，参考<a href="http://wiki.commonjs.org/wiki/Implementations/SeaJS" target="_blank" rel="external">Implementations/SeaJS - CommonJS Spec Wiki</a>。</p>
<p>简单说，Modules/Wrappings是出于对Node.js模块格式的偏好而包装下使其在浏览器中得以实现，并通过某些工具（如<a href="https://github.com/jrburke/r.js" target="_blank" rel="external">r.js</a>）也能运行在Node.js中。</p>
<p>如果想要实现前后端统一的模块加载方式，面临以下问题：</p>
<ol>
<li>服务器端JS模块文件就在本地，浏览器端则需要通过网络请求。</li>
<li>服务器端可以很容易的实现同步或异步请求模块，浏览器端则问题多多。</li>
</ol>
<p>如下：</p>
<pre><code>var event = require(&quot;event&quot;);
event.bind(el, &apos;click&apos;, function() {
    // todo
});
</code></pre><p>这段代码中require如果是异步执行的，则event.bind的执行有可能会出错。</p>
<p>虽然可以使用 XHR 实现同步载入模块JS文件。但XHR的缺点也是明显的，它不能跨域，这点让人很难接受，因为有些场景需要模块部署在不同的服务器。</p>
<p><a href="http://wiki.commonjs.org/wiki/Modules/Wrappings" target="_blank" rel="external">Modules/Wrappings</a>的诞生就是为了解决这个问题。</p>
<p><a href="http://wiki.commonjs.org/wiki/Modules/Wrappings" target="_blank" rel="external">Modules/Wrappings</a>的出现使得浏览器中实现它变得可能，包裹的函数作为回调。即使用script tag作为模块加载器，script完全下载后去回调，回调中进行模块定义。</p>
<h3 id="规范内容-1"><a href="#规范内容-1" class="headerlink" title="规范内容"></a>规范内容</h3><p>该规范约定如下：</p>
<ol>
<li>定义模块用module变量，它有一个方法declare</li>
<li>declare接受一个函数类型的参数，如称为factory</li>
<li>factory有三个参数分别为require、exports、module</li>
<li>factory使用返回值和exports导出API</li>
<li>factory如果是对象类型，则将该对象作为模块输出</li>
</ol>
<h3 id="定义模块-1"><a href="#定义模块-1" class="headerlink" title="定义模块"></a>定义模块</h3><pre><code>// 一个基本的模块定义
module.declare(function(require, exports, module)
{
    exports.foo = &quot;bar&quot;; 
});

// 直接使用对象作为模块
module.declare(
{
    foo: &quot;bar&quot;
});
</code></pre><h3 id="和AMD的区别"><a href="#和AMD的区别" class="headerlink" title="和AMD的区别"></a>和AMD的区别</h3><ul>
<li>使用module.declare来申明模块。</li>
<li>Wrappings 和 AMD 最大的不同，在于 Wrappings 方案里，factory 的参数更简单，和 dependencies 无对应关系。</li>
</ul>
<p>也就是说，可以如下写代码：</p>
<pre><code>module.declare([&apos;a&apos;], function(require, exports) {
  var add = require(&apos;a&apos;).add;
  exports.increment = function(n) {
    return add(n, 1);
  };
});
</code></pre><p>这个看似非常小的差异，可以让下面的代码合理存在并达到预期目的：</p>
<pre><code>module.declare(function(require, exports) {
  ...
  var a;
  if(someCondition) {
    a = require(&apos;a1&apos;);
  } else {
    a = require(&apos;a2&apos;);
  }
  ...
});
</code></pre><h3 id="参考-2"><a href="#参考-2" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="http://www.cnblogs.com/snandy/archive/2012/03/09/2386092.html" target="_blank" rel="external">Node.js模块风格在浏览器中的尝试 - snandy - 博客园</a></li>
</ul>
<h2 id="AMD"><a href="#AMD" class="headerlink" title="AMD"></a><a href="https://github.com/amdjs/amdjs-api/wiki/AMD" target="_blank" rel="external">AMD</a></h2><p>AMD是专门为浏览器中JavaScript环境设计的规范。它吸取了CommonJS的一些优点，但又不照搬它的格式。开始AMD作为CommonJS的 <a href="http://wiki.commonjs.org/wiki/Modules/Transport/C" target="_blank" rel="external">Modules/Transport/C</a> 存在，因无法与CommonJS开发者达成一致而独立出来。它有自己的<a href="http://wiki.commonjs.org/wiki/Modules/AsynchronousDefinition" target="_blank" rel="external">wiki</a> 和<a href="https://groups.google.com/group/amd-implement" target="_blank" rel="external">讨论组</a> 。</p>
<p>CommonJS规范加载模块是同步的，也就是说，只有加载完成，才能执行后面的操作。AMD规范则是非同步加载模块，允许指定回调函数。由于Node.js主要用于服务器编程，模块文件一般都已经存在于本地硬盘，所以加载起来比较快，不用考虑非同步加载的方式，所以<strong>CommonJS规范比较适用于Node.js</strong>。但是，如果是浏览器环境，要从服务器端加载模块，这时就必须采用非同步模式，因此<strong>浏览器端一般采用AMD规范</strong>。</p>
<h3 id="规范内容-2"><a href="#规范内容-2" class="headerlink" title="规范内容"></a>规范内容</h3><p>参考：<br><a href="http://www.feeldesignstudio.com/2013/09/javascript-module-pattern-amd" target="_blank" rel="external">JavaScript模块化开发（三）——AMD规范 | Feeldesign Studio</a></p>
<p>MD设计出一个简洁的写模块API：</p>
<pre><code>define(id?, dependencies?, factory);
</code></pre><p>其中：</p>
<ul>
<li>id: 模块标识，可以省略。</li>
<li>dependencies: 所依赖的模块，可以省略。</li>
<li>factory: 模块的实现，或者一个JavaScript对象。</li>
</ul>
<p>id遵循CommonJS <a href="http://wiki.commonjs.org/wiki/Modules/1.1.1#Module_Identifiers" target="_blank" rel="external">Module Identifiers</a> 。dependencies元素的顺序和factory参数一一对应。</p>
<h3 id="定义模块-2"><a href="#定义模块-2" class="headerlink" title="定义模块"></a>定义模块</h3><pre><code>// 1. 定义无依赖的模块
define(function() {
    return {
        mix: function(source, target) {
        }
    };
});

// 2. 定义有依赖的模块
define([&apos;base&apos;], function(base) {
    return {
        show: function() {
            // todo with module base
        }
    }
});

// 3. 定义数据对象模块
define({
    users: [],
    members: []
});

// 4. 具名模块
define(&apos;index&apos;, [&apos;data&apos;,&apos;base&apos;], function(data, base) {
 // todo
});

// 5. 前面提到dependencies元素的顺序和factory一一对应，其实不太严谨。AMD开始为摆脱CommonJS的束缚，开创性的提出了自己的模块风格。但后来又做了妥协，兼容了 CommonJS [Modules/Wrappings](http://wiki.commonjs.org/wiki/Modules/Wrappings) 。即又可以这样写
// 不考虑多了一层函数外，格式和Node.js是一样的。使用require获取依赖模块，使用exports导出API。
define(function(require, exports, module) {
    var base = require(&apos;base&apos;);
    exports.show = function() {
        // todo with module base
    } 
});
</code></pre><p>除了define外，AMD还保留一个关键字require。require 作为规范保留的全局标识符，可以实现为 module loader。也可以不实现。</p>
<h3 id="加载模块-1"><a href="#加载模块-1" class="headerlink" title="加载模块"></a>加载模块</h3><pre><code>require([&apos;foo&apos;, &apos;bar&apos;], function ( foo, bar ) {
        // 这里写其余的代码
        foo.doSomething();
});

// 动态加载的依赖项
define(function ( require ) {
    var isReady = false, foobar;

    // 请注意在模块定义内部内联的 require 语句
    require([&apos;foo&apos;, &apos;bar&apos;], function (foo, bar) {
        isReady = true;
        foobar = foo() + bar();
    });

    // 我们仍可以返回一个模块
    return {
        isReady: isReady,
        foobar: foobar
    };
});
</code></pre><h3 id="文档-1"><a href="#文档-1" class="headerlink" title="文档"></a>文档</h3><ul>
<li><a href="http://wiki.commonjs.org/wiki/Modules/AsynchronousDefinition" target="_blank" rel="external">Modules/AsynchronousDefinition - CommonJS Spec Wiki</a></li>
</ul>
<h3 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h3><ul>
<li><a href="https://github.com/afc163/cmdize" target="_blank" rel="external">afc163/cmdize</a> Convert normal js to CMD module.</li>
</ul>
<h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><h4 id="chenmnkken-seed"><a href="#chenmnkken-seed" class="headerlink" title="chenmnkken / seed"></a><a href="http://stylechen.com/" target="_blank" rel="external">chenmnkken / seed</a></h4><h4 id="RequireJS"><a href="#RequireJS" class="headerlink" title="RequireJS"></a><a href="http://requirejs.org/" target="_blank" rel="external">RequireJS</a></h4><p>RequireJS是一个工具库，主要用于客户端的模块管理。它可以让客户端的代码分成一个个模块，实现异步或动态加载，从而提高代码的性能和可维护性。它的模块管理遵守<a href="https://github.com/amdjs/amdjs-api/wiki/AMD" target="_blank" rel="external">AMD规范</a>（Asynchronous Module Definition）。</p>
<p>RequireJS的基本思想是，通过define方法，将代码定义为模块；通过require方法，实现代码的模块加载。</p>
<p>使用方法参考 <a href="http://javascript.ruanyifeng.com/tool/requirejs.html" target="_blank" rel="external">RequireJS和AMD规范 – JavaScript 标准参考教程（alpha）</a>。</p>
<p><strong>缺点：</strong></p>
<ul>
<li>文件太大，用 google closure compiler 压缩后，12.2k. 这是在页头必须引入的脚本，还是希望越小越好。</li>
<li>功能太多。这本是优点，比如能够在各种环境下跑。但对于真实的 web 应用来说，还是希望用情专一，尽量无无用代码。</li>
<li>给 require 方法赋予了双重含义。一重含义是 CommonJS/Modules/1.1.1 规范里定义的 require, 另一重是 RequireJS 里用来加载模块和调用回调。这导致 require 的 dependencies 参数的格式，和 define 中的 dependencies 参数的格式不一致。我刚用的时候，没意识到这一点，经常很迷惑。</li>
<li>目前不支持 availability 模式。</li>
</ul>
<p>参考 ：<a href="http://blogread.cn/it/article/2957" target="_blank" rel="external">CommonJS 的模块系统，AMD 和 Wrappings, 以及 RequireJS</a></p>
<h3 id="其他实现"><a href="#其他实现" class="headerlink" title="其他实现"></a>其他实现</h3><ul>
<li><a href="https://github.com/cujojs/curl" target="_blank" rel="external">cujojs/curl</a></li>
</ul>
<h3 id="参考-3"><a href="#参考-3" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="https://github.com/jrburke/r.js" target="_blank" rel="external">jrburke/r.js</a></li>
<li><a href="https://groups.google.com/forum/#!topic/commonjs/lqCWO8tMp48" target="_blank" rel="external">Split off AMD? (was Re: [CommonJS] New amd-implement list)</a></li>
<li><a href="http://justineo.github.io/singles/writing-modular-js/" target="_blank" rel="external">使用 AMD、CommonJS 及 ES Harmony 编写模块化的 JavaScript</a></li>
<li><a href="http://www.cnblogs.com/snandy/archive/2012/03/12/2390782.html" target="_blank" rel="external">AMD：浏览器中的模块规范 - snandy - 博客园</a></li>
</ul>
<h2 id="CMD"><a href="#CMD" class="headerlink" title="CMD"></a><a href="https://github.com/cmdjs/specification/blob/master/draft/module.md" target="_blank" rel="external">CMD</a></h2><p>CMD规范由国内的<a href="http://lifesinger.github.com/" target="_blank" rel="external">玉伯</a>提出。</p>
<p>AMD 是 RequireJS 在推广过程中对模块定义的规范化产出。CMD 是 SeaJS 在推广过程中对模块定义的规范化产出。类似的还有 CommonJS Modules/2.0 规范，是 BravoJS 在推广过程中对模块定义的规范化产出。这些规范的目的都是为了 JavaScript 的模块化开发，特别是在浏览器端的。目前这些规范的实现都能达成浏览器端模块化开发的目的。</p>
<h3 id="定义模块-3"><a href="#定义模块-3" class="headerlink" title="定义模块"></a>定义模块</h3><ul>
<li><a href="https://github.com/seajs/seajs/issues/242" target="_blank" rel="external">CMD 模块定义规范 · Issue #242 · seajs/seajs</a></li>
</ul>
<h3 id="与AMD的区别"><a href="#与AMD的区别" class="headerlink" title="与AMD的区别"></a>与AMD的区别</h3><ol>
<li><p>对于依赖的模块，AMD 是提前执行，CMD 是延迟执行。不过 RequireJS 从 2.0 开始，也改成可以延迟执行（根据写法不同，处理方式不同）。CMD 推崇 as lazy as possible.</p>
</li>
<li><p>CMD 推崇依赖就近，AMD 推崇依赖前置。看下面的代码说明。虽然 AMD 也支持 CMD 的写法，同时还支持将 require 作为依赖项传递，但 RequireJS 的作者默认是最喜欢上面的写法，也是官方文档里默认的模块定义写法。CMD 推崇依赖就近需要遍历所有的require关键字，找出后面的依赖。具体做法是将function toString后，用正则匹配出require关键字后面的依赖。显然，这是一种牺牲性能来换取更多开发便利的方法。</p>
</li>
<li><p>AMD 的 API 默认是一个当多个用，CMD 的 API 严格区分，推崇职责单一。比如 AMD 里，require 分全局 require 和局部 require，都叫 require。CMD 里，没有全局 require，而是根据模块系统的完备性，提供 seajs.use 来实现模块系统的加载启动。CMD 里，每个 API 都简单纯粹。</p>
</li>
</ol>
<p>代码说明：</p>
<pre><code>// CMD
define(function(require, exports, module) {
    var a = require(&apos;./a&apos;)
    a.doSomething()
    // 此处略去 100 行
    var b = require(&apos;./b&apos;) // 依赖可以就近书写
    b.doSomething()
    // ... 
})

// AMD 默认推荐的是
define([&apos;./a&apos;, &apos;./b&apos;], function(a, b) { // 依赖必须一开始就写好
    a.doSomething()
    // 此处略去 100 行
    b.doSomething()
    ...
}) 
</code></pre><p>参考：</p>
<ul>
<li><a href="http://www.zhihu.com/question/20351507" target="_blank" rel="external">AMD 和 CMD 的区别有哪些？</a></li>
<li><a href="https://github.com/seajs/seajs/issues/277" target="_blank" rel="external">与 RequireJS 的异同 · Issue #277 · seajs/seajs</a></li>
<li><a href="http://www.douban.com/note/283566440/" target="_blank" rel="external">Sea.js 与 RequireJS 最大的区别</a></li>
<li><a href="http://blog.youyo.name/archives/commonjs-amd-cmd-my-opinion.html" target="_blank" rel="external">commonJS\AMD\CMD和我的看法</a></li>
<li><a href="http://lifesinger.wordpress.com/2011/05/17/the-difference-between-seajs-and-requirejs/" target="_blank" rel="external">SeaJS 和 RequireJS 的异同 | 岁月如歌</a></li>
</ul>
<h3 id="seajs"><a href="#seajs" class="headerlink" title="seajs"></a><a href="https://github.com/seajs" target="_blank" rel="external">seajs</a></h3><p>SeaJS 同时实现了<a href="http://wiki.commonjs.org/wiki/Modules/1.1.1" title="Modules/1.1.1" target="_blank" rel="external">Modules/1.1.1</a>和<br><a href="/wiki/Modules/Wrappings" title="Modules/Wrappings">Modules/Wrappings</a><br>。参考<a href="http://wiki.commonjs.org/wiki/Implementations/SeaJS" target="_blank" rel="external">Implementations/SeaJS - CommonJS Spec Wiki</a>。</p>
<p>但没有完全最从这两种规范：</p>
<p>1，SeaJS未实现全部的 Modules 1.1.1。如require函数的main，paths属性在SeaJS中没有。但SeaJS给require添加了async、resolve、load、constructor。</p>
<p>2，SeaJS没有使用 Modules/Wrappings 中的module.declare定义模块，而是使用define函数（看起来象<a href="http://wiki.commonjs.org/wiki/Modules/AsynchronousDefinition" target="_blank" rel="external">AMD</a>中的define，实则不然）。</p>
<p>可能是因为这个原因，才为Sea.js重新指定了一个规范CMD。参考<a href="http://www.cnblogs.com/snandy/archive/2012/03/09/2386092.html" target="_blank" rel="external">Node.js模块风格在浏览器中的尝试 - snandy - 博客园</a>。</p>
<h3 id="与-RequireJS-的异同"><a href="#与-RequireJS-的异同" class="headerlink" title="与 RequireJS 的异同"></a>与 RequireJS 的异同</h3><p><strong>相同之处：</strong></p>
<p>RequireJS 和 Sea.js 都是模块加载器，倡导模块化开发理念，核心价值是让 JavaScript 的模块化开发变得简单自然。</p>
<p><strong>不同之处：</strong></p>
<p>两者的主要区别如下：</p>
<ol>
<li><strong>定位有差异</strong>。RequireJS 想成为浏览器端的模块加载器，同时也想成为 Rhino / Node 等环境的模块加载器。Sea.js 则专注于 Web 浏览器端，同时通过 Node 扩展的方式可以很方便跑在 Node 环境中。</li>
<li><strong>遵循的规范不同</strong>。RequireJS 遵循 AMD（异步模块定义）规范，Sea.js 遵循 CMD （通用模块定义）规范。规范的不同，导致了两者 API 不同。Sea.js 更贴近 CommonJS Modules/1.1 和 Node Modules 规范。</li>
<li><strong>推广理念有差异</strong>。RequireJS 在尝试让第三方类库修改自身来支持 RequireJS，目前只有少数社区采纳。Sea.js 不强推，采用自主封装的方式来“海纳百川”，目前已有较成熟的封装策略。</li>
<li><strong>对开发调试的支持有差异</strong>。Sea.js 非常关注代码的开发调试，有 nocache、debug 等用于调试的插件。RequireJS 无这方面的明显支持。</li>
<li><strong>插件机制不同</strong>。RequireJS 采取的是在源码中预留接口的形式，插件类型比较单一。Sea.js 采取的是通用事件机制，插件类型更丰富。</li>
</ol>
<p>还有不少差异，涉及具体使用方式和源码实现，欢迎有兴趣者研究并发表看法。</p>
<p>总之，如果说 RequireJS 是 Prototype 类库的话，则 Sea.js 致力于成为 jQuery 类库。</p>
<p><strong>教程：</strong></p>
<ul>
<li>教程 <a href="https://github.com/seajs/seajs/issues/916" target="_blank" rel="external">https://github.com/seajs/seajs/issues/916</a></li>
<li>github <a href="https://github.com/seajs/seajs" target="_blank" rel="external">https://github.com/seajs/seajs</a></li>
<li>官网 <a href="http://seajs.org" target="_blank" rel="external">http://seajs.org</a></li>
<li>社区 <a href="https://spmjs.org/" target="_blank" rel="external">https://spmjs.org/</a></li>
<li>github document <a href="https://github.com/seajs/seajs/issues?labels=documentation&amp;page=1&amp;state=closed" target="_blank" rel="external">https://github.com/seajs/seajs/issues?labels=documentation&amp;page=1&amp;state=closed</a></li>
<li>教程 <a href="https://github.com/island205/HelloSea.js/blob/master/01-contents.md" target="_blank" rel="external">https://github.com/island205/HelloSea.js/blob/master/01-contents.md</a></li>
</ul>
<h2 id="UMD"><a href="#UMD" class="headerlink" title="UMD"></a><a href="https://github.com/umdjs/umd" target="_blank" rel="external">UMD</a></h2><p>AMD以浏览器为第一（browser-first）的原则发展，选择异步加载模块。它的模块支持对象（objects）、函数（functions）、构造器（constructors）、字符串（strings）、JSON等各种类型的模块。因此在浏览器中它非常灵活。</p>
<p>CommonJS module以服务器端为第一（server-first）的原则发展，选择同步加载模块。它的模块是无需包装的（unwrapped modules）且贴近于ES.next/Harmony的模块格式。但它仅支持对象类型（objects）模块。</p>
<p>这迫使一些人又想出另一个更通用格式 <a href="https://github.com/umdjs/umd" target="_blank" rel="external">UMD</a>(Universal Module Definition)。希望提供一个前后端跨平台的解决方案。</p>
<p>UMD 定义那些既能在客户端又能在服务器端工作的模块，这样的模块同时也能和目前可用的主流脚本加载器一同工作。</p>
<h3 id="实现-1"><a href="#实现-1" class="headerlink" title="实现"></a>实现</h3><p>UMD的实现很简单，先判断是否支持Node.js模块格式（exports是否存在），存在则使用Node.js模块格式。</p>
<p>再判断是否支持AMD（define是否存在），存在则使用AMD方式加载模块。前两个都不存在，则将模块公开到全局（window或global）。</p>
<pre><code>// eventUtil.js
(function (root, factory) {
    if (typeof exports === &apos;object&apos;) {
        module.exports = factory();

    } else if (typeof define === &apos;function&apos; &amp;&amp; define.amd) {
        define(factory);

    } else {
        root.eventUtil = factory();
    }
})(this, function() {
    // module
    return {
        addEvent: function(el, type, handle) {
            //...
        },
        removeEvent: function(el, type, handle) {

        },
    };
});
</code></pre><p> 虽然UMD八字还没有一撇，有些开源库却开始支持UMD了，如大名鼎鼎的《JavaScript设计模式》作者<a href="http://dustindiaz.com/" target="_blank" rel="external">Dustin Diaz</a>开发的 <a href="https://github.com/ded/qwery" target="_blank" rel="external">qwery</a> 。 代码如下</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://johnnyimages.qiniudn.com/2012031920341233.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<h3 id="参考-4"><a href="#参考-4" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="http://www.cnblogs.com/snandy/archive/2012/03/19/2406596.html" target="_blank" rel="external">UMD和ECMAScript模块 - snandy - 博客园</a></li>
<li><a href="http://justineo.github.io/singles/writing-modular-js/" target="_blank" rel="external">使用 AMD、CommonJS 及 ES Harmony 编写模块化的 JavaScript</a></li>
</ul>
<h2 id="ES-Harmony-Modules"><a href="#ES-Harmony-Modules" class="headerlink" title="ES Harmony/Modules"></a><a href="http://wiki.ecmascript.org/doku.php?id=harmony:modules" target="_blank" rel="external">ES Harmony/Modules</a></h2><p>ECMAScript的下一个版本Harmony已经考虑到了模块化的需求，目前还在努力指定中。</p>
<p>在 ES.next 中，用import和export导入和导出模块：</p>
<ul>
<li><strong>import</strong>声明把某个模块的导出绑定为本地变量，并可以重命名来避免命名冲突。</li>
<li><strong>export</strong>声明声明了某个模块的本地绑定是外部可见的，这样其它模块就能够读取它们但却无法进行修改。有趣的是，模块可以导出子模块，却无法导出已经在别处定义过的模块。你同样可以给导出重命名来让它们不同于本地的名字。</li>
</ul>
<h3 id="定义模块-4"><a href="#定义模块-4" class="headerlink" title="定义模块"></a>定义模块</h3><p>使用module关键字来定义一个模块。</p>
<pre><code>module math {
    export function sum(x, y) {
        return x + y;
    }
    export var pi = 3.141593;
}   
</code></pre><h3 id="加载模块-2"><a href="#加载模块-2" class="headerlink" title="加载模块"></a>加载模块</h3><p>使用import关键字来加载外部模块</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// we can import in script code, not just inside a module</span></div><div class="line"><span class="keyword">import</span> &#123;sum, pi&#125; <span class="keyword">from</span> math;</div><div class="line">alert(<span class="string">"2π = "</span> + sum(pi, pi));</div><div class="line"></div><div class="line"><span class="comment">// 引入所有API</span></div><div class="line"><span class="keyword">import</span> * <span class="keyword">from</span> math;</div><div class="line">alert(<span class="string">"2π = "</span> + sum(pi, pi));</div><div class="line"></div><div class="line"><span class="comment">// 使用另一个引用作为别名</span></div><div class="line"><span class="comment">// a static module reference</span></div><div class="line"><span class="built_in">module</span> M = math;</div><div class="line">  </div><div class="line"><span class="comment">// reify M as an immutable "module instance object"</span></div><div class="line">alert(<span class="string">"2π = "</span> + M.sum(M.pi, M.pi));</div><div class="line"></div><div class="line"><span class="comment">//局部重命名</span></div><div class="line"><span class="keyword">import</span> &#123; <span class="attr">draw</span>: drawShape &#125; <span class="keyword">from</span> shape;</div><div class="line"><span class="keyword">import</span> &#123; <span class="attr">draw</span>: drawGun &#125; <span class="keyword">from</span> cowboy;</div><div class="line"></div><div class="line"><span class="comment">// 嵌套模块</span></div><div class="line"><span class="built_in">module</span> widgets &#123;</div><div class="line">    <span class="keyword">export</span> <span class="built_in">module</span> button &#123; ... &#125;</div><div class="line">    <span class="keyword">export</span> <span class="built_in">module</span> alert &#123; ... &#125;</div><div class="line">    <span class="keyword">export</span> <span class="built_in">module</span> textarea &#123; ... &#125;</div><div class="line">    ...</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="keyword">import</span> &#123; messageBox, confirmDialog &#125; <span class="keyword">from</span> widgets.alert;</div><div class="line">...</div><div class="line"></div><div class="line"><span class="comment">// 从服务器上请求的模块</span></div><div class="line">&lt;script type=<span class="string">"harmony"</span>&gt;</div><div class="line"><span class="comment">// loading from a URL</span></div><div class="line"><span class="built_in">module</span> <span class="built_in">JSON</span> at <span class="string">'http://json.org/modules/json2.js'</span>;</div><div class="line">alert(<span class="built_in">JSON</span>.stringify(&#123;<span class="string">'hi'</span>: <span class="string">'world'</span>&#125;));</div><div class="line"></div><div class="line"><span class="comment">// 动态载入一个模块</span></div><div class="line">Loader.load(<span class="string">'http://json.org/modules/json2.js'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">JSON</span>) </span>&#123;</div><div class="line">    alert(<span class="built_in">JSON</span>.stringify([<span class="number">0</span>, &#123;<span class="attr">a</span>: <span class="literal">true</span>&#125;]));</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>除此之外，还可以远程载入的模块、异步加载模块等，请参考<a href="http://justineo.github.io/singles/writing-modular-js/" target="_blank" rel="external">使用 AMD、CommonJS 及 ES Harmony 编写模块化的 JavaScript</a>。</p>
<h3 id="参考-5"><a href="#参考-5" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="http://www.cnblogs.com/snandy/archive/2012/03/19/2406596.html" target="_blank" rel="external">UMD和ECMAScript模块 - snandy - 博客园</a></li>
<li><a href="http://wiki.ecmascript.org/doku.php?id=harmony:modules" target="_blank" rel="external">harmony:modules</a></li>
<li><a href="http://wiki.ecmascript.org/doku.php?id=harmony:module_loaders" target="_blank" rel="external">harmony:module_loaders</a></li>
</ul>
<h2 id="工具-1"><a href="#工具-1" class="headerlink" title="工具"></a>工具</h2><ul>
<li><a href="https://github.com/mehdishojaei/grunt-amdcheck" target="_blank" rel="external">mehdishojaei/grunt-amdcheck</a> Finds and removes unused dependencies in AMD modules. <a href="https://npmjs.org/package/grunt-amdcheck" target="_blank" rel="external">https://npmjs.org/package/grunt-amdcheck</a></li>
</ul>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="http://justineo.github.io/singles/writing-modular-js/" target="_blank" rel="external">使用 AMD、CommonJS 及 ES Harmony 编写模块化的 JavaScript</a></li>
<li><a href="http://nuysoft.com/2014/01/26/learning-modules/" target="_blank" rel="external">学习 Javascript 模块化编程</a></li>
<li><a href="http://javascript.ruanyifeng.com/nodejs/commonjs.html" target="_blank" rel="external">CommonJS规范 – JavaScript 标准参考教程（alpha）</a></li>
<li><a href="https://github.com/cssmagic/blog/issues/16" target="_blank" rel="external">[译] [PJA] 《JavaScript 应用程序设计》总目录 · Issue #16 · cssmagic/blog · GitHub</a> 中的第五章。</li>
<li>Addy Osmani, <a href="http://addyosmani.com/writing-modular-js/" target="_blank" rel="external">Writing Modular JavaScript With AMD, CommonJS &amp; ES Harmony</a></li>
<li><a href="http://www.udpwork.com/item/3978.html" target="_blank" rel="external">IT牛人博客聚合 - CommonJS 的模块系统，AMD 和 Wrappings, 以及 RequireJS</a></li>
<li><a href="https://github.com/seajs/seajs/issues/269" target="_blank" rel="external">从 CommonJS 到 Sea.js · Issue #269 · seajs/seajs</a></li>
<li><a href="https://github.com/seajs/seajs/issues/588" target="_blank" rel="external">前端模块化开发那点历史 · Issue #588 · seajs/seajs</a></li>
</ul>

        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2017-11-05T08:22:17.000Z" itemprop="dateUpdated">2017-11-05 16:22:17</time>
</span><br>


        
        这里可以写作者留言，标签和 hexo 中所有变量及辅助函数等均可调用，示例：<a href="/JavaScript/2014-02-15-javascript-module.html" target="_blank" rel="external">http://blog.inching.org/JavaScript/2014-02-15-javascript-module.html</a>
        
    </div>
    <footer>
        <a href="http://blog.inching.org">
            <img src="/img/avatar.png" alt="Cody Fei">
            Cody Fei
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.inching.org/JavaScript/2014-02-15-javascript-module.html&title=《JavaScript 模块规范》 — Balance&pic=http://blog.inching.org/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.inching.org/JavaScript/2014-02-15-javascript-module.html&title=《JavaScript 模块规范》 — Balance&source=CommonJSCommonJS规范为JavaScript制定了一个美好的愿景——希望JavaScript能够在任何地方运行。CommonJS是服务器端模..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.inching.org/JavaScript/2014-02-15-javascript-module.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《JavaScript 模块规范》 — Balance&url=http://blog.inching.org/JavaScript/2014-02-15-javascript-module.html&via=http://blog.inching.org" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.inching.org/JavaScript/2014-02-15-javascript-module.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/HTML5/2014-02-15-qt-webkit-storage.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Html5 Storage</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/JavaScript/2014-02-14-javascript-unit-test.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">JavaScript 单元测试</h4>
      </a>
    </div>
  
</nav>



    











</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢大爷~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.JPG" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.JPG" data-alipay="/img/alipay.JPG">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top" style="display:none">
        

        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>footer.license</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Cody Fei &copy; 2012 - 2018</span>
            <span style="display:none">
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.inching.org/JavaScript/2014-02-15-javascript-module.html&title=《JavaScript 模块规范》 — Balance&pic=http://blog.inching.org/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.inching.org/JavaScript/2014-02-15-javascript-module.html&title=《JavaScript 模块规范》 — Balance&source=CommonJSCommonJS规范为JavaScript制定了一个美好的愿景——希望JavaScript能够在任何地方运行。CommonJS是服务器端模..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.inching.org/JavaScript/2014-02-15-javascript-module.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《JavaScript 模块规范》 — Balance&url=http://blog.inching.org/JavaScript/2014-02-15-javascript-module.html&via=http://blog.inching.org" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.inching.org/JavaScript/2014-02-15-javascript-module.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACxElEQVR42u3a0Y7CMAwEQP7/p+9ekeDK2o5RT5o+oYo2nSIlZuPHIz5+no7nM9ffzI/Xe+YjHjjw8PDwBo9+PXAywOt3kntej36Nv74KDw8Pb493/aDXt05gyZkqL3m5eHh4eHfgXQPm98wXFTw8PLz/xUum+F5KkIQReHh4eHfg5QFrMq3nkUQedqxnLXh4eHgxL99Fus/nlf09PDw8vPGuerXYzSf3artAsx0BDw8Pb4E3iVPzxoJqsZ6HxdE38fDw8I7yJtv/vUfPGwImCxIeHh7ed3jVyb0aEEwYeUBcWJHw8PDwxrxqOZufqY6StzJ8eCl4eHh4a7zR5Ju0PRWXit7LLTwKHh4e3pjX23DKJ+7qI8433j5kLXh4eHhjXhLXTlq1rmOIpKTuxc14eHh427xkYcgXj94yky8n0XKFh4eHt8bLS+RkOTnWC1YMmt/8YHh4eHhrvDxQ6G1f5Y1Zk5avNwo8PDy8Bd6pcCFvnMph1YateXSCh4eHl/Dyy6plcT6V56+mGoXg4eHhbfCSYnq+AOTFd97IVY4/8PDw8A7xqiHpJCbIw+Jq09Wfn/Hw8PDWePluUbURKi+4qy8iWvHw8PDwFnjzSOJUiZwU0HmjAx4eHt43efPzSZBRDW3zn+TNGTw8PLw1Xl4055tP87K7Wnz/+b8BDw8Pb4F3qi2gun3Vi5ILHWR4eHh4X+flJW+1XM7HGjWH4eHh4S3z8ok+b8l6xMfk2vJN8fDw8Aaw/Jjfs1pq97bB3vSU4eHh4R3i9ebYpLTNr+qFHb3GLDw8PLxTvGQqz2PW3kZadQOssGzg4eHhrfF60UC+YBxOUPLdLjw8PLwb8AqtovF032s4iGIIPDw8vBvw8uGrEUb1nlHQjIeHh7fGy4OA6nSfM6rPEG2M4eHh4S3wmn/y40UieZRJK8Cx9iw8PDy8z2P9Aog7xTrObbsRAAAAAElFTkSuQmCC" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="/js/main.min.js?v=1.6.17"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.6.17" async></script>










</body>
</html>
