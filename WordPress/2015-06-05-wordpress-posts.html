<!DOCTYPE html>
<html>
<head>
    
<!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-43567748-2', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<!-- End Google Analytics -->


    

    



    <meta charset="utf-8">
    
    <meta name="google-site-verification" content="true">
    
    
    
    <title>WordPress Custom Post Types, Post Metadata, and Taxonomies | Balance | 大道至简</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="tutorial,wordpress">
    <meta name="description" content="Custom post types (CPTs) are what really make WordPress a content management system. With CPTs, you can quickly build out custom functionality and store data in a consistent way.
Default Post Types an">
<meta property="og:type" content="article">
<meta property="og:title" content="WordPress Custom Post Types, Post Metadata, and Taxonomies">
<meta property="og:url" content="http://blog.inching.org/WordPress/2015-06-05-wordpress-posts.html">
<meta property="og:site_name" content="Balance">
<meta property="og:description" content="Custom post types (CPTs) are what really make WordPress a content management system. With CPTs, you can quickly build out custom functionality and store data in a consistent way.
Default Post Types an">
<meta property="og:updated_time" content="2017-11-05T08:22:17.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="WordPress Custom Post Types, Post Metadata, and Taxonomies">
<meta name="twitter:description" content="Custom post types (CPTs) are what really make WordPress a content management system. With CPTs, you can quickly build out custom functionality and store data in a consistent way.
Default Post Types an">
    
        <link rel="alternate" type="application/atom+xml" title="Balance" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/style/style.css?v=1.6.17">

    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-2846834382442028",
        enable_page_level_ads: true
      });
    </script>

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Cody Fei</h5>
          <a href="mailto:inchingcode@gmail.com" title="inchingcode@gmail.com" class="mail">inchingcode@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                Home
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags/android"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories/Android/"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/inchingorg" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://www.weibo.com/CodyFee" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://www.inesoi.com" target="_blank" >
                <i class="icon icon-lg icon-shopping-bag"></i>
                Shopping Bag
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">WordPress Custom Post Types, Post Metadata, and Taxonomies</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">WordPress Custom Post Types, Post Metadata, and Taxonomies</h1>
        <h5 class="subtitle">
            
                <time datetime="2015-06-04T16:00:00.000Z" itemprop="datePublished" class="page-time">
  2015-06-05
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/WordPress/">WordPress</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Default-Post-Types-and-Custom-Post-Types"><span class="post-toc-text">Default Post Types and Custom Post Types</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Page"><span class="post-toc-text">Page</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Post"><span class="post-toc-text">Post</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Attachment"><span class="post-toc-text">Attachment</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Revisions"><span class="post-toc-text">Revisions</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Nav-Menu-Item"><span class="post-toc-text">Nav Menu Item</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Defining-and-Registering-Custom-Post-Types"><span class="post-toc-text">Defining and Registering Custom Post Types</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#register-post-type-post-type-args"><span class="post-toc-text">register_post_type( $post_type, $args );</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#label"><span class="post-toc-text">label</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#labels"><span class="post-toc-text">labels</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#menu-name"><span class="post-toc-text">menu_name</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#description"><span class="post-toc-text">description</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#publicly-queryable"><span class="post-toc-text">publicly_queryable</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#exclude-from-search"><span class="post-toc-text">exclude_from_search</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#capability-type"><span class="post-toc-text">capability_type</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#capabilities"><span class="post-toc-text">capabilities</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#map-meta-cap"><span class="post-toc-text">map_meta_cap</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#hierarchical"><span class="post-toc-text">hierarchical</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#public"><span class="post-toc-text">public</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#rewrite"><span class="post-toc-text">rewrite</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#has-archive"><span class="post-toc-text">has_archive</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#query-var"><span class="post-toc-text">query_var</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#supports"><span class="post-toc-text">supports</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#register-meta-box-cb"><span class="post-toc-text">register_meta_box_cb</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#permalink-epmask"><span class="post-toc-text">permalink_epmask</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#taxonomies"><span class="post-toc-text">taxonomies</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#show-ui"><span class="post-toc-text">show_ui</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#menu-position"><span class="post-toc-text">menu_position</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#menu-icon"><span class="post-toc-text">menu_icon</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#can-export"><span class="post-toc-text">can_export</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#show-in-nav-menus"><span class="post-toc-text">show_in_nav_menus</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#show-in-menu"><span class="post-toc-text">show_in_menu</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#show-in-admin-bar"><span class="post-toc-text">show_in_admin_bar</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#delete-with-user"><span class="post-toc-text">delete_with_user</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#builtin"><span class="post-toc-text">_builtin</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#edit-link"><span class="post-toc-text">_edit_link</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Taxonomy"><span class="post-toc-text">Taxonomy</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Creating-Custom-Taxonomies"><span class="post-toc-text">Creating Custom Taxonomies</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#register-taxonomy-taxonomy-object-type-args"><span class="post-toc-text">register_taxonomy( $taxonomy, $object_type, $args )</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#label-1"><span class="post-toc-text">label</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#labels-1"><span class="post-toc-text">labels</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#hierarchical-1"><span class="post-toc-text">hierarchical</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#update-count-callback"><span class="post-toc-text">update_count_callback</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#rewrite-1"><span class="post-toc-text">rewrite</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#query-var-1"><span class="post-toc-text">query_var</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#public-1"><span class="post-toc-text">public</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#show-ui-1"><span class="post-toc-text">show_ui</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#show-in-nav-menus-1"><span class="post-toc-text">show_in_nav_menus</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#show-tagcloud"><span class="post-toc-text">show_tagcloud</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#show-admin-column"><span class="post-toc-text">show_admin_column</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#capabilities-1"><span class="post-toc-text">capabilities</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#register-taxonomy-for-object-type-taxonomy-object-type"><span class="post-toc-text">register_taxonomy_for_object_type( $taxonomy, $object_type )</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Using-Custom-Post-Types-and-Taxonomies-in-Your-Themes-and-Plugins"><span class="post-toc-text">Using Custom Post Types and Taxonomies in Your Themes and Plugins</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#The-Theme-Archive-and-Single-Template-Files"><span class="post-toc-text">The Theme Archive and Single Template Files</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Good-Old-WP-Query-and-get-posts"><span class="post-toc-text">Good Old WP_Query and get_posts()</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Metadata-with-CPTs"><span class="post-toc-text">Metadata with CPTs</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#add-meta-box-id-title-callback-screen-context-priority-callback-args"><span class="post-toc-text">add_meta_box( $id, $title, $callback, $screen, $context, $priority, $callback_args )</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Custom-Wrapper-Classes-for-CPTs"><span class="post-toc-text">Custom Wrapper Classes for CPTs</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Keep-Your-CPTs-and-Taxonomies-Together"><span class="post-toc-text">Keep Your CPTs and Taxonomies Together</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Keep-It-in-the-Wrapper-Class"><span class="post-toc-text">Keep It in the Wrapper Class</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Wrapper-Classes-Read-Better"><span class="post-toc-text">Wrapper Classes Read Better</span></a></li></ol></li></ol>
        </nav>
    </aside>
    
<article id="post-wordpress-posts"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">WordPress Custom Post Types, Post Metadata, and Taxonomies</h1>
        <div class="post-meta">
            <time class="post-time" title="2015-06-05 00:00:00" datetime="2015-06-04T16:00:00.000Z"  itemprop="datePublished">2015-06-05</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/WordPress/">WordPress</a></li></ul>



            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p>Custom post types (CPTs) are what really make WordPress a content management system. With CPTs, you can quickly build out custom functionality and store data in a consistent way.</p>
<h2 id="Default-Post-Types-and-Custom-Post-Types"><a href="#Default-Post-Types-and-Custom-Post-Types" class="headerlink" title="Default Post Types and Custom Post Types"></a>Default Post Types and Custom Post Types</h2><p>With a default installation of WordPress, you have several post types already being used. The post types you may be most familiar with are pages and posts, but there are a few more. These post type values are all stored in the database <code>wp_posts</code> table, and they all use the <code>post_type</code> field to separate them.</p>
<a id="more"></a>
<h3 id="Page"><a href="#Page" class="headerlink" title="Page"></a>Page</h3><p>WordPress pages are what you use for your static content pages like home, about, contact info, bio, or any custom page you want. Pages can be indefinitely nested under each other in any hierarchical structure. Pages can also be sorted by <code>menu_order</code> value.</p>
<h3 id="Post"><a href="#Post" class="headerlink" title="Post"></a>Post</h3><p>Your posts are your blog or news or whatever you want to call your constant barrage of content to be indexed by search engines on the Internet. You can categorize your posts, tag them with keywords, set publish dates, and more. In general, posts are shown in some kind of list view in reverse chronological order on the frontend of your website.</p>
<h3 id="Attachment"><a href="#Attachment" class="headerlink" title="Attachment"></a>Attachment</h3><p>Any time you upload an image or file to a post, it stores the file not only on the server but also as a post in the <code>wp_posts</code> table with a <code>post_type</code> attachment.</p>
<h3 id="Revisions"><a href="#Revisions" class="headerlink" title="Revisions"></a>Revisions</h3><p>WordPress has your back and saves your posts as revisions every time you or anyone edits a post. This feature is on by default and can be used to revert your content back to what it was if something got messed up along the way.</p>
<p>Sometimes the <code>wp_posts</code> table gets flooded with post revisions if your application is set up to make a lot of <code>post_content</code> changes, so you may want to limit the amount of revisions stored in the <code>wp_posts</code> table. To do this, put the following code in your <em>wp-config.php</em> file: <code>define( &#39;WP_POST_REVISIONS&#39;, 5 );</code> The number 5 is the number of revision posts to store for a given post. A value of <code>0</code> will turn off post revisions. A value of <code>true</code> or <code>-1</code> will store an infinite number of revisions (it can take a lot of disk space to store infinity something).</p>
<h3 id="Nav-Menu-Item"><a href="#Nav-Menu-Item" class="headerlink" title="Nav Menu Item"></a>Nav Menu Item</h3><p>Every time you build a custom menu using the WordPress core menu builder (wp-admin → appearance → menus) you are storing posts with information for your menus.</p>
<h2 id="Defining-and-Registering-Custom-Post-Types"><a href="#Defining-and-Registering-Custom-Post-Types" class="headerlink" title="Defining and Registering Custom Post Types"></a>Defining and Registering Custom Post Types</h2><p>Just like the default WordPress post types, you can create your own CPTs to manage any data you need, depending on what you are building. Every CPT is really just a post used differently. You could register a custom post type for a dinner menu at a restaurant, for cars for an auto dealer, for people to track patient information and documents at a doctors office, or for pretty much anything you can think of. No, really any type of content you can think of can be stored as a post with attached files, custom metadata, and custom taxonomies.</p>
<p>In our SchoolPress example, we are going to be building a CPT for managing homework assignments on a teacher’s website. Our teacher wants to make a post of some kind where he can add assignments and their students can get to them on the class website. He also wants to be able to upload supporting documents and have commenting available in case any of his students has questions. A CPT sounds in order, doesn’t it?</p>
<p>We can store this information the same way posts are dealt with and display them to the end user in the theme using the same <code>wp_query</code> loop we would with posts.</p>
<h3 id="register-post-type-post-type-args"><a href="#register-post-type-post-type-args" class="headerlink" title="register_post_type( $post_type, $args );"></a>register_post_type( $post_type, $args );</h3><p>You can register a CPT with the function <code>register_post_type()</code>, and in most cases, you are going to register your CPT in your theme’s <em>functions.php</em> file or in a custom plugin file. This function expects two parameters: the name of the post type you are creating and an array of arguments:</p>
<ul>
<li>$post_type—The name of your custom post type; in our example, our custom post type name is “homework.” This string must be no longer than 20 characters and can’t have capital letters, spaces, or any special characters except a hyphen or an underscore.</li>
<li>$args—This is an array of many different arguments that will dictate how your custom post type will be set up. The following is a list of all of the available arguments and what they are used for.</li>
</ul>
<h4 id="label"><a href="#label" class="headerlink" title="label"></a>label</h4><p>The display name of your post type. In our example, we use “Homework.”</p>
<h4 id="labels"><a href="#labels" class="headerlink" title="labels"></a>labels</h4><p>An optional array of labels to use for describing your post type throughout the user interface:</p>
<ul>
<li><em>name</em>—The plural display name of your post type. This will override the label argument.</li>
<li>_singular<em>name</em>—The singular name for any particular post. This defaults to the name if not specified.</li>
<li>_add<em>new</em>—Defaults to the string “Add New.”</li>
<li>_add_new<em>item</em>—Defaults to “Add New Post.”</li>
<li>_edit<em>item</em>—Defaults to “Edit Post.”</li>
<li>_new<em>item</em>—Defaults to “New Post.”</li>
<li>_view<em>item</em>—Defaults to “View Post.”</li>
<li>_search<em>items</em>—Defaults to “Search Posts.”</li>
<li>_not<em>found</em>—Defaults to “No Posts Found.”</li>
<li>_not_found_in<em>trash</em>—Defaults to “No posts found in Trash.”</li>
<li>_parent_item<em>colon</em>—Defaults to “Parent Page:” and is only used on hierarchical post types.</li>
<li>_all<em>items</em>—Defaults to “All Posts.”</li>
</ul>
<h4 id="menu-name"><a href="#menu-name" class="headerlink" title="menu_name"></a>menu_name</h4><p>The menu name for the post type, usually the same as <code>label</code> or <code>labels-&gt;name</code>.</p>
<h4 id="description"><a href="#description" class="headerlink" title="description"></a>description</h4><p>An optional string that describes your post type.</p>
<h4 id="publicly-queryable"><a href="#publicly-queryable" class="headerlink" title="publicly_queryable"></a>publicly_queryable</h4><p>An optional Boolean that specifies if queries on your post type can be run on the frontend or theme of your application. By default, <code>publicly_queryable</code> is turned on.</p>
<h4 id="exclude-from-search"><a href="#exclude-from-search" class="headerlink" title="exclude_from_search"></a>exclude_from_search</h4><p>An optional Boolean that specifies if your post type posts can be queried and displayed in the default WordPress search results. This is off by default so that your posts will be searchable.</p>
<h4 id="capability-type"><a href="#capability-type" class="headerlink" title="capability_type"></a>capability_type</h4><p>An optional string or array. If not specifically defined, <code>capability_type</code> will default to <code>post</code>. You can pass in a string of an existing post type, and the new post type you are registering will inherit that post type’s capabilities. You can also define your own capability type, which will set default capabilities for your custom post type for reading, publishing, editing, and deleting. You can also pass in an array if you want to use different singular and plural words for your capabilities. For example, you can just pass in the string “homework” since the singular and plural forms for “homework” are the same, but you would pass in an array like <code>array( &#39;submission&#39;, &#39;submissions&#39; )</code> when the forms are different.</p>
<h4 id="capabilities"><a href="#capabilities" class="headerlink" title="capabilities"></a>capabilities</h4><p>An optional array of the capabilities of the post type you are registering. You can use this instead of <code>capability_type</code> if you want more granular control over the capabilities you are assigning to your new custom post type.</p>
<p>There are two types of capabilities: meta and primitive. Meta capabilities are tied to specific posts, whereas primitive capabilities are more general purpose. In practice, this means that when checking if a user has a meta capability, you must pass in a <code>$post_id</code> parameter:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//meta capabilities are related to specific posts</div><div class="line">if(current_user_can(&quot;edit_post&quot;, $post_id))</div><div class="line">&#123;</div><div class="line">  //the current user can edit the post with ID = $post_id</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Unlike meta capabilities, primitive capabilities aren’t checked against a specific post:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//primitive capabilities aren&apos;t related to specific posts</div><div class="line">if(current_user_can(&quot;edit_posts&quot;))</div><div class="line">&#123;</div><div class="line">  //the current user can edit posts in general</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The capabilities that can be assigned to your custom post type are:</p>
<ul>
<li>_edit<em>post</em>—A meta capability for a user to edit a particular post.</li>
<li>_read<em>post</em>—A meta capability for a user to read a particular post.</li>
<li>_delete<em>post</em>—A meta capability for a user to delete a particular post.</li>
<li>_edit<em>posts</em>—A primitive capability for a user to be able to create and edit posts.</li>
<li>_edit_others<em>posts</em>—A primitive capability for a user to be able to edit others’ posts.</li>
<li>_publish<em>posts</em>—A primitive capability for a user to be able to publish posts.</li>
<li>_read_private<em>posts</em>—A primitive capability for a user to be able to read private posts.</li>
<li><em>read</em>—A primitive capability for a user to be able to read posts.</li>
<li>_delete<em>posts</em>—A primitive capability for a user to be able to delete posts.</li>
<li>_delete_private<em>posts</em>—A primitive capability for a user to be able to delete private posts.</li>
<li>_delete_published<em>posts</em>—A primitive capability for a user to be able to delete posts.</li>
<li>_delete_others<em>posts</em>—A primitive capability for a user to be able to delete other peoples posts.</li>
<li>_edit_private<em>posts</em>—A primitive capability for a user to be able to edit private posts.</li>
<li>_edit_published<em>posts</em>—A primitive capability for a user to be able to publish posts.</li>
</ul>
<h4 id="map-meta-cap"><a href="#map-meta-cap" class="headerlink" title="map_meta_cap"></a>map_meta_cap</h4><p>Whether to use the internal default meta capability handling (capabilities and roles are covered in <a href="ch06.html" title="Chapter 6. Users, Roles, and Capabilities">Chapter 6</a>). Defaults to false. You can always define your own capabilities using <code>capabilities</code>; but if you don’t, setting <code>map_meta_cap</code> to <code>true</code> will make the following primitive capabilities be used by default or in addition to using <code>capability_type</code>:</p>
<ul>
<li><em>read</em></li>
<li>_delete<em>posts</em></li>
<li>_delete_private<em>posts</em></li>
<li>_delete_published<em>posts</em></li>
<li>_delete_others<em>posts</em></li>
<li>_edit_private<em>posts</em></li>
<li>_edit_published<em>posts</em></li>
</ul>
<h4 id="hierarchical"><a href="#hierarchical" class="headerlink" title="hierarchical"></a>hierarchical</h4><p>An optional Boolean that specifies if a post can be hierarchical and have a parent post or not. WordPress pages are set up like this so you can nest pages under other pages. The hierarchical argument is turned off by default.</p>
<h4 id="public"><a href="#public" class="headerlink" title="public"></a>public</h4><p>An optional Boolean that specifies if a post type is supposed to be used publicly or not in the backend or frontend of WordPress. By default, this argument is <code>false</code>; so without including this argument and setting it to <code>true</code>, you wouldn’t be able to use this <code>post_type</code> in your theme. If you set <code>public</code> to <code>true</code>, it will automatically set <code>exclude_from_search</code>, <code>publicly_queryable</code> and <code>show_ui_nav_menus</code> to <code>true</code> unless otherwise specified.</p>
<p>Most CPTs will be public so they are shown on the frontend or available to manage through the WordPress dashboard. Other CPTs (like the default Revisions CPT) are updated behind the scenes based on other interactions with your app and would have <code>public</code> set to <code>false</code>.</p>
<h4 id="rewrite"><a href="#rewrite" class="headerlink" title="rewrite"></a>rewrite</h4><p>An optional Boolean or array used to create a custom permalink structure for a post type. By default, this is set to <code>true</code>, and the permalink structure for a custom post is <code>/post_type/post_title/</code>. If set to <code>false</code>, no custom permalink would be created. You can completely customize the permalink structure of a post by passing in an array with the following arguments:</p>
<dl><br>    <dt>slug</dt><br>    <dd>Defaults to the <code>post_type</code> but can be any string you want. Remember not to use the same slug in more than one post type because they have to be unique.</dd><br>    <dt>with_front</dt><br>    <dd>Whether or not to prepend the “front base” to the front of the CPT permalink. If set to <code>true</code>, the slug of the “front page” set on the Settings → Reading page of the dashboard will be added to the permalink for posts of this post type.</dd><br>    <dt>feeds</dt><br>    <dd>Boolean that specifies if a post type can have an RSS feed. The default value of this argument is set to the value of the <code>has_archive</code> argument. If <code>feeds</code> is set to <code>false</code>, no feeds will be available.</dd><br>    <dt>pages</dt><br>    <dd>Boolean that turns on pagination for a post type. If <code>true</code>, archive pages for this post type will support pagination.</dd><br>    <dt>ep_mask</dt><br>    <dd>EP or endpoints can be very useful. With this argument you assign an endpoint mask for a post type. For instance, we could set up an endpoint for a post type of homework called “pop-quiz.” The permalink would look like <code>/homework/post-title/pop-quiz/</code>. In MVC terminology, a CPT is similar to a module, and endpoints can be thought of as different views for that module. Endpoints and other rewrite functions are covered in <a href="ch07.html" title="Chapter 7. Other WordPress APIs, Objects, and Helper Functions">Chapter 7</a>.</dd><br></dl>

<h4 id="has-archive"><a href="#has-archive" class="headerlink" title="has_archive"></a>has_archive</h4><p>An optional Boolean or string that specifies if a post type can have an archive page or not. By default this argument is set to <code>false</code>, so you will want to set it to <code>true</code> if you would like to use it in your theme. The _archive-{post<em>type}.php</em> file in your theme will be used to render the archive page. If that file is not available, the <em>archive.php</em> or <em>index.php</em> file will be used instead.</p>
<h4 id="query-var"><a href="#query-var" class="headerlink" title="query_var"></a>query_var</h4><p>An optional Boolean or string that sets the <code>query_var</code> key for the post type. This is the name of your post type in the database and used when writing queries to work with this post type. The default value for this argument is set to the value of <code>post_type</code> argument. In most cases you wouldn’t need your <code>query_var</code> and your <code>post_type</code> to be different, but you can imagine a long post type name like directory_entry that you would want to use a shorter slug like “dir” for.</p>
<h4 id="supports"><a href="#supports" class="headerlink" title="supports"></a>supports</h4><p>An optional Boolean or array that specifies what meta box features will be made available on the new post or edit post page. By default, an array with the arguments of <code>title</code> and <code>editor</code> are passed in. The following is a list of all of the available arguments:</p>
<ul>
<li>title</li>
<li>editor</li>
<li>comments</li>
<li>revisions</li>
<li>trackbacks</li>
<li>author</li>
<li>excerpt</li>
<li>page-attributes</li>
<li>thumbnail</li>
<li>custom-fields</li>
<li>post-formats</li>
</ul>
<p>If you plan to use one of these features with your CPT, make sure it is included in the <code>supports</code> array.</p>
<h4 id="register-meta-box-cb"><a href="#register-meta-box-cb" class="headerlink" title="register_meta_box_cb"></a>register_meta_box_cb</h4><p>An optional string that allows you to provide a custom callback function for integrating your own custom meta boxes.</p>
<h4 id="permalink-epmask"><a href="#permalink-epmask" class="headerlink" title="permalink_epmask"></a>permalink_epmask</h4><p>An optional string for specifying which endpoint types you would like to associate with a custom post type. The default rewrite endpoint bitmask is EP_PERMALINK. For more information on endpoints.</p>
<h4 id="taxonomies"><a href="#taxonomies" class="headerlink" title="taxonomies"></a>taxonomies</h4><p>An optional array that specifies any built-in (categories and tags) or custom registered taxonomies you would like to associate with a post type. By default, no taxonomies are referenced. For more information on taxonomies.</p>
<h4 id="show-ui"><a href="#show-ui" class="headerlink" title="show_ui"></a>show_ui</h4><p>An optional Boolean that specifies if the basic post UI will be made available for a post type in the backend. The default value is set to the value of the <code>public</code> argument. If <code>show_ui</code> is <code>false</code>, you will have no way of populating your posts from the backend admin area.</p>
<p>It’s a good idea to set show_ui to true, even for CPTs that won’t generally be added or edited through the admin dashboard. For example, the bbPress plugin adds Topics and Replies as CPTs that are added and edited through the forum UI on the frontend. However, show_ui is set to true, providing another interface for admins to search, view, and manage topics and replies from.</p>
<h4 id="menu-position"><a href="#menu-position" class="headerlink" title="menu_position"></a>menu_position</h4><p>An optional integer used to set the menu order of a post type menu item in the backend, left-side navigation.</p>
<p>The WordPress Codex provides <a href="http://bit.ly/reg-post-type" target="_blank" rel="external">a nice list of common menu position values</a> to help you figure out where to place the menu item for your CPT:</p>
<ul>
<li>5—below Posts</li>
<li>10—below Media</li>
<li>15—below Links</li>
<li>20—below Pages</li>
<li>25—below comments</li>
<li>60—below first separator</li>
<li>65—below Plugins</li>
<li>70—below Users</li>
<li>75—below Tools</li>
<li>80—below Settings</li>
<li>100—below second separator</li>
</ul>
<h4 id="menu-icon"><a href="#menu-icon" class="headerlink" title="menu_icon"></a>menu_icon</h4><p>An optional string of a URL to a custom icon that can be used to represent a post type.</p>
<h4 id="can-export"><a href="#can-export" class="headerlink" title="can_export"></a>can_export</h4><p>An optional Boolean that specifies if a post type can be exported via the WordPress exporter in Tools → Export. This argument is set to <code>true</code> by default, allowing the admin to export.</p>
<h4 id="show-in-nav-menus"><a href="#show-in-nav-menus" class="headerlink" title="show_in_nav_menus"></a>show_in_nav_menus</h4><p>An optional Boolean that specifies if posts from a post type can be added to a custom navigation menu in Apperance → Menus. The default value of this argument is set to the value of the public argument.</p>
<h4 id="show-in-menu"><a href="#show-in-menu" class="headerlink" title="show_in_menu"></a>show_in_menu</h4><p>An optional Boolean or string that specifies whether to show the post type in the backend admin menu and possibly where to show it. If set to <code>true</code>, the post type is displayed as its own item on the menu. If set to <code>false</code>, no menu item for the post type is shown. You can also pass in a string of the name of any other menu item. Doing this will place the post type in the submenu of the passed-in menu item. The default value of this argument is set to the value of the <code>show_ui</code> argument.</p>
<h4 id="show-in-admin-bar"><a href="#show-in-admin-bar" class="headerlink" title="show_in_admin_bar"></a>show_in_admin_bar</h4><p>An optional Boolean that specifies if a post type is available in the WordPress admin bar. The default value of this argument is set to the value of the <code>show_in_menu</code> argument.</p>
<h4 id="delete-with-user"><a href="#delete-with-user" class="headerlink" title="delete_with_user"></a>delete_with_user</h4><p>An optional Boolean that specifies whether to delete all of the posts for a post type created by any given user. If set to <code>true</code>, posts the user created will be moved to the trash when the user is deleted. If set to <code>false</code>, posts will not be moved to the trash when the user is deleted. By default, posts are moved to the trash if the argument <code>post_type_supports</code> has <code>author</code> within it. If not, posts are not moved to the trash.</p>
<h4 id="builtin"><a href="#builtin" class="headerlink" title="_builtin"></a>_builtin</h4><p>You shouldn’t ever need to use this argument. Default WordPress post types use this to differentiate themselves from custom post types.</p>
<h4 id="edit-link"><a href="#edit-link" class="headerlink" title="_edit_link"></a>_edit_link</h4><p>The URL of the edit link on the post. This is also for internal use, and you shouldn’t need to use it. If you’d like to change the page linked to when clicking to edit a post, use the <code>get_edit_post_link</code> filter, which passes the default edit link along with the ID of the post.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">// custom function to register a &quot;homework&quot; post type</div><div class="line">function schoolpress_register_post_type_homework() &#123;</div><div class="line">    register_post_type( &apos;homework&apos;,</div><div class="line">        array(</div><div class="line">            &apos;labels&apos; =&gt; array(</div><div class="line">                        &apos;name&apos; =&gt; __( &apos;Homework&apos; ),</div><div class="line">                                &apos;singular_name&apos; =&gt; __( &apos;Homework&apos; )</div><div class="line">                        ),</div><div class="line">                &apos;public&apos; =&gt; true,</div><div class="line">                &apos;has_archive&apos; =&gt; true,</div><div class="line">                )</div><div class="line">        );</div><div class="line">&#125;</div><div class="line">// call our custom function with the init hook</div><div class="line">add_action( &apos;init&apos;, &apos;schoolpress_register_post_type_homework&apos; );</div><div class="line"></div><div class="line">// custom function to register a &quot;submissions&quot; post type</div><div class="line">function schoolpress_register_post_type_submission() &#123;</div><div class="line">    register_post_type( &apos;submissions&apos;,</div><div class="line">        array(</div><div class="line">            &apos;labels&apos; =&gt; array(</div><div class="line">                                &apos;name&apos; =&gt; __( &apos;Submissions&apos; ),</div><div class="line">                                &apos;singular_name&apos; =&gt; __( &apos;Submission&apos; )</div><div class="line">                        ),</div><div class="line">                &apos;public&apos; =&gt; true,</div><div class="line">                &apos;has_archive&apos; =&gt; true,</div><div class="line">                )</div><div class="line">        );</div><div class="line">&#125;</div><div class="line">// call our custom function with the init hook</div><div class="line">add_action( &apos;init&apos;, &apos;schoolpress_register_post_type_submission&apos; );</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>You can find the code for the <code>register_post_type()</code> function in <em>wp-includes/post.php</em>. Notice that in our example we are only using a few of the many available arguments.</p>
<p>If you dropped the preceding code in your ``active theme’s <em>functions.php</em> file or an active plugin, you should notice two new menu items on the WordPress admin called “Homework” and “Submissions” under the “Comments” menu item.</p>
<p>If you get tired of writing your own functions to register the various custom post types that you want to use, you can use this cool plugin called Custom Post Types UI.</p>
<h2 id="Taxonomy"><a href="#Taxonomy" class="headerlink" title="Taxonomy"></a>Taxonomy</h2><p>Taxonomies group posts by terms. Think post categories and post tags; these are just built-in taxonomies attached to the default “post” post type. You can define as many custom taxonomies or categories as you want and span them across multiple post types. For example, we can create a custom taxonomy called “Subject” that has all school-related subjects as its terms and is tied to our “Homework” custom post type.</p>
<table>
<thead>
<tr>
<th>meta_id</th>
<th>post_id</th>
<th>meta_key</th>
<th>meta_value</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
<td>due_date</td>
<td>2014-09-07</td>
</tr>
<tr>
<td>2</td>
<td>2</td>
<td>due_date</td>
<td>2014-09-14</td>
</tr>
</tbody>
</table>
<p>The <code>meta_id</code>, <code>post_id</code>, and <code>meta_key</code> columns are indexed, but the <code>meta_value</code> column is not. This means that queries like “get the due date for this assignment” will run quickly, but queries like “get all assignments due on 2014-09-07” will run slower, especially if you have a large site with lots of data piled into the <code>wp_postmeta</code> table. The reason the <code>meta_value</code> key is the lone column in <code>wp_postmeta</code> without an index is that adding an index here would greatly increase both the storage required for this table and also the insert times. In practice, a site is going to have many different meta values, whereas there will be a smaller set of post IDs and meta keys to build indexes for.</p>
<p>If you stored assignment due dates in a custom taxonomy, the “get all assignments due on this date” query will run much faster. Each specific due date would be a term in the <code>wp_terms</code> table with a corresponding entry in the <code>wp_terms_taxonomy</code> table. The <code>wp_terms_relationships</code> table that attaches terms to posts has both the <code>object_id</code> (posts are objects here) and <code>term_taxonomy_id</code> fields indexed. So “get all posts with this term_taxonomy_id” is a speedy query.</p>
<p>If you just want to show the due date on the assignment page, you should store it in the post meta fields. If you want to offer a report of all assignments due on a certain date, you should consider adding a taxonomy to track due dates.</p>
<p>On the other hand, due to the nature of due dates (you potentially have 365 new terms each year), using a taxonomy for them might be overkill. You would end up with a lot of useless terms in your database keeping track of which assignments were due two years ago.</p>
<p>Also, in this specific case, the speed increases might be negligible because the due date report is for a subset of assignments within a specific class group. In practice, we won’t be querying for assignments by due date across the entire <code>wp_postmeta</code> table. We’ll filter the query to only run on assignment posts for a specific class. While there may be millions and millions of rows in the <code>wp_postmeta</code> table for a SchoolPress site at scale (hundreds of schools, thousands of teachers and classes), there are only going be a few assignments for a specific class or group of classes one student is in.</p>
<p>Another consideration when choosing between meta fields and taxonomies is how that data is going to be managed by users.</p>
<p>If a field is only going to be used in the backend code, and you don’t have query speed issues, storing it in post meta is as simple as one call to <code>update_post_meta()</code>.</p>
<p>`If you’d like admins to be able to create new terms, write descriptions for them, build hierarchies, and use dropdowns or checkboxes to assign them to posts, well then I’ve just described exactly what you get for free when you register a taxonomy. When using post meta fields, you need to build your own UI into a meta box.</p>
<p>Finally, I did mention earlier that there are times when you want to use both a meta field <em>and</em> a taxonomy to track one piece of data. An example of this in the context of the SchoolPress app could be tracking a textbook and chapter for an assignment. Imagine you want a report for a student with all of her assignments organized by textbook and ordered by chapter within those books.</p>
<p>Because you want to allow teachers to manage textbooks as terms in the admin, and you will want to do queries like “get all assignments for this textbook,” it makes sense to store textbooks in a custom taxonomy.</p>
<p>On the other hand, chapters can be stored in post meta fields. Chapters are common across books and assignments, but it doesn’t make sense to query for “all chapter 1 assignments” across many different textbooks. Since we’ll be able to pre-filter to get all assignments by textbook or by student, we can use a chapter meta field, or possibly a textbook_chapter meta field with data like “PrinciplesOfMath.Ch1” to order the assignments for the report.</p>
<p>Phew… now that we’ve figured out when we’ll want to use taxonomies, let’s find out how to create them.</p>
<h3 id="Creating-Custom-Taxonomies"><a href="#Creating-Custom-Taxonomies" class="headerlink" title="Creating Custom Taxonomies"></a>Creating Custom Taxonomies</h3><p>You can register your own taxonomies with the function <code>register_taxonomy()</code>, which is found in <em>wp-includes/taxonomy.php</em>.</p>
<h3 id="register-taxonomy-taxonomy-object-type-args"><a href="#register-taxonomy-taxonomy-object-type-args" class="headerlink" title="register_taxonomy( $taxonomy, $object_type, $args )"></a>register_taxonomy( $taxonomy, $object_type, $args )</h3><p>The <code>register_taxonomy()</code> function accepts the following three parameters:</p>
<ul>
<li>$taxonomy—A required string of the name of your taxonomy. In our example, our taxonomy name is “subject.”</li>
<li>$object_type—A required array or string of the custom post type(s) you are attaching this taxonomy to. In our example, we are using a string and attaching the subject taxonomy to the homework post type. We could set it to more that one post type by passing in an array of post type names.</li>
<li>$args—This is an optional array of many different arguments that dictate how your custom taxonomy will be set up. Notice that in our example we are only using a few of the many available arguments that could be passed into the <code>register_taxonomy()</code> function. Below is a list of all of the available arguments:</li>
</ul>
<h4 id="label-1"><a href="#label-1" class="headerlink" title="label"></a>label</h4><p>Optional string of the display name of your taxonomy.</p>
<h4 id="labels-1"><a href="#labels-1" class="headerlink" title="labels"></a>labels</h4><p>Optional array of labels to use for describing your taxonomy throughout the user interface:</p>
<ul>
<li><p>name</p>
<p>  The plural display name of your taxonomy. This will override the label argument.</p>
</li>
<li><p>singular_name</p>
<p>  The name for one object of this taxonomy. Defaults to “Category.”</p>
</li>
<li><p>search_items</p>
<p>  Defaults to “Search Categories”.</p>
</li>
<li><p>popular_items</p>
<p>  This string isn’t used on hierarchical taxonomies. Defaults to “Popular Tags.”</p>
</li>
<li><p>all_items</p>
<p>  Defaults to “All Categories”.</p>
</li>
<li><p>parent_item</p>
<p>  This string is only used on hierarchical taxonomies. Defaults to “Parent Category.”</p>
</li>
<li><p>parent_item_colon</p>
<p>  The same as the parent_item argument but with a colon at the end.</p>
</li>
<li><p>edit_item</p>
<p>  Defaults to “Edit Category.”</p>
</li>
<li><p>view_item</p>
<p>  Defaults to “View Category.”</p>
</li>
<li><p>update_item</p>
<p>  Defaults to “Update Category.”</p>
</li>
<li><p>add_new_item</p>
<p>  Defaults to “Add New Category.”</p>
</li>
<li><p>new_item_name</p>
<p>  Defaults to “New Category Name.”</p>
</li>
<li><p>separate_items_with_commas</p>
<p>  This string is used on nonhierarchical taxonomies. Defaults to “Separate tags with commas.”</p>
</li>
<li><p>add_or_remove_items</p>
<p>  This string is used on nonhierarchical taxonomies. Defaults to “Add or remove tags.”</p>
</li>
<li><p>choose_from_most_used</p>
<p>  This string is used on nonhierarchical taxonomies. Defaults to “Choose from the most used tags.”</p>
</li>
</ul>
<h4 id="hierarchical-1"><a href="#hierarchical-1" class="headerlink" title="hierarchical"></a>hierarchical</h4><p>Optional Boolean that specifies if a taxonomy is hierarchical or that a taxonomy term may have parent terms or subterms. This is just like the default categories taxonomy. Nonhierarchical taxonomies are like the default tags taxonomy. The default value for this argument is set to <code>false</code>.</p>
<h4 id="update-count-callback"><a href="#update-count-callback" class="headerlink" title="update_count_callback"></a>update_count_callback</h4><p>Optional string that works like a hook. It’s called when the count of the associated post type is updated.</p>
<h4 id="rewrite-1"><a href="#rewrite-1" class="headerlink" title="rewrite"></a>rewrite</h4><p>Optional Boolean or array that is used to customize the permalink structure of a taxonomy. The default rewrite value is set to the taxonomy slug.</p>
<h4 id="query-var-1"><a href="#query-var-1" class="headerlink" title="query_var"></a>query_var</h4><p>Optional Boolean or string that can be used to customize the query var, <code>?$query_var=$term</code>. By default, the taxonomy name is used as the query var.</p>
<h4 id="public-1"><a href="#public-1" class="headerlink" title="public"></a>public</h4><p>Optional Boolean that specifies if the taxonomy should be publicly queryable on the frontend. The default is set to <code>true</code>.</p>
<h4 id="show-ui-1"><a href="#show-ui-1" class="headerlink" title="show_ui"></a>show_ui</h4><p>Optional Boolean that specifies if the taxonomy will have a backend admin UI, similar to the categories or tags interface. The default value of this argument is set to the value of the <code>public</code> argument.</p>
<h4 id="show-in-nav-menus-1"><a href="#show-in-nav-menus-1" class="headerlink" title="show_in_nav_menus"></a>show_in_nav_menus</h4><p>Optional Boolean that specifies if a taxonomy will be available in navigation menus. The default value of this argument is set to the value of the <code>public</code> argument.</p>
<h4 id="show-tagcloud"><a href="#show-tagcloud" class="headerlink" title="show_tagcloud"></a>show_tagcloud</h4><p>Optional Boolean that specifies if the taxonomy can be included in the Tag Cloud Widget. The default value of this argument is set to the value of the <code>show_ui</code> argument.</p>
<h4 id="show-admin-column"><a href="#show-admin-column" class="headerlink" title="show_admin_column"></a>show_admin_column</h4><p>Optional Boolean that specifies if a new column will be created for your taxonomy on the post type it is attached to on the post type’s edit/list page in the backend. This is <code>false</code> by default.</p>
<h4 id="capabilities-1"><a href="#capabilities-1" class="headerlink" title="capabilities"></a>capabilities</h4><p>Optional array of capabilities for this taxonomy with a default of <code>none</code>. You can pass in the following arguments and/or any custom-created capabilities:</p>
<ul>
<li>manage_terms</li>
<li>edit_terms</li>
<li>delete_terms</li>
<li>assign_terms</li>
</ul>
<p>In our homework post type example, we are going to make a taxonomy called “Subject” so we can create a term for each subject like math, science, language arts, and social studies:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">// custom function to register the &quot;subject&quot; taxonomy</div><div class="line">function schoolpress_register_taxonomy_subject() &#123;</div><div class="line">   register_taxonomy(</div><div class="line">      &apos;subject&apos;,</div><div class="line">      &apos;homework&apos;,</div><div class="line">      array(</div><div class="line">         &apos;label&apos; =&gt; __( &apos;Subjects&apos; ),</div><div class="line">         &apos;rewrite&apos; =&gt; array( &apos;slug&apos; =&gt; &apos;subject&apos; ),</div><div class="line">         &apos;hierarchical&apos; =&gt; true</div><div class="line">      )</div><div class="line">   );</div><div class="line">&#125;</div><div class="line">// call our custom function with the init hook</div><div class="line">add_action( &apos;init&apos;, &apos;schoolpress_register_taxonomy_subject&apos; );</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>Notice in the preceding code the subject taxonomy is set up like categories on a post because it’s hierarchical argument is set to <code>true</code>. You can create as many subjects as you would like and nest them under each other.</p>
<p>Under Homework → Subjects in the backend, you can add your terms the same way you would add new categories to a post.</p>
<h3 id="register-taxonomy-for-object-type-taxonomy-object-type"><a href="#register-taxonomy-for-object-type-taxonomy-object-type" class="headerlink" title="register_taxonomy_for_object_type( $taxonomy, $object_type )"></a>register_taxonomy_for_object_type( $taxonomy, $object_type )</h3><p>What if you wanted to use a default taxonomy on a custom post type? Say you want to use the same tags taxonomy attached to the posts post type on our homework post type. You can use the <code>register_taxonomy_for_object_type()</code> function to attach any taxonomies to any post types. The <code>register_taxonomy_for_object_type()</code> function is also located in <em>wp-includes/taxonomy.php</em>.</p>
<p>The <code>register_taxonomy_for_object_type()</code> function accepts two parameters:</p>
<ul>
<li>$taxonomy—Required string of the name of the taxonomy.</li>
<li>$object_type—Required string of the name of the post type to which you want to attach your taxonomy.</li>
</ul>
<p>In this example, we are attaching the default tags taxonomy to our custom homework post type:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">schoolpress_register_taxonomy_for_object_type_homework</span><span class="params">()</span></span>&#123;</div><div class="line">        register_taxonomy_for_object_type( <span class="string">'post_tag'</span>, <span class="string">'homework'</span> );</div><div class="line">&#125;</div><div class="line">add_action( <span class="string">'init'</span>, <span class="string">'schoolpress_register_taxonomy_for_object_type_homework'</span> );</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<p>If you run the example, you should notice that the “tags” taxonomy is now available under the Homework menu item. The Custom Post Types UI plugin also has a UI for creating and managing custom taxonomies.</p>
<h2 id="Using-Custom-Post-Types-and-Taxonomies-in-Your-Themes-and-Plugins"><a href="#Using-Custom-Post-Types-and-Taxonomies-in-Your-Themes-and-Plugins" class="headerlink" title="Using Custom Post Types and Taxonomies in Your Themes and Plugins"></a>Using Custom Post Types and Taxonomies in Your Themes and Plugins</h2><p>Most of the time when building a web application with WordPress, you will want to display your custom post type posts in the frontend within your theme.</p>
<h3 id="The-Theme-Archive-and-Single-Template-Files"><a href="#The-Theme-Archive-and-Single-Template-Files" class="headerlink" title="The Theme Archive and Single Template Files"></a>The Theme Archive and Single Template Files</h3><p>Most WordPress themes will have an <em>archive.php</em> file that renders your posts on a archive/listing page and a <em>single.php</em> file that is responsible for rendering information about a single post. You can create dedicated archive and single files for your registered CPTs very easily.</p>
<p>Make a copy of <em>archive.php</em> and name it <em>archive-homework.php</em>. You should now automatically have a listing archive page of all of your homework assignment posts in the same format of your regular posts archive page (at <em>domain.com/homework/</em>).</p>
<p>This same method can be applied to the <em>single.php</em> file. Make a copy if it and call it <em>single-homework.php</em>. You should now have a single page for each of your homework assignments (at <em>domain.com/homework/science-worksheet/</em>). Now you can change the markup of the CPT archive or single file to display your data differently from how your blog posts are displayed.</p>
<p>In order to use a custom archive file, you must set the <code>has_archive</code> argument when registering your custom post type to <code>true</code>. The <code>has_archive</code> argument is part of the <code>register_post_type()</code> function.</p>
<h3 id="Good-Old-WP-Query-and-get-posts"><a href="#Good-Old-WP-Query-and-get-posts" class="headerlink" title="Good Old WP_Query and get_posts()"></a>Good Old WP_Query and get_posts()</h3><p>In some instances, creating an archive and single .php file for your custom post type may not be enough for the custom functionality you require. What if you wanted to loop through all of the posts for a specific post type in a sidebar widget or in a shortcode on a page? With WP_Query or get_posts(), you can set the post_type parameter to query and loop through your CPT posts the same way you would with regular posts.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">function schoolpress_the_content_homework_submission($content)&#123;</div><div class="line"></div><div class="line">  global $post;</div><div class="line"></div><div class="line">   // Don't do this for any other post type than homework</div><div class="line">   // and if a user is not logged in</div><div class="line">   $current_user = wp_get_current_user();</div><div class="line">   if ( ! is_single() || $post-&gt;post_type != 'homework' || ! $current_user )</div><div class="line">                  return $content;</div><div class="line"></div><div class="line">        // check if the current user has already made a submission to this</div><div class="line">    // homework assignment</div><div class="line">        $submissions = get_posts( array(</div><div class="line">                'post_author'    =&gt; $current_user-&gt;ID,</div><div class="line">                'posts_per_page' =&gt; '1',</div><div class="line">                'post_type'      =&gt; 'submissions',</div><div class="line">                'meta_key'       =&gt; '_submission_homework_id',</div><div class="line">                'meta_value'     =&gt; $post-&gt;ID</div><div class="line">        ) );</div><div class="line">        foreach ( $submissions as $submission ) &#123;</div><div class="line">                $submission_id = $submission-&gt;ID;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        // Process the form submission if the user hasn't already</div><div class="line">        if ( !$submission_id &amp;&amp;</div><div class="line">                        isset( $_POST['submit-homework-submission'] ) &amp;&amp;</div><div class="line">                        isset( $_POST['homework-submission'] ) ) &#123;</div><div class="line"></div><div class="line">                $submission = $_POST['homework-submission'];</div><div class="line">                $post_title = $post-&gt;post_title;</div><div class="line">                $post_title .= ' - Submission by ' . $current_user-&gt;display_name;</div><div class="line">                // Insert the current users submission as a post into our</div><div class="line">        // submissions CPT.</div><div class="line">                $args = array(</div><div class="line">                        'post_title'   =&gt; $post_title,</div><div class="line">                        'post_content' =&gt; $submission,</div><div class="line">                        'post_type'    =&gt; 'submissions',</div><div class="line">                        'post_status'  =&gt; 'publish',</div><div class="line">                        'post_author'  =&gt; $current_user-&gt;ID</div><div class="line">                );</div><div class="line">                $submission_id = wp_insert_post( $args );</div><div class="line">                // add post meta to tie this submission post to the</div><div class="line">        // homework post</div><div class="line">                add_post_meta( $submission_id, '_submission_homework_id',</div><div class="line">        $post-&gt;ID );</div><div class="line">                // create a custom message</div><div class="line">                $message = __(</div><div class="line">                        'Your homework has been submitted and is</div><div class="line">             awaiting review.',</div><div class="line">                        'schoolpress'</div><div class="line">                );</div><div class="line">                $message = '&lt;div class="homework-submission-message"&gt;' . $message .</div><div class="line">          '&lt;/div&gt;';</div><div class="line">                // drop message before the filtered $content variable</div><div class="line">                $content = $message . $content;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        // Add a link to the user's submission if a submssion was already made</div><div class="line">        if( $submission_id ) &#123;</div><div class="line"></div><div class="line">                $message = sprintf( __(</div><div class="line">                        'Click %s here %s to view your submission to this homework</div><div class="line">              assignment.',</div><div class="line">                        'schoolpress' ),</div><div class="line">                        '&lt;a href="' . get_permalink( $submission_id ) . '"&gt;',</div><div class="line">                        '&lt;/a&gt;' );</div><div class="line">                $message = '&lt;div class="homework-submission-link"&gt;' . $message .</div><div class="line">           '&lt;/div&gt;';</div><div class="line">                $content .= $message;</div><div class="line"></div><div class="line">        // Add a basic submission form after the $content variable being filtered.</div><div class="line">        &#125; else &#123;</div><div class="line"></div><div class="line">         ob_start();</div><div class="line">         ?&gt;</div><div class="line">         &lt;h3&gt;&lt;?php _e( 'Submit your Homework below!', 'schoolpress' );?&gt;&lt;/h3&gt;</div><div class="line">         &lt;form method="post"&gt;</div><div class="line">         &lt;?php</div><div class="line">         wp_editor( '', 'homework-submission', array( 'media_buttons' =&gt; false ) );</div><div class="line">         ?&gt;</div><div class="line">         &lt;input type="submit" name="submit-homework-submission" value="Submit" /&gt;</div><div class="line">         &lt;/form&gt;</div><div class="line">         &lt;?php</div><div class="line">         $form = ob_get_contents();</div><div class="line">         ob_end_clean();</div><div class="line">         $content .= $form;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        return $content;</div><div class="line"></div><div class="line">&#125;</div><div class="line">// add a filter on 'the_content' so we can run our custom code to deal with</div><div class="line">// homework submissions</div><div class="line">add_filter( 'the_content', 'schoolpress_the_content_homework_submission', 999 );</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>You probably noticed the following functions that we haven’t discussed yet:</p>
<ul>
<li>ob_start()`—This PHP function is used to turn output buffering on. While output buffering is active, no output is sent to the browser; instead the output is stored in an internal buffer.</li>
<li>wp_editor()`—This WordPress function outputs the same WYSIWYG editor that you get while adding or editing a post. You can call this function anywhere you would like to stick an editor. We thought the homework submission form would be a perfect place. </li>
<li>ob_get_contents()<code>—We set a variable called</code>$form<code>to this PHP function. This makes all content between calling the</code>ob_start()<code>function and this function into a variable called</code>$form`.</li>
<li>ob_end_clean()`—This PHP function clears the output buffer and turns off output buffering.</li>
</ul>
<p>We used these functions in the previous sequence because the <code>wp_editor()</code> function does not currently have an argument to return the editor as a variable and outputs it to the browser when it’s called. If we didn’t use these functions, we wouldn’t be able to put our editor after the <code>$content</code> variable passed into the <code>the_content</code> filter.</p>
<p>In the following code, we are going to make sure that only administrators have access to all homework submissions and that all other users only have access to homework submissions that they made:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">function schoolpress_submissions_template_redirect()&#123;</div><div class="line">    global $post, $user_ID;</div><div class="line"></div><div class="line">    // only run this function for the submissions post type</div><div class="line">    if ( $post-&gt;post_type != &apos;submissions&apos; )</div><div class="line">        return;</div><div class="line"></div><div class="line">    // check if post_author is the current user_ID</div><div class="line">    if ( $post-&gt;post_author == $user_ID )</div><div class="line">        $no_redirect = true;</div><div class="line"></div><div class="line">    // check if current user is an administrator</div><div class="line">    if ( current_user_can( &apos;manage_options&apos; ) )</div><div class="line">        $no_redirect = true;</div><div class="line"></div><div class="line">    // if $no_redirect is false redirect to the home page</div><div class="line">    if ( ! $no_redirect ) &#123;</div><div class="line">        wp_redirect( home_url() );</div><div class="line">        exit();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">// use the template_redirect hook to call a function that decides if the</div><div class="line">// current user can access the current homework submission</div><div class="line">add_action( &apos;template_redirect&apos;, &apos;schoolpress_submissions_template_redirect&apos; );</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h2 id="Metadata-with-CPTs"><a href="#Metadata-with-CPTs" class="headerlink" title="Metadata with CPTs"></a>Metadata with CPTs</h2><p>You can utilize the same post meta functions we went over in detail in <a href="ch02.html" title="Chapter 2. WordPress Basics">Chapter 2</a> with any CPT you create. Getting, adding, updating, and deleting post metadata is consistent across all posts types.</p>
<p>If you registered a CPT and added custom-fields in the supports argument, then by default, when adding a new post or editing a post of that post type, you will see a meta box called “Custom Fields.” You may already be familiar with the Custom Fields meta box; it’s a very basic form used to maintain metadata attached to a post. What if you require a more slick UI for adding metadata on the backend? Well, building a custom meta box would be the solution for you.</p>
<h3 id="add-meta-box-id-title-callback-screen-context-priority-callback-args"><a href="#add-meta-box-id-title-callback-screen-context-priority-callback-args" class="headerlink" title="add_meta_box( $id, $title, $callback, $screen, $context, $priority, $callback_args )"></a>add_meta_box( $id, $title, $callback, $screen, $context, $priority, $callback_args )</h3><ul>
<li>$id—A required string of a unique identifier for the meta box you are creating.</li>
<li>$title—A required string of the title or visible name of the meta box you are creating.</li>
<li>$callback—A required string of a function name that gets called to output the HTML inside of the meta box you are creating.</li>
<li>$screen—An optional string or object of post types and/or screen names (<em>dashboard</em>, <em>links</em>) that your meta box will show up on.</li>
<li>$context—An optional string of the context within the page where your meta box should show (<em>normal</em>, <em>advanced</em>, <em>side</em>). The default is advanced.</li>
<li>$priority—An optional string of the priority within the context where the boxes should show (<em>high</em>, <em>low</em>).</li>
<li>$callback_args—An optional array of arguments that will be passed in the callback function you referenced with the <code>$callback</code> parameter. Your callback function will automatically receive the <code>$post</code> object and any other arguments you set here.</li>
</ul>
<p>We are going to build a custom meta box for all posts of our homework post type. This meta box will contain a checkbox for if a homework submission is required and a date selector for the due date of the homework assignment.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"><span class="comment">// function for adding a custom meta box</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">schoolpress_homework_add_meta_boxes</span><span class="params">()</span></span>&#123;</div><div class="line"></div><div class="line">    add_meta_box(</div><div class="line">        <span class="string">'homework_meta'</span>,</div><div class="line">        <span class="string">'Additonal Homework Info'</span>,</div><div class="line">        <span class="string">'schoolpress_homework_meta_box'</span>,</div><div class="line">        <span class="string">'homework'</span>,</div><div class="line">        <span class="string">'side'</span></div><div class="line">    );</div><div class="line"></div><div class="line">&#125;</div><div class="line"><span class="comment">// use the add_meta_boxes hook to call a custom function to add a new meta box</span></div><div class="line">add_action( <span class="string">'add_meta_boxes'</span>, <span class="string">'schoolpress_homework_add_meta_boxes'</span> );</div><div class="line"></div><div class="line"><span class="comment">// this is the callback function called from add_meta_box</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">schoolpress_homework_meta_box</span><span class="params">( $post )</span></span>&#123;</div><div class="line">    <span class="comment">// doing this so the url will fit in the book ;)</span></div><div class="line">    $jquery_url = <span class="string">'http://ajax.googleapis.com/ajax/libs/'</span>;</div><div class="line">    $jquery_url.= <span class="string">'jqueryui/1.8.2/themes/smoothness/jquery-ui.css'</span>;</div><div class="line"></div><div class="line">    <span class="comment">// enqueue jquery date picker</span></div><div class="line">    wp_enqueue_script( <span class="string">'jquery-ui-datepicker'</span> );</div><div class="line">    wp_enqueue_style( <span class="string">'jquery-style'</span>, $jquery_url );</div><div class="line"></div><div class="line">    <span class="comment">// set meta data if already exists</span></div><div class="line">    $is_required = get_post_meta( $post-&gt;ID,</div><div class="line">        <span class="string">'_schoolpress_homework_is_required'</span>, <span class="number">1</span> );</div><div class="line"></div><div class="line">    $due_date = get_post_meta( $post-&gt;ID,</div><div class="line">        <span class="string">'_schoolpress_homework_due_date'</span>, <span class="number">1</span> );</div><div class="line">    <span class="comment">// output meta data fields</span></div><div class="line">    <span class="meta">?&gt;</span></div><div class="line">    &lt;p&gt;</div><div class="line">    &lt;input type=<span class="string">"checkbox"</span></div><div class="line">    name=<span class="string">"is_required"</span> value=<span class="string">"1"</span> <span class="meta">&lt;?php</span> checked( $is_required, <span class="string">'1'</span> ); <span class="meta">?&gt;</span>&gt;</div><div class="line">    This assignment is required.</div><div class="line">    &lt;/p&gt;</div><div class="line">    &lt;p&gt;</div><div class="line">    Due Date:</div><div class="line">    &lt;input type=<span class="string">"text"</span></div><div class="line">    name=<span class="string">"due_date"</span> id=<span class="string">"due_date"</span> value=<span class="string">"&lt;?php echo $due_date;?&gt;"</span>&gt;</div><div class="line">    &lt;/p&gt;</div><div class="line">    <span class="meta">&lt;?php</span> <span class="comment">// attach jquery date picker to our due_date field<span class="meta">?&gt;</span></span></div><div class="line">    &lt;script&gt;</div><div class="line">    jQuery(document).ready(<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</div><div class="line">        jQuery(<span class="string">'#due_date'</span>).datepicker(&#123;</div><div class="line">            dateFormat : <span class="string">'mm/dd/yy'</span></div><div class="line">        &#125;);</div><div class="line">    &#125;);</div><div class="line">    &lt;/script&gt;</div><div class="line">    <span class="meta">&lt;?php</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// function for saving custom meta data to the database</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">schoolpress_homework_save_post</span><span class="params">( $post_id )</span></span>&#123;</div><div class="line"></div><div class="line">  <span class="comment">// don't save anything if WP is auto saving</span></div><div class="line">  <span class="keyword">if</span> ( defined( <span class="string">'DOING_AUTOSAVE'</span> ) &amp;&amp; DOING_AUTOSAVE )</div><div class="line">      <span class="keyword">return</span> $post_id;</div><div class="line"></div><div class="line">  <span class="comment">// check if correct post type and that the user has correct permissions</span></div><div class="line">  <span class="keyword">if</span> ( <span class="string">'homework'</span> == $_POST[<span class="string">'post_type'</span>] ) &#123;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> ( ! current_user_can( <span class="string">'edit_page'</span>, $post_id ) )</div><div class="line">        <span class="keyword">return</span> $post_id;</div><div class="line"></div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> ( ! current_user_can( <span class="string">'edit_post'</span>, $post_id ) )</div><div class="line">        <span class="keyword">return</span> $post_id;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// update homework meta data</span></div><div class="line">  update_post_meta( $post_id,</div><div class="line">    <span class="string">'_schoolpress_homework_is_required'</span>,</div><div class="line">    $_POST[<span class="string">'is_required'</span>]</div><div class="line">  );</div><div class="line">  update_post_meta( $post_id,</div><div class="line">    <span class="string">'_schoolpress_homework_due_date'</span>,</div><div class="line">    $_POST[<span class="string">'due_date'</span>]</div><div class="line">  );</div><div class="line"></div><div class="line">&#125;</div><div class="line"><span class="comment">// call a custom function to handle saving our meta data</span></div><div class="line">add_action( <span class="string">'save_post'</span>, <span class="string">'schoolpress_homework_save_post'</span> );</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h2 id="Custom-Wrapper-Classes-for-CPTs"><a href="#Custom-Wrapper-Classes-for-CPTs" class="headerlink" title="Custom Wrapper Classes for CPTs"></a>Custom Wrapper Classes for CPTs</h2><p>CPTs are just posts. So you can use a call like <code>get_post($post_id)</code> to get an object of the WP_Post class to work with. For complex CPTs, it helps to create a wrapper class so you can interact with your CPT in a more object-oriented way.</p>
<p>The basic idea is to create a custom-defined PHP class that includes as a property a post object generated from the ID of the CPT post. In addition to storing that post object, the wrapper class also houses methods for all of the functionality related to that CPT.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">/*</div><div class="line">    Class Wrapper for Homework CPT</div><div class="line">    /wp-content/plugins/schoolpress/classes/class.homework.php</div><div class="line">*/</div><div class="line">class Homework &#123;</div><div class="line">    //constructor can take a $post_id</div><div class="line">    function __construct( $post_id = NULL ) &#123;</div><div class="line">        if ( !empty( $post_id ) )</div><div class="line">            $this-&gt;getPost( $post_id );</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    //get the associated post and prepopulate some properties</div><div class="line">    function getPost( $post_id ) &#123;</div><div class="line">        //get post</div><div class="line">        $this-&gt;post = get_post( $post_id );</div><div class="line"></div><div class="line">        //set some properties for easy access</div><div class="line">        if ( !empty( $this-&gt;post ) ) &#123;</div><div class="line">        $this-&gt;id = $this-&gt;post-&gt;ID;</div><div class="line">        $this-&gt;post_id = $this-&gt;post-&gt;ID;</div><div class="line">        $this-&gt;title = $this-&gt;post-&gt;post_title;</div><div class="line">        $this-&gt;teacher_id = $this-&gt;post-&gt;post_author;</div><div class="line">        $this-&gt;content = $this-&gt;post-&gt;post_content;</div><div class="line">        $this-&gt;required = $this-&gt;post-&gt;_schoolpress_homework_is_required;</div><div class="line">        $this-&gt;due_date = $this-&gt;post-&gt;due_date;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        //return post id if found or false if not</div><div class="line">        if ( !empty( $this-&gt;id ) )</div><div class="line">            return $this-&gt;id;</div><div class="line">        else</div><div class="line">            return false;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>The constructor of this class can take a $post_id as a parameter and will pass that to the getPost() method, which attaches a $post object to the class instance and also prepopulates a few properties for easy access. Example 5-5 shows how to instantiate an object for a specific Homework assignment and print out the contents.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">$assignment_id = 1;</div><div class="line">$assignment = new Homework($assignment_id);</div><div class="line">echo &apos;&lt;pre&gt;&apos;;</div><div class="line">print_r($assignment);</div><div class="line">echo &apos;&lt;/pre&gt;&apos;;</div><div class="line">//Outputs:</div><div class="line">/*</div><div class="line">Homework Object</div><div class="line">(</div><div class="line">    [post] =&gt; WP_Post Object</div><div class="line">        (</div><div class="line">            [ID] =&gt; 1</div><div class="line">            [post_author] =&gt; 1</div><div class="line">            [post_date] =&gt; 2013-03-28 14:53:56</div><div class="line">            [post_date_gmt] =&gt; 2013-03-28 14:53:56</div><div class="line">            [post_content] =&gt; This is the assignment...</div><div class="line">            [post_title] =&gt; Assignment #1</div><div class="line">            [post_excerpt] =&gt;</div><div class="line">            [post_status] =&gt; publish</div><div class="line">            [comment_status] =&gt; open</div><div class="line">            [ping_status] =&gt; open</div><div class="line">            [post_password] =&gt;</div><div class="line">            [post_name] =&gt; assignment-1</div><div class="line">            [to_ping] =&gt;</div><div class="line">            [pinged] =&gt;</div><div class="line">            [post_modified] =&gt; 2013-03-28 14:53:56</div><div class="line">            [post_modified_gmt] =&gt; 2013-03-28 14:53:56</div><div class="line">            [post_content_filtered] =&gt;</div><div class="line">            [post_parent] =&gt; 0</div><div class="line">            [guid] =&gt; http://schoolpress.me/?p=1</div><div class="line">            [menu_order] =&gt; 0</div><div class="line">            [post_type] =&gt; homework</div><div class="line">            [post_mime_type] =&gt;</div><div class="line">            [comment_count] =&gt; 3</div><div class="line">            [filter] =&gt; raw</div><div class="line">            [format_content] =&gt;</div><div class="line">        )</div><div class="line"></div><div class="line">    [id] =&gt; 1</div><div class="line">    [post_id] =&gt; 1</div><div class="line">    [title] =&gt; Assignment 1</div><div class="line">    [teacher_id] =&gt; 1</div><div class="line">    [content] =&gt; This is the assignment...</div><div class="line">    [required] =&gt; 1</div><div class="line">    [due_date] =&gt; 2013-11-05</div><div class="line">)</div><div class="line">*/</div></pre></td></tr></table></figure>
<h3 id="Keep-Your-CPTs-and-Taxonomies-Together"><a href="#Keep-Your-CPTs-and-Taxonomies-Together" class="headerlink" title="Keep Your CPTs and Taxonomies Together"></a>Keep Your CPTs and Taxonomies Together</h3><p>Put all of your code to register the CPT and taxonomies in one place. Instead of having one block of code to register a CPT and define the taxonomies and a separate class wrapper to handle working with the CPT, you can simply place your CPT and taxonomy definitions into the class wrapper itself:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line">/*</div><div class="line">    Class Wrapper for Homework CPT with Init Function</div><div class="line">    /wp-content/plugins/schoolpress/classes/class.homework.php</div><div class="line">*/</div><div class="line">class Homework</div><div class="line">&#123;</div><div class="line">        //constructor can take a $post_id</div><div class="line">        function __construct($post_id = NULL)</div><div class="line">        &#123;</div><div class="line">                if(!empty($post_id))</div><div class="line">                        $this-&gt;getPost($post_id);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        //get the associated post and prepopulate some properties</div><div class="line">        function getPost($post_id)</div><div class="line">        &#123;</div><div class="line">                /* snipped */</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        //register CPT and Taxonomies on init</div><div class="line">        function init()</div><div class="line">        &#123;</div><div class="line">                //homework CPT</div><div class="line">                register_post_type(</div><div class="line">                        &apos;homework&apos;,</div><div class="line">                        array(</div><div class="line">                                &apos;labels&apos; =&gt; array(</div><div class="line">                                        &apos;name&apos; =&gt; __( &apos;Homework&apos; ),</div><div class="line">                                        &apos;singular_name&apos; =&gt; __( &apos;Homework&apos; )</div><div class="line">                                ),</div><div class="line">                                &apos;public&apos; =&gt; true,</div><div class="line">                                &apos;has_archive&apos; =&gt; true,</div><div class="line">                        )</div><div class="line">                );</div><div class="line"></div><div class="line">                //subject taxonomy</div><div class="line">                register_taxonomy(</div><div class="line">                         &apos;subject&apos;,</div><div class="line">                         &apos;homework&apos;,</div><div class="line">                         array(</div><div class="line">                                &apos;label&apos; =&gt; __( &apos;Subjects&apos; ),</div><div class="line">                                &apos;rewrite&apos; =&gt; array( &apos;slug&apos; =&gt; &apos;subject&apos; ),</div><div class="line">                                &apos;hierarchical&apos; =&gt; true</div><div class="line">                         )</div><div class="line">                );</div><div class="line">        &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//run the Homework init on init</div><div class="line">add_action(&apos;init&apos;, array(&apos;Homework&apos;, &apos;init&apos;));</div></pre></td></tr></table></figure>
<p>The code is snipped but shows how you would add an <code>init()</code> method to your class that is hooked into the <code>init</code>  action. The <code>init()</code> method then runs all the code required to define the CPT. You could also define other hooks and filters here, with the callbacks linked to other methods in the Homework class.</p>
<p>There are other ways to organize things, but we find that having all of your CPT-related code in one place helps a lot.</p>
<h3 id="Keep-It-in-the-Wrapper-Class"><a href="#Keep-It-in-the-Wrapper-Class" class="headerlink" title="Keep It in the Wrapper Class"></a>Keep It in the Wrapper Class</h3><p>Build all of your CPT-related functionality as methods on the wrapper class. When we registered our “Homework” CPT, a page was added to the dashboard allowing us to “Edit Homework.” Teachers can create homework like any other post, with a title and body content. Teachers can publish the homework when it’s ready to be pushed out to students. All of this post-related functionality is available for free when you create a CPT.</p>
<p>On the other hand, there is a lot of functionality around many CPTs, including our Homework CPT, that needs to be coded up. With a wrapper class in place, this functionality can be added as methods of our Homework class.</p>
<p>For example, one thing we want to do with our homework posts is gather up all the submissions for a particular assignment. Once we have submissions gathered, we can render them in a list or process them in some way. <a href="ch05.html#methodstohomework" title="Example 5-6. Adding methods to the Homework class">Example 5-6</a> shows a couple of methods we can add to our Homework class to gather related submissions and to calculate a flat scale grading curve.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">class Homework</div><div class="line">&#123;</div><div class="line">        /* Snipped constructor and other methods from earlier examples */</div><div class="line"></div><div class="line">        /*</div><div class="line">                Get related submissions.</div><div class="line">                Set $force to true to force the method to get children again.</div><div class="line">        */</div><div class="line">        function getSubmissions($force = false)</div><div class="line">        &#123;</div><div class="line">                //need a post ID to do this</div><div class="line">                if(empty($this-&gt;id))</div><div class="line">                        return array();</div><div class="line"></div><div class="line">                //did we get them already?</div><div class="line">                if(!empty($this-&gt;submissions) &amp;&amp; !$force)</div><div class="line">                        return $this-&gt;submissions;</div><div class="line"></div><div class="line">                //okay get submissions</div><div class="line">                $this-&gt;submissions = get_children(array(</div><div class="line">                        &apos;post_parent&apos; =&gt; $this-&gt;id,</div><div class="line">                        &apos;post_type&apos; =&gt; &apos;submissions&apos;,</div><div class="line">                        &apos;post_status&apos; =&gt; &apos;published&apos;</div><div class="line">                ));</div><div class="line"></div><div class="line">                //make sure submissions is an array at least</div><div class="line">                if(empty($this-&gt;submissions))</div><div class="line">                        $this-&gt;submissions = array();</div><div class="line"></div><div class="line">                return $this-&gt;submissions;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        /*</div><div class="line">                Calculate a grade curve</div><div class="line">        */</div><div class="line">        function doFlatCurve($maxscore = 100)</div><div class="line">        &#123;</div><div class="line">                $this-&gt;getSubmissions();</div><div class="line"></div><div class="line">                //figure out the highest score</div><div class="line">                $highscore = 0;</div><div class="line">                foreach($this-&gt;submissions as $submission)</div><div class="line">                &#123;</div><div class="line">                        $highscore = max($submission-&gt;score, $highscore);</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                //figure out the curve</div><div class="line">                $curve = $maxscore - $highscore;</div><div class="line"></div><div class="line">                //fix lower scores</div><div class="line">                foreach($this-&gt;submissions as $submission)</div><div class="line">                &#123;</div><div class="line">                        update_post_meta(</div><div class="line">                                $submission-&gt;ID,</div><div class="line">                                &quot;score&quot;,</div><div class="line">                                min( $maxscore, $submission-&gt;score + $curve )</div><div class="line">                        );</div><div class="line">                &#125;</div><div class="line">        &#125;</div><div class="line">&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h3 id="Wrapper-Classes-Read-Better"><a href="#Wrapper-Classes-Read-Better" class="headerlink" title="Wrapper Classes Read Better"></a>Wrapper Classes Read Better</h3><p>In addition to organizing your code to make things easier to find, working with wrapper classes also makes your code easier to read and understand.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">//static function of Student class to check if the current user is a student</div><div class="line">if ( Student::is_student() ) &#123;</div><div class="line">    //student defaults to current user</div><div class="line">    $student = new Student();</div><div class="line"></div><div class="line">    //let&apos;s figure out when their next assignment is due</div><div class="line">    $assignment = $student-&gt;getNextAssignment();</div><div class="line"></div><div class="line">    //display info and links</div><div class="line">    if ( !empty( $assignment ) ) &#123;</div><div class="line">    ?&gt;</div><div class="line">    &lt;p&gt;Your next assignment</div><div class="line">    &lt;a href=&quot;&lt;?php echo get_permalink( $assignment-&gt;id );?&gt;&quot;&gt;</div><div class="line">    &lt;?php echo $assignment-&gt;title;?&gt;&lt;/a&gt;</div><div class="line">    for the</div><div class="line">    &lt;a href=&quot;&lt;?php echo get_permalink( $assignment-&gt;class_id );?&gt;&quot;&gt;</div><div class="line">    &lt;?php echo $assignment-&gt;class-&gt;title;?&gt;&lt;/a&gt;</div><div class="line">    class is due on &lt;?php echo $assignment-&gt;getDueDate();?&gt;.&lt;/p&gt;</div><div class="line">    &lt;?php</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>The code would be much more complicated if all of the <code>get_post()</code> calls and loops through arrays of child posts were out in the open. Using an object-oriented approach makes this code more approachable to other developers working with your code.</p>

        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2017-11-05T08:22:17.000Z" itemprop="dateUpdated">2017-11-05 16:22:17</time>
</span><br>


        
        这里可以写作者留言，标签和 hexo 中所有变量及辅助函数等均可调用，示例：<a href="/WordPress/2015-06-05-wordpress-posts.html" target="_blank" rel="external">http://blog.inching.org/WordPress/2015-06-05-wordpress-posts.html</a>
        
    </div>
    <footer>
        <a href="http://blog.inching.org">
            <img src="/img/avatar.png" alt="Cody Fei">
            Cody Fei
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tutorial/">tutorial</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/wordpress/">wordpress</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.inching.org/WordPress/2015-06-05-wordpress-posts.html&title=《WordPress Custom Post Types, Post Metadata, and Taxonomies》 — Balance&pic=http://blog.inching.org/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.inching.org/WordPress/2015-06-05-wordpress-posts.html&title=《WordPress Custom Post Types, Post Metadata, and Taxonomies》 — Balance&source=Custom post types (CPTs) are what really make WordPress a content management ..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.inching.org/WordPress/2015-06-05-wordpress-posts.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《WordPress Custom Post Types, Post Metadata, and Taxonomies》 — Balance&url=http://blog.inching.org/WordPress/2015-06-05-wordpress-posts.html&via=http://blog.inching.org" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.inching.org/WordPress/2015-06-05-wordpress-posts.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/WordPress/2015-06-07-wordpress-members.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">WordPress Users, Roles, and Capabilities</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/WordPress/2015-06-04-wordpress-themes.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">WordPress Themes</h4>
      </a>
    </div>
  
</nav>



    











</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢大爷~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.JPG" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.JPG" data-alipay="/img/alipay.JPG">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top" style="display:none">
        

        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>footer.license</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Cody Fei &copy; 2012 - 2017</span>
            <span style="display:none">
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.inching.org/WordPress/2015-06-05-wordpress-posts.html&title=《WordPress Custom Post Types, Post Metadata, and Taxonomies》 — Balance&pic=http://blog.inching.org/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.inching.org/WordPress/2015-06-05-wordpress-posts.html&title=《WordPress Custom Post Types, Post Metadata, and Taxonomies》 — Balance&source=Custom post types (CPTs) are what really make WordPress a content management ..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.inching.org/WordPress/2015-06-05-wordpress-posts.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《WordPress Custom Post Types, Post Metadata, and Taxonomies》 — Balance&url=http://blog.inching.org/WordPress/2015-06-05-wordpress-posts.html&via=http://blog.inching.org" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.inching.org/WordPress/2015-06-05-wordpress-posts.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACvUlEQVR42u3awYrbQBAE0P3/n95ATgtBStX0NDHh6WS8tqSnhZl2dX99xcf37+Pn65/vPH3+6ZN/nu39u8kVRwceHh7e0a2/ny6/ieQq+V+f7qF4BHh4eHhrvGQzeP9Wcuvvj+n9/ff7eXwfDw8P75/ykuU7L7vfz4yHh4f3f/CSC5+FDi0JDw8P7xN4SRiRg88K8ffrrmcteHh4eAtdpM95vd7fw8PDwzvqqufHpEmWF8r1XeHh4eEt8NrINQ8RkrDjbtld3C4eHh7eAu9WgJuHBXnYUUfGeHh4eFd5eYHbxrt5/LpRWBc7DB4eHl7Jmy/ok3GB/FrJ2MGFYBcPDw8vXifzyDUvrCfx7rWYGA8PD2+Nl3wtD3/zorzdtZLN47G/h4eHh7fAOxsLyNtdSRtsgv9LPo2Hh4e3wDsrndswIh9BOHu4xUwEHh4e3hEvj27zsntSgk/K6Mez4eHh4V3ltYNW+QXy0aj2k/lDx8PDw9vgtUvwpA2WF9z5o8xDZzw8PLxbvLPlO1mm87GAC78JnvB4eHh4C7x8yc4HBdphrFFEm+9+eHh4eFd5yeI+afm3i/utch8PDw9vj9cu2Xl0e5iLLIwp4OHh4d3lTYYGJtvDWburLsHx8PDwrvLOitSzttZZ8NHGwXh4eHjbvEkY0TbGJiFFu8FcyFrw8PDwgr8WS22MTG46L8frnh4eHh7eGu+swJ3f+tkwVj1YgIeHh7fMmxe7+euzWKRuleHh4eFd5X2XRztq0A4iJKV5Eeni4eHhLfAmZXc7LnC2xOcbTE3Cw8PDG/DaCOBsI5n/B9oGGx4eHt42rw0XbgW4dXbShtF4eHh4H8bLo4pbLbFkk7i2MeDh4eGNeZPANLlKG/5GZ8PDw8Nb47ULcXuZ/J0LDS08PDy8Zd7op/5REytvm01GDfDw8PAWeL8AeGScce0ACTcAAAAASUVORK5CYII=" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="/js/main.min.js?v=1.6.17"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.6.17" async></script>










</body>
</html>
