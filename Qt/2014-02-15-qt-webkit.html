<!DOCTYPE html>
<html>
<head>
    
<!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-43567748-2', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<!-- End Google Analytics -->


    

    



    <meta charset="utf-8">
    
    <meta name="google-site-verification" content="true">
    
    
    
    <title>Qt WebKit | Balance | 大道至简</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="webkit,qt">
    <meta name="description" content="Qt WebKit Widgets provides a Web browser engine that makes it easy to embed content from the World Wide Web into your Qt application. 
QtWebKit is based on the Open Source WebKit engine. More informat">
<meta property="og:type" content="article">
<meta property="og:title" content="Qt WebKit">
<meta property="og:url" content="http://blog.inching.org/Qt/2014-02-15-qt-webkit.html">
<meta property="og:site_name" content="Balance">
<meta property="og:description" content="Qt WebKit Widgets provides a Web browser engine that makes it easy to embed content from the World Wide Web into your Qt application. 
QtWebKit is based on the Open Source WebKit engine. More informat">
<meta property="og:updated_time" content="2017-11-05T08:22:17.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Qt WebKit">
<meta name="twitter:description" content="Qt WebKit Widgets provides a Web browser engine that makes it easy to embed content from the World Wide Web into your Qt application. 
QtWebKit is based on the Open Source WebKit engine. More informat">
    
        <link rel="alternate" type="application/atom+xml" title="Balance" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/style/style.css?v=1.6.17">

    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-2846834382442028",
        enable_page_level_ads: true
      });
    </script>

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Cody Fei</h5>
          <a href="mailto:inchingcode@gmail.com" title="inchingcode@gmail.com" class="mail">inchingcode@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                Home
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags/android"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories/Android/"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/inchingorg" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://www.weibo.com/CodyFee" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://www.inesoi.com" target="_blank" >
                <i class="icon icon-lg icon-shopping-bag"></i>
                Shopping Bag
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Qt WebKit</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Qt WebKit</h1>
        <h5 class="subtitle">
            
                <time datetime="2014-02-14T16:00:00.000Z" itemprop="datePublished" class="page-time">
  2014-02-15
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Qt/">Qt</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#发展趋势"><span class="post-toc-text">发展趋势</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Quick-Start"><span class="post-toc-text">Quick Start</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#QtWebKit-Bridge"><span class="post-toc-text">QtWebKit Bridge</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#NPAPI"><span class="post-toc-text">NPAPI</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Relationship-with-QtScript"><span class="post-toc-text">Relationship with QtScript</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Http-Server"><span class="post-toc-text">Http Server</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Accessing-QObjects"><span class="post-toc-text">Accessing QObjects</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Using-Signals-and-Slots"><span class="post-toc-text">Using Signals and Slots</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Signal-to-Function-Connections"><span class="post-toc-text">Signal to Function Connections</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Signal-to-Member-Function-Connections"><span class="post-toc-text">Signal to Member Function Connections</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Signal-to-Named-Member-Function-Connections"><span class="post-toc-text">Signal to Named Member Function Connections</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Emitting-Signals-from-Scripts"><span class="post-toc-text">Emitting Signals from Scripts</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Overloaded-Signals-and-Slots"><span class="post-toc-text">Overloaded Signals and Slots</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Invokable-Methods"><span class="post-toc-text">Invokable Methods</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Accessing-Properties"><span class="post-toc-text">Accessing Properties</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#自定义提示框"><span class="post-toc-text">自定义提示框</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#隐藏滚动条"><span class="post-toc-text">隐藏滚动条</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#scroll-to-bottom"><span class="post-toc-text">scroll to bottom</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Data-Types"><span class="post-toc-text">Data Types</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Numbers"><span class="post-toc-text">Numbers</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Strings"><span class="post-toc-text">Strings</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Date-amp-Time"><span class="post-toc-text">Date & Time</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Regular-Expressions"><span class="post-toc-text">Regular Expressions</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Lists"><span class="post-toc-text">Lists</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Compound-JSON-objects"><span class="post-toc-text">Compound (JSON) objects</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#QVariants"><span class="post-toc-text">QVariants</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#QObjects"><span class="post-toc-text">QObjects</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Pixmaps-and-Images"><span class="post-toc-text">Pixmaps and Images</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#QWebElement"><span class="post-toc-text">QWebElement</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Error-Handling"><span class="post-toc-text">Error Handling</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Architecture-Issues"><span class="post-toc-text">Architecture Issues</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Limiting-the-Scope-of-the-Hybrid-Layer"><span class="post-toc-text">Limiting the Scope of the Hybrid Layer</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Internet-Security"><span class="post-toc-text">Internet Security</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#C-Call-JavaScript"><span class="post-toc-text">C++ Call JavaScript</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Webkit-Qml"><span class="post-toc-text">Webkit Qml</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Quick-Start-1"><span class="post-toc-text">Quick Start</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Tutorial"><span class="post-toc-text">Tutorial</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Example"><span class="post-toc-text">Example</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Qt-WebEngine"><span class="post-toc-text">Qt WebEngine</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Reference"><span class="post-toc-text">Reference</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Example-1"><span class="post-toc-text">Example</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Guide"><span class="post-toc-text">Guide</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#FAQ"><span class="post-toc-text">FAQ</span></a></li></ol></li></ol>
        </nav>
    </aside>
    
<article id="post-qt-webkit"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Qt WebKit</h1>
        <div class="post-meta">
            <time class="post-time" title="2014-02-15 00:00:00" datetime="2014-02-14T16:00:00.000Z"  itemprop="datePublished">2014-02-15</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Qt/">Qt</a></li></ul>



            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p>Qt WebKit Widgets provides a Web browser engine that makes it easy to embed content from the World Wide Web into your Qt application. </p>
<p><a href="https://qt-project.org/doc/qt-5.0/qtwebkit/qtwebkit-module.html" target="_blank" rel="external">QtWebKit</a> is based on the Open Source WebKit engine. More information about WebKit itself can be found on the <a href="https://qt-project.org/doc/qt-5.0/qtdoc/http-webkit-org.html" target="_blank" rel="external">WebKit Open Source Project</a> Web site.</p>
<p><a href="https://qt-project.org/doc/qt-5.0/qtwebkit/qwebview.html" target="_blank" rel="external">QWebView</a> is used to view Web pages. An instance of <a href="qwebview.html">QWebView</a> has one <a href="qwebpage.html">QWebPage</a>. <a href="qwebpage.html">QWebPage</a> provides access to the document structure in a page, describing features such as frames, the navigation history, and the undo/redo stack for editable content.</p>
<p>HTML documents can be nested using frames in a frameset. An individual frame in HTML is represented using the <a href="https://qt-project.org/doc/qt-5.0/qtwebkit/qwebframe.html" target="_blank" rel="external">QWebFrame</a> class. This class includes the bridge to the JavaScript window object and can be painted using <a href="https://qt-project.org/doc/qt-5.0/qtgui/qpainter.html" target="_blank" rel="external">QPainter</a>. Each <a href="qwebpage.html">QWebPage</a> has one <a href="qwebframe.html">QWebFrame</a> object as its main frame, and the main frame may contain many child frames.</p>
<p>Individual elements of an HTML document can be accessed via DOM JavaScript interfaces from within a web page. The equivalent of this API in <a href="https://qt-project.org/doc/qt-5.0/qtwebkit/qtwebkit-module.html" target="_blank" rel="external">QtWebKit</a> is represented by <a href="qwebelement.html">QWebElement</a>. <a href="qwebelement.html">QWebElement</a> objects are obtained using <a href="qwebframe.html">QWebFrame</a>‘s <a href="qwebframe.html#findAllElements">findAllElements()</a> and <a href="qwebframe.html#findFirstElement">findFirstElement()</a> functions with CSS selector queries.</p>
<p>Common web browser features, defaults and other settings can be configured through the QWebSettings class. It is possible to provide defaults for all QWebPage instances through the default settings. Individual attributes can be overidden by the page specific settings object.</p>
<a id="more"></a>
<h2 id="发展趋势"><a href="#发展趋势" class="headerlink" title="发展趋势"></a>发展趋势</h2><p>“我们将在Chromium基础之上建立未来的Web引擎——Qt WebEngine。Qt 5.2发布之后，我们将会集中精力开发新的Qt Web Engine。如果您需要让您的应用或设备支持所有最新最好的HTML5特性，在我们发布了您所需要的API特性时，您就应该考虑移植到Qt WebEngine。第一个完整支持的版本有可能同明年春季的Qt 5.3一起发布。第一个版本我们计划使新的Qt WebEngine模块支持Windows、Mac OS X、Linux和嵌入式Linux。”——<a href="http://blog.qt.digia.com/cn/2013/09/25/introducing-the-qt-webengine/" target="_blank" rel="external">Qt将引入Qt WebEngine | Qt Chinese blog</a></p>
<blockquote>
<p>Be aware that WebKit1 which depends on QtWidgets is now webkitwidgets. webkit is now WebKit2 which depends on QtGui only. Nonetheless there should be a webkit module. 参考：<a href="https://qt-project.org/forums/viewthread/23506" target="_blank" rel="external">WebKit is “gone”</a> 以及<a href="http://twi1ight.org/2013/06/89.html" target="_blank" rel="external">QT 5中webkit的变动</a>。</p>
</blockquote>
<ul>
<li><a href="http://qt-project.org/doc/qt-4.8/qtwebkit.html" target="_blank" rel="external">QtWebKit</a> 2.1 for Symbian^3 when using Qt 4.7.</li>
<li><a href="http://qt-project.org/doc/qt-4.8/qtwebkit.html" target="_blank" rel="external">QtWebKit</a> 2.0, as a standard part of Qt 4.7, for all other platforms when using Qt 4.7.</li>
<li>When using Qt 4.6, the <a href="http://qt-project.org/doc/qt-4.8/qtwebkit.html" target="_blank" rel="external">QtWebKit</a> version of Qt 4.6 is used on all platforms.</li>
<li><a href="http://qt-project.org/doc/qt-5.0/qtwebkit/qtwebkit-module.html" target="_blank" rel="external">QtWebKit</a>  3.0  for Qt 5.0.</li>
</ul>
<p>更新的发展趋势请参考：<a href="http://qt-project.org/wiki/QtWebEngine" target="_blank" rel="external">QtWebEngine</a></p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><p>To include the definitions of the module’s classes, use the following directive:</p>
<p>Qt4:</p>
<pre><code>#include &lt;QtWebKit&gt;
</code></pre><p>Qt5:</p>
<pre><code>#include &lt;QtWebKitWidgets&gt;
</code></pre><p>To link against the module, add this line to your <a href="https://qt-project.org/doc/qt-5.0/qtdoc/qmake-manual.html#qmake" target="_blank" rel="external">qmake</a>.pro file:</p>
<p>Qt4:</p>
<pre><code>QT += webkit
</code></pre><p>Qt5:</p>
<pre><code>QT += webkitwidgets
</code></pre><p>The easiest way to render content is through the QWebView class. As a widget it can be embedded into your forms or a graphics view, and it provides convenience functions for downloading and rendering web sites.</p>
<p><strong>main.cpp:</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QWebView&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QWebSettings&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QApplication&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QDebug&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QDir&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></div><div class="line">&#123;</div><div class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</div><div class="line"></div><div class="line">    QWebSettings* settings = QWebSettings::globalSettings();</div><div class="line"></div><div class="line">    <span class="comment">// 启用调试工具</span></div><div class="line">    settings-&gt;setAttribute(QWebSettings::DeveloperExtrasEnabled, <span class="literal">true</span>);</div><div class="line"></div><div class="line">    QWebView webView;</div><div class="line"></div><div class="line">    <span class="comment">// 启用调试工具</span></div><div class="line">    QWebSettings::globalSettings()-&gt;setAttribute(QWebSettings::DeveloperExtrasEnabled, <span class="literal">true</span>);</div><div class="line"></div><div class="line">    QUrl indexUrl = QUrl(<span class="string">"http://192.168.1.141:8000/demo/#/"</span>);</div><div class="line">    webView.load(indexUrl);</div><div class="line">    webView.resize(<span class="number">320</span>,<span class="number">240</span>);</div><div class="line">    webView.show();</div><div class="line"></div><div class="line">    qDebug() &lt;&lt; <span class="string">"webkit runing"</span>;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> a.exec();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如果你使用的本地文件，可以使用如下方法获取本地文件的路径：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function">QUrl <span class="title">getDefaultIndexUrl</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="comment">// 可执行文件所在的目录</span></div><div class="line">    QDir dirPath = QApplication::applicationDirPath();</div><div class="line"></div><div class="line">    <span class="comment">// 使用 QT Creator 编译出来的可执行程序在 &lt;appname&gt;/debug 下。</span></div><div class="line">    <span class="comment">// cdUp 两次，切换到了 app 所在的目录。</span></div><div class="line">    dirPath.cdUp();</div><div class="line">    dirPath.cdUp();</div><div class="line"></div><div class="line">    <span class="comment">// cd 到 &lt;appname&gt;/www 目录下</span></div><div class="line">    dirPath.cd(QCoreApplication::applicationName()+<span class="string">"/www"</span>);</div><div class="line"></div><div class="line">    <span class="comment">// 获取 ../../&lt;appname&gt;/index.html 的绝对路径</span></div><div class="line">    QString indexUrl = dirPath.absoluteFilePath(<span class="string">"index.html"</span>);</div><div class="line"></div><div class="line">    <span class="comment">// 返回 QUrl 对象</span></div><div class="line">    <span class="keyword">return</span>  QUrl::fromLocalFile(indexUrl);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如果你使用的是资源文件，可以使用如下方法构建 QUrl 对象：</p>
<pre><code>QUrl startURL = QUrl(&quot;qrc:/index.html&quot;);
</code></pre><p><strong>QtwebkitTest.pro:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">QT       += core webkitwidgets widgets</div><div class="line"></div><div class="line">TARGET = QtwebkitTest</div><div class="line">TEMPLATE = app</div><div class="line"></div><div class="line">SOURCES += main.cpp</div><div class="line"></div><div class="line">CONFIG += mobility</div><div class="line">MOBILITY =</div></pre></td></tr></table></figure>
<h2 id="QtWebKit-Bridge"><a href="#QtWebKit-Bridge" class="headerlink" title="QtWebKit Bridge"></a>QtWebKit Bridge</h2><p>The QtWebKit bridge is a mechanism that extends WebKit’s JavaScript environment to access native objects represented as QObjects. It takes advantage of the QObject introspection, a part of the Object Model, which makes it easy to integrate with the dynamic JavaScript environment. For example QObject properties map directly to JavaScript properties.</p>
<p>QtWebkit主要用于以下两个方面：</p>
<ul>
<li>Web Content in Native Applications 应用架构（UI和组件）均用Native代码来实现Webkit主要用于显示来自网络的内容。如一个音乐管理器的音乐库。</li>
<li>Thin Clients 本地代码作为整个Web 框架的外壳，所有的UI都是通过前端技术来实现，使用基于Qt的组件来访问本地资源。An example for such a client is a UI for a video-on-demand service on a TV. The entire content and UI can be kept on the server, served dynamically through HTTP and rendered with WebKit. Additional native components are used to access hardware-specific features like extracting a list of images out of a video stream.</li>
</ul>
<h3 id="NPAPI"><a href="#NPAPI" class="headerlink" title="NPAPI"></a>NPAPI</h3><p>Of course, <a href="https://qt-project.org/doc/qt-5.0/qtwebkit/qtwebkit-module.html" target="_blank" rel="external">QtWebKit</a> is not the only bridge technology out there. NPAPI, for example, is a long-time standard for web-native bridging. Due to Qt’s meta-object system, full applications leveraging web technologies are much easier to develop with the <a href="qtwebkit-module.html">QtWebKit</a> bridge than with NPAPI. NPAPI, however, is better for cross-browser plugins, due to it being an accepted standard.</p>
<p>When developing a plugin for a browser, NPAPI is recommended. When developing a full application utilizing HTML-rendering, the <a href="https://qt-project.org/doc/qt-5.0/qtwebkit/qtwebkit-module.html" target="_blank" rel="external">QtWebKit</a> bridge is recommended.</p>
<h3 id="Relationship-with-QtScript"><a href="#Relationship-with-QtScript" class="headerlink" title="Relationship with QtScript"></a>Relationship with QtScript</h3><p>The <a href="https://qt-project.org/doc/qt-5.0/qtwebkit/qtwebkit-module.html" target="_blank" rel="external">QtWebKit</a> bridge is similar to <a href="https://qt-project.org/doc/qt-5.0/qtscript/qtscript-module.html" target="_blank" rel="external">QtScript</a>, especially for some of the features described in the Making Applications Scriptable page. However, Qt 4.7 does not provide the full <a href="https://qt-project.org/doc/qt-5.0/qtscript/qtscript-module.html" target="_blank" rel="external">QtScript</a> API for web applications. Full support is planned for future versions. You might notice that some of the features described here are an exact copy of the ones described in the Making Applications Scriptable page. That is because the <a href="qtwebkit-module.html">QtWebKit</a> bridge is a subset of that functionality, and this page tries to capture the full capabilities available through the <a href="qtwebkit-module.html">QtWebKit</a> bridge specifically.</p>
<h2 id="Http-Server"><a href="#Http-Server" class="headerlink" title="Http Server"></a>Http Server</h2><ul>
<li><a href="http://doc.qt.digia.com/solutions/4/qtservice/qtservice-example-server.html" target="_blank" rel="external">A simple HTTP Server</a></li>
<li><a href="https://github.com/nikhilm/qhttpserver" target="_blank" rel="external">nikhilm/qhttpserver</a></li>
<li><a href="https://github.com/acossette/pillow" target="_blank" rel="external">acossette/pillow</a> Small, light and fluffy Qt Http Server.</li>
</ul>
<h2 id="Accessing-QObjects"><a href="#Accessing-QObjects" class="headerlink" title="Accessing QObjects"></a>Accessing QObjects</h2><p>By default, no <a href="https://qt-project.org/doc/qt-5.0/qtwebkit/qtwebkit-bridge.html#qobjects" target="_blank" rel="external">QObjects</a> are accessible through the web environment, for security reasons. When a web application wants to access a native <a href="https://qt-project.org/doc/qt-5.0/qtcore/qobject.html" target="_blank" rel="external">QObject</a>, it must explicitly grant access to this <a href="https://qt-project.org/doc/qt-5.0/qtcore/qobject.html" target="_blank" rel="external">QObject</a>, using the following call:</p>
<pre><code>// ...
QWebFrame *frame = myWebPage-&gt;mainFrame();
frame-&gt;addToJavaScriptWindowObject(&quot;someNameForMyObject&quot;, myObject);
// ...
</code></pre><p>See <a href="https://qt-project.org/doc/qt-5.0/qtwebkit/qwebframe.html#addToJavaScriptWindowObject" target="_blank" rel="external">QWebFrame::addToJavaScriptWindowObject</a>() for more information.</p>
<p>If you want to ensure that your QObjects remain accessible after loading a new URL, you should add them in a slot connected to the <code>javaScriptWindowObjectCleared()</code> signal.</p>
<pre><code>QWebFrame *mainFrame = webview-&gt;page()-&gt;mainFrame();

// sltReBind用于把QtObject重新加入到Web环境。
connect(mainFrame, SIGNAL(javaScriptWindowObjectCleared()),
        this, SLOT(sltReBind()));
mainFrame-&gt;addToJavaScriptWindowObject(&quot;obj&quot;, this, QScriptEngine::QtOwnership);
</code></pre><p>If Javascript is not enabled for this page, then this method does nothing.</p>
<h3 id="Using-Signals-and-Slots"><a href="#Using-Signals-and-Slots" class="headerlink" title="Using Signals and Slots"></a>Using Signals and Slots</h3><p>The <a href="https://qt-project.org/doc/qt-5.0/qtwebkit/qtwebkit-module.html" target="_blank" rel="external">QtWebKit</a> bridge adapts Qt’s central <a href="https://qt-project.org/doc/qt-5.0/qtcore/signalsandslots.html#signals-and-slots" target="_blank" rel="external">Signals and Slots</a> feature for scripting. There are three principal ways to use signals and slots with the <a href="qtwebkit-module.html">QtWebKit</a> bridge:</p>
<ul>
<li><strong>Hybrid C++/script</strong>: C++ application code connects a signal to a script function. This approach is useful if you have a <a href="https://qt-project.org/doc/qt-5.0/qtcore/qobject.html" target="_blank" rel="external">QObject</a> but don’t want to expose the object itself to the scripting environment. You just want to define how the script responds to a signal and leave it up to the C++ side of your application to establish the connection between the C++ signal and the JavaScript slot.</li>
<li><strong>Hybrid script/C++</strong>: A script can connect signals and slots to establish connections between pre-defined objects that the application exposes to the scripting environment. In this scenario, the slots themselves are still written in C++, but the definition of the connections is fully dynamic (script-defined).</li>
<li><strong>Purely script-defined</strong>: A script can both define signal handler functions (effectively “slots written in JavaScript”), <em>and</em> set up the connections that utilize those handlers. For example, a script can define a function that will handle the <a href="https://qt-project.org/doc/qt-5.0/qtwidgets/qlineedit.html#returnPressed" target="_blank" rel="external">QLineEdit::returnPressed</a>() signal, and then connect that signal to the script function.</li>
</ul>
<p>Note that <a href="https://qt-project.org/doc/qt-5.0/qtscript/qtscript-module.html" target="_blank" rel="external">QtScript</a> functions such as qScriptConnect are unavilable in the web environment.</p>
<h3 id="Signal-to-Function-Connections"><a href="#Signal-to-Function-Connections" class="headerlink" title="Signal to Function Connections"></a>Signal to Function Connections</h3><pre><code>function myInterestingScriptFunction() { ... }
 ...
myQObject.somethingChanged.connect(myInterestingScriptFunction);
</code></pre><p>The call to connect() establishes a connection between the signal somethingChanged and the slot myInterestingScriptFunction. Whenever the object myObject emits the signal somethingChanged, the slot myInterestingScriptFunction gets called automatically.</p>
<p>The argument of connect() can be any JavaScript function as in the above example or a slot of a <a href="https://qt-project.org/doc/qt-5.0/qtcore/qobject.html" target="_blank" rel="external">QObject</a> as in the following example:</p>
<pre><code>myQObject.somethingChanged.connect(myOtherQObject.doSomething);
</code></pre><p>When the argument is a slot of a <a href="https://qt-project.org/doc/qt-5.0/qtcore/qobject.html" target="_blank" rel="external">QObject</a>, the argument types of the signal and the slot do not have to be compatible. If possible, the <a href="qtwebkit-module.html">QtWebKit</a> bridge converts the signal arguments such that they match the slot argument.</p>
<p>To disconnect a slot from a signal, you call the signal’s disconnect() function with the slot as its argument:</p>
<pre><code>myQObject.somethingChanged.disconnect(myInterestingFunction);
myQObject.somethingChanged.disconnect(myOtherQObject.doSomething);
</code></pre><p>When a script function is invoked in response to a signal, the <code>this</code> object will be the Global Object.</p>
<h3 id="Signal-to-Member-Function-Connections"><a href="#Signal-to-Member-Function-Connections" class="headerlink" title="Signal to Member Function Connections"></a>Signal to Member Function Connections</h3><pre><code>myQObject.somethingChanged.connect(thisObject, function)
</code></pre><p>The call to connect() establishes a connection between the signal somethingChanged and the slot function. Whenever the object myObject emits the signal somethingChanged, the slot function of the object thisObject gets called automatically. Let’s illustrate this with an example.</p>
<p>If you have a push button in a form, you typically want the form to do something in response to the button’s clicked signal. The call to connect() makes sure that the function onClicked() is called whenever you click on the push button, that is, whenever the the signal clicked() is emitted by myButton. The slot onClicked() prints the value of x as stored in the form.</p>
<pre><code>var form = { x: 123 };
var onClicked = function() { print(this.x); };
myButton.clicked.connect(form, onClicked);
</code></pre><p>To disconnect a slot from a signal, you pass the same arguments to disconnect() as you passed to connect(). In general, this looks as follows:</p>
<pre><code>myQObject.somethingChanged.disconnect(thisObject, function);
</code></pre><h3 id="Signal-to-Named-Member-Function-Connections"><a href="#Signal-to-Named-Member-Function-Connections" class="headerlink" title="Signal to Named Member Function Connections"></a>Signal to Named Member Function Connections</h3><pre><code>myQObject.somethingChanged.connect(thisObject, &quot;functionName&quot;)
</code></pre><p>This form of the connect() function requires that the first argument thisObject is the object that will be bound to this when the function functionName is invoked in response to the signal somethingChanged. The second argument functionName specifies the name of a function that is connected to the signal. It refers to a member function of the object thisObject.</p>
<p>Note that the function is resolved when the connection is made, not when the signal is emitted.</p>
<pre><code>var obj = { x: 123, fun: function() { print(this.x); } };
myQObject.somethingChanged.connect(obj, &quot;fun&quot;);
</code></pre><p>To disconnect from the signal, pass the same arguments to disconnect() as you passed to connect:</p>
<pre><code>myQObject.somethingChanged.disconnect(thisObject, &quot;functionName&quot;);
</code></pre><h3 id="Emitting-Signals-from-Scripts"><a href="#Emitting-Signals-from-Scripts" class="headerlink" title="Emitting Signals from Scripts"></a>Emitting Signals from Scripts</h3><p>To emit a signal from script code, you simply invoke the signal function, passing the relevant arguments:</p>
<pre><code>myQObject.somethingChanged(&quot;hello&quot;);
</code></pre><p>It is currently not possible to define a new signal in a script; i.e., all signals must be defined by C++ classes.</p>
<h3 id="Overloaded-Signals-and-Slots"><a href="#Overloaded-Signals-and-Slots" class="headerlink" title="Overloaded Signals and Slots"></a>Overloaded Signals and Slots</h3><p>When a signal or slot is overloaded, the <a href="https://qt-project.org/doc/qt-5.0/qtwebkit/qtwebkit-module.html" target="_blank" rel="external">QtWebKit</a> bridge will attempt to pick the right overload based on the actual types of the <a href="https://qt-project.org/doc/qt-5.0/qtscript/qscriptvalue.html" target="_blank" rel="external">QScriptValue</a> arguments involved in the function invocation. For example, if your class has slots myOverloadedSlot(int) and myOverloadedSlot(QString), the following script code will behave reasonably:</p>
<pre><code>myQObject.myOverloadedSlot(10);   // will call the int overload
myQObject.myOverloadedSlot(&quot;10&quot;); // will call the QString overload
</code></pre><p>You can specify a particular overload by using array-style property access with the <a href="https://qt-project.org/doc/qt-5.0/qtcore/qmetaobject.html#normalizedSignature" target="_blank" rel="external">normalized signature</a> of the C++ function as the property name:</p>
<pre><code>myQObject[&apos;myOverloadedSlot(int)&apos;](&quot;10&quot;);   // call int overload; the argument is converted to an int
myQObject[&apos;myOverloadedSlot(QString)&apos;](10); // call QString overload; the argument is converted to a string
</code></pre><p>If the overloads have different number of arguments, the <a href="qtwebkit-module.html">QtWebKit</a> bridge will pick the overload with the argument count that best matches the actual number of arguments passed to the slot.</p>
<p>For overloaded signals, JavaScript will throw an error if you try to connect to the signal by name; you have to refer to the signal with the full normalized signature of the particular overload you want to connect to.</p>
<h3 id="Invokable-Methods"><a href="#Invokable-Methods" class="headerlink" title="Invokable Methods"></a>Invokable Methods</h3><p>Both slots and signals are invokable from scripts by default. In addition, it is also possible to define a method that is invokable from scripts, although the method is neither a signal nor a slot. This is especially useful for functions with return types, as slots normally do not return anything (it would be meaningless to return a value from a slot, as the connected signals cannot handle return values). To make a non-slot method invokable, simply add the <a href="https://qt-project.org/doc/qt-5.0/qtcore/qobject.html#Q_INVOKABLE" target="_blank" rel="external">Q_INVOKABLE</a> macro before its definition:</p>
<pre><code>class MyObject : public [QObject](https://qt-project.org/doc/qt-5.0/qtcore/qobject.html)
{
    Q_OBJECT

public:
    Q_INVOKABLE void thisMethodIsInvokableInJavaScript();
    void thisMethodIsNotInvokableInJavaScript();

    ...
};
</code></pre><h3 id="Accessing-Properties"><a href="#Accessing-Properties" class="headerlink" title="Accessing Properties"></a>Accessing Properties</h3><p>The properties of a <a href="https://qt-project.org/doc/qt-5.0/qtcore/qobject.html" target="_blank" rel="external">QObject</a> are available as properties of the corresponding JavaScript object. When you manipulate a property in script code, the C++ get/set method for that property will automatically be invoked. For example, if your C++ class has a property declared as follows:</p>
<pre><code>Q_PROPERTY(bool enabled READ enabled WRITE setEnabled)
</code></pre><p>then script code can do things like the following:</p>
<pre><code>myQObject.enabled = true;

...

myQObject.enabled = !myQObject.enabled;
</code></pre><h3 id="自定义提示框"><a href="#自定义提示框" class="headerlink" title="自定义提示框"></a>自定义提示框</h3><pre><code>class MyWebPage : public QWebPage{
    public:
        MyWebPage(QObject *parent):QWebPage(parent){}
        void javaScriptAlert(QWebFrame *originatingFrame, const QString &amp;msg)
        {
            QMessageBox::information(this-&gt;view(), &quot;JavaScript Alert - &quot;, msg);
        }
        bool javaScriptConfirm(QWebFrame *originatingFrame, const QString &amp;msg)
        {
            return QMessageBox::Yes == QMessageBox::information(this-&gt;view(), &quot;JavaScript Confirm - &quot;, msg, QMessageBox::Yes, QMessageBox::No);
        }
        bool javaScriptPrompt(QWebFrame *originatingFrame, const QString &amp;msg, const QString &amp;defaultValue, QString *result)
        {
            bool isOk = false;
            *result = QInputDialog::getText(view(), &quot;JavaScript Prompt - &quot;, msg, QLineEdit::Normal, defaultValue, &amp;isOk);
            return isOk;
        }
};
</code></pre><p>在WevView的构造函数中指定该 WebPage：</p>
<pre><code>MyWebView(QWidget *parent):QWebView(parent){
        setPage(new MyWebPage(this));
    }
</code></pre><h3 id="隐藏滚动条"><a href="#隐藏滚动条" class="headerlink" title="隐藏滚动条"></a>隐藏滚动条</h3><p>要隐藏一个QWebView的滚动条，就这样做：</p>
<pre><code>view-&gt;page()-&gt;mainFrame()-&gt;setScrollBarPolicy(Qt::Horizontal, Qt::ScrollBarAlwaysOff);
view-&gt;page()-&gt;mainFrame()-&gt;setScrollBarPolicy(Qt::Vertical, Qt::ScrollBarAlwaysOff);
</code></pre><p>参考：<a href="http://developer.nokia.com/community/discussion/showthread.php/212357-How-to-disable-the-scrollbar-of-QWebView" target="_blank" rel="external">How to disable the scrollbar of QWebView</a></p>
<h3 id="scroll-to-bottom"><a href="#scroll-to-bottom" class="headerlink" title="scroll to bottom"></a>scroll to bottom</h3><p>How Can I auto scroll to bottom of page using QWebView?</p>
<pre><code>webView-&gt;page()-&gt;mainFrame()-&gt;setScrollBarValue(Qt::Vertical, webView-&gt;page()-&gt;mainFrame()-&gt;scrollBarMaximum(Qt::Vertical));
</code></pre><p>或者：</p>
<pre><code>mainFrame()-&gt;scroll(size.width(), size.height());
</code></pre><p>参考： <a href="http://www.qtcentre.org/threads/30047-QWebView-autoscroll-to-bottom" target="_blank" rel="external">QWebView autoscroll to bottom</a></p>
<p>或者：</p>
<pre><code>QPoint currentPosition = webView-&gt;page()-&gt;mainFrame()-&gt;scrollPosition();
if (currentPosition.y() == webView-&gt;page()-&gt;mainFrame()-&gt;scrollBarMinimum(Qt::Vertical))
{
  qDebug() &lt;&lt; &quot;Start Scroll Position&quot;;
}
if (currentPosition.y() == webView-&gt;page()-&gt;mainFrame()-&gt;scrollBarMaximum(Qt::Vertical))
{
  qDebug() &lt;&lt; &quot;End Scroll Position&quot;;
}
</code></pre><p>参考：<a href="http://qt-project.org/forums/viewthread/21250" target="_blank" rel="external">QWebView - Scrolling / PageDown</a></p>
<h2 id="Data-Types"><a href="#Data-Types" class="headerlink" title="Data Types"></a>Data Types</h2><p>When calling slots, receiving signals or accessing properties, usually some payload is involved. For example, a property “text” might return a QString parameter. The QtWebKit bridge does the job of converting between a given JavaScript data-type, and the expected or given Qt type. Each Qt type has a coresponding set of rules of how JavaScript treats it.</p>
<p>The data type conversions are also applicable for the data returned from non-void invokable methods.</p>
<h3 id="Numbers"><a href="#Numbers" class="headerlink" title="Numbers"></a>Numbers</h3><p>All Qt numeric data types are converted to or from a JavaScript number. These include int, short, float, double, and the portable Qt types (qreal, qint etc). A special case is <a href="https://qt-project.org/doc/qt-5.0/qtcore/qchar.html" target="_blank" rel="external">QChar</a>. If a slot expects a <a href="https://qt-project.org/doc/qt-5.0/qtcore/qchar.html" target="_blank" rel="external">QChar</a>, the <a href="qtwebkit-module.html">QtWebKit</a> bridge uses the Unicode value in case of a number and the first character in case of a string.</p>
<p>Note that non-standard (typedef’ed) number types are not automatically converted to or from a JavaScript number - we suggest to use standard number types for signals, slots and properties.</p>
<p>When a non-number is passed as an argument to a method or property that expects a number, the appropriate JavaScript conversion function (parseInt / parseFloat) is used.</p>
<h3 id="Strings"><a href="#Strings" class="headerlink" title="Strings"></a>Strings</h3><p>When JavaScript accesses methods or properties that expect a <a href="https://qt-project.org/doc/qt-5.0/qtcore/qstring.html" target="_blank" rel="external">QString</a>, the <a href="qtwebkit-module.html">QtWebKit</a> bridge will automatically convert the value to a string (if it is not already a string), using the built-in JavaScript toString method.</p>
<p>When a <a href="https://qt-project.org/doc/qt-5.0/qtcore/qstring.html" target="_blank" rel="external">QString</a> is passed to JavaScript from a signal or a property, the <a href="qtwebkit-module.html">QtWebKit</a> bridge converts it into a JavaScript string.</p>
<h3 id="Date-amp-Time"><a href="#Date-amp-Time" class="headerlink" title="Date &amp; Time"></a>Date &amp; Time</h3><p>Both <a href="https://qt-project.org/doc/qt-5.0/qtcore/qdate.html" target="_blank" rel="external">QDate</a>, <a href="https://qt-project.org/doc/qt-5.0/qtcore/qtime.html" target="_blank" rel="external">QTime</a> and <a href="https://qt-project.org/doc/qt-5.0/qtcore/qdatetime.html" target="_blank" rel="external">QDateTime</a> are automatically translated to or from the JavaScript Date object. If a number is passed as an argument to a method that expects one of the date/time types, the <a href="qtwebkit-module.html">QtWebKit</a> bridge treats it as a timestamp. If a sting is passed, <a href="qtwebkit-module.html">QtWebKit</a> tries the different Qt date parsing functions to perform the right translation.</p>
<h3 id="Regular-Expressions"><a href="#Regular-Expressions" class="headerlink" title="Regular Expressions"></a>Regular Expressions</h3><p>The <a href="https://qt-project.org/doc/qt-5.0/qtwebkit/qtwebkit-module.html" target="_blank" rel="external">QtWebKit</a> bridge automatically converts a JavaScript RegEx object to a <a href="https://qt-project.org/doc/qt-5.0/qtcore/qregexp.html" target="_blank" rel="external">QRegExp</a>. If a string is passed to a method expecting a <a href="https://qt-project.org/doc/qt-5.0/qtcore/qregexp.html" target="_blank" rel="external">QRegExp</a>, the string is converted to a <a href="https://qt-project.org/doc/qt-5.0/qtcore/qregexp.html" target="_blank" rel="external">QRegExp</a>.</p>
<h3 id="Lists"><a href="#Lists" class="headerlink" title="Lists"></a>Lists</h3><p>The <a href="https://qt-project.org/doc/qt-5.0/qtwebkit/qtwebkit-module.html" target="_blank" rel="external">QtWebKit</a> bridge treats several types of lists in a special way: <a href="https://qt-project.org/doc/qt-5.0/qtcore/qvariant.html#QVariantList-typedef" target="_blank" rel="external">QVariantList</a>, <a href="https://qt-project.org/doc/qt-5.0/qtcore/qstringlist.html" target="_blank" rel="external">QStringList</a>, <a href="https://qt-project.org/doc/qt-5.0/qtcore/qobject.html#QObjectList-typedef" target="_blank" rel="external">QObjectList</a> and <a href="https://qt-project.org/doc/qt-5.0/qtcore/qlist.html" target="_blank" rel="external">QList</a><int>. When a slot or property expects one of those list types, the <a href="qtwebkit-module.html">QtWebKit</a> bridge tries to convert a JavaScript array into that type, converting each of the array’s elements to the single-element type of the list.</int></p>
<p>The most useful type of list is <a href="https://qt-project.org/doc/qt-5.0/qtcore/qvariant.html#QVariantList-typedef" target="_blank" rel="external">QVariantList</a>, which can be converted to and from any JavaScript array.</p>
<h3 id="Compound-JSON-objects"><a href="#Compound-JSON-objects" class="headerlink" title="Compound (JSON) objects"></a>Compound (JSON) objects</h3><p>JavaScript compound objects, also known as JSON objects, are variables that hold a list of key-value pairs, where all the keys are strings and the values can have any type. This translates very well to <a href="https://qt-project.org/doc/qt-5.0/qtcore/qvariant.html#QVariantMap-typedef" target="_blank" rel="external">QVariantMap</a>, which is nothing more than a <a href="https://qt-project.org/doc/qt-5.0/qtcore/qmap.html" target="_blank" rel="external">QMap</a> from <a href="https://qt-project.org/doc/qt-5.0/qtcore/qstring.html" target="_blank" rel="external">QString</a> to <a href="https://qt-project.org/doc/qt-5.0/qtcore/qvariant.html" target="_blank" rel="external">QVariant</a>.</p>
<p>The seamless conversion between JSON objects and <a href="https://qt-project.org/doc/qt-5.0/qtcore/qvariant.html#QVariantMap-typedef" target="_blank" rel="external">QVariantMap</a> allows for a very convenient way of passing arbitrary structured data between C++ and the JavaScript environment. If the native <a href="https://qt-project.org/doc/qt-5.0/qtcore/qobject.html" target="_blank" rel="external">QObject</a> makes sure that compound values are converted to <a href="https://qt-project.org/doc/qt-5.0/qtcore/qvariant.html#QVariantMap-typedef" target="_blank" rel="external">QVariantMap</a>s and <a href="https://qt-project.org/doc/qt-5.0/qtcore/qvariant.html#QVariantList-typedef" target="_blank" rel="external">QVariantList</a>s, JavaScript is guaranteed to receive them in a meaningful way.</p>
<p>Note that types that are not supported by JSON, such as JavaScript functions and getters/setters, are not converted.</p>
<ul>
<li><a href="http://qt-project.org/doc/qt-5/json.html" target="_blank" rel="external">JSON Support in Qt | QtCore 5.2 | Documentation | Qt Project</a></li>
<li><a href="http://qjson.sourceforge.net/usage/" target="_blank" rel="external">Usage - QJson</a></li>
<li><a href="https://github.com/da4c30ff/qt-json" target="_blank" rel="external">da4c30ff/qt-json</a></li>
</ul>
<h3 id="QVariants"><a href="#QVariants" class="headerlink" title="QVariants"></a>QVariants</h3><p>When a slot or property accepts a <a href="https://qt-project.org/doc/qt-5.0/qtcore/qvariant.html" target="_blank" rel="external">QVariant</a>, the <a href="qtwebkit-module.html">QtWebKit</a> bridge creates a <a href="https://qt-project.org/doc/qt-5.0/qtcore/qvariant.html" target="_blank" rel="external">QVariant</a> that best matches the argument passed by JavaScript. A string, for example, becomes a <a href="https://qt-project.org/doc/qt-5.0/qtcore/qvariant.html" target="_blank" rel="external">QVariant</a> holding a <a href="https://qt-project.org/doc/qt-5.0/qtcore/qstring.html" target="_blank" rel="external">QString</a>, a normal JSON object becomes a <a href="https://qt-project.org/doc/qt-5.0/qtcore/qvariant.html#QVariantMap-typedef" target="_blank" rel="external">QVariantMap</a>, and a JavaScript array becomes a <a href="https://qt-project.org/doc/qt-5.0/qtcore/qvariant.html#QVariantList-typedef" target="_blank" rel="external">QVariantList</a>.</p>
<p>Using <a href="https://qt-project.org/doc/qt-5.0/qtcore/qvariant.html" target="_blank" rel="external">QVariant</a>s generously in C++ in that way makes C++ programming feel a bit more like JavaScript programming, as it adds another level of indirection. Passing <a href="https://qt-project.org/doc/qt-5.0/qtcore/qvariant.html" target="_blank" rel="external">QVariant</a>s around like this is very flexible. The program can figure out the type of argument at runtime just like JavaScript would do. But doing so also takes away the type safety and robustness of C++. We recommended to use <a href="https://qt-project.org/doc/qt-5.0/qtcore/qvariant.html" target="_blank" rel="external">QVariant</a>s only for high-level functions, and to keep most of your <a href="https://qt-project.org/doc/qt-5.0/qtcore/qobject.html" target="_blank" rel="external">QObject</a>s type-safe.</p>
<h3 id="QObjects"><a href="#QObjects" class="headerlink" title="QObjects"></a>QObjects</h3><p>Pointers to a <a href="https://qt-project.org/doc/qt-5.0/qtcore/qobject.html" target="_blank" rel="external">QObject</a> or a <a href="https://qt-project.org/doc/qt-5.0/qtwidgets/qwidget.html" target="_blank" rel="external">QWidget</a> can be used in signals, slots and properties. This object can then be used like an object that is exposed directly. Its slots can be invoked, its signals connected to, etc. However, this functionality is fairly limited - the type used has to be <a href="https://qt-project.org/doc/qt-5.0/qtcore/qobject.html" target="_blank" rel="external">QObject</a><em> or <a href="https://qt-project.org/doc/qt-5.0/qtwidgets/qwidget.html" target="_blank" rel="external">QWidget</a></em>. If the type specified is a pointer to a non-<a href="https://qt-project.org/doc/qt-5.0/qtwidgets/qwidget.html" target="_blank" rel="external">QWidget</a> subclass of <a href="https://qt-project.org/doc/qt-5.0/qtcore/qobject.html" target="_blank" rel="external">QObject</a>, the <a href="qtwebkit-module.html">QtWebKit</a> bridge does not recognize it as a <a href="https://qt-project.org/doc/qt-5.0/qtcore/qobject.html" target="_blank" rel="external">QObject</a>.</p>
<p>In general its advised to use care when passing <a href="https://qt-project.org/doc/qt-5.0/qtcore/qobject.html" target="_blank" rel="external">QObject</a>s as arguments, as those objects don’t become owned by the JavaScript engine; That means that the application developer has to be extra careful not to try to access <a href="https://qt-project.org/doc/qt-5.0/qtcore/qobject.html" target="_blank" rel="external">QObject</a>s that have already been deleted by the native environment.</p>
<h3 id="Pixmaps-and-Images"><a href="#Pixmaps-and-Images" class="headerlink" title="Pixmaps and Images"></a>Pixmaps and Images</h3><p>The <a href="https://qt-project.org/doc/qt-5.0/qtwebkit/qtwebkit-module.html" target="_blank" rel="external">QtWebKit</a> bridge handles <a href="https://qt-project.org/doc/qt-5.0/qtgui/qpixmap.html" target="_blank" rel="external">QPixmap</a>s and <a href="https://qt-project.org/doc/qt-5.0/qtgui/qimage.html" target="_blank" rel="external">QImage</a>s in a special way. Since <a href="qtwebkit-module.html">QtWebKit</a> stores <a href="https://qt-project.org/doc/qt-5.0/qtgui/qpixmap.html" target="_blank" rel="external">QPixmap</a>s to represent HTML images, <a href="https://qt-project.org/doc/qt-5.0/qtgui/qpixmap.html" target="_blank" rel="external">QPixmap</a>s coming from the native environment can be used directly inside WebKit. A <a href="https://qt-project.org/doc/qt-5.0/qtgui/qimage.html" target="_blank" rel="external">QImage</a> or a <a href="https://qt-project.org/doc/qt-5.0/qtgui/qpixmap.html" target="_blank" rel="external">QPixmap</a> coming from Qt is converted to an intermediate JavaScript object, which can be represented like this:</p>
<pre><code>{
    width: ...,
    height: ...,
    toDataURL: function() { ... },
    assignToHTMLImageElement: function(element) { ... }
    toImageData: function() { ... }
}
</code></pre><p>The JavaScript environment can then use the pixmap from Qt and display it inside the HTML environment, by assigning it to an existing <img> element with assignToHTMLImageElement(). It can also use the toDataURL() function, which allows using the pixmap as the src attribute of an image or as a background-image URL. Note that the toDataURL() function is costly and should be used with caution. It can also use the toImageData() function to convert the pixmap to a JavaScript ImageData object.</p>
<p>Example code:</p>
<p>C++:</p>
<pre><code>class MyObject : QObject {
    Q_OBJECT
    Q_PROPERTY(QPixmap myPixmap READ getPixmap)

public:
    QPixmap getPixmap() const;
};

/* ... */

MyObject myObject;
myWebPage.mainFrame()-&gt;addToJavaScriptWindowObject(&quot;myObject&quot;, &amp;myObject);
</code></pre><p>HTML:</p>
<pre><code>&lt;html&gt;
    &lt;head&gt;
        &lt;script&gt;
            function loadImage()
            {
                myObject.myPixmap.assignToHTMLImageElement(document.getElementById(&quot;imageElement&quot;));
                var context = document.getElementById(&quot;canvasElement&quot;).getContext(&quot;2d&quot;);
                context.putImageData(myObject.myPixmap.toImageData());
            }
        &lt;/script&gt;
    &lt;/head&gt;
    &lt;body onload=&quot;loadImage()&quot;&gt;
        &lt;img id=&quot;imageElement&quot; width=&quot;300&quot; height=&quot;200&quot; /&gt;
        &lt;canvas id=&quot;canvasElement&quot; width=&quot;300&quot; height=&quot;200&quot; /&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre><p>When a Qt object expects a <a href="https://qt-project.org/doc/qt-5.0/qtgui/qimage.html" target="_blank" rel="external">QImage</a> or a <a href="https://qt-project.org/doc/qt-5.0/qtgui/qpixmap.html" target="_blank" rel="external">QPixmap</a> as input, and the argument passed is an HTML image element, the <a href="qtwebkit-module.html">QtWebKit</a> bridge would convert the pixmap assigned to that image element into a <a href="https://qt-project.org/doc/qt-5.0/qtgui/qpixmap.html" target="_blank" rel="external">QPixmap</a> or a <a href="https://qt-project.org/doc/qt-5.0/qtgui/qimage.html" target="_blank" rel="external">QImage</a>.</p>
<h2 id="QWebElement"><a href="#QWebElement" class="headerlink" title="QWebElement"></a>QWebElement</h2><p>A signal, slot or property that expects or returns a QWebElement can work seamlessly with JavaScript references to DOM elements. The JavaScript environment can select DOM elements, keep them in variables, then pass them to Qt as a QWebElement, and receive them back. Example:</p>
<p>C++:</p>
<pre><code>class MyObject : QObject {
     Q_OBJECT

 public slots:
     void doSomethingWithWebElement(const QWebElement&amp;);
 };

 /* ... */

 MyObject myObject;
 myWebPage.mainFrame()-&gt;addToJavaScriptWindowObject(&quot;myObject&quot;, &amp;myObject);
</code></pre><p>HTML:</p>
<pre><code>&lt;html&gt;
  &lt;head&gt;
      &lt;script&gt;
          function runExample() {
             myObject.doSomethingWithWebElement(document.getElementById(&quot;someElement&quot;));
          }
     &lt;/script&gt;
  &lt;/head&gt;
  &lt;body onload=&quot;runExample()&quot;&gt;
      &lt;span id=&quot;someElement&quot;&gt;Text&lt;/span&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre><p>This is specifically useful to create custom renderers or extensions to the web environment. Instead of forcing Qt to select the element, the web environment selects the element and then sends the selected element directly to Qt.</p>
<p><strong>Note that QWebElements are not thread safe - an object handling them has to live in the UI thread.</strong></p>
<h2 id="Error-Handling"><a href="#Error-Handling" class="headerlink" title="Error Handling"></a>Error Handling</h2><p>When connect() or disconnect() succeeds, the function will return undefined; otherwise, it will throw a script exception. You can obtain an error message from the resulting Error object. Example:</p>
<pre><code>try {
    myQObject.somethingChanged.connect(myQObject, &quot;slotThatDoesntExist&quot;);
} catch (e) {
    print(e);
}
</code></pre><h2 id="Architecture-Issues"><a href="#Architecture-Issues" class="headerlink" title="Architecture Issues"></a>Architecture Issues</h2><h3 id="Limiting-the-Scope-of-the-Hybrid-Layer"><a href="#Limiting-the-Scope-of-the-Hybrid-Layer" class="headerlink" title="Limiting the Scope of the Hybrid Layer"></a>Limiting the Scope of the Hybrid Layer</h3><p>When using QtWebKit’s hybrid features, it is a common pitfall to make the API exposed to JavaScript very rich and use all its features. This, however, leads to complexity and can create bugs that are hard to find. Instead, it is advisable to keep the hybrid layer small and manageable: create a gate only when there’s an actual need for it, i.e. there’s a new native enabler that requires a direct interface to the application layer. Sometimes new functionality is better handled internally in the native layer or in the web layer; simplicity is your friend.</p>
<p>This usually becomes more apparent when the hybrid layer can create or destroy objects, or uses signals, slots or properties with a QObject* argument. It is advised to be very careful and to treat an exposed QObject as a system - with careful attention to memory management and object ownership.</p>
<h3 id="Internet-Security"><a href="#Internet-Security" class="headerlink" title="Internet Security"></a>Internet Security</h3><p>When exposing native objects to an open web environment, it is important to understand the security implications. Think whether the exposed object enables the web environment access things that shouldn’t be open, and whether the web content loaded by that web page comes from a trusted source. In general, when exposing native QObjects that give the web environment access to private information or to functionality that’s potentially harmful to the client, such exposure should be balanced by limiting the web page’s access to trusted URLs only with HTTPS, and by utilizing other measures as part of a security strategy.</p>
<h2 id="C-Call-JavaScript"><a href="#C-Call-JavaScript" class="headerlink" title="C++ Call JavaScript"></a>C++ Call JavaScript</h2><p>you should be able to execute your script using <a href="http://doc.qt.nokia.com/latest/qwebframe.html#evaluateJavaScript" target="_blank" rel="external">QWebFrame::evaluateJavaScript</a> method. See if an example below would work for you:</p>
<p>initializing webview: </p>
<pre><code>QWebView *view = new QWebView(this-&gt;centralWidget());
view-&gt;load(QUrl(&quot;file:///home//test.html&quot;));
connect(view, SIGNAL(loadFinished(bool)), this, SLOT(loadFinished(bool)));
</code></pre><p>loadFinished signal handler:</p>
<pre><code>void MyTestWindow::loadFinished(bool)
{
    QVariant f1result = ((QWebView*)sender())-&gt;page()-&gt;mainFrame()-&gt;evaluateJavaScript(&quot;f1(&apos;test param&apos;)&quot;);
    qDebug() &lt;&lt; f1result.toString();
}
</code></pre><p>test.html:</p>
<pre><code>&lt;head&gt;
    &lt;script LANGUAGE=&quot;JavaScript&quot;&gt;
        function f1 (s) 
        {
            alert (s) 
            return &quot;f1 result&quot;
        }
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    test html
&lt;/body&gt;
</code></pre><p><em>evaluateJavaScript</em> should trigger an alert message box and return QVariant with f1 function result.</p>
<p>参考：<a href="http://stackoverflow.com/questions/4975658/qt-qwebview-javascript-callback" target="_blank" rel="external">Qt QWEBview JavaScript callback - Stack Overflow</a></p>
<h2 id="Webkit-Qml"><a href="#Webkit-Qml" class="headerlink" title="Webkit Qml"></a>Webkit Qml</h2><p>QML <a href="http://qt-project.org/doc/qt-5/qml-qtwebkit-webview.html" target="_blank" rel="external">WebView</a> version 3.0 is incompatible with previous QML WebView API versions. It allows an application to load pages into the <a href="http://qt-project.org/doc/qt-5/qml-qtwebkit-webview.html" target="_blank" rel="external">WebView</a>, either by URL or with an HTML string, and navigate within session history. By default, links to different pages load within the same <a href="http://qt-project.org/doc/qt-5/qml-qtwebkit-webview.html" target="_blank" rel="external">WebView</a>, but applications may intercept requests to delegate links to other functions.</p>
<pre><code>import QtQuick 2.0
import QtWebKit 3.0

Page {
    WebView {
        id: webview
        url: &quot;http://qt-project.org&quot;
        width: parent.width
        height: parent.height
        onNavigationRequested: {
            // detect URL scheme prefix, most likely an external link
            var schemaRE = /^\w+:/;
            if (schemaRE.test(request.url)) {
                request.action = WebView.AcceptRequest;
            } else {
                request.action = WebView.IgnoreRequest;
                // delegate request.url here
            }
        }
    }
}
</code></pre><h3 id="Quick-Start-1"><a href="#Quick-Start-1" class="headerlink" title="Quick Start"></a>Quick Start</h3><p>The <a href="http://qt-project.org/doc/qt-4.8/qtwebkit.html" target="_blank" rel="external">QtWebKit</a> Module has a QML element, <a href="http://qt-project.org/doc/qt-4.8/qtwebkit.html" target="_blank" rel="external">WebView</a> for displaying web content from a URL.</p>
<pre><code>import QtWebKit 1.0

WebView {
    url: &quot;http://www.nokia.com&quot;
    preferredWidth: 490
    preferredHeight: 400
    scale: 0.5
    smooth: false
}
</code></pre><h3 id="Tutorial"><a href="#Tutorial" class="headerlink" title="Tutorial"></a>Tutorial</h3><ul>
<li><a href="https://qt-project.org/doc/qt-5.0/qtwebkit/qtwebkitwidgets-index.html" target="_blank" rel="external">QtWebKit 5.0: Qt Webkit Widgets</a></li>
<li><a href="https://qt-project.org/doc/qt-5.0/qtwebkit/qtwebkit-bridge.html" target="_blank" rel="external">QtWebKit 5.0: The QtWebKit Bridge</a></li>
<li><a href="http://qt-project.org/doc/qt-5/qml-qtwebkit-webview.html" target="_blank" rel="external">WebView API</a></li>
<li><a href="http://qt-project.org/doc/qt-5/qtwebkitexamples-webkitwidgets-imageanalyzer-example.html" target="_blank" rel="external">The Webkit Bridge Tutorial - Hybrid Client Application</a></li>
</ul>
<h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><ul>
<li><a href="http://qt-project.org/doc/qt-4.8/qml-webview-examples.html" target="_blank" rel="external">Models and Views: WebView Examples</a></li>
</ul>
<h2 id="Qt-WebEngine"><a href="#Qt-WebEngine" class="headerlink" title="Qt WebEngine"></a>Qt WebEngine</h2><ul>
<li><a href="http://qt-project.org/wiki/QtWebEngine" target="_blank" rel="external">QtWebEngine</a></li>
<li><a href="http://qt-project.org/wiki/QtWebEnginePortingFromQtWebKit" target="_blank" rel="external">QtWebEnginePortingFromQtWebKit</a></li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><h3 id="Example-1"><a href="#Example-1" class="headerlink" title="Example"></a>Example</h3><ul>
<li><a href="https://qt-project.org/doc/qt-5.0/qtwebkitexamples/qtwebkitexamples-index.html" target="_blank" rel="external">Qt WebKit Examples for Qt 5</a></li>
<li><a href="http://qt-project.org/doc/qt-5.0/qtwebkitexamples/webkit-widgetexamples.html" target="_blank" rel="external">Qt WebKit Widgets Examples 5.0</a></li>
</ul>
<h3 id="Guide"><a href="#Guide" class="headerlink" title="Guide"></a>Guide</h3><ul>
<li><a href="http://qt-project.org/doc/qt-4.8/qtwebkit-guide.html" target="_blank" rel="external">QtWebKit Guide</a></li>
<li><a href="http://qt-project.org/doc/qt-4.8/qtwebkit-guide-css.html" target="_blank" rel="external">Level 3 CSS: media queries, selectors, visual effects, transforms, transitions, and animations</a></li>
<li><a href="qtwebkit-guide-canvas.html#canvas-graphics">HTML5 canvas element</a></li>
<li><a href="qtwebkit-guide-cache.html">Client Storage</a></li>
<li><a href="http://qt-project.org/wiki/Applications_Using_QtWebKit" target="_blank" rel="external">Applications Using QtWebKit</a></li>
</ul>
<h3 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h3><ul>
<li><a href="http://qt-project.org/forums/viewthread/27065" target="_blank" rel="external">Qt 5: QtWebkit 3/WebKit2: Bridging C++ objects to Javascript and vice versa</a></li>
<li><a href="http://qt-project.org/forums/viewthread/23788" target="_blank" rel="external">Qt5 QML QtWebKit 3.0 NO javaScriptWindowObjects</a></li>
<li>在调用Webkit的Inspect时，在没有脚本错误的情况下，点击<code>Show Console</code>按钮时，会造成程序崩溃。</li>
</ul>

        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2017-11-05T08:22:17.000Z" itemprop="dateUpdated">2017-11-05 16:22:17</time>
</span><br>


        
        这里可以写作者留言，标签和 hexo 中所有变量及辅助函数等均可调用，示例：<a href="/Qt/2014-02-15-qt-webkit.html" target="_blank" rel="external">http://blog.inching.org/Qt/2014-02-15-qt-webkit.html</a>
        
    </div>
    <footer>
        <a href="http://blog.inching.org">
            <img src="/img/avatar.png" alt="Cody Fei">
            Cody Fei
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/qt/">qt</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webkit/">webkit</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.inching.org/Qt/2014-02-15-qt-webkit.html&title=《Qt WebKit》 — Balance&pic=http://blog.inching.org/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.inching.org/Qt/2014-02-15-qt-webkit.html&title=《Qt WebKit》 — Balance&source=Qt WebKit Widgets provides a Web browser engine that makes it easy to embed c..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.inching.org/Qt/2014-02-15-qt-webkit.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Qt WebKit》 — Balance&url=http://blog.inching.org/Qt/2014-02-15-qt-webkit.html&via=http://blog.inching.org" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.inching.org/Qt/2014-02-15-qt-webkit.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/HTML5/2014-02-15-qt-webkit-storage.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Html5 Storage</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/JavaScript/2014-02-15-javascript-module.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">JavaScript 模块规范</h4>
      </a>
    </div>
  
</nav>



    











</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢大爷~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.JPG" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.JPG" data-alipay="/img/alipay.JPG">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top" style="display:none">
        

        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>footer.license</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Cody Fei &copy; 2012 - 2018</span>
            <span style="display:none">
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.inching.org/Qt/2014-02-15-qt-webkit.html&title=《Qt WebKit》 — Balance&pic=http://blog.inching.org/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.inching.org/Qt/2014-02-15-qt-webkit.html&title=《Qt WebKit》 — Balance&source=Qt WebKit Widgets provides a Web browser engine that makes it easy to embed c..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.inching.org/Qt/2014-02-15-qt-webkit.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Qt WebKit》 — Balance&url=http://blog.inching.org/Qt/2014-02-15-qt-webkit.html&via=http://blog.inching.org" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.inching.org/Qt/2014-02-15-qt-webkit.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACHklEQVR42u3aQW7EIAwF0Ln/pdPtSFXTb5ssAo9VFaXAy0jINv584nF9jd9Pvp/fv5/P+XliYGBgvJZx3Y77Be6XvJ+huu79h8PAwDiBkWwi327yX5MZMDAwMJLp8pCuGgJiYGBgrGVUA8re+xgYGBj5hubFsmT+x3NxDAyMFzJWJZlP/P3I/QYGBsarGFdxVI/a/OAe7QoDA2NrRn7AJa0V1ZR4cuBiYGCcw6imnfk7ScI5OcoXbBEDA+MljN6S+abnT5IyHAYGxjmMPKXMQ71qKX/SwIGBgbErY9LosLYMl4ekf1YNMTAwDmD00tFmhS84cPOwFQMD4xxGr+lqVSltcpmKgYGxNyM/UnvlsEk5L58TAwPjHEb1GO21XKxtF4viSgwMjJczquFXNWS8/xxVQKHNAgMDYyNGr/j1RHtZnvQ228UwMDBezpg0W0SFsFaDRf5pMDAwTmZMes16FwDVsDKKNzEwMA5g9K42J0W3pJD3T9UQAwNjU0a10FZtFMtDzF7ZDgMD4wRGL+Crbj0/TMvhIwYGxgGM3vHaK8mtLc9hYGDszbiKI0k+kxl6wWL0O2BgYGzHqBbOJhtNUtZVFxUYGBj7Meah2zys7FX4MTAwTmP0Njdv0Vici2NgYGAUj8jksrO6SrmzAwMDAyNOdPOtJ4AFoSEGBsYLGfny+ZVA3nLRS5UxMDDOYVRTx7yda7KJtakvBgbGaxk/q0/wLmvQQkYAAAAASUVORK5CYII=" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="/js/main.min.js?v=1.6.17"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.6.17" async></script>










</body>
</html>
