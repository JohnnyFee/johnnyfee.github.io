<!DOCTYPE html>
<html>
<head>
    
<!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-43567748-2', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<!-- End Google Analytics -->


    

    



    <meta charset="utf-8">
    
    <meta name="google-site-verification" content="true">
    
    
    
    <title>Get Started with Webpack Css Modules | Balance | Â§ßÈÅìËá≥ÁÆÄ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="">
    <meta name="description" content="From Getting Started with CSS Modules
There isn‚Äôt one single approach with CSS Modules to making the JavaScript templates, the CSS files, or the build steps to make them work. In this post, which is p">
<meta property="og:type" content="article">
<meta property="og:title" content="Get Started with Webpack Css Modules">
<meta property="og:url" content="http://blog.inching.org/Webpack/2016-12-05-get-started-with-webpack-css-modules.html">
<meta property="og:site_name" content="Balance">
<meta property="og:description" content="From Getting Started with CSS Modules
There isn‚Äôt one single approach with CSS Modules to making the JavaScript templates, the CSS files, or the build steps to make them work. In this post, which is p">
<meta property="og:image" content="https://cdn.css-tricks.com/wp-content/uploads/2016/04/1.png">
<meta property="og:image" content="https://cdn.css-tricks.com/wp-content/uploads/2016/04/2.png">
<meta property="og:image" content="https://cdn.css-tricks.com/wp-content/uploads/2016/04/3.png">
<meta property="og:image" content="https://cdn.css-tricks.com/wp-content/uploads/2016/04/4.png">
<meta property="og:updated_time" content="2017-11-05T08:22:17.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Get Started with Webpack Css Modules">
<meta name="twitter:description" content="From Getting Started with CSS Modules
There isn‚Äôt one single approach with CSS Modules to making the JavaScript templates, the CSS files, or the build steps to make them work. In this post, which is p">
<meta name="twitter:image" content="https://cdn.css-tricks.com/wp-content/uploads/2016/04/1.png">
    
        <link rel="alternate" type="application/atom+xml" title="Balance" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/style/style.css?v=1.6.17">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Cody Fei</h5>
          <a href="mailto:inchingcode@gmail.com" title="inchingcode@gmail.com" class="mail">inchingcode@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                Home
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags/android"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories/Android/"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/inchingorg" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://www.weibo.com/CodyFee" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://www.inesoi.com" target="_blank" >
                <i class="icon icon-lg icon-shopping-bag"></i>
                Shopping Bag
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Get Started with Webpack Css Modules</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Get Started with Webpack Css Modules</h1>
        <h5 class="subtitle">
            
                <time datetime="2016-12-05T15:00:00.000Z" itemprop="datePublished" class="page-time">
  2016-12-05
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Webpack/">Webpack</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Article-Series"><span class="post-toc-text">Article Series</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Installing-Webpack"><span class="post-toc-text">Installing Webpack</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Adding-our-First-Loader"><span class="post-toc-text">Adding our First Loader</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Loading-the-styles"><span class="post-toc-text">Loading the styles</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Article-Series-1"><span class="post-toc-text">Article Series</span></a></li></ol>
        </nav>
    </aside>
    
<article id="post-get-started-with-webpack-css-modules"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Get Started with Webpack Css Modules</h1>
        <div class="post-meta">
            <time class="post-time" title="2016-12-05 23:00:00" datetime="2016-12-05T15:00:00.000Z"  itemprop="datePublished">2016-12-05</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Webpack/">Webpack</a></li></ul>



            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p>From <a href="https://css-tricks.com/css-modules-part-2-getting-started/" target="_blank" rel="external">Getting Started with CSS Modules</a></p>
<p>There isn‚Äôt <em>one single</em> approach with CSS Modules to making the JavaScript templates, the CSS files, or the build steps to make them work. In this post, which is part of a series on CSS Modules, we‚Äôll look at one approach. The goal of this post is to get a CSS Modules project up and running.</p>
<h4 id="Article-Series"><a href="#Article-Series" class="headerlink" title="Article Series"></a>Article Series</h4><p><a href="https://css-tricks.com/css-modules-part-1-need/" target="_blank" rel="external">Part 1: What are CSS Modules and why do we need them?</a><br><strong>Part 2: How to get started with CSS Modules <em>(You are here!)</em></strong><br><a href="https://css-tricks.com/css-modules-part-3-react/" target="_blank" rel="external">Part 3: React + CSS Modules = üòç</a></p>
<p>In the projects I work on, there is a requirement that CSS should never rely on client-side JavaScript to work, so the build step needs to process everything into working HTML and CSS before it is deployed. We‚Äôll be using <a href="https://webpack.github.io/" target="_blank" rel="external">Webpack</a>, a build system and module bundler. In the next post we‚Äôll focus on making the code below suitable for a real life project that renders static HTML to the browser.</p>
<p>Let‚Äôs begin!</p>
<h3 id="Installing-Webpack"><a href="#Installing-Webpack" class="headerlink" title="Installing Webpack"></a>Installing Webpack</h3><p>After <a href="https://docs.npmjs.com/getting-started/installing-node" target="_blank" rel="external">installing NPM and node</a> we need to setup an empty directory somewhere and run the following:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm init --y</div></pre></td></tr></table></figure>
<p>This will make a <code>package.json</code> file and fill it with a bunch of defaults. This is our dependency manifest - the instructions for what is downloaded and installed when other people <code>npm install</code> this project.</p>
<p><a href="https://webpack.github.io/" target="_blank" rel="external">Webpack</a> will be handling our build process. It will be watching our CSS, JavaScript, and HTML and performing all the magic in between. But what is Webpack? <a href="http://blog.madewithlove.be/post/webpack-your-bags/" target="_blank" rel="external">Maxime Fabre wondered if Webpack is a build system or a module bundler</a>:</p>
<blockquote>
<p>Well, it‚Äôs both‚Äîand by this I don‚Äôt mean that it does both I mean that it combines both. Webpack doesn‚Äôt build your assets, and then separately bundle your modules, it considers your assets to be modules themselves‚Ä¶that can be imported, modified, manipulated, and that ultimately can be packed into your final bundle.</p>
</blockquote>
<p>If this sounds weird, don‚Äôt worry. Remember when Sass and Gulp and npm were all unfamiliar and scary? We‚Äôll figure it out.</p>
<p>Let‚Äôs makes sure Webpack is ‚Äúbundling‚Äù modules correctly by making one JavaScript file define a dependency so that we can import that chunk of code. First we need to globally install Webpack, which will give us access to the <code>webpack</code> command in our terminals:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install webpack -g</div></pre></td></tr></table></figure>
<p>Once that‚Äôs finished we need to install Webpack locally in our project, like so:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm i -D webpack</div></pre></td></tr></table></figure>
<p>Now we need to make an <code>index.js</code> file in a <code>/src</code> directory. Typically I like to make a directory where all of the static assets reside (such as images, fonts, CSS files and markup). Any code that I write will typically live in a <code>/src</code> directory, whilst any code that is written by a machine or interpreted in a certain process should live in a <code>/build</code> directory. My thinking is that it ought to be totally OK to delete a <code>/build</code> directory and not suffer any problems whatsoever because we can just run a command and it will process the stuff from <code>/src</code> directory and entirely rebuild the <code>/build</code> directory. In this case, we want Webpack to take a look at everything in <code>/src</code>, perform a certain process, and then move that code into <code>/build</code>.</p>
<p>In the <code>/src</code> directory we can also add an empty <code>alert.js</code> file (we‚Äôll return to it in a minute). We‚Äôll also need a  <code>webpack.config.js</code> file that sits at the root of our project, outside the <code>/src</code> directory so that our project structure should now look like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">package.json</div><div class="line">webpack.config.js</div><div class="line">/node_modules</div><div class="line">/src</div><div class="line">  index.js</div><div class="line">  alert.js</div></pre></td></tr></table></figure>
<p>Inside <code>webpack.config.js</code> (a file for configuring Webpack), we can add the following:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">module.exports = &#123;</div><div class="line">  entry: &apos;./src&apos;,</div><div class="line">  output: &#123;</div><div class="line">    path: &apos;build&apos;,</div><div class="line">    filename: &apos;bundle.js&apos;,</div><div class="line">  &#125;,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>Whenever we run the <code>webpack</code> command from here on out, Webpack will look at all of the assets in <code>/src</code> to build a dependency tree.</p>
<p>Returning to our <code>src/index.js</code> file we can add this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">require(&quot;./alert.js&quot;);</div></pre></td></tr></table></figure>
<p>And inside our <code>alert.js</code> file we can write this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">alert(&quot;LOUD NOISES&quot;);</div></pre></td></tr></table></figure>
<p>Now let‚Äôs make an <code>index.html</code> file in our root and add our bundle in a script tag just before the <code>&lt;body&gt;</code> closes:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html lang=&quot;en&quot;&gt;</div><div class="line">&lt;head&gt;</div><div class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</div><div class="line">    &lt;title&gt;Document name&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">    &lt;h1&gt;CSS Modules demo&lt;/h1&gt;</div><div class="line"></div><div class="line">    &lt;script src=&quot;build/bundle.js&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>That <code>bundle.js</code> will be generated by Webpack. To generate it all we have to do is run the <code>webpack</code> command. To make this easier for ourselves, we can update our <code>package.json</code> file with a build script. This is what you should find in that file:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&quot;scripts&quot;: &#123;</div><div class="line">  &quot;test&quot;: &quot;echo &apos;Error: no test specified&apos; &amp;&amp; exit 1&quot;</div><div class="line">&#125;,</div></pre></td></tr></table></figure>
<p>Those are the defaults that <code>npm</code> gave us, but we can replace the above with the following code to make our own command line script that will run Webpack for us and open up a browser window:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&quot;scripts&quot;: &#123;</div><div class="line">  &quot;start&quot;: &quot;webpack &amp;&amp; open index.html&quot;</div><div class="line">&#125;,</div></pre></td></tr></table></figure>
<p>So whenever we run <code>npm start</code> we‚Äôll automatically run the <code>webpack</code> command and open up our index file in the browser. Let‚Äôs do that now and see what happens.</p>
<figure id="post-240031" class="align-none media-240031"><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://cdn.css-tricks.com/wp-content/uploads/2016/04/1.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></figure>

<p>Hurray, something is working! This proves that our <code>index.js</code> file is importing our code from <code>alert.js</code> and that Webpack is bundling everything properly. If we now delete the <code>alert.js</code> file we‚Äôll find an error when we run <code>npm start</code> again:</p>
<figure id="post-240036" class="align-none media-240036"><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://cdn.css-tricks.com/wp-content/uploads/2016/04/2.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></figure>

<p>That‚Äôs the error that Webpack will reveal if it can‚Äôt find an imported module. But now that we‚Äôve confirmed that all of this works we can scrap that <code>require</code> statement in our <code>index.js</code> file and move onto the next step in learning about Webpack.</p>
<h3 id="Adding-our-First-Loader"><a href="#Adding-our-First-Loader" class="headerlink" title="Adding our First Loader"></a>Adding our First Loader</h3><p>A loader in Webpack is really important. Maxime Fabre has this to say on <a href="http://blog.madewithlove.be/post/webpack-your-bags/" target="_blank" rel="external">the subject</a>:</p>
<blockquote>
<p>Loaders are small plugins that basically say ‚ÄúWhen you encounter this kind of file, do this with it‚Äù.</p>
</blockquote>
<p>In Maxime‚Äôs tutorial he adds the Babel loader, which is a really good starting point because <a href="https://babeljs.io/" target="_blank" rel="external">Babel</a> allows us to use ES2015 and the latest improvements to the JavaScript language. So instead of the Common.js function that we used earlier to <code>require</code> another module we can use <code>import</code> instead. With Babel we can also use classes, arrow functions and <a href="https://css-tricks.com/lets-learn-es2015/" target="_blank" rel="external">a bevy of other cool features</a>:</p>
<blockquote>
<p>Tools like Babel allow us to write new ES2015 code today and perform a task called transpiling (much like preprocessing) to convert the code into a earlier version of JavaScript that has greater browser support. This is similar to how Sass works; initially writing your code in Sass syntax, and then a preprocessor compiles to standard CSS.</p>
</blockquote>
<p>The following will install the Webpack babel loader and the dependencies we need to run Babel:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm i -D babel-loader babel-core babel-preset-es2015</div></pre></td></tr></table></figure>
<p>In a <code>.babelrc</code> file in the root of our project we can configure the preset to let others know which JavaScript syntax we‚Äôll be using:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;presets&quot;: [&quot;es2015&quot;]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Now we want to run Babel on all of our <code>.js</code> files but only the files that <em>we</em> write, any other dependencies that we install later might have their own syntax and we don‚Äôt want to mess with that code. This is where the Webpack loader comes into play. We can open up <code>webpack.config.js</code> file and replace that code with this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">module.exports = &#123;</div><div class="line">  entry:  &apos;./src&apos;,</div><div class="line">  output: &#123;</div><div class="line">  path: &apos;build&apos;,</div><div class="line">    filename: &apos;bundle.js&apos;,</div><div class="line">  &#125;,</div><div class="line">  module: &#123;</div><div class="line">    loaders: [</div><div class="line">      &#123;</div><div class="line">        test: /\.js/,</div><div class="line">        loader: &apos;babel&apos;,</div><div class="line">        include: __dirname + &apos;/src&apos;,</div><div class="line">       &#125;</div><div class="line">    ],</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>That <code>test</code> key/value pair inside the <code>loaders</code> array is how we tell Webpack which type of file we want to perform an action on whilst <code>include</code> tells it precisely where in our project we want that action to be performed.</p>
<p>Let‚Äôs test that Babel is working in conjunction with Webpack. In a new file (<code>src/robot.js</code>), let‚Äôs write the following:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">const greetings = (text, person) =&gt; &#123;</div><div class="line">  return `$&#123;text&#125;, $&#123;person&#125;. I read you but I‚Äôm sorry, I‚Äôm afraid I can‚Äôt do that.`;</div><div class="line">&#125;</div><div class="line"></div><div class="line">export default greetings;</div></pre></td></tr></table></figure>
<p>This JavaScript file is using a bunch of ES2015 specific features, like <code>export</code>, <code>const</code> and <code>let</code>, arrow functions, and template literals.</p>
<p>Now we can <code>import</code> that module into our <code>src/index.js</code> file, like so:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">import greetings from &apos;./robot.js&apos;</div><div class="line">document.write(greetings(&quot;Affirmative&quot;, &quot;Dave&quot;));</div></pre></td></tr></table></figure>
<p>Finally, all we need to do is run <code>npm start</code> again and our browser should pop back with the text: ‚ÄúAffirmative, Dave. I read you but I‚Äôm sorry, I‚Äôm afraid I can‚Äôt do that.‚Äù This simply confirms that Babel is working as it should.</p>
<p>Hurray! That‚Äôs not a CSS Module yet, although we‚Äôre certainly one step closer. But before we move on let‚Äôs delete <code>src/robot.js</code> and all the code from <code>src/index.js</code>.</p>
<h3 id="Loading-the-styles"><a href="#Loading-the-styles" class="headerlink" title="Loading the styles"></a>Loading the styles</h3><p>Now that we‚Äôve got our templates almost working we‚Äôll need to add two more loaders: <a href="https://github.com/webpack/css-loader" target="_blank" rel="external">css-loader</a> and <a href="https://github.com/webpack/style-loader" target="_blank" rel="external">style-loader</a>, which we‚Äôll install:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm i -D css-loader style-loader</div></pre></td></tr></table></figure>
<p>The css-loader takes a CSS file and reads off all its dependencies whilst the style-loader will embed those styles directly into the markup. Let‚Äôs test this by writing some CSS in <code>src/app.css</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">.element &#123;</div><div class="line">  background-color: blue;</div><div class="line">  color: white;</div><div class="line">  font-size: 20px;</div><div class="line">  padding: 20px;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Then we can <code>import</code> that stylesheet into our <code>src/index.js</code> file:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">import styles from &apos;./app.css&apos;</div><div class="line"></div><div class="line">let element = `</div><div class="line">  &lt;div class=&quot;element&quot;&gt;</div><div class="line">    &lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit. Consequatur laudantium recusandae itaque libero velit minus ex reiciendis veniam. Eligendi modi sint delectus beatae nemo provident ratione maiores, voluptatibus a tempore!&lt;/p&gt;</div><div class="line">  &lt;/div&gt;</div><div class="line">`</div><div class="line"></div><div class="line">document.write(element);</div></pre></td></tr></table></figure>
<p>Whoa, hang on! Did we just make a stylesheet a dependency of a JavaScript file? Hell yes we did. But before it works properly, and before we see why this is useful, we first need to reconfigure our <code>webpack.config.js</code> again:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">module.exports = &#123;</div><div class="line">  entry:  &apos;./src&apos;,</div><div class="line">  output: &#123;</div><div class="line">    path: &apos;build&apos;,</div><div class="line">      filename: &apos;bundle.js&apos;,</div><div class="line">    &#125;,</div><div class="line">  module: &#123;</div><div class="line">    loaders: [</div><div class="line">      &#123;</div><div class="line">        test: /\.js/,</div><div class="line">        loader: &apos;babel&apos;,</div><div class="line">        include: __dirname + &apos;/src&apos;,</div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        test: /\.css/,</div><div class="line">        loaders: [&apos;style&apos;, &apos;css&apos;],</div><div class="line">        include: __dirname + &apos;/src&apos;</div><div class="line">      &#125;</div><div class="line">    ],</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>Running <code>npm start</code> will leave us with something like this:</p>
<figure id="post-240039" class="align-none media-240039"><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://cdn.css-tricks.com/wp-content/uploads/2016/04/3.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></figure>

<p>Consequently, if we ‚ÄúInspect Element‚Äù on our document we‚Äôll find that the style-loader has placed that file into a <code>&lt;style&gt;</code> tag in the <code>&lt;head&gt;</code> of the document:</p>
<figure id="post-240040" class="align-none media-240040"><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://cdn.css-tricks.com/wp-content/uploads/2016/04/4.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></figure>

<p>Let‚Äôs take stock of what just happened. We made a JavaScript file that requested another CSS file and that code was then embedded within a web page. So in a more realistic example we could create a <code>buttons.js</code> file and make <code>buttons.css</code> a dependency of it, and then import that JavaScript into another file that organises our templates and spits out some HTML. This ought to make a our code absurdly modular and easy to read!</p>
<p>Personally, just to keep things clean, I‚Äôd prefer to have a separate CSS file rather than adding all the code inline. To do that we‚Äôll need to use a <a href="https://webpack.github.io/docs/using-plugins.html" target="_blank" rel="external">Webpack plugin</a> called <a href="https://github.com/webpack/extract-text-webpack-plugin" target="_blank" rel="external">extract text</a> which:</p>
<blockquote>
<p>moves every require(‚Äòstyle.css‚Äô) in entry chunks into a separate css output file. So your styles are no longer inlined into the javascript, but separate in a css bundle file (styles.css). If your total stylesheet volume is big, it will be faster because the stylesheet bundle is loaded in parallel to the javascript bundle.</p>
</blockquote>
<p>We have to install that with npm:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm i -D extract-text-webpack-plugin</div></pre></td></tr></table></figure>
<p>Now we can update our <code>webpack.config.js</code> file again by requiring it and placing our CSS loader into it:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">var ExtractTextPlugin = require(&apos;extract-text-webpack-plugin&apos;);</div><div class="line"></div><div class="line">module.exports = &#123;</div><div class="line">  entry:  &apos;./src&apos;,</div><div class="line">  output: &#123;</div><div class="line">    path: &apos;build&apos;,</div><div class="line">    filename: &apos;bundle.js&apos;,</div><div class="line">  &#125;,</div><div class="line">  module: &#123;</div><div class="line">    loaders: [</div><div class="line">      &#123;</div><div class="line">        test: /\.js/,</div><div class="line">        loader: &apos;babel&apos;,</div><div class="line">        include: __dirname + &apos;/src&apos;,</div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        test: /\.css/,</div><div class="line">        loader: ExtractTextPlugin.extract(&quot;css&quot;)</div><div class="line">      &#125;</div><div class="line">    ],</div><div class="line">  &#125;,</div><div class="line">  plugins: [</div><div class="line">    new ExtractTextPlugin(&quot;styles.css&quot;)</div><div class="line">  ]</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p><code>ExtractTextPlugin</code> will now create a <code>styles.css</code> file for us!</p>
<p>You might‚Äôve noticed that we‚Äôve gotten rid of style-loader entirely. That‚Äôs because we don‚Äôt want those styles injected into our markup any more. So now if we open up the <code>/build</code> directory, we should find that a <code>styles.css</code> file has been created with all of our code inside. And within our <code>index.html</code> file, we can now add our stylesheet in the <code>&lt;head&gt;</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;build/styles.css&quot;&gt;</div></pre></td></tr></table></figure>
<p>Run <code>npm start</code> again and <em>blammo!</em> - our styles magically appear back on the page where they belong.</p>
<p>Now that we have our CSS and HTML working on the page, how do we manipulate the class names in order to get all the benefits of a local scope? All we have to do is update our <code>webpack.config.js</code> file like so:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  test: /\.css/,</div><div class="line">  loader: ExtractTextPlugin.extract(&apos;css?modules&amp;importLoaders=1&amp;localIdentName=[name]__[local]___[hash:base64:5]&apos;),</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>This will add the crazy generated text to the end of the class name. That‚Äôs all that CSS Modules really is, a hash which changes the classes which can be added in Webpack via a CSS loader.</p>
<p>Next, we have to update our <code>index.js</code> file with the <code>styles.element</code> class:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">import styles from &apos;./app.css&apos;</div><div class="line"></div><div class="line">let element = `</div><div class="line">  &lt;div class=&quot;$&#123;styles.element&#125;&quot;&gt;</div><div class="line">    &lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit. Consequatur laudantium recusandae itaque libero velit minus ex reiciendis veniam. Eligendi modi sint delectus beatae nemo provident ratione maiores, voluptatibus a tempore!&lt;/p&gt;</div><div class="line">  &lt;/div&gt;</div><div class="line">`</div><div class="line"></div><div class="line">document.write(element);</div></pre></td></tr></table></figure>
<p>Look what happens! One more <code>npm start</code> and our code has now been processed by Webpack so local scope is no longer an issue, since the class that gets injected into the web page now looks like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;div class=&quot;app__element___1MmQg&quot;&gt;</div><div class="line">  ...</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
<hr>
<p>We‚Äôre still not really finished as there are many questions left unanswered. How could we write code like this in development? How do we get around that nasty <code>document.write</code> rule we‚Äôre using to inject the markup into the page? How should we structure our modules and files? Getting CSS Modules up and running is only half the work, next we have to think about how we might port a code base into it from another system.</p>
<p>In the next tutorial we‚Äôll be taking a look at how React can help us generate tidy little modules, also we‚Äôll see how we can generate static markup from a number of templates and how to add other features such as Sass and PostCSS to our project.</p>
<hr>
<h4 id="Article-Series-1"><a href="#Article-Series-1" class="headerlink" title="Article Series"></a>Article Series</h4><p><a href="https://css-tricks.com/css-modules-part-1-need/" target="_blank" rel="external">Part 1: What are CSS Modules and why do we need them?</a><br><strong>Part 2: How to get started with CSS Modules <em>(You are here!)</em></strong><br><a href="https://css-tricks.com/css-modules-part-3-react/" target="_blank" rel="external">Part 3: React + CSS Modules = üòç</a></p>

        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2017-11-05T08:22:17.000Z" itemprop="dateUpdated">2017-11-05 16:22:17</time>
</span><br>


        
        ËøôÈáåÂèØ‰ª•ÂÜô‰ΩúËÄÖÁïôË®ÄÔºåÊ†áÁ≠æÂíå hexo ‰∏≠ÊâÄÊúâÂèòÈáèÂèäËæÖÂä©ÂáΩÊï∞Á≠âÂùáÂèØË∞ÉÁî®ÔºåÁ§∫‰æãÔºö<a href="/Webpack/2016-12-05-get-started-with-webpack-css-modules.html" target="_blank" rel="external">http://blog.inching.org/Webpack/2016-12-05-get-started-with-webpack-css-modules.html</a>
        
    </div>
    <footer>
        <a href="http://blog.inching.org">
            <img src="/img/avatar.png" alt="Cody Fei">
            Cody Fei
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">Ëµè</a>
</div>



        <div class="post-footer">
            

            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.inching.org/Webpack/2016-12-05-get-started-with-webpack-css-modules.html&title=„ÄäGet Started with Webpack Css Modules„Äã ‚Äî Balance&pic=http://blog.inching.org/img/avatar.png" data-title="ÂæÆÂçö">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="ÂæÆ‰ø°">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.inching.org/Webpack/2016-12-05-get-started-with-webpack-css-modules.html&title=„ÄäGet Started with Webpack Css Modules„Äã ‚Äî Balance&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.inching.org/Webpack/2016-12-05-get-started-with-webpack-css-modules.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=„ÄäGet Started with Webpack Css Modules„Äã ‚Äî Balance&url=http://blog.inching.org/Webpack/2016-12-05-get-started-with-webpack-css-modules.html&via=http://blog.inching.org" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.inching.org/Webpack/2016-12-05-get-started-with-webpack-css-modules.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/JavaScript/2016-12-07-data-javascript-security-crypto.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">JavaScript Security Crypto</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/Android/2016-12-02-android-architecture-mvp.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Android Architecture MVP</h4>
      </a>
    </div>
  
</nav>



    











</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        Ë∞¢Ë∞¢Â§ßÁà∑~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.JPG" alt="ÊâìËµè‰∫åÁª¥Á†Å">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.JPG" data-alipay="/img/alipay.JPG">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">ÂæÆ‰ø°</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">ÊîØ‰ªòÂÆù</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top" style="display:none">
        

        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>footer.license</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Cody Fei &copy; 2012 - 2017</span>
            <span style="display:none">
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.inching.org/Webpack/2016-12-05-get-started-with-webpack-css-modules.html&title=„ÄäGet Started with Webpack Css Modules„Äã ‚Äî Balance&pic=http://blog.inching.org/img/avatar.png" data-title="ÂæÆÂçö">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="ÂæÆ‰ø°">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.inching.org/Webpack/2016-12-05-get-started-with-webpack-css-modules.html&title=„ÄäGet Started with Webpack Css Modules„Äã ‚Äî Balance&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.inching.org/Webpack/2016-12-05-get-started-with-webpack-css-modules.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=„ÄäGet Started with Webpack Css Modules„Äã ‚Äî Balance&url=http://blog.inching.org/Webpack/2016-12-05-get-started-with-webpack-css-modules.html&via=http://blog.inching.org" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.inching.org/Webpack/2016-12-05-get-started-with-webpack-css-modules.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>Êâ´‰∏ÄÊâ´ÔºåÂàÜ‰∫´Âà∞ÂæÆ‰ø°</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACuElEQVR42u3aQW7jMBAEQP//09lrgoWd7hnS8aF0CmRFYskAOe7h4xEfX9+O12f+//T7+Wd3zp/4uHHg4eHhLYb+bFj5p/kQN/dPxoyHh4d3m/d6yn429GS6byf31y8rHzMeHh7eZ/LaMnr2yvLyGg8PD++TeZsHt0X8HywMeHh4eAEvedjr/0rulsQWeUl9OGvBw8PDi3l5F+lz/r7S38PDw8Nbd9XbCTcJLPICfX/g4eHh3eBtmlKbkLdtoa2aZ3h4eHhHebNhtRsINpsM2kjixzV4eHh4F3gtKQ9hN3dOXmj+BeDh4eG9n7cPLG6EGsP+Hh4eHt4hXj6UdqKfNdLaILhojOHh4eGtefmEmwcBs/vMSueiv4eHh4d3iDdrL+13PbWDm53Bw8PDu8GbxQfJpoFNDJEsIdHCg4eHh3eBdzY2nQ1uFkasVjw8PDy8NS8pgtsNAUVrPy6Uk5deBLt4eHh4I15eHLcBxL4bldz/l28MDw8P7wKv3UAwa2glBfGmtdYuP3h4eHgbXrI1Ko9Z2/ggn9bbTV1RSo2Hh4e34LVl7mw71KynP4s88PDw8G7zZkFDu6jsNxbUIQgeHh7eW3j5j/9NkX2qgMbDw8P7BF476DwCnoGT80/HhoeHh3eB9zoCSKKENm5oG2+zzV54eHh47+fNooekHJ81zNoXUeyDwMPDw1vw8ql5FhNs4ozZaPHw8PD+itdGDJscdba79pdr8PDw8I7yvsojGegmqM2XkHq7Kh4eHt4h3uzH/yaqSAri5CmzLV94eHh4p3jtY5IH5y209iXWLTc8PDy8a7y8uZW39vcv8cCBh4eH9wG8WSCbh8jtUnR4YcDDw8O7xksC07w0n4W8UWiLh4eHd42XFLunyug2Ms6vX8W4eHh4eF3PffiLflNGb64/0NPDw8PDm/D+AUO5zxSfRUlEAAAAAElFTkSuQmCC" alt="ÂæÆ‰ø°ÂàÜ‰∫´‰∫åÁª¥Á†Å">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="/js/main.min.js?v=1.6.17"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.6.17" async></script>










</body>
</html>
