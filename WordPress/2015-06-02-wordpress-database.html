<!DOCTYPE html>
<html>
<head>
    
<!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-43567748-2', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<!-- End Google Analytics -->


    

    



    <meta charset="utf-8">
    
    <meta name="google-site-verification" content="true">
    
    
    
    <title>WordPress Database | Balance | 大道至简</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="tutorial,wordpress">
    <meta name="description" content="WordPress runs on top of a MySQL database and creates its own tables to store data and content. Below is the database schema created by a default install of WordPress. We have also included some basic">
<meta property="og:type" content="article">
<meta property="og:title" content="WordPress Database">
<meta property="og:url" content="http://blog.inching.org/WordPress/2015-06-02-wordpress-database.html">
<meta property="og:site_name" content="Balance">
<meta property="og:description" content="WordPress runs on top of a MySQL database and creates its own tables to store data and content. Below is the database schema created by a default install of WordPress. We have also included some basic">
<meta property="og:updated_time" content="2017-11-05T08:22:17.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="WordPress Database">
<meta name="twitter:description" content="WordPress runs on top of a MySQL database and creates its own tables to store data and content. Below is the database schema created by a default install of WordPress. We have also included some basic">
    
        <link rel="alternate" type="application/atom+xml" title="Balance" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/css/style.css?v=1.6.17">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Cody Fei</h5>
          <a href="mailto:inchingcode@gmail.com" title="inchingcode@gmail.com" class="mail">inchingcode@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                Home
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags/android"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories/Android/"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/inchingorg" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://www.weibo.com/CodyFee" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://www.inesoi.com" target="_blank" >
                <i class="icon icon-lg icon-shopping-bag"></i>
                Shopping Bag
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">WordPress Database</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">WordPress Database</h1>
        <h5 class="subtitle">
            
                <time datetime="2015-06-01T16:00:00.000Z" itemprop="datePublished" class="page-time">
  2015-06-02
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/WordPress/">WordPress</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#wp-options"><span class="post-toc-text">wp_options</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#addoption-option-value-‘-deprecated-‘-autoload-yes"><span class="post-toc-text">addoption( $option, $value = ‘, $deprecated = ‘_, $autoload = yes )</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#update-option-option-newvalue"><span class="post-toc-text">update_option( $option, $newvalue )</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#get-option-option-default-false"><span class="post-toc-text">get_option( $option, $default = false )</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#delete-option-option"><span class="post-toc-text">delete_option( $option )</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#wp-users"><span class="post-toc-text">wp_users</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#wp-insert-user-userdata"><span class="post-toc-text">wp_insert_user( $userdata )</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#wp-create-user-username-password-email"><span class="post-toc-text">wp_create_user( $username, $password, $email )</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#wp-update-user-userdata"><span class="post-toc-text">wp_update_user( $userdata )</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#get-user-by-field-value"><span class="post-toc-text">get_user_by( $field, $value )</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#get-userdata-userid"><span class="post-toc-text">get_userdata( $userid )</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#wp-delete-user-id-reassign-novalue"><span class="post-toc-text">wp_delete_user( $id, $reassign = novalue )</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#wp-usermeta"><span class="post-toc-text">wp_usermeta</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#get-user-meta-user-id-key-‘’-single-false"><span class="post-toc-text">get_user_meta( $user_id, $key = ‘’, $single = false )</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#update-user-meta-user-id-meta-key-meta-value-prev-value-‘’"><span class="post-toc-text">update_user_meta( $user_id, $meta_key, $meta_value, $prev_value = ‘’ )</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#add-user-meta-user-id-meta-key-meta-value-unique-false"><span class="post-toc-text">add_user_meta($user_id, $meta_key, $meta_value, $unique = false)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#delete-user-meta-user-id-meta-key-meta-value-‘’"><span class="post-toc-text">delete_user_meta($user_id, $meta_key, $meta_value = ‘’)</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#wp-posts"><span class="post-toc-text">wp_posts</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#wp-insert-post-postarr-wp-error-false"><span class="post-toc-text">wp_insert_post($postarr, $wp_error = false)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#wp-update-post-postarr-array-wp-error-false"><span class="post-toc-text">wp_update_post( $postarr = array(), $wp_error = false )</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#get-post-post-null-output-OBJECT-filter-raw"><span class="post-toc-text">get_post( $post = null, $output = OBJECT, $filter = raw )</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#get-posts-args-null"><span class="post-toc-text">get_posts($args = null)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#wp-delete-post-postid-0-force-delete-false"><span class="post-toc-text">wp_delete_post( $postid = 0, $force_delete = false )</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#wp-postmeta"><span class="post-toc-text">wp_postmeta</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#get-post-meta-post-id-key-‘’-single-false"><span class="post-toc-text">get_post_meta($post_id, $key = ‘’, $single = false)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#update-post-meta-post-id-meta-key-meta-value-prev-value-‘’"><span class="post-toc-text">update_post_meta($post_id, $meta_key, $meta_value, $prev_value = ‘’)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#add-post-meta-post-id-meta-key-meta-value-unique-false"><span class="post-toc-text">add_post_meta($post_id, $meta_key, $meta_value, $unique = false)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#delete-post-meta-post-id-meta-key-meta-value-‘’"><span class="post-toc-text">delete_post_meta($post_id, $meta_key, $meta_value = ‘’)</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#wp-comments"><span class="post-toc-text">wp_comments</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#get-comment-comment-output-OBJECT"><span class="post-toc-text">get_comment( $comment, $output = OBJECT )</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#get-comments-args-‘’"><span class="post-toc-text">get_comments( $args = ‘’ )</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#wp-insert-comment-commentdata"><span class="post-toc-text">wp_insert_comment( $commentdata )</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#wp-update-comment-commentarr"><span class="post-toc-text">wp_update_comment( $commentarr )</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#wp-delete-comment-comment-id-force-delete-false"><span class="post-toc-text">wp_delete_comment( $comment_id, $force_delete = false )</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#wp-commentsmeta"><span class="post-toc-text">wp_commentsmeta</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#get-comment-meta-comment-id-key-‘’-single-false"><span class="post-toc-text">get_comment_meta($comment_id, $key = ‘’, $single = false)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#add-comment-meta-comment-id-meta-key-meta-value-unique-false"><span class="post-toc-text">add_comment_meta($comment_id, $meta_key, $meta_value, $unique = false)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#update-comment-meta-comment-id-meta-key-meta-value-prev-value-‘’"><span class="post-toc-text">update_comment_meta($comment_id, $meta_key, $meta_value, $prev_value = ‘’)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#delete-comment-meta-comment-id-meta-key-meta-value-‘’"><span class="post-toc-text">delete_comment_meta($comment_id, $meta_key, $meta_value = ‘’)</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#wp-links"><span class="post-toc-text">wp_links</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#wp-terms"><span class="post-toc-text">wp_terms</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#get-terms-taxonomies-args-‘’"><span class="post-toc-text">get_terms( $taxonomies, $args = ‘’ )</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#get-term-term-taxonomy-output-OBJECT-filter-raw"><span class="post-toc-text">get_term( $term, $taxonomy, $output = OBJECT, $filter = raw )</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#wp-insert-term-term-taxonomy-args-array"><span class="post-toc-text">wp_insert_term( $term, $taxonomy, $args = array() )</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#wp-update-term-term-id-taxonomy-args-array"><span class="post-toc-text">wp_update_term( $term_id, $taxonomy, $args = array() )</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#wp-delete-term-term-taxonomy-args-array"><span class="post-toc-text">wp_delete_term( $term, $taxonomy, $args = array() )</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#wp-term-taxonomy"><span class="post-toc-text">wp_term_taxonomy</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#wp-includes-taxonomy-php"><span class="post-toc-text">/wp-includes/taxonomy.php</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#get-taxonomies-args-array-output-names-operator-and"><span class="post-toc-text">get_taxonomies( $args = array(), $output = names, $operator = and )</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#get-taxonomy-taxonomy"><span class="post-toc-text">get_taxonomy( $taxonomy )</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#register-taxonomy-taxonomy-object-type-args-array"><span class="post-toc-text">register_taxonomy( $taxonomy, $object_type, $args = array() )</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#wp-term-relationships"><span class="post-toc-text">wp_term_relationships</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#get-object-taxonomies-object-output-names"><span class="post-toc-text">get_object_taxonomies( $object, $output = names )</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#wp-get-object-terms-object-ids-taxonomies-args-array"><span class="post-toc-text">wp_get_object_terms( $object_ids, $taxonomies, $args = array() )</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#wp-set-object-terms-object-id-terms-taxonomy-append-false"><span class="post-toc-text">wp_set_object_terms( $object_id, $terms, $taxonomy, $append = false )</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#wpdb"><span class="post-toc-text">$wpdb</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Using-custom-DB-tables"><span class="post-toc-text">Using custom DB tables</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Escaping-in-DB-queries"><span class="post-toc-text">Escaping in DB queries</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#SELECT-queries-with-wpdb"><span class="post-toc-text">SELECT queries with $wpdb</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Insert-replace-and-update"><span class="post-toc-text">Insert, replace, and update</span></a></li></ol></li></ol>
        </nav>
    </aside>
    
<article id="post-wordpress-database"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">WordPress Database</h1>
        <div class="post-meta">
            <time class="post-time" title="2015-06-02 00:00:00" datetime="2015-06-01T16:00:00.000Z"  itemprop="datePublished">2015-06-02</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/WordPress/">WordPress</a></li></ul>



            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p>WordPress runs on top of a MySQL database and creates its own tables to store data and content. Below is the database schema created by a default install of WordPress. We have also included some basic information on built-in WordPress functions for interacting with these tables. If you can grasp the database (DB) schema and get comfortable with the list functions in this chapter, you can push and pull any data into and out of WordPress.</p>
<a id="more"></a>
<h2 id="wp-options"><a href="#wp-options" class="headerlink" title="wp_options"></a>wp_options</h2><p>The <code>wp_options</code> table stores any sitewide data for you. This table stores the name, description, and admin email that you entered when running a typical install. This table will also come prepopulated with a few records that store the various default settings within WordPress. The following table shows the database structure for the <code>wp_options</code> table.</p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Collation</th>
<th>Null</th>
<th>Default</th>
<th>Extra         </th>
</tr>
</thead>
<tbody>
<tr>
<td>option_id</td>
<td>bigint(20)</td>
<td></td>
<td>No</td>
<td>None</td>
<td>AUTO_INCREMENT</td>
</tr>
<tr>
<td>option_name</td>
<td>varchar(64)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td></td>
<td></td>
</tr>
<tr>
<td>option_value</td>
<td>longtext</td>
<td>utf8_general_ci</td>
<td>No</td>
<td>None</td>
<td></td>
</tr>
<tr>
<td>autoload</td>
<td>varchar(20)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td>Yes</td>
<td></td>
</tr>
</tbody>
</table>
<p>The following functions can all be found in <em>/wp-includes/option.php</em>:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"><span class="comment">// add option</span></div><div class="line">$twitters = <span class="keyword">array</span>( <span class="string">'@bwawwp'</span>, <span class="string">'@bmess'</span>, <span class="string">'@jason_coleman'</span> );</div><div class="line">add_option( <span class="string">'bwawwp_twitter_accounts'</span>, $twitters );</div><div class="line"></div><div class="line"><span class="comment">// get option</span></div><div class="line">$bwawwp_twitter_accounts = get_option( <span class="string">'bwawwp_twitter_accounts'</span> );</div><div class="line"><span class="keyword">echo</span> <span class="string">'&lt;pre&gt;'</span>;</div><div class="line">print_r( $bwawwp_twitter_accounts );</div><div class="line"><span class="keyword">echo</span> <span class="string">'&lt;/pre&gt;'</span>;</div><div class="line"></div><div class="line"><span class="comment">// update option</span></div><div class="line">$twitters = array_merge(</div><div class="line">         $twitters,</div><div class="line">         <span class="keyword">array</span>(</div><div class="line">                 <span class="string">'@webdevstudios'</span>,</div><div class="line">                 <span class="string">'@strangerstudios'</span></div><div class="line">         )</div><div class="line">);</div><div class="line">update_option( <span class="string">'bwawwp_twitter_accounts'</span>, $twitters );</div><div class="line"></div><div class="line"><span class="comment">// get option</span></div><div class="line">$bwawwp_twitter_accounts = get_option( <span class="string">'bwawwp_twitter_accounts'</span> );</div><div class="line"><span class="keyword">echo</span> <span class="string">'&lt;pre&gt;'</span>;</div><div class="line">print_r( $bwawwp_twitter_accounts );</div><div class="line"><span class="keyword">echo</span> <span class="string">'&lt;/pre&gt;'</span>;</div><div class="line"></div><div class="line"><span class="comment">// delete option</span></div><div class="line">delete_option( <span class="string">'bwawwp_twitter_accounts'</span> );</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">The output from the above example should look something like this:</div><div class="line">Array</div><div class="line">(</div><div class="line">    [0] =&gt; <span class="doctag">@bwawwp</span></div><div class="line">    [1] =&gt; <span class="doctag">@bmess</span></div><div class="line">    [2] =&gt; <span class="doctag">@jason</span>_coleman</div><div class="line">)</div><div class="line">Array</div><div class="line">(</div><div class="line">    [0] =&gt; <span class="doctag">@bwawwp</span></div><div class="line">    [1] =&gt; <span class="doctag">@bmess</span></div><div class="line">    [2] =&gt; <span class="doctag">@jason</span>_coleman</div><div class="line">    [3] =&gt; <span class="doctag">@webdevstudios</span></div><div class="line">    [4] =&gt; <span class="doctag">@strangerstudios</span></div><div class="line">)</div><div class="line">*/</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h3 id="addoption-option-value-‘-deprecated-‘-autoload-yes"><a href="#addoption-option-value-‘-deprecated-‘-autoload-yes" class="headerlink" title="addoption( $option, $value = ‘, $deprecated = ‘_, $autoload = yes )"></a>add<em>option( $option, $value = </em>‘, $deprecated = ‘_, $autoload = <em>yes</em> )</h3><p>First checks if an <code>option_name</code> exists before inserting a new row:</p>
<ul>
<li>$option—A required string of the <code>option_name</code> you would like to add.</li>
<li>$value—An optional mixed variable of the <code>option_value</code> you would like to add. If the variable passed is an array or object, the value will be serialized before storing in the database.</li>
<li>$deprecated—This parameter was deprecated in version 2.3 and is not used anymore.<sup>[</sup>6]</li>
<li>$autoload—An optional Boolean used to distinguish whether to load the option into cache when WordPress starts up. Set to <code>yes</code> or <code>no</code>. The default value is <code>no</code>. This can save you a DB query if you are sure you are going to need this option on every page load.</li>
</ul>
<h3 id="update-option-option-newvalue"><a href="#update-option-option-newvalue" class="headerlink" title="update_option( $option, $newvalue )"></a>update_option( $option, $newvalue )</h3><p>Updates an existing option but will also add it if it doesn’t already exist:</p>
<ul>
<li>$option—A required string of the <code>option_name</code> you would like to update/add.</li>
<li>$newvalue—An optional mixed variable of the <code>option_value</code> you would like to update/add.</li>
</ul>
<h3 id="get-option-option-default-false"><a href="#get-option-option-default-false" class="headerlink" title="get_option( $option, $default = false )"></a>get_option( $option, $default = false )</h3><p>Retrieves the <code>option_value</code> for a provided <code>option_name</code>:</p>
<ul>
<li>$option—A required string of the <code>option_name</code> you would like to get.</li>
<li>$default—An optional mixed variable you would like to return if the <code>option_name</code> you provided doesn’t exist in the table. By default, this parameter is false.</li>
</ul>
<h3 id="delete-option-option"><a href="#delete-option-option" class="headerlink" title="delete_option( $option )"></a>delete_option( $option )</h3><p>Deletes an existing option from the database permanently:</p>
<ul>
<li>$option—A required string of the <code>option_name</code> you would like to delete.</li>
</ul>
<h2 id="wp-users"><a href="#wp-users" class="headerlink" title="wp_users"></a>wp_users</h2><p>When you log in to WordPress with your username and password, you are referencing data stored in this table. All users and their default data are stored in the wp_users table. The following shows the database structure for the wp_users table.</p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Collation</th>
<th>Null</th>
<th>Default</th>
<th>Extra         </th>
</tr>
</thead>
<tbody>
<tr>
<td>ID</td>
<td>bigint(20)</td>
<td></td>
<td>No</td>
<td>None</td>
<td>AUTO_INCREMENT</td>
</tr>
<tr>
<td>user_login</td>
<td>varchar(60)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td></td>
<td></td>
</tr>
<tr>
<td>user_pass</td>
<td>varchar(64)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td></td>
<td></td>
</tr>
<tr>
<td>user_nicename</td>
<td>varchar(50)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td></td>
<td></td>
</tr>
<tr>
<td>user_email</td>
<td>varchar(100)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td></td>
<td></td>
</tr>
<tr>
<td>user_url</td>
<td>varchar(100)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td></td>
<td></td>
</tr>
<tr>
<td>user_registered</td>
<td>datetime</td>
<td></td>
<td>No</td>
<td>0000-00-00 00:00:00</td>
<td></td>
</tr>
<tr>
<td>user_activation_key</td>
<td>varchar(60)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td></td>
<td></td>
</tr>
<tr>
<td>user_status</td>
<td>int(11)</td>
<td></td>
<td>No</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>display_name</td>
<td>varchar(250)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>The following functions are found in <em>/wp-includes/pluggable.php</em> and <em>/wp-includes/user.php</em>:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"><span class="comment">// insert user</span></div><div class="line">$userdata = <span class="keyword">array</span>(</div><div class="line">    <span class="string">'user_login'</span>    =&gt; <span class="string">'brian'</span>,</div><div class="line">    <span class="string">'user_pass'</span>     =&gt; <span class="string">'KO03gT7@n*'</span>,</div><div class="line">    <span class="string">'user_nicename'</span> =&gt; <span class="string">'Brian'</span>,</div><div class="line">    <span class="string">'user_url'</span>      =&gt; <span class="string">'http://webdevstudios.com/'</span>,</div><div class="line">    <span class="string">'user_email'</span>    =&gt; <span class="string">'brian@schoolpress.me'</span>,</div><div class="line">    <span class="string">'display_name'</span>  =&gt; <span class="string">'Brian'</span>,</div><div class="line">    <span class="string">'nickname'</span>      =&gt; <span class="string">'Brian'</span>,</div><div class="line">    <span class="string">'first_name'</span>    =&gt; <span class="string">'Brian'</span>,</div><div class="line">    <span class="string">'last_name'</span>     =&gt; <span class="string">'Messenlehner'</span>,</div><div class="line">    <span class="string">'description'</span>   =&gt; <span class="string">'This is a SchoolPress Administrator account.'</span>,</div><div class="line">    <span class="string">'role'</span>          =&gt; <span class="string">'administrator'</span></div><div class="line">);</div><div class="line">wp_insert_user( $userdata );</div><div class="line"></div><div class="line"><span class="comment">// create users</span></div><div class="line">wp_create_user( <span class="string">'jason'</span>, <span class="string">'YR529G%*v@'</span>, <span class="string">'jason@schoolpress.me'</span> );</div><div class="line"></div><div class="line"><span class="comment">// get user by login</span></div><div class="line">$user = get_user_by( <span class="string">'login'</span>, <span class="string">'brian'</span> );</div><div class="line"><span class="keyword">echo</span> <span class="string">'email: '</span> . $user-&gt;user_email  . <span class="string">' / ID: '</span> . $user-&gt;ID . <span class="string">'&lt;br&gt;'</span>;</div><div class="line"><span class="keyword">echo</span> <span class="string">'Hi: '</span> . $user-&gt;first_name . <span class="string">' '</span> . $user-&gt;last_name . <span class="string">'&lt;br&gt;'</span>;</div><div class="line"></div><div class="line"><span class="comment">// get user by email</span></div><div class="line">$user = get_user_by( <span class="string">'email'</span>, <span class="string">'jason@schoolpress.me'</span> );</div><div class="line"><span class="keyword">echo</span> <span class="string">'username: '</span> . $user-&gt;user_login . <span class="string">' / ID: '</span> . $user-&gt;ID . <span class="string">'&lt;br&gt;'</span>;</div><div class="line"></div><div class="line"><span class="comment">// update user - add first and last name to brian and change role to admin</span></div><div class="line">$userdata = <span class="keyword">array</span>(</div><div class="line">        <span class="string">'ID'</span>         =&gt; $user-&gt;ID,</div><div class="line">        <span class="string">'first_name'</span> =&gt; <span class="string">'Jason'</span>,</div><div class="line">        <span class="string">'last_name'</span>  =&gt; <span class="string">'Coleman'</span>,</div><div class="line">        <span class="string">'user_url'</span>   =&gt; <span class="string">'http://strangerstudios.com/'</span>,</div><div class="line">        <span class="string">'role'</span>       =&gt; <span class="string">'administrator'</span></div><div class="line">);</div><div class="line">wp_update_user( $userdata );</div><div class="line"></div><div class="line"><span class="comment">// get userdata for brian</span></div><div class="line">$user = get_userdata( $user-&gt;ID );</div><div class="line"><span class="keyword">echo</span> <span class="string">'Hi: '</span> . $user-&gt;first_name . <span class="string">' '</span> . $user-&gt;last_name . <span class="string">'&lt;br&gt;'</span>;</div><div class="line"></div><div class="line"><span class="comment">// delete user - delete the original admin and set their posts to our new admin</span></div><div class="line"><span class="comment">// wp_delete_user( 1, $user-&gt;ID );</span></div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">The output from the above example should look something like this:</div><div class="line">email: brian<span class="doctag">@schoolpress</span>.me / ID: 2</div><div class="line">Hi: Brian Messenlehner</div><div class="line">username: jason / ID: 3</div><div class="line">Hi: Jason Coleman</div><div class="line">*/</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h3 id="wp-insert-user-userdata"><a href="#wp-insert-user-userdata" class="headerlink" title="wp_insert_user( $userdata )"></a>wp_insert_user( $userdata )</h3><p>Inserts a new user into the database. This function can also be used to update a user if the user ID is passed in with the $user_data.  $userdata is a required array of field names and values. The accepted fields are:</p>
<ul>
<li><em>ID</em>—An integer that will be used for updating an existing user.</li>
<li>_user<em>pass</em>—A string that contains the plain-text password for the user.</li>
<li>_user<em>login</em>—A string that contains the user’s username for logging in.</li>
<li>_user<em>nicename</em>—A string that contains a URL-friendly name for the user. The default is the user’s username.</li>
<li>_user<em>url</em>—A string containing the URL for the user’s website.</li>
<li>_user<em>email</em>—A string containing the user’s email address.</li>
<li>_display<em>name</em>—A string that will be shown on the site. Defaults to the user’s username. It is likely that you will want to change this, for appearance.</li>
<li><em>nickname</em>—The user’s nickname. Defaults to the user’s username.</li>
<li>_first<em>name</em>—The user’s first name.</li>
<li>_last<em>name</em>—The user’s last name.</li>
<li><em>description</em>—A string containing content about the user.</li>
<li>_rich<em>editing</em>—A string for whether to enable the rich editor. <code>False</code> if not empty.</li>
<li>_user<em>registered</em>—The date the user registered. Format is Y-m-d H:i:s.</li>
<li><em>role</em>—A string used to set the user’s role.</li>
<li><em>jabber</em>—User’s Jabber account.</li>
<li><em>aim</em>—User’s AOL IM account.</li>
<li><em>yim</em>—User’s Yahoo IM account.</li>
</ul>
<h3 id="wp-create-user-username-password-email"><a href="#wp-create-user-username-password-email" class="headerlink" title="wp_create_user( $username, $password, $email )"></a>wp_create_user( $username, $password, $email )</h3><p>This function utilizes the prior function <code>wp_insert_user()</code> and makes it easier to add a new user based on the required columns:</p>
<ul>
<li>$username—A required string of the username/login of a new user.</li>
<li>$password—A required string of the password of a new user.</li>
<li>$email—A required string of the email address of a new user.</li>
</ul>
<h3 id="wp-update-user-userdata"><a href="#wp-update-user-userdata" class="headerlink" title="wp_update_user( $userdata )"></a>wp_update_user( $userdata )</h3><p>This function can be used to update any of the fields in the <code>wp_users</code> and <code>wp_usermeta</code> (covered next) tables tied to a specific user. Note that if a user’s password is updated, all of his cookies will the cleared, logging him out of WordPress:</p>
<ul>
<li>$userdata—A required array of field names and values. The ID and at least one other field is required. These fields are the same ones accepted in the <code>wp_insert_post()</code> function.</li>
</ul>
<h3 id="get-user-by-field-value"><a href="#get-user-by-field-value" class="headerlink" title="get_user_by( $field, $value )"></a>get_user_by( $field, $value )</h3><p>This function returns the WP<em>User object on success and false if it fails. The WordPress User class is found in </em>/wp-includes/capabilities.php_ and basically queries the <code>wp_user</code> table like so:</p>
<p>SELECT * FROM wp_users WHERE $field = $value;</p>
<p>The WP_User class also caches the results so it is not querying the database every time it is used. The class also figures out the roles and capabilities of a specific user, which we will go over in more detail in <a href="ch06.html" title="Chapter 6. Users, Roles, and Capabilities">Chapter 6</a>:</p>
<ul>
<li>$field—A required string of the field you would like to query the user data by. This string can only be <code>id</code>, <code>slug</code>, <code>email</code>, or <code>login</code>.</li>
<li>$value—A required integer or string of the value for a given id, slug, email or login.</li>
</ul>
<h3 id="get-userdata-userid"><a href="#get-userdata-userid" class="headerlink" title="get_userdata( $userid )"></a>get_userdata( $userid )</h3><p>This function actually utilizes the previous function <code>get_user_by()</code> and returns the same WP_User object:</p>
<ul>
<li>$userid—A required integer of the user ID of the user you would like to get data for.</li>
</ul>
<h3 id="wp-delete-user-id-reassign-novalue"><a href="#wp-delete-user-id-reassign-novalue" class="headerlink" title="wp_delete_user( $id, $reassign = novalue )"></a>wp_delete_user( $id, $reassign = <em>novalue</em> )</h3><p>You guessed it: this function deletes a user and can also reassign any of their posts or links to another user:</p>
<ul>
<li>$id—A required integer of the ID of the user you would like to delete.</li>
<li>$reassign—An optional integer of the ID you would like to reassign any post or links from the deleted user to.</li>
</ul>
<h2 id="wp-usermeta"><a href="#wp-usermeta" class="headerlink" title="wp_usermeta"></a>wp_usermeta</h2><p>Sometimes you may want to store additional data along with a user. WordPress provides an easy way to do this without having to add additional columns to the users table. You can store as much user metadata as you need to in the <code>wp_usermeta</code> table. Each record is associated to a user ID in the <code>wp_user</code> table by the user_id field. </p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Collation</th>
<th>Null</th>
<th>Default</th>
<th>Extra         </th>
</tr>
</thead>
<tbody>
<tr>
<td>umeta_id</td>
<td>bigint(20)</td>
<td></td>
<td>No</td>
<td>None</td>
<td>AUTO_INCREMENT</td>
</tr>
<tr>
<td>user_id</td>
<td>bigint(20)</td>
<td></td>
<td>No</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>meta_key</td>
<td>varchar(255)</td>
<td>utf8_general_ci</td>
<td>Yes</td>
<td>NULL</td>
<td></td>
</tr>
<tr>
<td>meta_value</td>
<td>longtext</td>
<td>utf8_general_ci</td>
<td>Yes</td>
<td>NULL</td>
<td></td>
</tr>
</tbody>
</table>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"><span class="comment">// get brian's id</span></div><div class="line">$brian_id = get_user_by( <span class="string">'login'</span>, <span class="string">'brian'</span> )-&gt;ID;</div><div class="line"></div><div class="line"><span class="comment">// add user meta - unique is set to true. no polygamy! only</span></div><div class="line">   one wife at a time.</div><div class="line">add_user_meta( $brian_id, <span class="string">'bwawwp_wife'</span>, <span class="string">'Robin Jade Morales Messenlehner'</span>, <span class="keyword">true</span>);</div><div class="line"></div><div class="line"><span class="comment">// get user meta - returning a single value</span></div><div class="line">$brians_wife = get_user_meta( $brian_id, <span class="string">'bwawwp_wife'</span>, <span class="keyword">true</span>);</div><div class="line"><span class="keyword">echo</span> <span class="string">"Brian's wife: "</span> . $brians_wife . <span class="string">"&lt;br&gt;"</span>;</div><div class="line"></div><div class="line"><span class="comment">// add user meta - no 3rd parameter/unique. can have as many kids</span></div><div class="line">   <span class="keyword">as</span> wife will let me.</div><div class="line">add_user_meta( $brian_id, <span class="string">'bwawwp_kid'</span>, <span class="string">'Dalya'</span> );</div><div class="line">add_user_meta( $brian_id, <span class="string">'bwawwp_kid'</span>, <span class="string">'Brian'</span> );</div><div class="line">add_user_meta( $brian_id, <span class="string">'bwawwp_kid'</span>, <span class="string">'Nina'</span> );</div><div class="line"></div><div class="line"><span class="comment">// update user meta - this will update brian to brian jr.</span></div><div class="line">update_user_meta( $brian_id, <span class="string">'bwawwp_kid'</span>, <span class="string">'Brian Jr'</span>, <span class="string">'Brian'</span> );</div><div class="line"></div><div class="line"><span class="comment">// get user meta - returning an array</span></div><div class="line">$brians_kids = get_user_meta( $brian_id, <span class="string">'bwawwp_kid'</span> );</div><div class="line"><span class="keyword">echo</span> <span class="string">"Brian's kids:"</span>;</div><div class="line"><span class="keyword">echo</span> <span class="string">'&lt;pre&gt;'</span>;</div><div class="line">print_r($brians_kids);</div><div class="line"><span class="keyword">echo</span> <span class="string">'&lt;/pre&gt;'</span>;</div><div class="line"></div><div class="line"><span class="comment">// delete brian's user meta</span></div><div class="line">delete_user_meta( $brian_id, <span class="string">'bwawwp_wife'</span> );</div><div class="line">delete_user_meta( $brian_id, <span class="string">'bwawwp_kid'</span> );</div><div class="line"></div><div class="line"><span class="comment">// get jason's id</span></div><div class="line">$jason_id = get_user_by( <span class="string">'login'</span>, <span class="string">'jason'</span> )-&gt;ID;</div><div class="line"></div><div class="line"><span class="comment">// update user meta - this will create meta if the key doesn't exist for the user.</span></div><div class="line">update_user_meta( $jason_id, <span class="string">'bwawwp_wife'</span>, <span class="string">'Kimberly Ann Coleman'</span> );</div><div class="line"></div><div class="line"><span class="comment">// get user meta - returning an array</span></div><div class="line">$jasons_wife = get_user_meta( $jason_id, <span class="string">'bwawwp_wife'</span> );</div><div class="line"><span class="keyword">echo</span> <span class="string">"Jason's wife:"</span>;</div><div class="line"><span class="keyword">echo</span> <span class="string">'&lt;pre&gt;'</span>;</div><div class="line">print_r($jasons_wife);</div><div class="line"><span class="keyword">echo</span> <span class="string">'&lt;/pre&gt;'</span>;</div><div class="line"></div><div class="line"><span class="comment">// add user meta - storing as an array</span></div><div class="line">add_user_meta( $jason_id, <span class="string">'bwawwp_kid'</span>, <span class="keyword">array</span>( <span class="string">'Isaac'</span>, <span class="string">'Marin'</span> ) );</div><div class="line"></div><div class="line"><span class="comment">// get user meta - returning a single value which happens to be an array.</span></div><div class="line">$jasons_kids = get_user_meta( $jason_id, <span class="string">'bwawwp_kid'</span>, <span class="keyword">true</span> );</div><div class="line"><span class="keyword">echo</span> <span class="string">"Jason's kids:"</span>;</div><div class="line"><span class="keyword">echo</span> <span class="string">'&lt;pre&gt;'</span>;</div><div class="line">print_r($jasons_kids);</div><div class="line"><span class="keyword">echo</span> <span class="string">'&lt;/pre&gt;'</span>;</div><div class="line"></div><div class="line"><span class="comment">// delete jason's user meta</span></div><div class="line">delete_user_meta( $jason_id, <span class="string">'bwawwp_wife'</span> );</div><div class="line">delete_user_meta( $jason_id, <span class="string">'bwawwp_kid'</span> );</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">The output from the above example should look something like this:</div><div class="line">Brian's wife: Robin Jade Morales Messenlehner</div><div class="line">Brian's kids:</div><div class="line">Array</div><div class="line">(</div><div class="line">    [0] =&gt; Dalya</div><div class="line">    [1] =&gt; Brian Jr</div><div class="line">    [2] =&gt; Nina</div><div class="line">)</div><div class="line">Jason's wife:</div><div class="line">Array</div><div class="line">(</div><div class="line">    [0] =&gt; Kimberly Ann Coleman</div><div class="line">)</div><div class="line">Jason's kids:</div><div class="line">Array</div><div class="line">(</div><div class="line">    [0] =&gt; Isaac</div><div class="line">    [1] =&gt; Marin</div><div class="line">)</div><div class="line">*/</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h3 id="get-user-meta-user-id-key-‘’-single-false"><a href="#get-user-meta-user-id-key-‘’-single-false" class="headerlink" title="get_user_meta( $user_id, $key = ‘’, $single = false )"></a>get_user_meta( $user_id, $key = ‘’, $single = false )</h3><p>Gets a user’s meta value for a specified key:</p>
<ul>
<li>$user_id—A required integer of a user ID.</li>
<li>$key—An optional string of the meta key of the value you would like to return. If blank then all metadata for the given user will be returned.</li>
<li>$single—A Boolean of whether to return a single value or not. The default is false and the value will be returned as an array.</li>
</ul>
<p><code>There can be more than one meta key for the same user ID with different values. If you set</code>$single<code>to</code>true<code>, you will get the first key’s value; if you set it to</code>false<code>, you will get an array of the values of each record with the same key.</code></p>
<h3 id="update-user-meta-user-id-meta-key-meta-value-prev-value-‘’"><a href="#update-user-meta-user-id-meta-key-meta-value-prev-value-‘’" class="headerlink" title="update_user_meta( $user_id, $meta_key, $meta_value, $prev_value = ‘’ )"></a>update_user_meta( $user_id, $meta_key, $meta_value, $prev_value = ‘’ )</h3><p>This function will update user metadata but will also insert metadata if the passed-in key doesn’t already exist:</p>
<ul>
<li>$user_id—A required integer of a user ID.</li>
<li>$meta_key—A required string of the meta key name for the meta value you would like to store. If this meta key already exists, it will update the current row’s meta value, if not it will insert a new row.</li>
<li>$meta_value—A required mixed value of an integer, string, array, or object. Arrays and objects will automatically be serialized.</li>
<li>$prev_value—An optional mixed value of the current metadata value. If a match is found, it will replace the previous/current value with the new value you specified. If left blank, the new meta value will replace the first instance of the matching key.  If you have five rows of metadata with the same key and you don’t specify which row to update with this value, it will update the first row and remove the other four.</li>
</ul>
<p>This function relies on the <code>update_metadata()</code> function located in /wp-includes/meta.php. Check it out!</p>
<h3 id="add-user-meta-user-id-meta-key-meta-value-unique-false"><a href="#add-user-meta-user-id-meta-key-meta-value-unique-false" class="headerlink" title="add_user_meta($user_id, $meta_key, $meta_value, $unique = false)"></a>add_user_meta($user_id, $meta_key, $meta_value, $unique = false)</h3><p>Yup, this function will insert brand-new user meta into the <code>wp_usermeta</code> table. We don’t use this function often anymore because we can just use <code>update_user_meta()</code> to insert new rows as well as update them. If you want to ensure that a given meta key is only ever used once per user, you should use this function and set the <code>$unique</code> parameter to <code>true</code>:</p>
<ul>
<li>$user_id—A required integer of a user ID.</li>
<li>$meta_key—A required string of the meta key name for the meta value you would like to store.</li>
<li>$meta_value—A required mixed value of an integer, string, array, or object.</li>
<li>$unique—An optional Boolean, which when set to <code>true</code> will make sure the meta key can only ever be added once for a given ID.</li>
</ul>
<h3 id="delete-user-meta-user-id-meta-key-meta-value-‘’"><a href="#delete-user-meta-user-id-meta-key-meta-value-‘’" class="headerlink" title="delete_user_meta($user_id, $meta_key, $meta_value = ‘’)"></a>delete_user_meta($user_id, $meta_key, $meta_value = ‘’)</h3><p>Deletes user metadata for a provided user ID and matching key. You can also specify a matching meta value if you only want to delete that value and not other metadata rows with the same meta key:</p>
<ul>
<li>$user_id—A required integer of a user ID.</li>
<li>$meta_key—A required string of the meta key name for the meta value you would like to delete.</li>
<li>$meta_value—An optional mixed value of the meta value. If you have more than one record with the same meta key, you can specify which one to delete by matching the meta value. It defaults to nothing, which will delete all meta rows with a matching <code>user_id</code> and <code>meta_key</code>.</li>
</ul>
<h2 id="wp-posts"><a href="#wp-posts" class="headerlink" title="wp_posts"></a>wp_posts</h2><p>Ah, the meat of WordPress. The <code>wp_posts</code> table is where most of your post data is stored. By default, WordPress comes with posts and pages. Both of these are technically posts and are stored in this table. The <code>post_type</code> field is what distinguishes what type of post a post is, whether it is a post, a page, a menu item, a revision, or any custom post type that you may later create.</p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Collation</th>
<th>Null</th>
<th>Default</th>
<th>Extra         </th>
</tr>
</thead>
<tbody>
<tr>
<td>ID</td>
<td>bigint(20)</td>
<td></td>
<td>No</td>
<td>None</td>
<td>AUTO_INCREMENT</td>
</tr>
<tr>
<td>post_author</td>
<td>bigint(20)</td>
<td></td>
<td>No</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>post_date</td>
<td>datetime</td>
<td></td>
<td>No</td>
<td>0000-00-00 00:00:00</td>
<td></td>
</tr>
<tr>
<td>post_date_gmt</td>
<td>datetime</td>
<td></td>
<td>No</td>
<td>0000-00-00 00:00:00</td>
<td></td>
</tr>
<tr>
<td>post_content</td>
<td>longtext</td>
<td>utf8_general_ci</td>
<td>No</td>
<td>None</td>
<td></td>
</tr>
<tr>
<td>post_title</td>
<td>text</td>
<td>utf8_general_ci</td>
<td>No</td>
<td>None</td>
<td></td>
</tr>
<tr>
<td>post_excerpt</td>
<td>text</td>
<td>utf8_general_ci</td>
<td>No</td>
<td>None</td>
<td></td>
</tr>
<tr>
<td>post_status</td>
<td>varchar(20)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td>Publish</td>
<td></td>
</tr>
<tr>
<td>comment_status</td>
<td>varchar(20)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td>Open</td>
<td></td>
</tr>
<tr>
<td>ping_status</td>
<td>varchar(20)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td>Open</td>
<td></td>
</tr>
<tr>
<td>post_password</td>
<td>varchar(20)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td></td>
<td></td>
</tr>
<tr>
<td>post_name</td>
<td>varchar(200)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td></td>
<td></td>
</tr>
<tr>
<td>to_ping</td>
<td>text</td>
<td>utf8_general_ci</td>
<td>No</td>
<td>None</td>
<td></td>
</tr>
<tr>
<td>pinged</td>
<td>text</td>
<td>utf8_general_ci</td>
<td>No</td>
<td>None</td>
<td></td>
</tr>
<tr>
<td>post_modified</td>
<td>datetime</td>
<td></td>
<td>No</td>
<td>0000-00-00 00:00:00</td>
<td></td>
</tr>
<tr>
<td>post_modified_gmt</td>
<td>datetime</td>
<td></td>
<td>No</td>
<td>0000-00-00 00:00:00</td>
<td></td>
</tr>
<tr>
<td>post_content_filtered</td>
<td>longtext</td>
<td>utf8_general_ci</td>
<td>No</td>
<td>None</td>
<td></td>
</tr>
<tr>
<td>post_parent</td>
<td>bigint(20)</td>
<td></td>
<td>No</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>guid</td>
<td>varchar(255)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td></td>
<td></td>
</tr>
<tr>
<td>menu_order</td>
<td>int(11)</td>
<td></td>
<td>No</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>post_type</td>
<td>varchar(20)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td>Post</td>
<td></td>
</tr>
<tr>
<td>post_mime_type</td>
<td>varchar(100)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td></td>
<td></td>
</tr>
<tr>
<td>comment_count</td>
<td>bigint(20)</td>
<td></td>
<td>No</td>
<td>0       </td>
</tr>
</tbody>
</table>
<p>The following functions are found in <em>/wp-includes/post.php</em>:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">// insert post - set post status to draft</div><div class="line">$args = array(</div><div class="line">        'post_title'   =&gt; 'Building Web Apps with WordPress',</div><div class="line">        'post_excerpt' =&gt; 'WordPress as an Application Framework',</div><div class="line">        'post_content' =&gt; 'WordPress is the key to successful cost effective</div><div class="line">        web solutions in most situations. Build almost anything on top of the</div><div class="line">        WordPress platform. DO IT NOW!!!!',</div><div class="line">        'post_status'  =&gt; 'draft',</div><div class="line">        'post_type'    =&gt; 'post',</div><div class="line">        'post_author'  =&gt; 1,</div><div class="line">        'menu_order'   =&gt; 0</div><div class="line">);</div><div class="line">$post_id = wp_insert_post( $args );</div><div class="line">echo 'post ID: ' . $post_id . '&lt;br&gt;';</div><div class="line"></div><div class="line">// update post - change post status to publish</div><div class="line">$args = array(</div><div class="line">        'ID'          =&gt; $post_id,</div><div class="line">        'post_status' =&gt; 'publish'</div><div class="line">);</div><div class="line">wp_update_post( $args );</div><div class="line"></div><div class="line">// get post - return post data as an object</div><div class="line">$post = get_post( $post_id );</div><div class="line">echo 'Object Title: ' . $post-&gt;post_title . '&lt;br&gt;';</div><div class="line"></div><div class="line">// get post - return post data as an array</div><div class="line">$post = get_post( $post_id, ARRAY_A );</div><div class="line">echo 'Array Title: ' . $post['post_title'] . '&lt;br&gt;';</div><div class="line"></div><div class="line">// delete post - skip the trash and permanently delete it</div><div class="line">wp_delete_post( $post_id, true );</div><div class="line"></div><div class="line">// get posts - return 100 posts</div><div class="line">$posts = get_posts( array( 'numberposts' =&gt; '100') );</div><div class="line">// loop all posts and display the ID &amp; title</div><div class="line">foreach ( $posts as $post ) &#123;</div><div class="line">        echo $post-&gt;ID . ': ' .$post-&gt;post_title . '&lt;br&gt;';</div><div class="line">&#125;</div><div class="line"></div><div class="line">/*</div><div class="line">The output from the above example should look something like this:</div><div class="line">post ID: 589</div><div class="line">Object Title: Building Web Apps with WordPress</div><div class="line">Array Title: Building Web Apps with WordPress</div><div class="line">"A list of post IDs and Titles from your install"</div><div class="line">*/</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h3 id="wp-insert-post-postarr-wp-error-false"><a href="#wp-insert-post-postarr-wp-error-false" class="headerlink" title="wp_insert_post($postarr, $wp_error = false)"></a>wp_insert_post($postarr, $wp_error = false)</h3><p>Inserts a new post with provided post data:</p>
<ul>
<li>$postarr—An array or object of post data. Arrays are expected to be escaped; objects are not.</li>
<li>$wp_error—An optional Boolean that will allow for a <code>WP_Error</code> if returned <code>false</code>.</li>
</ul>
<p>The defaults for the parameter $postarr are:</p>
<ul>
<li>_post<em>status</em>—Default is <em>draft</em>.</li>
<li>_post<em>type</em>—Default is <em>post</em>.</li>
<li>_post<em>author</em>—Default is current user ID (<code>$user_ID</code>). The ID of the user who added the post.</li>
<li>_ping<em>status</em>—Default is the value in the _default_ping<em>status</em> option. Whether the attachment can accept pings.</li>
<li>_post<em>parent</em>—Default is 0. Set this for the post it belongs to, if any.</li>
<li>_menu<em>order</em>—Default is 0. The order it is displayed.</li>
<li>_to<em>ping</em>—Whether to ping.</li>
<li><em>pinged</em>—Default is empty string.</li>
<li>_post<em>password</em>—Default is empty string. The password to access the attachment.</li>
<li><em>guid</em>—Global unique ID for referencing the attachment.</li>
<li>_post_content<em>filtered</em>—Post content filtered.</li>
<li>_post<em>excerpt</em>—Post excerpt.</li>
</ul>
<h3 id="wp-update-post-postarr-array-wp-error-false"><a href="#wp-update-post-postarr-array-wp-error-false" class="headerlink" title="wp_update_post( $postarr = array(), $wp_error = false )"></a>wp_update_post( $postarr = array(), $wp_error = false )</h3><p>Updates a post with provided post data.</p>
<ul>
<li>$postarr—A required array or object of post data. Arrays are expected to be escaped, objects are not.</li>
<li>$wp_error—An optional Boolean that will allow for a WP_Error if returned false.</li>
</ul>
<h3 id="get-post-post-null-output-OBJECT-filter-raw"><a href="#get-post-post-null-output-OBJECT-filter-raw" class="headerlink" title="get_post( $post = null, $output = OBJECT, $filter = raw )"></a>get_post( $post = null, $output = OBJECT, $filter = <em>raw</em> )</h3><p>Get post data from a provided post ID or a post object:</p>
<ul>
<li>$post—An optional integer or object of the post ID or post object you want to retrieve. The default is the current post you are on inside of the post loop, which is covered later in this chapter.</li>
<li>$output—An optional string of the output format. The default value is <code>OBJECT</code> (<code>WP_Post</code> object)  and the other values can be <code>ARRAY_A</code> (associative array) or <code>ARRAY_N</code> (numeric array).</li>
<li>$filter—An optional string of how the context should be sanitized on output. The default value is <code>raw</code>, but  other values can be <code>edit</code>, <code>db</code>, <code>display</code>, <code>attribute</code>, or <code>js</code>. Sanitization is covered in <a href="ch08.html" title="Chapter 8. Secure WordPress">Chapter 8</a>.</li>
</ul>
<h3 id="get-posts-args-null"><a href="#get-posts-args-null" class="headerlink" title="get_posts($args = null)"></a>get_posts($args = null)</h3><p><code>Returns a list of posts from matching criteria. This function uses the</code>WP_Query<code>class, which you will see examples of throughout the book: $args is an optional array of post arguments. The defaults are:</code></p>
<ul>
<li><em>numberposts</em>—Default is <code>5</code>. Total number of posts to retrieve. <code>–1</code> is all.</li>
<li><em>offset</em>—Default is <code>0</code>. Number of posts to pass over.</li>
<li><em>category</em>—What category to pull the posts from.</li>
<li><em>orderby</em>—Default is _post<em>date</em>. How to order the posts.</li>
<li><em>order</em>—Default is <em>DESC</em>. The order to retrieve the posts.</li>
<li><em>include</em>—A list of post IDs to include</li>
<li><em>exclude</em>—A list of post IDs to exclude</li>
<li>_meta<em>key</em>—Any metadata  key</li>
<li>_meta<em>value</em>—Any metadata value. Must also use <code>meta_key</code>.</li>
<li>_post<em>type</em>—Default is <em>post</em>. Can be <em>page</em>, or <em>attachment</em>, or the slug for any custom CPT. The string <code>any</code> will return posts from all post types.</li>
<li>_post<em>parent</em>—The parent ID of the post.</li>
<li>_post<em>status</em>—Default is <em>publish</em>. Post status to retrieve.</li>
</ul>
<h3 id="wp-delete-post-postid-0-force-delete-false"><a href="#wp-delete-post-postid-0-force-delete-false" class="headerlink" title="wp_delete_post( $postid = 0, $force_delete = false )"></a>wp_delete_post( $postid = 0, $force_delete = false )</h3><p><code>This function will trash any post or permanently delete it if $force_delete is set to</code>true<code>:</code></p>
<ul>
<li>$postid—A required integer of the post ID you would like to trash or delete.</li>
<li>$force_delete—An optional Boolean that if set to <code>true</code> will delete the post; if left blank, it will default to <code>false</code> and will move the post to a deleted status.</li>
</ul>
<h2 id="wp-postmeta"><a href="#wp-postmeta" class="headerlink" title="wp_postmeta"></a>wp_postmeta</h2><p>Sometimes you may want to store additional data along with a post. WordPress provides an easy way to do this without having to add additional fields to the posts table. You can store as much post metadata as you need to in the <code>wp_postmeta</code> table. Each record is associated to a post through the <code>post_id</code> field. When editing any post in the backend of WordPress, you can add/update/delete metadata or Custom Fields via the UI. </p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Collation</th>
<th>Null</th>
<th>Default</th>
<th>Extra         </th>
</tr>
</thead>
<tbody>
<tr>
<td>meta_id</td>
<td>bigint(20)</td>
<td></td>
<td>No</td>
<td>None</td>
<td>AUTO_INCREMENT</td>
</tr>
<tr>
<td>post_id</td>
<td>bigint(20)</td>
<td></td>
<td>No</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>meta_key</td>
<td>varchar(255)</td>
<td>utf8_general_ci</td>
<td>Yes</td>
<td>NULL</td>
<td></td>
</tr>
<tr>
<td>meta_value</td>
<td>longtext</td>
<td>utf8_general_ci</td>
<td>Yes</td>
<td>NULL</td>
<td></td>
</tr>
</tbody>
</table>
<p>The following functions are found in <em>/wp-includes/post.php</em>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">// get posts - return the latest post</div><div class="line">$posts = get_posts( array( &apos;numberposts&apos; =&gt; &apos;1&apos;, &apos;orderby&apos; =&gt;</div><div class="line">    &apos;post_date&apos;, &apos;order&apos; =&gt; &apos;DESC&apos; ) );</div><div class="line">foreach ( $posts as $post ) &#123;</div><div class="line">        $post_id = $post-&gt;ID;</div><div class="line"></div><div class="line">        // update post meta - public metadata</div><div class="line">        $content = &apos;You SHOULD see this custom field when editing your latest post.&apos;;</div><div class="line">        update_post_meta( $post_id, &apos;bwawwp_displayed_field&apos;, $content );</div><div class="line"></div><div class="line">        // update post meta - hidden metadata</div><div class="line">        $content = str_replace( &apos;SHOULD&apos;, &apos;SHOULD NOT&apos;, $content );</div><div class="line">        update_post_meta( $post_id, &apos;_bwawwp_hidden_field&apos;, $content );</div><div class="line"></div><div class="line">        // array of student logins</div><div class="line">        $students[] = &apos;dalya&apos;;</div><div class="line">        $students[] = &apos;ashleigh&apos;;</div><div class="line">        $students[] = &apos;lola&apos;;</div><div class="line">        $students[] = &apos;isaac&apos;;</div><div class="line">        $students[] = &apos;marin&apos;;</div><div class="line">        $students[] = &apos;brian&apos;;</div><div class="line">        $students[] = &apos;nina&apos;;</div><div class="line"></div><div class="line">        // add post meta - one key with array as value, array will be serialized</div><div class="line">    // automatically</div><div class="line">        add_post_meta( $post_id, &apos;bwawwp_students&apos;, $students, true );</div><div class="line"></div><div class="line">        // loop students and add post meta record for each student</div><div class="line">        foreach ( $students as $student ) &#123;</div><div class="line">                add_post_meta( $post_id, &apos;bwawwp_student&apos;, $student );</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        // get post meta - get all meta keys</div><div class="line">        $all_meta = get_post_meta( $post_id );</div><div class="line">        echo &apos;&lt;pre&gt;&apos;;</div><div class="line">        print_r( $all_meta );</div><div class="line">        echo &apos;&lt;/pre&gt;&apos;;</div><div class="line"></div><div class="line">        // get post meta - get 1st instance of key</div><div class="line">        $student = get_post_meta( $post_id, &apos;bwawwp_student&apos;, true );</div><div class="line">        echo &apos;oldest student: &apos; . $student;</div><div class="line"></div><div class="line">        // delete post meta</div><div class="line">        delete_post_meta( $post_id, &apos;bwawwp_student&apos; );</div><div class="line">&#125;</div><div class="line"></div><div class="line">/*</div><div class="line">The output from the above example should look something like this:</div><div class="line">Array</div><div class="line">(</div><div class="line">    [_bwawwp_hidden_field] =&gt; Array</div><div class="line">        (</div><div class="line">        [0] =&gt; You SHOULD NOT see this custom field when editing your latest post.</div><div class="line">        )</div><div class="line"></div><div class="line">    [bwawwp_displayed_field] =&gt; Array</div><div class="line">        (</div><div class="line">            [0] =&gt; You SHOULD see this custom field when editing your latest post.</div><div class="line">        )</div><div class="line"></div><div class="line">    [bwawwp_students] =&gt; Array</div><div class="line">        (</div><div class="line">        [0] =&gt; a:7:&#123;i:0;s:5:&quot;dalya&quot;;i:1;s:8:&quot;ashleigh&quot;;i:2;s:4:&quot;lola&quot;;i:3;s:5:</div><div class="line">        &quot;isaac&quot;;i:4;s:5:&quot;marin&quot;;i:5;s:5:&quot;brian&quot;;i:6;s:4:&quot;nina&quot;;&#125;</div><div class="line">        )</div><div class="line"></div><div class="line">    [bwawwp_student] =&gt; Array</div><div class="line">        (</div><div class="line">            [0] =&gt; dalya</div><div class="line">            [1] =&gt; ashleigh</div><div class="line">            [2] =&gt; lola</div><div class="line">            [3] =&gt; isaac</div><div class="line">            [4] =&gt; marin</div><div class="line">            [5] =&gt; brian</div><div class="line">            [6] =&gt; nina</div><div class="line">        )</div><div class="line">)</div><div class="line">oldest student: dalya</div><div class="line">*/</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h3 id="get-post-meta-post-id-key-‘’-single-false"><a href="#get-post-meta-post-id-key-‘’-single-false" class="headerlink" title="get_post_meta($post_id, $key = ‘’, $single = false)"></a>get_post_meta($post_id, $key = ‘’, $single = false)</h3><p>Get post metadata for a given post:</p>
<ul>
<li>$post_id—A required integer of the post ID, for which you would like to retrieve post meta.</li>
<li>$key—Optional string of the meta key name for which you would like to retrieve post meta. The default is to return metadata for all of the meta keys for a particular post.</li>
<li>$single—A Boolean of whether to return a single value or not. The default is <code>false</code>, and the value will be returned as an array.</li>
</ul>
<p><code>There can be more than one meta key for the same post ID with different values. If you set</code>$single<code>to</code>true<code>, you will get the first key’s value; if it is set to</code>false<code>, you will get an array of the values of each record with the same key.</code></p>
<h3 id="update-post-meta-post-id-meta-key-meta-value-prev-value-‘’"><a href="#update-post-meta-post-id-meta-key-meta-value-prev-value-‘’" class="headerlink" title="update_post_meta($post_id, $meta_key, $meta_value, $prev_value = ‘’)"></a>update_post_meta($post_id, $meta_key, $meta_value, $prev_value = ‘’)</h3><p>This function will update post metadata but will also insert metadata if the passed-in key doesn’t already exist:</p>
<ul>
<li>$post_id—A required integer of a post ID.</li>
<li>$meta_key—A required string of the meta key name for the meta value you would like to store. If this meta key already exists, it will update the current row’s meta value; if not, it will insert a new row.</li>
<li>$meta_value—A required mixed value of an integer, string, array, or object. Arrays and objects will automatically be serialized.</li>
<li>$prev_value—An optional mixed value of the current metadata value. If a match is found, it will replace the previous/current value with the new value you specified. If left blank, the new meta value will replace the first instance of the matching key.  If you have five rows of metadata with the same key and you don’t specify which row to update with this value, it will update the first row and remove the other four.</li>
</ul>
<p>This function relies on the <code>update_metadata()</code> function located in <em>/wp-includes/meta.php</em>. Check it out!</p>
<h3 id="add-post-meta-post-id-meta-key-meta-value-unique-false"><a href="#add-post-meta-post-id-meta-key-meta-value-unique-false" class="headerlink" title="add_post_meta($post_id, $meta_key, $meta_value, $unique = false)"></a>add_post_meta($post_id, $meta_key, $meta_value, $unique = false)</h3><p>This function will insert brand-new post meta into the <code>wp_postmeta</code> table. We don’t use this function so often anymore because we can just use the previous function we talked about, <code>update_post_meta()</code>, to insert new rows as well as update them. If you want to insure that a given meta key is only ever used once per post, you should use this function and set the <code>$unique</code> parameter to <code>true</code>:</p>
<ul>
<li>$user_id—A required integer of a post ID.</li>
<li>$meta_key—A required string of the meta key name for the meta value you would like to store.</li>
<li>$meta_value—A required mixed value of an integer, string, array, or an object.</li>
<li>$unique—An optional Boolean that when set to <code>true</code> will make sure the meta key can only ever be added once for a given ID.</li>
</ul>
<h3 id="delete-post-meta-post-id-meta-key-meta-value-‘’"><a href="#delete-post-meta-post-id-meta-key-meta-value-‘’" class="headerlink" title="delete_post_meta($post_id, $meta_key, $meta_value = ‘’)"></a>delete_post_meta($post_id, $meta_key, $meta_value = ‘’)</h3><p>Deletes post metadata for a provided post ID and matching key. You can also specify a matching meta value if you only want to delete that value and not other metadata rows with the same meta key:</p>
<ul>
<li>$post_id - A required integer of a post ID.</li>
<li>$meta_key - A required string of the</li>
<li>$meta_value - An optional mixed value of the meta value. If you have more than one record with the same meta key, you can specify which one to delete by matching this value. It defaults to nothing, which will delete all meta rows with a matching <code>post_id</code> and <code>meta_key</code>.</li>
</ul>
<h2 id="wp-comments"><a href="#wp-comments" class="headerlink" title="wp_comments"></a>wp_comments</h2><p>Comments can be left against any post. The <code>wp_comments</code> table stores individual comments for any post and default associated data. </p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Collation</th>
<th>Null</th>
<th>Default</th>
<th>Extra   </th>
</tr>
</thead>
<tbody>
<tr>
<td>comment_ID</td>
<td>bigint(20)</td>
<td></td>
<td>No</td>
<td>None</td>
<td>AUTO_INCREMENT     </td>
</tr>
<tr>
<td>comment_post_ID</td>
<td>bigint(20)</td>
<td></td>
<td>No</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>comment_author</td>
<td>tinytext</td>
<td>utf8_general_ci</td>
<td>No</td>
<td></td>
<td></td>
</tr>
<tr>
<td>comment_author_email</td>
<td>varchar(100)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td></td>
<td></td>
</tr>
<tr>
<td>comment_author_url</td>
<td>varchar(200)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td></td>
<td></td>
</tr>
<tr>
<td>comment_author_IP</td>
<td>varchar(100)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td></td>
<td></td>
</tr>
<tr>
<td>comment_date</td>
<td>datetime</td>
<td></td>
<td>No</td>
<td></td>
<td>0000-00-00 00:00:00</td>
</tr>
<tr>
<td>comment_date_gmt</td>
<td>datetime</td>
<td></td>
<td>No</td>
<td>0000-00-00 00:00:00</td>
<td></td>
</tr>
<tr>
<td>comment_content</td>
<td>text</td>
<td>utf8_general_ci</td>
<td>No</td>
<td>None</td>
<td></td>
</tr>
<tr>
<td>comment_karma</td>
<td>int(11)</td>
<td></td>
<td>No</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>comment_approved</td>
<td>varchar(20)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td>1</td>
<td></td>
</tr>
<tr>
<td>comment_agent</td>
<td>varchar(20)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td></td>
<td></td>
</tr>
<tr>
<td>comment_type</td>
<td>varchar(20)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td></td>
<td></td>
</tr>
<tr>
<td>comment_parent</td>
<td>bigint(20)</td>
<td></td>
<td>No</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>user_id</td>
<td>bigint(20)</td>
<td></td>
<td>No</td>
<td>0</td>
<td></td>
</tr>
</tbody>
</table>
<p>The following functions are found in <em>/wp-includes/comment.php</em>:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"><span class="comment">// insert post</span></div><div class="line">$args = <span class="keyword">array</span>(</div><div class="line"> <span class="string">'post_title'</span>   =&gt; <span class="string">'5 year anniversary on 9/10/16'</span>,</div><div class="line"> <span class="string">'post_content'</span> =&gt; <span class="string">'Think of somthing cool to do and make a comment about it!'</span>,</div><div class="line"> <span class="string">'post_status'</span>  =&gt; <span class="string">'publish'</span></div><div class="line">);</div><div class="line">$post_id = wp_insert_post( $args );</div><div class="line"><span class="keyword">echo</span> <span class="string">'post ID: '</span> . $post_id . <span class="string">' - '</span> . $args[<span class="string">'post_title'</span>] . <span class="string">'&lt;br&gt;'</span>;</div><div class="line"></div><div class="line"><span class="comment">// make comments array</span></div><div class="line">$comments[] = <span class="string">'Take a trip to South Jersey'</span>;</div><div class="line">$comments[] = <span class="string">'Dinner at Taco Bell'</span>;</div><div class="line">$comments[] = <span class="string">'Make a baby'</span>;</div><div class="line"></div><div class="line"><span class="comment">//loop comments array</span></div><div class="line"><span class="keyword">foreach</span> ( $comments <span class="keyword">as</span> $key =&gt; $comment ) &#123;</div><div class="line">        <span class="comment">// insert comments</span></div><div class="line">        $commentdata = <span class="keyword">array</span>(</div><div class="line">                <span class="string">'comment_post_ID'</span> =&gt; $post_id,</div><div class="line">                <span class="string">'comment_content'</span> =&gt; $comments[$key],</div><div class="line">        );</div><div class="line">        $comment_ids[] = wp_insert_comment( $commentdata );</div><div class="line">&#125;</div><div class="line"><span class="keyword">echo</span> <span class="string">'comments:&lt;pre&gt;'</span>;</div><div class="line">print_r( $comments );</div><div class="line"><span class="keyword">echo</span> <span class="string">'&lt;/pre&gt;'</span>;</div><div class="line"></div><div class="line"><span class="comment">// update comment</span></div><div class="line">$commentarr[<span class="string">'comment_ID'</span>] = $comment_ids[<span class="number">0</span>];</div><div class="line">$commentarr[<span class="string">'comment_content'</span>] = <span class="string">'Take a trip to Paris, France'</span>;</div><div class="line">wp_update_comment( $commentarr );</div><div class="line"></div><div class="line"><span class="comment">// insert comment - sub comment from parent id</span></div><div class="line">$commentdata = <span class="keyword">array</span>(</div><div class="line">        <span class="string">'comment_post_ID'</span> =&gt; $post_id,</div><div class="line">        <span class="string">'comment_parent'</span> =&gt; $comment_ids[<span class="number">0</span>],</div><div class="line">        <span class="string">'comment_content'</span> =&gt; <span class="string">'That is a pretty good idea...'</span>,</div><div class="line">);</div><div class="line">wp_insert_comment( $commentdata );</div><div class="line"></div><div class="line"><span class="comment">// get comments - search taco bell</span></div><div class="line">$comments = get_comments( <span class="string">'search=Taco Bell&amp;number=1'</span> );</div><div class="line"><span class="keyword">foreach</span> ( $comments <span class="keyword">as</span> $comment ) &#123;</div><div class="line">        <span class="comment">// insert comment - sub comment of taco bell comment id</span></div><div class="line">        $commentdata = <span class="keyword">array</span>(</div><div class="line">                <span class="string">'comment_post_ID'</span> =&gt; $post_id,</div><div class="line">                <span class="string">'comment_parent'</span> =&gt; $comment-&gt;comment_ID,</div><div class="line">                <span class="string">'comment_content'</span> =&gt; <span class="string">'Do you want to get smacked up?'</span>,</div><div class="line">        );</div><div class="line">        wp_insert_comment( $commentdata );</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// get comment - count of comments for this post</span></div><div class="line">$comment_count = get_comments( <span class="string">'post_id= '</span> . $post_id . <span class="string">'&amp;count=true'</span> );</div><div class="line"><span class="keyword">echo</span> <span class="string">'comment count: '</span> . $comment_count . <span class="string">'&lt;br&gt;'</span>;</div><div class="line"></div><div class="line"><span class="comment">// get comments - get all comments for this post</span></div><div class="line">$comments = get_comments( <span class="string">'post_id='</span> .$post_id );</div><div class="line"><span class="keyword">foreach</span> ( $comments <span class="keyword">as</span> $comment ) &#123;</div><div class="line">        <span class="comment">// update 1st comment</span></div><div class="line">        <span class="keyword">if</span> ( $comment_ids[<span class="number">0</span>] == $comment-&gt;comment_ID ) &#123;</div><div class="line">         $commentarr = <span class="keyword">array</span>(</div><div class="line">          <span class="string">'comment_ID'</span> =&gt; $comment-&gt;comment_ID,</div><div class="line">          <span class="string">'comment_content'</span> =&gt; $comment-&gt;comment_content . <span class="string">' &amp; make a baby!'</span>,</div><div class="line">        );</div><div class="line">                wp_update_comment( $commentarr );</div><div class="line">                <span class="comment">// delete all other comments</span></div><div class="line">        &#125;<span class="keyword">else</span> &#123;</div><div class="line">                <span class="comment">// delete comment</span></div><div class="line">                wp_delete_comment( $comment-&gt;comment_ID, <span class="keyword">true</span> );</div><div class="line">        &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// get comment - new comment count</span></div><div class="line">$comment_count = get_comments( <span class="string">'post_id= '</span> . $post_id . <span class="string">'&amp;count=true'</span> );</div><div class="line"><span class="keyword">echo</span> <span class="string">'new comment count: '</span> . $comment_count . <span class="string">'&lt;br&gt;'</span>;</div><div class="line"></div><div class="line"><span class="comment">// get comment - get best comment</span></div><div class="line">$comment = get_comment( $comment_ids[<span class="number">0</span>] );</div><div class="line"><span class="keyword">echo</span> <span class="string">'best comment: '</span> . $comment-&gt;comment_content;</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">The output from the above example should look something like this:</div><div class="line">post ID: 91011 - 5 year anniversary on 9/10/16</div><div class="line">comments:</div><div class="line">Array</div><div class="line">(</div><div class="line">    [0] =&gt; Take a trip to South Jersey</div><div class="line">    [1] =&gt; Dinner at Taco Bell</div><div class="line">    [2] =&gt; Make a baby</div><div class="line">)</div><div class="line">comment count: 5</div><div class="line">new comment count: 1</div><div class="line">best comment: Take a trip to Paris, France &amp; make a baby!</div><div class="line">*/</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h3 id="get-comment-comment-output-OBJECT"><a href="#get-comment-comment-output-OBJECT" class="headerlink" title="get_comment( $comment, $output = OBJECT )"></a>get_comment( $comment, $output = OBJECT )</h3><p>Returns comment data from a comment ID or comment object. If the comment is empty, then the global comment variable will be used if set:</p>
<ul>
<li>$comment—An optional integer, string, or object of a comment ID or object.</li>
<li>$output—An optional string that defines what format the output should be in. Possible values are <code>OBJECT</code>, <code>ARRAY_A</code>, and <code>ARRAY_N</code>.</li>
</ul>
<h3 id="get-comments-args-‘’"><a href="#get-comments-args-‘’" class="headerlink" title="get_comments( $args = ‘’ )"></a>get_comments( $args = ‘’ )</h3><p>This function retrieves a list of comments for specific posts or a single post. It calls the <code>WP_Comment_Query</code> class, which we will cover in the next chapter. $args are an optional array or string of arguments to query comments. The default arguments are:</p>
<ul>
<li>_author<em>email</em>—A string of a comment author’s email address.</li>
<li><em>ID</em>—An integer of the ID of a comment.</li>
<li><em>karma</em>—An integer of a comment’s karma, which can be used by plugins for rating.</li>
<li><em>number</em>—An integer of the number of comments to return. Default is all comments.</li>
<li><em>offset</em>—An integer of the number of comments to pass over. Default is 0.</li>
<li><em>orderby</em>—A string of the field to order the comment by. Allowed values are: <code>comment_agent</code>, <code>comment_approved</code>, <code>comment_author</code>, <code>comment_author_email</code>, <code>comment_author_IP</code>, <code>comment_author_url</code>, <code>comment_content</code>, <code>comment_date</code>, <code>comment_date_gmt</code>, <code>comment_ID</code>, <code>comment_karma</code>, <code>comment_parent</code>, <code>comment_post_ID</code>, <code>comment_type</code>, <code>user_id</code>.</li>
<li><em>order</em>—A string of how to order the selected order by argument. Defaults to  <code>DESC</code> and also accepts <code>ASC</code>.</li>
<li><em>parent</em>—An integer of a comment’s parent comment ID.</li>
<li>_post<em>id</em>—An integer of the post ID a comment is attached to.</li>
<li>_post<em>author</em>—An integer of the post author ID a comment is attached to.</li>
<li>_post<em>name</em>—A string of the post name a comment is attached to.</li>
<li>_post<em>parent</em>—An integer of the  post parent ID a comment is attached to.</li>
<li>_post<em>status</em>—A string of the post status  a comment is attached to.</li>
<li>_post<em>type</em>—A string of the post type a comment is attached to.</li>
<li><em>status</em>—A string of the status of a comment. Optional values are <em><code>hold</code></em>, <em><code>approve</code></em>, <em><code>spam</code></em>, or <em><code>trash</code></em>.</li>
<li><em>type</em>—A string of the type of a comment. Optional values are <code>&#39;&#39;</code>, <em><code>pingback</code></em>, or <em><code>trackback</code></em>.</li>
<li>_user<em>id</em>—An integer of the user ID of a comment.</li>
<li><em>search</em>—A string of search terms to search a comment on. Searches the <code>comment_author</code>, <code>comment_author_email</code>, <code>comment_author_url</code>, <code>comment_author_IP</code>, and <code>comment_content</code> fields.</li>
<li><em>count</em>—A Boolean that will make the query return a count or results. The default value is <code>false</code>.</li>
<li>_meta<em>key</em>—The comment meta key of comment meta  to search on.</li>
<li>_meta<em>value</em>—The comment meta value of comment meta to search on; <code>meta_key</code> is required.</li>
</ul>
<h3 id="wp-insert-comment-commentdata"><a href="#wp-insert-comment-commentdata" class="headerlink" title="wp_insert_comment( $commentdata )"></a>wp_insert_comment( $commentdata )</h3><p>Inserts a comment into the database:</p>
<ul>
<li>$commentdata—A required array of comment fields and values to be inserted. Available fields to be inserted are <code>comment_post_ID</code>, <code>comment_author</code>, <code>comment_author_email</code>, <code>comment_author_url</code>, <code>comment_author_IP</code>, <code>comment_date</code>, <code>comment_date_gmt</code>, <code>comment_content</code>, <code>comment_karma</code>, <code>comment_approved</code>, <code>comment_agent</code>, <code>comment_type</code>, <code>comment_parent</code>, and <code>user_id</code>.</li>
</ul>
<h3 id="wp-update-comment-commentarr"><a href="#wp-update-comment-commentarr" class="headerlink" title="wp_update_comment( $commentarr )"></a>wp_update_comment( $commentarr )</h3><p>Updates comment data and filters to make sure all required fields are valid before updating in the database:</p>
<ul>
<li>$commentarr - An optional array of arguments containing comment fields and values to be updated. These are the same field arguments just listed for the <code>wp_insert_comment()</code> function.</li>
</ul>
<h3 id="wp-delete-comment-comment-id-force-delete-false"><a href="#wp-delete-comment-comment-id-force-delete-false" class="headerlink" title="wp_delete_comment( $comment_id, $force_delete = false )"></a>wp_delete_comment( $comment_id, $force_delete = false )</h3><p>Deletes a comment. By default, it will trash the comment unless specified to permanently delete:</p>
<ul>
<li>$comment_id - A required integer of the comment ID to trash/delete.</li>
<li>$force_delete -  An optional Boolean that if set to <code>true</code> will permanently delete a comment. <a href="ch02.html#workingwpcomments" title="Example 2-6. Working with the wp_comments table">Example 2-6</a> demonstrates some of the basic functions for interacting with the <code>wp_comments</code> table.</li>
</ul>
<h2 id="wp-commentsmeta"><a href="#wp-commentsmeta" class="headerlink" title="wp_commentsmeta"></a>wp_commentsmeta</h2><p>Just like the <code>wp_usermeta</code> and <code>wp_postmeta</code> table, this table stores any custom, additional data tied to a comment by the <code>comment_id</code> fields.</p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Collation</th>
<th>Null</th>
<th>Default</th>
<th>Extra         </th>
</tr>
</thead>
<tbody>
<tr>
<td>meta_id</td>
<td>bigint(20)</td>
<td></td>
<td>No</td>
<td>None</td>
<td>AUTO_INCREMENT</td>
</tr>
<tr>
<td>comment_id</td>
<td>bigint(20)</td>
<td></td>
<td>No</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>meta_key</td>
<td>varchar(255)</td>
<td>utf8_general_ci</td>
<td>Yes</td>
<td>NULL</td>
<td></td>
</tr>
<tr>
<td>meta_value</td>
<td>longtext</td>
<td>utf8_general_ci</td>
<td>Yes</td>
<td>NULL</td>
<td></td>
</tr>
</tbody>
</table>
<p>The following functions are found in <em>/wp-includes/comment.php</em>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">// get comments - last comment ID</div><div class="line">$comments = get_comments( &apos;number=1&apos; );</div><div class="line">foreach ( $comments as $comment ) &#123;</div><div class="line">        $comment_id = $comment-&gt;comment_ID;</div><div class="line"></div><div class="line">        // add comment meta - meta for view date &amp; IP address</div><div class="line">        $viewed = array( date( &quot;m.d.y&quot; ), $_SERVER[&quot;REMOTE_ADDR&quot;] );</div><div class="line">        $comment_meta_id = add_comment_meta( $comment_id, &apos;bwawwp_view_date&apos;,</div><div class="line">        $viewed, true );</div><div class="line">        echo &apos;comment meta id: &apos; . $comment_meta_id;</div><div class="line"></div><div class="line">        // update comment meta - change date format to format like</div><div class="line">        // October 23, 2020, 12:00 am instead of 10.23.20</div><div class="line">        $viewed = array( date( &quot;F j, Y, g:i a&quot; ), $_SERVER[&quot;REMOTE_ADDR&quot;] );</div><div class="line">        update_comment_meta( $comment_id, &apos;bwawwp_view_date&apos;, $viewed );</div><div class="line"></div><div class="line">        // get comment meta - all keys</div><div class="line">        $comment_meta = get_comment_meta( $comment_id );</div><div class="line">        echo &apos;&lt;pre&gt;&apos;;</div><div class="line">        print_r( $comment_meta );</div><div class="line">        echo &apos;&lt;/pre&gt;&apos;;</div><div class="line"></div><div class="line">        // delete comment meta</div><div class="line">        delete_comment_meta( $comment_id, &apos;bwawwp_view_date&apos; );</div><div class="line">&#125;</div><div class="line"></div><div class="line">/*</div><div class="line">The output from the above example should look something like this:</div><div class="line">comment meta id: 16</div><div class="line">Array</div><div class="line">(</div><div class="line">    [bwawwp_view_date] =&gt; Array</div><div class="line">        (</div><div class="line">            [0] =&gt; a:2:&#123;i:0;s:24:&quot;August 11, 2013, 4:16 pm&quot;;i:1;s:9:&quot;127.0.0.1&quot;;&#125;</div><div class="line">        )</div><div class="line"></div><div class="line">)</div><div class="line">*/</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h3 id="get-comment-meta-comment-id-key-‘’-single-false"><a href="#get-comment-meta-comment-id-key-‘’-single-false" class="headerlink" title="get_comment_meta($comment_id, $key = ‘’, $single = false)"></a>get_comment_meta($comment_id, $key = ‘’, $single = false)</h3><p>Get comment meta for a given comment ID:</p>
<ul>
<li>$comment_id—A required integer of the comment ID for which you would like to retrieve comment meta.</li>
<li>$key—Optional string of the meta key name for which you would like to retrieve comment meta. The default is to return metadata for all of the meta keys for a particular post.</li>
<li>$single—A Boolean of whether to return a single value or not. The default is <code>false</code>, and the value will be returned as an array.</li>
</ul>
<h3 id="add-comment-meta-comment-id-meta-key-meta-value-unique-false"><a href="#add-comment-meta-comment-id-meta-key-meta-value-unique-false" class="headerlink" title="add_comment_meta($comment_id, $meta_key, $meta_value, $unique = false)"></a>add_comment_meta($comment_id, $meta_key, $meta_value, $unique = false)</h3><p>Add comment meta for given comment ID:</p>
<ul>
<li>$comment_id—A required integer of a comment ID.</li>
<li>$meta_key—A required string of the meta key name for the meta value you would like to store.</li>
<li>$meta_value—A required mixed value of an integer, string, array, or object.</li>
<li>$unique—An optional Boolean that when set to <code>true</code> will make sure the meta key can only ever be added once for a given ID.</li>
</ul>
<h3 id="update-comment-meta-comment-id-meta-key-meta-value-prev-value-‘’"><a href="#update-comment-meta-comment-id-meta-key-meta-value-prev-value-‘’" class="headerlink" title="update_comment_meta($comment_id, $meta_key, $meta_value, $prev_value = ‘’)"></a>update_comment_meta($comment_id, $meta_key, $meta_value, $prev_value = ‘’)</h3><ul>
<li>$comment_id—A required integer of a comment ID.</li>
<li>$meta_key—A required string of the meta key name for the meta value you would like to store. If this meta key already exists, it will update the current row’s meta value; if not, it will insert a new row.</li>
<li>$meta_value—A required mixed value of an integer, string, array, or object. Arrays and objects will automatically be serialized.</li>
<li>$prev_value—An optional mixed value of the current metadata value. If a match is found, it will replace the previous/current value with the new value you specified. If left blank, the new meta value will replace the first instance of the matching key.  If you have five rows of metadata with the same key and you don’t specify which row to update with this value, it will update the first row and remove the other four.</li>
</ul>
<h3 id="delete-comment-meta-comment-id-meta-key-meta-value-‘’"><a href="#delete-comment-meta-comment-id-meta-key-meta-value-‘’" class="headerlink" title="delete_comment_meta($comment_id, $meta_key, $meta_value = ‘’)"></a>delete_comment_meta($comment_id, $meta_key, $meta_value = ‘’)</h3><p>Deletes comment metadata for a provided comment ID and matching key. You can also specify a matching meta value if you only want to delete that value and not other metadata rows with the same meta key:</p>
<ul>
<li>$comment_id—A required integer of a comment ID.</li>
<li>$meta_key—A required string of the meta key name for the meta value you would like to delete.</li>
<li>$meta_value—An optional mixed value of the meta value. If you have more than one record with the same meta key, you can specify which one to delete by matching this value. It defaults to nothing, which will delete all meta rows with a matching <code>post_id</code> and <code>meta_key</code>.</li>
</ul>
<h2 id="wp-links"><a href="#wp-links" class="headerlink" title="wp_links"></a>wp_links</h2><p>This table stores any links, URLs, or bookmarks you create. Since WordPress version 3.5, the links/blogroll manager UI has been hidden, so if you do a fresh install and don’t see it, don’t freak out.  You can still use the links/blogroll manager if you choose by installing <a href="https://twitter.com/nacin" target="_blank" rel="external">Andrew Nacin’s</a> <a href="http://bit.ly/link-manager" target="_blank" rel="external">link manager plugin</a>. If you are upgrading WordPress from a version prior to 3.5, you will still be able to access the UI. Why was this removed, you might ask? If Andrew pulled it out of core, you can bet he had a good reason for it. </p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Collation</th>
<th>Null</th>
<th>Default</th>
<th>Extra</th>
</tr>
</thead>
<tbody>
<tr>
<td>link_id</td>
<td>bigint(20)</td>
<td></td>
<td>No</td>
<td>None</td>
<td>AUTO_INCREMENT</td>
</tr>
<tr>
<td>link_url</td>
<td>varchar(255)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td></td>
<td></td>
</tr>
<tr>
<td>link_name</td>
<td>varchar(255)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td></td>
<td></td>
</tr>
<tr>
<td>link_image</td>
<td>varchar(255)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td></td>
<td></td>
</tr>
<tr>
<td>link_target</td>
<td>varchar(25)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td></td>
<td></td>
</tr>
<tr>
<td>link_description</td>
<td>varchar(255)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td></td>
<td></td>
</tr>
<tr>
<td>link_visible</td>
<td>varchar(20)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>link_owner</td>
<td>bigint(20)</td>
<td></td>
<td>No</td>
<td>1</td>
<td></td>
</tr>
<tr>
<td>link_rating</td>
<td>int(11)</td>
<td></td>
<td>No</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>link_updated</td>
<td>datetime</td>
<td></td>
<td>No</td>
<td>0000-00-00 00:00:00</td>
<td></td>
</tr>
<tr>
<td>link_rel</td>
<td>varchar(255)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td></td>
<td></td>
</tr>
<tr>
<td>link_notes</td>
<td>mediumtext</td>
<td>utf8_general_ci</td>
<td>No</td>
<td>None</td>
<td></td>
</tr>
<tr>
<td>link_rss</td>
<td>varchar(255)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Bookmark functions can be found in <em>/wp-includes/bookmark.php</em>.</p>
<h2 id="wp-terms"><a href="#wp-terms" class="headerlink" title="wp_terms"></a>wp_terms</h2><p>The <code>wp_terms</code> table stores each category name or term name that you create. Each record is tied to its taxonomy in the <code>wp_term_taxonomy</code> table by the <code>term_id</code>. So you’re familiar with post categories and tags? Well, each category or tag is stored in this table, and technically they are both taxonomies. Every term that is stored in the name column is a taxonomy term. </p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Collation</th>
<th>Null</th>
<th>Default</th>
<th>Extra         </th>
</tr>
</thead>
<tbody>
<tr>
<td>term_id</td>
<td>bigint(20)</td>
<td></td>
<td>No</td>
<td>None</td>
<td>AUTO_INCREMENT</td>
</tr>
<tr>
<td>name</td>
<td>varchar(200)</td>
<td></td>
<td>No</td>
<td></td>
<td></td>
</tr>
<tr>
<td>slug</td>
<td>varchar(200)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td></td>
<td></td>
</tr>
<tr>
<td>term_group</td>
<td>bigint(10)</td>
<td></td>
<td>No</td>
<td>0</td>
<td></td>
</tr>
</tbody>
</table>
<p>The following functions are found in <em>/wp-includes/taxonomy.php</em>.</p>
<h3 id="get-terms-taxonomies-args-‘’"><a href="#get-terms-taxonomies-args-‘’" class="headerlink" title="get_terms( $taxonomies, $args = ‘’ )"></a>get_terms( $taxonomies, $args = ‘’ )</h3><p>Gets the terms of a specific taxonomy or an array of taxonomies:</p>
<ul>
<li>$taxonomies—A required string or array of a taxonomy or list of taxonomies.</li>
<li><p>$args—An optional string or array of arguments. Available arguments are:</p>
<ol>
<li><code>orderby</code> — Default is <code>name</code>. Can be <code>name</code>, <code>count</code>, <code>term_group</code>, <code>slug</code>, or nothing, which will use <code>term_id</code>. Passing a custom value other than these will cause the terms to be ordered on that custom value.`</li>
<li><code>_order_</code> — ASC<code>or</code>DESC<code>. The default is</code>ASC<code>.</code></li>
<li><code>hide_empty</code> — The default value is <code>true</code>, which will only return terms that are attached to a post. If set to <code>false</code>, you can return all terms regardless, if they are being used by a post or not.`</li>
<li><code>exclude</code> — An array or comma-separated or space-delimited string of term IDs to exclude from the query results. If include is being used, exclude will be ignored.</li>
<li><code>exclude_tree</code> — An array or comma-separated or space-delimited<br>  string of term IDs to exclude from the query results, including any child terms. If include is being used, _exclude<em>tree</em> will be ignored.</li>
<li><code>include</code> —An array or comma-separated or space-delimited string of term IDs to include in the query results.</li>
<li><code>number</code> — The number of terms for the query to return. The default is <code>all</code>.`</li>
<li><code>offset</code> — The number by which to offset the terms query.</li>
<li><code>fields</code> —You can specify if you want to return term IDs or names. The default is <code>all</code>, which returns an array of term objects.`</li>
<li><code>slug</code> — A string that will return any terms that have a matching slug.</li>
<li><code>hierarchical</code> — Includes all child terms if they are attached to posts. The default is <code>true</code>, so to not return terms hierarchically, set this to <code>false</code>.`</li>
<li><code>search</code> — A string that will return any terms whose names match the value provided. The search is case-insensitive.</li>
<li><code>name_like</code> — A string that will return any terms whose names begin with the value provided. Like the search, this is case-insensitive.</li>
<li><code>pad_counts</code> —If set to <code>true</code>, the query results will include the count of each term’s children.`</li>
<li><code>get</code> — If set to <code>all</code>, returns terms regardless of ancestry or whether the terms are empty.`</li>
<li><code>child_of</code> — When set to a term ID, the query results will contain all descendants of the provided term ID. The default is 0, which returns everything.</li>
<li><code>parent</code> — When set to a term ID, the query results will contain the direct children of the provided term ID. The default is an empty string.</li>
<li><code>cache_domain</code> — Enables a unique cache key to be produced when this query is stored in object cache.</li>
</ol>
</li>
</ul>
<h3 id="get-term-term-taxonomy-output-OBJECT-filter-raw"><a href="#get-term-term-taxonomy-output-OBJECT-filter-raw" class="headerlink" title="get_term( $term, $taxonomy, $output = OBJECT, $filter = raw )"></a>get_term( $term, $taxonomy, $output = OBJECT, $filter = <em>raw</em> )</h3><p>Get all term data for any given term:</p>
<ul>
<li>$term—A required integer or object of the term to return.</li>
<li>$taxonomy—A required string of the taxonomy of the term to return.</li>
<li>$output—An optional string of the output format. The default value is <code>OBJECT</code>, and the other values can be <code>ARRAY_A</code> (associative array) or <code>ARRAY_N</code> (numeric array).</li>
<li>$filter—An optional string of how the context should be sanitized on output. The default value is <code>raw</code>.</li>
</ul>
<h3 id="wp-insert-term-term-taxonomy-args-array"><a href="#wp-insert-term-term-taxonomy-args-array" class="headerlink" title="wp_insert_term( $term, $taxonomy, $args = array() )"></a>wp_insert_term( $term, $taxonomy, $args = array() )</h3><p>Adds a new term to the database:</p>
<ul>
<li>$term—A required string of the term to add or update.</li>
<li>$taxonomy—A required string of the taxonomy the term will be added to.</li>
<li><p>$args—An optional array or string of term arguments to be inserted/updated. Available arguments are:</p>
<ol>
<li>_alias<em>of</em>—An optional string of the slug that the term will be an alias of.</li>
<li><em>description</em>—An optional string that describes the term.</li>
<li><em>parent</em>—An optional integer of the parent term ID that this term will be a child of.</li>
<li><em>slug</em>—An optional string of the slug of the term.</li>
</ol>
</li>
</ul>
<h3 id="wp-update-term-term-id-taxonomy-args-array"><a href="#wp-update-term-term-id-taxonomy-args-array" class="headerlink" title="wp_update_term( $term_id, $taxonomy, $args = array() )"></a>wp_update_term( $term_id, $taxonomy, $args = array() )</h3><p>Updates an existing term in the database:</p>
<ul>
<li>$term_id—A required integer of the term ID of the term you want to update.</li>
<li>$taxonomy—A required string of the taxonomy the term is associated with.</li>
<li>$args—An optional array or string of term arguments to be updated. These are the same arguments used in <code>wp_insert_term()</code>.</li>
</ul>
<h3 id="wp-delete-term-term-taxonomy-args-array"><a href="#wp-delete-term-term-taxonomy-args-array" class="headerlink" title="wp_delete_term( $term, $taxonomy, $args = array() )"></a>wp_delete_term( $term, $taxonomy, $args = array() )</h3><p>Deletes a term from the database. If the term is a parent of other terms, then the children will be updated to that term’s parent:</p>
<ul>
<li>$term—A required integer of the term ID of the term you want to delete.</li>
<li>$taxonomy—A required string of the taxonomy the term is associated with.</li>
<li>$args—An optional array to overwrite term field values.</li>
</ul>
<h2 id="wp-term-taxonomy"><a href="#wp-term-taxonomy" class="headerlink" title="wp_term_taxonomy"></a>wp_term_taxonomy</h2><p>The <code>wp_term_taxonomy</code> table stores each taxonomy type you are using. WordPress has two taxonomy types built in, category and post_tag, but you can also register your own taxonomies. When a new term gets added in the <code>wp_terms</code> table, it is associated with its taxonomy in this table, along with that taxonomy term ID, description, parent, and count.</p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Collation</th>
<th>Null</th>
<th>Default</th>
<th>Extra</th>
</tr>
</thead>
<tbody>
<tr>
<td>term_taxonomy_id</td>
<td>bigint(20)</td>
<td></td>
<td>No</td>
<td>None</td>
<td>AUTO_INCREMENT</td>
</tr>
<tr>
<td>term_id</td>
<td>bigint(20)</td>
<td></td>
<td>No</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>taxonomy</td>
<td>varchar(32)</td>
<td>utf8_general_ci</td>
<td>No</td>
<td></td>
<td></td>
</tr>
<tr>
<td>description</td>
<td>longtext</td>
<td>utf8_general_ci</td>
<td>No</td>
<td>None</td>
<td></td>
</tr>
<tr>
<td>parent</td>
<td>bigint(20)</td>
<td></td>
<td>No</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>count</td>
<td>bigint(20)</td>
<td></td>
<td>No</td>
<td>0</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="wp-includes-taxonomy-php"><a href="#wp-includes-taxonomy-php" class="headerlink" title="/wp-includes/taxonomy.php"></a>/wp-includes/taxonomy.php</h2><p>The following functions are found in <em>/wp-includes/taxonomy.php</em>.</p>
<h3 id="get-taxonomies-args-array-output-names-operator-and"><a href="#get-taxonomies-args-array-output-names-operator-and" class="headerlink" title="get_taxonomies( $args = array(), $output = names, $operator = and )"></a>get_taxonomies( $args = array(), $output = <em>names</em>, $operator = <em>and</em> )</h3><p>This function returns a list of registered taxonomy objects or a list of taxonomy names:</p>
<ul>
<li>$args—An optional array of arguments to query what taxonomy objects get returned.</li>
<li>$output—An optional string of either <code>names</code> or <code>objects</code>. The default is <code>names</code>, which will return a list of taxonomy names.</li>
<li>$operator—An optional string of either <code>and</code> or <code>or</code>. The default is <code>and</code>, which means that all of the arguments passed in must match. If set to <code>or</code>, any of the arguments passed in can match.</li>
</ul>
<h3 id="get-taxonomy-taxonomy"><a href="#get-taxonomy-taxonomy" class="headerlink" title="get_taxonomy( $taxonomy )"></a>get_taxonomy( $taxonomy )</h3><p>This function will first check that the parameter string given is a taxonomy object; and if it is, it will return it:</p>
<ul>
<li>$taxonomy—A required string of the name of the taxonomy object to return.</li>
</ul>
<h3 id="register-taxonomy-taxonomy-object-type-args-array"><a href="#register-taxonomy-taxonomy-object-type-args-array" class="headerlink" title="register_taxonomy( $taxonomy, $object_type, $args = array() )"></a>register_taxonomy( $taxonomy, $object_type, $args = array() )</h3><p>This function creates or updates a taxonomy object. Registering custom taxonomies can really extend WordPress because you can categorize your posts anyway you see fit. We are going to go over registering taxonomies in much more detail in <a href="ch05.html" title="Chapter 5. Custom Post Types, Post Metadata, and Taxonomies">Chapter 5</a>:</p>
<ul>
<li>$taxonomy - A required string of the name of the taxonomy.</li>
<li>$object_type - A required array or string of the object types (post types like post and page) that this taxonomy will be tied to.</li>
<li>$args - An optional array or string of arguments.</li>
</ul>
<h2 id="wp-term-relationships"><a href="#wp-term-relationships" class="headerlink" title="wp_term_relationships"></a>wp_term_relationships</h2><p>The <code>wp_term_relationships</code> table relates a taxonomy term to a post. Every time you assign a category or tag to a post, it’s being linked to that post in this table.</p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Collation</th>
<th>Null</th>
<th>Default</th>
<th>Extra</th>
</tr>
</thead>
<tbody>
<tr>
<td>object_id</td>
<td>bigint(20)</td>
<td></td>
<td>No</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>term_taxonomy_id</td>
<td>bigint(20)</td>
<td></td>
<td>No</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>term_order</td>
<td>int(11)</td>
<td></td>
<td>No</td>
<td>0</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="get-object-taxonomies-object-output-names"><a href="#get-object-taxonomies-object-output-names" class="headerlink" title="get_object_taxonomies( $object, $output = names )"></a>get_object_taxonomies( $object, $output = <em>names</em> )</h3><p>This function returns all taxonomies associated with a post type or post object:</p>
<ul>
<li>$object—A required array, string, or object of the name(s) of the post type(s) or post object(s).</li>
<li>$output—An optional string of either <code>names</code> or <code>objects</code>. The default is <code>names</code>, which will return a list of taxonomy names.</li>
</ul>
<h3 id="wp-get-object-terms-object-ids-taxonomies-args-array"><a href="#wp-get-object-terms-object-ids-taxonomies-args-array" class="headerlink" title="wp_get_object_terms( $object_ids, $taxonomies, $args = array() )"></a>wp_get_object_terms( $object_ids, $taxonomies, $args = array() )</h3><p>This function returns terms associated with a supplied post object ID or IDs and a supplied taxonomy.</p>
<ul>
<li>$object_ids—A required string or array of object IDs for the object terms you would like to return. Passing in a post ID would return terms associated with that post ID.</li>
<li>$taxonomies—A required string or array of the taxonomy names from which you want to return terms. Passing in the taxonomy <code>post_tag</code> would return terms of the <code>post_tag</code> taxonomy.</li>
<li><p>$args—An optional array or string of arguments that change how the data is returned. The arguments that can be changed are:</p>
<ol>
<li><em>orderby</em>—Defaults to <code>name</code>; also accepts <code>count</code>, <code>slug</code>, <code>term_group</code>, <code>term_order</code>, and <code>none</code>.</li>
<li><em>order</em>—Defaults to  <code>ASC</code>; also accepts <code>DESC</code>.</li>
<li><em>fields</em>—Defaults to <code>all</code>; also accepts <code>ids</code>, <code>names</code>, <code>slugs</code>, and <code>all_with_object_id</code>. This argument will dictate what values will be returned.</li>
</ol>
</li>
</ul>
<h3 id="wp-set-object-terms-object-id-terms-taxonomy-append-false"><a href="#wp-set-object-terms-object-id-terms-taxonomy-append-false" class="headerlink" title="wp_set_object_terms( $object_id, $terms, $taxonomy, $append = false )"></a>wp_set_object_terms( $object_id, $terms, $taxonomy, $append = false )</h3><p>This function adds taxonomy terms to a provided object ID and taxonomy. It has the ability to overwrite all terms or to append new terms to existing terms. If a term passed into this function doesn’t already exist, it will be created and then related to the provided object ID and taxonomy:</p>
<ul>
<li>$object_id—A required integer of the object ID (post ID) to relate your terms to.</li>
<li>$terms—A required array, integer, or string of the terms you would like to add to an object (post).</li>
<li>$taxonomy—A required array or string of the taxonomy or taxonomies you want to relate your terms to.</li>
<li>$append—An optional Boolean that defaults to <code>false</code> that will replace any existing terms related to an object ID with the new terms you provided. If set to <code>true</code>, your new terms will be appended to the existing terms.</li>
</ul>
<p>Discussion is underway to remove the <code>wp_terms</code> table from WordPress in a future release. The <code>name</code> and <code>slug</code> columns of <code>wp_terms</code> will be moved into the <code>wp_terms_taxonomy</code> table, and a MySQL view will be created called <code>wp_terms</code> that can be queried against, preserving backward compatibility for your custom queries.</p>
<h2 id="wpdb"><a href="#wpdb" class="headerlink" title="$wpdb"></a>$wpdb</h2><p>The <code>$wpdb</code> class is used to interact with the database directly. Once globalized, you can use <code>$wpdb</code> in custom functionality to select, update, insert, and delete database records. If you are new to WordPress and aren’t familiar with all of the functions to push and pull from the database, <code>$wpdb</code> is going to be your best friend.</p>
<p>Queries using <code>$wpdb</code> are also useful when you need to manage custom tables required by your app or perform a complicated query (perhaps joining many tables) faster than the core WordPress functions would run on their own. Please don’t assume that the built-in WordPress functions for querying the database are slow. Unless you know exactly what you are doing, you’ll want to use the built-in functions for getting posts, users, and metadata. The WordPress core is smart about optimizing queries and caching the results from these calls, which will work well across all of the plugins you are running. However, in certain situations, you can shave a bit of time by rolling your own query.</p>
<h3 id="Using-custom-DB-tables"><a href="#Using-custom-DB-tables" class="headerlink" title="Using custom DB tables"></a>Using custom DB tables</h3><p>To add our table to the database, we need to write up the SQL for the CREATE TABLE command and query it against the WordPress database. You can use either the <code>$wpdb-&gt;query()</code> method or the <code>dbDelta()</code> function in the WordPress core.</p>
<p>There are a few things we need to do to keep track of our custom tables. We want to store a <code>db_version</code> for our app plugin so we know what version of the database schema we are working with in case it updates between versions. We can also check the version so we only run the setup SQL once for each version. Another common practice is to store your custom table name as a property of <code>$wpdb</code> to make querying it a bit easier later.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">// setup the database for the SchoolPress app</div><div class="line">function sp_setupDB() &#123;</div><div class="line">        global $wpdb;</div><div class="line"></div><div class="line">        // shortcuts for SchoolPress DB tables</div><div class="line">        $wpdb-&gt;schoolpress_assignment_submissions = $wpdb-&gt;prefix .</div><div class="line">                'schoolpress_assignment_submissions';</div><div class="line"></div><div class="line">        $db_version = get_option( 'sp_db_version', 0 );</div><div class="line"></div><div class="line">        // create tables on new installs</div><div class="line">        if ( empty( $db_version ) ) &#123;</div><div class="line">                global $wpdb;</div><div class="line"></div><div class="line">                $sqlQuery = "</div><div class="line">                CREATE TABLE '" . $wpdb-&gt;schoolpress_assignment_submissions . "' (</div><div class="line">                  `assignment_id` bigint(11) unsigned NOT NULL,</div><div class="line">                  `submission_id` bigint(11) unsigned NOT NULL,</div><div class="line">                UNIQUE KEY `assignment_submission` (`assignment_id`,`submission_id`),</div><div class="line">                UNIQUE KEY `submission_assignment` (`submission_id`,`assignment_id`)</div><div class="line">                )</div><div class="line">                ";</div><div class="line"></div><div class="line">                require_once ABSPATH . 'wp-admin/includes/upgrade.php';</div><div class="line">                dbDelta( $sqlQuery );</div><div class="line"></div><div class="line">                $db_version = '1.0';</div><div class="line">                update_option( 'sp_db_version', '1.0' );</div><div class="line">        &#125;</div><div class="line">&#125;</div><div class="line">add_action( 'init', 'sp_dbSetup', 0 );</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>The <code>sp_dbSetup()</code> function is run early in init (priority 0) so the table shortcuts are available to any other code you have running. You can’t always assume a <code>wp_</code> prefix, so the <code>$wpdb-&gt;prefix</code> property is used to get the database prefix for the WordPress install.``</p>
<p>A DB version for the SchoolPress app is stored in the WordPress options table. We get the value out of options, and if it is empty, we run code to create our custom tables. The CREATE TABLE SQL statement here is pretty standard. You should always try to run these commands directly on the MySQL database before pasting them into your plugin code to make sure they work.</p>
<p>We use the <code>dbDelta()</code> function to create the database table. This function will create a new table if it doesn’t exist. Or if a table with the same name already exists, it will figure out the correct ALTER TABLE query to get the old table to match the new schema.</p>
<p>To use <code>dbDelta()</code>, you must be sure to include the <em>wp-admin/includes/upgrade.php</em> file since that file is only loaded when needed. Then pass <code>dbDelta()</code> the SQL for a CREATE TABLE query. Your SQL must be in a specific format a little more strict than the general MySQL format.</p>
<p>Using <code>dbDelta()</code> is preferred when creating tables because it will automatically update older versions of your tables, but you can also run the CREATE TABLE query using <code>$wpdb-&gt;query($sqlQuery);</code>.</p>
<p>You can run any valid SQL statement using the <code>$wpdb-&gt;query()</code> method. The <code>query()</code> method sets a lot of properties on the <code>$wpdb</code> object that are useful for debugging or just keeping track of your queries:</p>
<ul>
<li><code>$wpdb-&gt;result</code> will contain the raw result from your SQL query.</li>
<li><code>$wpdb-&gt;num_queries</code> is incremented each time a query is run.</li>
<li><code>$wpdb-&gt;last_query</code> will contain the last SQL query run.</li>
<li><code>$wpdb-&gt;last_error</code> will contain a string with the last SQL error generated if there was one.</li>
<li><code>$wpdb-&gt;insert_id</code> will contain the ID created from the last successful INSERT query.</li>
<li><code>$wpdb-&gt;rows_affected</code> is set to the number of affected rows.</li>
<li><code>$wpdb-&gt;num_rows</code> is set to the number of rows in a result for a SELECT query.</li>
<li><code>$wpdb-&gt;last_result</code> will contain an array of row objects generated through the <code>mysql_fetch_object()</code> PHP function.</li>
</ul>
<p>The return value of the <code>$wpdb-&gt;query()</code> method is based on the top of query run and if the query was successful or not:</p>
<ul>
<li><code>False</code> is returned if the query failed. You can test for this using code like <code>if($wpdb-&gt;query($query) === false) { wp_die(“it failed!”); }</code>.</li>
<li>The raw MySQL result is returned on CREATE, ALTER, TRUNCATE, and DROP queries.</li>
<li>The number of rows affected is returned for INSERT, UPDATE, DELETE, and REPLACE queries.</li>
<li>The number of rows returned is returned for SELECT queries.</li>
</ul>
<h3 id="Escaping-in-DB-queries"><a href="#Escaping-in-DB-queries" class="headerlink" title="Escaping in DB queries"></a>Escaping in DB queries</h3><p>It should be noted that values passed into the <code>query()</code> method are not escaped automatically. Therefore, you will always need to escape untrusted input when using the <code>query()</code> method directly.</p>
<p>There are two main ways of escaping values used in your SQL queries: you can wrap your variables in the <code>esc_sql()</code> function or you can use the <code>$wpdb-&gt;prepare()</code> method to build your query.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">global $wpdb;</div><div class="line">$user_query = $_REQUEST[‘uq’];</div><div class="line"></div><div class="line">$sqlQuery = “SELECT user_login FROM $wpdb-&gt;users WHERE</div><div class="line">user_login LIKE ‘%” . esc_sql($user_query) . “%’ OR</div><div class="line">user_email LIKE ‘%” . esc_sql($user_query) . “%’ OR</div><div class="line">display_name LIKE ‘%” . esc_sql($user_query) . “%’</div><div class="line">”;</div><div class="line">$user_logins = $wpdb-&gt;get_col($sqlQuery);</div><div class="line"></div><div class="line">if(!empty($user_logins))</div><div class="line">&#123;</div><div class="line">        echo “&lt;ul&gt;”;</div><div class="line">foreach($user_logins as $user_login)</div><div class="line">        &#123;</div><div class="line">                echo “&lt;li&gt;$user_login&lt;/li&gt;”;</div><div class="line">&#125;</div><div class="line">echo “&lt;/ul&gt;”;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Alternatively, you could create the query using the <code>prepare()</code> method, which functions similarly to the <code>sprintf()</code> and <code>printf()</code> functions in PHP. This method of the $wpdb class located in <em>wp-includes/wp-db.php</em> accepts two or more parameters:</p>
<ul>
<li>$query—A string of your custom SQL statement with placeholders for each dynamic value.</li>
<li>$args—One or more additional parameters to be used to replace the placeholders in your SQL statement.</li>
</ul>
<p>The following directives can be used in the SQL statement string:</p>
<ul>
<li>%d (integer)</li>
<li>%f (float)</li>
<li>%s (string)</li>
<li>%% (literal percentage sign–-no argument needed)</li>
</ul>
<p>The directives %d, %f, and %s should be left unquoted in the SQL statement, and each placeholder used needs to have a corresponding argument passed in for it. Literals (%) as part of the query must be properly written as %%:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$sqlQuery = $wpdb-&gt;prepare(“SELECT user_login FROM $wpdb-&gt;users WHERE</div><div class="line">user_login LIKE %%%s%% OR</div><div class="line">user_email LIKE %%%s%% OR</div><div class="line">display_name LIKE %%%s%%”, $user_query, $user_query, $user_query);</div><div class="line">$user_logins = $wpdb-&gt;get_col($sqlQuery);</div></pre></td></tr></table></figure>
<p>If you use <code>$wpdb-&gt;prepare()</code> without including the <code>$args</code> parameter, you will get a PHP warning message: “Missing argument 2 for <code>wpdb::prepare()</code>“. If your SQL doesn’t use any placeholder values, you don’t need to use <code>prepare()</code>.</p>
<p>Holy percent sign, Batman! The <code>%</code> is used in SQL as a wildcard in SELECT statements when using the LIKE keyword. So if you searched for <code>user_login LIKE %coleman%</code>, it would return users with user logins like “jcoleman” and “jasoncoleman” and “coleman1982.” To keep these <em>literal</em> % signs in place with the <code>prepare()</code> method, we need to double them up to <code>%%</code>, which is translated into just one % in the final query.</p>
<p>The other % in there is used with <code>%s</code>, which is the placeholder where our <code>$user_query</code> parameter is going to be swapped in after being escaped.</p>
<p>You may have noticed we used the <code>$wpdb-&gt;get_col()</code> method in the previous code segment. WordPress offers many useful methods on the <code>$wpdb</code> object to SELECTs, INSERTs, and other common queries in MySQL.</p>
<h3 id="SELECT-queries-with-wpdb"><a href="#SELECT-queries-with-wpdb" class="headerlink" title="SELECT queries with $wpdb"></a>SELECT queries with $wpdb</h3><p>The WordPress <code>$wpdb</code> object has a few useful methods for selecting arrays, objects, rows, columns, or even single values out of the MySQL database using SQL queries.</p>
<p><code>$wpdb→get_results($query, $output_type)</code> will run your query and return the <code>last_results</code> array, including all of the rows from your SQL query in the output type specified. By default, the result will be a “numerically indexed array of row objects.” Here’s the full list of output types from the WordPress Codex:</p>
<ul>
<li><p>OBJECT </p>
<p>  Result will be output as a numerically indexed array of row objects.</p>
</li>
<li><p>OBJECT_K</p>
<p>  Result will be output as an associative array of row objects, using the first column’s values as keys (duplicates will be discarded).</p>
</li>
<li><p>ARRAY_A</p>
<p>  Result will be output as an numerically indexed array of associative arrays, using column names as keys.</p>
</li>
<li><p>ARRAY_N</p>
<p>  Result will be output as a numerically indexed array of numerically indexed arrays.</p>
</li>
</ul>
<p>The following code helps show how to use the array returned by <code>$wpdb-&gt;get_results()</code> when using the <code>OBJECT</code> output type:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">global $wpdb;</div><div class="line">$sqlQuery = "SELECT * FROM $wpdb-&gt;posts</div><div class="line">        WHERE post_type = 'assignment'</div><div class="line">        AND post_status = 'publish' LIMIT 10";</div><div class="line">$assignments = $wpdb-&gt;get_results( $sqlQuery );</div><div class="line"></div><div class="line">// rows are stored in an array, use foreach to loop through them</div><div class="line">foreach ( $assignments as $assignment ) &#123;</div><div class="line">// each item is an object with property names equal to the SQL column names?&gt;</div><div class="line">&lt;h3&gt;&lt;?php echo $assignment-&gt;post_title;?&gt;&lt;/h3&gt;</div><div class="line">&lt;?php echo apply_filters( "the_content", $assignment-&gt;post_content );?&gt;</div><div class="line">&lt;?php</div><div class="line">&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p><code>$wpdb→get_col($query, $collumn_offset = 0)</code> will return an array of the values in the first column of the MySQL results. The <code>$collumn_offset</code> parameter can be used to grab other columns from the results (0 is the first, 1 is the second, and so on).</p>
<p>This function is most commonly used to grab IDs from a database table to be used in another function call or DB query:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">global $wpdb;</div><div class="line">$sqlQuery = &quot;SELECT ID FROM $wpdb-&gt;posts</div><div class="line">        WHERE post_type = &apos;assignment&apos;</div><div class="line">        AND post_status = &apos;publish&apos;</div><div class="line">        LIMIT 10&quot;;</div><div class="line">// getting IDs</div><div class="line">$assignment_ids = $wpdb-&gt;get_col( $sqlQuery );</div><div class="line"></div><div class="line">// result is an array, loop through them</div><div class="line">foreach ( $assignment_ids as $assignment_id ) &#123;</div><div class="line">        // we have the id, we can use get_post to get more data</div><div class="line">        $assignment = get_post( $assignment_id );</div><div class="line">        ?&gt;</div><div class="line">        &lt;h3&gt;&lt;?php echo $assignment-&gt;post_title;?&gt;&lt;/h3&gt;</div><div class="line">        &lt;?php echo apply_filters( &quot;the_content&quot;, $assignment-&gt;post_content );?&gt;</div><div class="line">        &lt;?php</div><div class="line">&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>Note that we’re putting that <code>global $wpdb;</code> line in most of our examples here to reinforce the point that you need to make sure that <code>$wpdb</code> is in scope before calling one of its methods. In practice, this line is usually at the top of the function or file you are working within.</p>
<p><code>$wpdb→get_row($query,  $output_type, $row_offset)</code> is used to get just one row from a result. Instead of getting an array of results, you will just get the first object (or array if the <code>$output_type</code> is specified) from the result set.</p>
<p>You can use the <code>$row_offset</code> parameter to grab a different row from the results (0 is the first, 1 is the second, and so on).</p>
<h3 id="Insert-replace-and-update"><a href="#Insert-replace-and-update" class="headerlink" title="Insert, replace, and update"></a>Insert, replace, and update</h3><p><code>$wpdb→insert($table, $data, $format)</code> can be used to insert data into the database. Rather than building your own INSERT query, you simply pass the table name and an associative array containing the row data and WordPress will build the query and escape it for you. The keys of your <code>$data</code> array must map to column names in the table. The values in the array are the values to insert into the table row:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">// processing new submissions for assignments</div><div class="line">global $wpdb, $current_user;</div><div class="line"></div><div class="line">// create submission</div><div class="line">$assignment_id = intval( $_REQUEST[&apos;assignment_id&apos;] );</div><div class="line">$submission_id = wp_insert_post(</div><div class="line">        array(</div><div class="line">                &apos;post_type&apos;    =&gt; &apos;submission&apos;,</div><div class="line">                &apos;post_author&apos;  =&gt; $current_user-&gt;ID,</div><div class="line">                &apos;post_title&apos;   =&gt; sanitize_title( $_REQUEST[&apos;title&apos;] ),</div><div class="line">                &apos;post_content&apos; =&gt; sanitize_text_field( $_POST[&apos;submission&apos;] )</div><div class="line">        )</div><div class="line">);</div><div class="line"></div><div class="line">// connect the submission to the assignment</div><div class="line">$wpdb-&gt;insert(</div><div class="line">  $wpdb-&gt;schoolpress_assignment_submissions,</div><div class="line">  array( &quot;assignment_id&quot;=&gt;$assignment_id, &quot;submission_id&quot;=&gt;$submission_id ),</div><div class="line">  array( &apos;%d&apos;, &apos;%d&apos; )</div><div class="line">);</div><div class="line"></div><div class="line">/*</div><div class="line">        This insert call will generate a SQL query like:</div><div class="line">        INSERT INTO</div><div class="line">        &apos;wp_schoolpress_assignment_submissions&apos;</div><div class="line"></div><div class="line">        (&apos;assignment_id&apos;,&apos;submission_id&apos; VALUES (101,10)</div><div class="line">*/</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>In the previous code, we use <code>wp_insert_post()</code> to create the submission then use <code>$wpdb-&gt;insert()</code> to insert a row into our custom table connecting assignments with submissions.</p>
<p>We pass an array of formats to the third parameter to tell the method to format the data as integers when constructing the SQL query. The available formats are %s for strings, %d for integers, and %f for floats. If no format is specified, all data will be formatted as a string. In most cases, MySQL will properly cast your string into the format needed to store it in the actual table.</p>
<p>To relate two posts like this, we could also simply put the <code>assignment_id</code> into the <code>post_parent</code> column of the <code>wp_posts</code> table. This is adequate to create a parent/child relationship. However, if you want to do a many-to-many relationship (e.g., if you can post the same submission to multiple assignments), you need a separate table or some other way to connect a post to many other posts.</p>
<p><code>$wpdb→replace($table, $data, $format)</code> is similar to the <code>$wpdb-&gt;insert()</code> method. The <code>$wpdb-&gt;replace()</code> method will literally generate the same exact SQL query as <code>$wpdb-&gt;insert()</code> but uses the MySQL REPLACE command instead of INSERT, which will override any row with the same keys as the <code>$data</code> passed in.</p>
<p><code>$wpdb→update($table, $data, $where, $format = null, $where_format = null )</code> can be used to update rows in a database table. Rather than building your own UPDATE query, you simply pass the table and an associative array containing the updated columns and new data along with an associative array <code>$where</code> containing the fields to check against in the WHERE clause and WordPress will build the query and escape the UPDATE query for you.</p>
<p>The <code>$where</code> and <code>$where_format</code> parameters work the same as the <code>$data</code> and <code>$format</code> arrays, respectively.</p>
<p>The WHERE clause generated by the <code>update()</code> method will check that the columns are equal to the values passed and those checks are combined together by AND conditions.</p>
<p>The <code>update()</code> method is particularly useful in that you can update any number of fields in an table row using the same function. Here is some code that could be used to update orders in an ecommerce plugin:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"><span class="keyword">global</span> $wpdb;</div><div class="line"><span class="comment">// just update the status</span></div><div class="line">$wpdb-&gt;update(</div><div class="line">        <span class="string">'ecommerce_orders'</span>,   <span class="comment">//table name</span></div><div class="line">        <span class="keyword">array</span>( <span class="string">'status'</span> =&gt; <span class="string">'paid'</span> ),  <span class="comment">//data fields</span></div><div class="line">        <span class="keyword">array</span>( <span class="string">'id'</span> =&gt; $order_id )  <span class="comment">//where fields</span></div><div class="line">);</div><div class="line"></div><div class="line"><span class="comment">// update more data about the order</span></div><div class="line">$wpdb-&gt;update(</div><div class="line">        <span class="string">'ecommerce_orders'</span>,   <span class="comment">//table name</span></div><div class="line">        <span class="keyword">array</span>( <span class="string">'status'</span> =&gt; <span class="string">'pending'</span>,  <span class="comment">//data fields</span></div><div class="line">                <span class="string">'subtotal'</span> =&gt; <span class="string">'100.00'</span>,</div><div class="line">                <span class="string">'tax'</span> =&gt; <span class="string">'6.00'</span>,</div><div class="line">                <span class="string">'total'</span> =&gt; <span class="string">'106.00'</span></div><div class="line">        ),</div><div class="line">        <span class="keyword">array</span>( <span class="string">'id'</span> =&gt; $order_id )  <span class="comment">//where fields</span></div><div class="line">);</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<ol>
<li>$wp_query—An object of the <code>WP_Query</code> class that can show you all of the post content returned by WordPress for any given page that you are on.<figure class="highlight plain"><figcaption><span>will talk more about the WP_Query class and its methods in the next chapter.`````````</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">2.  $current_user—An object of all of the data associated with the currently logged-in user. Not only does this object return all of the data for the current user from the `wp_users` table, but it will also tell you the roles and capabilities of the current user:</div></pre></td></tr></table></figure></li>
</ol>
<p>&lt;?php<br>//welcome the logged-in user<br>global $current_user;<br>if ( !empty( $current_user-&gt;ID ) ) {<br>        echo ‘Howdy, ‘ . $current_user-&gt;display_name;<br>}<br>?&gt;<br>```</p>
<p>When writing your own code to run on WordPress, you can define and use your own global variables if it makes sense. Global variables can save you the hassle of rewriting code and recalling functions because once they are defined, you can use them over and over again.</p>

        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2017-11-05T08:22:17.000Z" itemprop="dateUpdated">2017-11-05 16:22:17</time>
</span><br>


        
        这里可以写作者留言，标签和 hexo 中所有变量及辅助函数等均可调用，示例：<a href="/WordPress/2015-06-02-wordpress-database.html" target="_blank" rel="external">http://blog.inching.org/WordPress/2015-06-02-wordpress-database.html</a>
        
    </div>
    <footer>
        <a href="http://blog.inching.org">
            <img src="/img/avatar.png" alt="Cody Fei">
            Cody Fei
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tutorial/">tutorial</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/wordpress/">wordpress</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.inching.org/WordPress/2015-06-02-wordpress-database.html&title=《WordPress Database》 — Balance&pic=http://blog.inching.org/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.inching.org/WordPress/2015-06-02-wordpress-database.html&title=《WordPress Database》 — Balance&source=WordPress runs on top of a MySQL database and creates its own tables to store..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.inching.org/WordPress/2015-06-02-wordpress-database.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《WordPress Database》 — Balance&url=http://blog.inching.org/WordPress/2015-06-02-wordpress-database.html&via=http://blog.inching.org" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.inching.org/WordPress/2015-06-02-wordpress-database.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/WordPress/2015-06-03-wordpress-plugins.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">WordPress Plugins</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/WordPress/2015-06-01-wordpress-tutorial.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">WordPress Tutorial</h4>
      </a>
    </div>
  
</nav>



    











</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢大爷~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.JPG" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.JPG" data-alipay="/img/alipay.JPG">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top" style="display:none">
        

        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>footer.license</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Cody Fei &copy; 2012 - 2017</span>
            <span style="display:none">
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.inching.org/WordPress/2015-06-02-wordpress-database.html&title=《WordPress Database》 — Balance&pic=http://blog.inching.org/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.inching.org/WordPress/2015-06-02-wordpress-database.html&title=《WordPress Database》 — Balance&source=WordPress runs on top of a MySQL database and creates its own tables to store..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.inching.org/WordPress/2015-06-02-wordpress-database.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《WordPress Database》 — Balance&url=http://blog.inching.org/WordPress/2015-06-02-wordpress-database.html&via=http://blog.inching.org" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.inching.org/WordPress/2015-06-02-wordpress-database.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACvUlEQVR42u3aQW4bMQwFUN//0inQVYHW7v+kZHvxZhU449E8BRAZko9HfP38vl7/nH/rz0/+vufZM1+vtbrw8PDwRq/+7GrveY3Jqc/Wzd8HDw8P7zYvOdaTo/z1Yq83JQ8YRfDAw8PD+yivTXB/ymuW1uPh4eF9P29zZOdJMx4eHt738/JCQ552t5uSlzCu1Frw8PDw5rnrYxMk3vPzB/p7eHh4eOtiQZIc52GmTd+jtfDw8PAu8JLm1magKi9DzMoTydPw8PDwbvBmg1BteGhLDEmGnGw9Hh4e3g1e+8//fgBr83m9QXh4eHhHeZtXjKJNOaCQPycKPHh4eHgXeEmpdN/an6XpybZGpQo8PDy8o7z2CG5LqGdHo5Jg8I+UGg8PD+8or2ggxXcmJYzZcw5UqfHw8PAO8ZIBqdlIVkttV4z+JHh4eHhHee3hOxsaSPDJFrdFDTw8PLwbvNnRn9/TlnT3hY8ipcbDw8Mb8dqjP2/255jZ8EH0x8DDw8N7Cy8ZCGj78nkRNh9ciFJ/PDw8vAu8NgAkL5EPAczKynVSjoeHh3eNlx++eajYlDD2YQMPDw/vHq/tubcPPQXIww8eHh7ee3hJm2q2cD5GkCTQw5QdDw8P7yhvkyIngwI5rG2VFUNXeHh4eBd47azWvkG1GVwofouHh4d3lBeNLi0KDW3xN0/Ki6ErPDw8vGu8UwWIvGTQblMdYPDw8PAu8NrlE2peis1f9/qFh4eHt3jpJL1Ovpvfk4ws5Fv8NO7h4eHhHeLNUt62iLCh7ptzeHh4eDd4Z4/4WROrbbOt+nt4eHh4h3h54SAvGbTl15yRBy08PDy8z/L2B3rbvsrLvk+3Aw8PD+9rePvyRNvDSpLyVUqNh4eHV/LyYkS+8Gw4YD/mhYeHh3ebN2uA5Zj9iEAboobjWXh4eHj/5/0Cg+pK3yYMcaoAAAAASUVORK5CYII=" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="/js/main.min.js?v=1.6.17"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.6.17" async></script>










</body>
</html>
