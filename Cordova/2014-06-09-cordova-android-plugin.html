<!DOCTYPE html>
<html>
<head>
    
<!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-43567748-2', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<!-- End Google Analytics -->


    

    



    <meta charset="utf-8">
    
    <meta name="google-site-verification" content="true">
    
    
    
    <title>Cordova Android Plugin | Balance | 大道至简</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="cordova,phonegap">
    <meta name="description" content="This section provides details for how to implement native plugin codeon the Android platform. Before reading this, see the Plugin Development Guidefor an overview of the plugin’s structure and its com">
<meta property="og:type" content="article">
<meta property="og:title" content="Cordova Android Plugin">
<meta property="og:url" content="http://blog.inching.org/Cordova/2014-06-09-cordova-android-plugin.html">
<meta property="og:site_name" content="Balance">
<meta property="og:description" content="This section provides details for how to implement native plugin codeon the Android platform. Before reading this, see the Plugin Development Guidefor an overview of the plugin’s structure and its com">
<meta property="og:updated_time" content="2017-11-05T08:22:17.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Cordova Android Plugin">
<meta name="twitter:description" content="This section provides details for how to implement native plugin codeon the Android platform. Before reading this, see the Plugin Development Guidefor an overview of the plugin’s structure and its com">
    
        <link rel="alternate" type="application/atom+xml" title="Balance" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/css/style.css?v=1.6.17">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Cody Fei</h5>
          <a href="mailto:inchingcode@gmail.com" title="inchingcode@gmail.com" class="mail">inchingcode@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                Home
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags/android"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories/Android/"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/inchingorg" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://www.weibo.com/CodyFee" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://www.inesoi.com" target="_blank" >
                <i class="icon icon-lg icon-shopping-bag"></i>
                Shopping Bag
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Cordova Android Plugin</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Cordova Android Plugin</h1>
        <h5 class="subtitle">
            
                <time datetime="2014-06-08T16:00:00.000Z" itemprop="datePublished" class="page-time">
  2014-06-09
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Cordova/">Cordova</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Plugin-Class-Mapping"><span class="post-toc-text">Plugin Class Mapping</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Plugin-Initialization-and-Lifetime"><span class="post-toc-text">Plugin Initialization and Lifetime</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Writing-an-Android-Java-Plugin"><span class="post-toc-text">Writing an Android Java Plugin</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Threading"><span class="post-toc-text">Threading</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Adding-Dependency-Libraries"><span class="post-toc-text">Adding Dependency Libraries</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Echo-Android-Plugin-Example"><span class="post-toc-text">Echo Android Plugin Example</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Android-Integration"><span class="post-toc-text">Android Integration</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Android-Permissions"><span class="post-toc-text">Android Permissions</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Runtime-Permissions-Cordova-Android-5-0-0"><span class="post-toc-text">Runtime Permissions (Cordova-Android 5.0.0+)</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Debugging-Android-Plugins"><span class="post-toc-text">Debugging Android Plugins</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Launching-Other-Activities"><span class="post-toc-text">Launching Other Activities</span></a></li></ol>
        </nav>
    </aside>
    
<article id="post-cordova-android-plugin"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Cordova Android Plugin</h1>
        <div class="post-meta">
            <time class="post-time" title="2014-06-09 00:00:00" datetime="2014-06-08T16:00:00.000Z"  itemprop="datePublished">2014-06-09</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Cordova/">Cordova</a></li></ul>



            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p>This section provides details for how to implement native plugin code<br>on the Android platform. Before reading this, see the <a href="https://cordova.apache.org/docs/en/latest/guide/hybrid/plugins/index.html" target="_blank" rel="external">Plugin Development Guide</a><br>for an overview of the plugin’s structure and its common JavaScript<br>interface. This section continues to demonstrate the sample <em>echo</em><br>plugin that communicates from the Cordova webview to the native<br>platform and back.  For another sample, see also the comments in<br><a href="https://github.com/apache/cordova-android/blob/master/framework/src/org/apache/cordova/CordovaPlugin.java" target="_blank" rel="external">CordovaPlugin.java</a>.</p>
<p>Android plugins are based on Cordova-Android, which is built from an<br>Android WebView with a native bridge. The native portion of an Android plugin<br>consists of at least one Java class that extends the <code>CordovaPlugin</code> class and<br>overrides one of its <code>execute</code> methods.</p>
<a id="more"></a>
<h2 id="Plugin-Class-Mapping"><a href="#Plugin-Class-Mapping" class="headerlink" title="Plugin Class Mapping"></a>Plugin Class Mapping</h2><p>The plugin’s JavaScript interface uses the <code>cordova.exec</code> method as<br>follows:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">exec(&lt;successFunction&gt;, &lt;failFunction&gt;, &lt;service&gt;, &lt;action&gt;, [&lt;args&gt;]);</div></pre></td></tr></table></figure>
<p>This marshals a request from the WebView to the Android native side,<br>effectively calling the <code>action</code> method on the <code>service</code> class, with<br>additional arguments passed in the <code>args</code> array.</p>
<p>Whether you distribute a plugin as Java file or as a <em>jar</em> file of its<br>own, the plugin must be specified in your Cordova-Android<br>application’s <code>res/xml/config.xml</code> file. See Application Plugins for<br>more information on how to use the <code>plugin.xml</code> file to inject this<br><code>feature</code> element:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;feature name=&quot;&lt;service_name&gt;&quot;&gt;</div><div class="line">    &lt;param name=&quot;android-package&quot; value=&quot;&lt;full_name_including_namespace&gt;&quot; /&gt;</div><div class="line">&lt;/feature&gt;</div></pre></td></tr></table></figure>
<p>The service name matches the one used in the JavaScript <code>exec</code> call.<br>The value is the Java class’s fully qualified namespace identifier.<br>Otherwise, the plugin may compile but still be unavailable to Cordova.</p>
<h2 id="Plugin-Initialization-and-Lifetime"><a href="#Plugin-Initialization-and-Lifetime" class="headerlink" title="Plugin Initialization and Lifetime"></a>Plugin Initialization and Lifetime</h2><p>One instance of a plugin object is created for the life of each<br><code>WebView</code>. Plugins are not instantiated until they are first<br>referenced by a call from JavaScript, unless <code>&lt;param&gt;</code> with an <code>onload</code><br><code>name</code> attribute is set to <code>&quot;true&quot;</code> in <code>config.xml</code>. For example,</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;feature name=&quot;Echo&quot;&gt;</div><div class="line">    &lt;param name=&quot;android-package&quot; value=&quot;&lt;full_name_including_namespace&gt;&quot; /&gt;</div><div class="line">    &lt;param name=&quot;onload&quot; value=&quot;true&quot; /&gt;</div><div class="line">&lt;/feature&gt;</div></pre></td></tr></table></figure>
<p>Plugins should use the <code>initialize</code> method for their start-up logic.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">@Override</div><div class="line">public void initialize(CordovaInterface cordova, CordovaWebView webView) &#123;</div><div class="line">    super.initialize(cordova, webView);</div><div class="line">    // your init code here</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Plugins also have access to Android lifecycle events and can handle them<br>by extending one of the provided methods (<code>onResume</code>, <code>onDestroy</code>, etc).<br>Plugins with long-running requests, background activity such as media playback,<br>listeners, or internal state should implement the <code>onReset()</code> method. It<br>executes when the <code>WebView</code> navigates to a new page or refreshes, which reloads<br>the JavaScript.</p>
<h2 id="Writing-an-Android-Java-Plugin"><a href="#Writing-an-Android-Java-Plugin" class="headerlink" title="Writing an Android Java Plugin"></a>Writing an Android Java Plugin</h2><p>A JavaScript call fires off a plugin request to the native side, and<br>the corresponding Java plugin is mapped properly in the <code>config.xml</code><br>file, but what does the final Android Java Plugin class look like?<br>Whatever is dispatched to the plugin with JavaScript’s <code>exec</code> function<br>is passed into the plugin class’s <code>execute</code> method. Most <code>execute</code><br>implementations look like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">@Override</div><div class="line">public boolean execute(String action, JSONArray args, CallbackContext callbackContext) throws JSONException &#123;</div><div class="line">    if (&quot;beep&quot;.equals(action)) &#123;</div><div class="line">        this.beep(args.getLong(0));</div><div class="line">        callbackContext.success();</div><div class="line">        return true;</div><div class="line">    &#125;</div><div class="line">    return false;  // Returning false results in a &quot;MethodNotFound&quot; error.</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The JavaScript <code>exec</code> function’s <code>action</code> parameter corresponds to a<br>private class method to dispatch with optional parameters.</p>
<p>When catching exceptions and returning errors, it’s important for the<br>sake of clarity that errors returned to JavaScript match Java’s<br>exception names as much as possible.</p>
<h2 id="Threading"><a href="#Threading" class="headerlink" title="Threading"></a>Threading</h2><p>The plugin’s JavaScript does <em>not</em> run in the main thread of the<br><code>WebView</code> interface; instead, it runs on the <code>WebCore</code> thread, as<br>does the <code>execute</code> method.  If you need to interact with the user<br>interface, you should use the <a href="http://developer.android.com/reference/android/app/Activity.html#runOnUiThread(java.lang.Runnable" target="_blank" rel="external">Activity’s <code>runOnUiThread</code></a>)<br>method like so:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">@Override</div><div class="line">public boolean execute(String action, JSONArray args, final CallbackContext callbackContext) throws JSONException &#123;</div><div class="line">    if (&quot;beep&quot;.equals(action)) &#123;</div><div class="line">        final long duration = args.getLong(0);</div><div class="line">        cordova.getActivity().runOnUiThread(new Runnable() &#123;</div><div class="line">            public void run() &#123;</div><div class="line">                ...</div><div class="line">                callbackContext.success(); // Thread-safe.</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        return true;</div><div class="line">    &#125;</div><div class="line">    return false;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>If you do not need to run on the UI thread, but do not wish to block the<br><code>WebCore</code> thread either, you should execute your code using the Cordova<br><a href="http://developer.android.com/reference/java/util/concurrent/ExecutorService.html" target="_blank" rel="external"><code>ExecutorService</code></a> obtained with <code>cordova.getThreadPool()</code> like<br>so:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">@Override</div><div class="line">public boolean execute(String action, JSONArray args, final CallbackContext callbackContext) throws JSONException &#123;</div><div class="line">    if (&quot;beep&quot;.equals(action)) &#123;</div><div class="line">        final long duration = args.getLong(0);</div><div class="line">        cordova.getThreadPool().execute(new Runnable() &#123;</div><div class="line">            public void run() &#123;</div><div class="line">                ...</div><div class="line">                callbackContext.success(); // Thread-safe.</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        return true;</div><div class="line">    &#125;</div><div class="line">    return false;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Adding-Dependency-Libraries"><a href="#Adding-Dependency-Libraries" class="headerlink" title="Adding Dependency Libraries"></a>Adding Dependency Libraries</h2><p>If your Android plugin has extra dependencies, they must be listed in the<br><code>plugin.xml</code> in one of two ways.</p>
<p>The preferred way is to use the <code>&lt;framework /&gt;</code> tag (see the<br><a href="https://cordova.apache.org/docs/en/latest/plugin_ref/spec.html#framework" target="_blank" rel="external">Plugin Specification</a> for more details).<br>Specifying libraries in this manner allows them to be resolved via Gradle’s<br><a href="https://docs.gradle.org/current/userguide/dependency_management.html" target="_blank" rel="external">Dependency Management logic</a>. This allows commonly used<br>libraries such as <em>gson</em>, <em>android-support-v4</em>, and <em>google-play-services</em> to be<br>used by multiple plugins without conflict.</p>
<p>The second option is to use the <code>&lt;lib-file /&gt;</code> tag to specify the location of<br>a jar file (see the <a href="https://cordova.apache.org/docs/en/latest/plugin_ref/spec.html#lib-file" target="_blank" rel="external">Plugin Specification</a> for<br>more details). This approach should only be used if you are sure that no other<br>plugin will be depending on the library you are referencing (e.g. if the library<br>is specific to your plugin). Otherwise, you risk causing build errors for users<br>of your plugin if another plugin adds the same library. It is worth noting that<br>Cordova app developers are not necessarily native developers, so native platform<br>build errors can be especially frustrating.</p>
<h2 id="Echo-Android-Plugin-Example"><a href="#Echo-Android-Plugin-Example" class="headerlink" title="Echo Android Plugin Example"></a>Echo Android Plugin Example</h2><p>To match the JavaScript interface’s <em>echo</em> feature described in<br>Application Plugins, use the <code>plugin.xml</code> to inject a <code>feature</code><br>specification to the local platform’s <code>config.xml</code> file:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;platform name=&quot;android&quot;&gt;</div><div class="line">    &lt;config-file target=&quot;config.xml&quot; parent=&quot;/*&quot;&gt;</div><div class="line">        &lt;feature name=&quot;Echo&quot;&gt;</div><div class="line">            &lt;param name=&quot;android-package&quot; value=&quot;org.apache.cordova.plugin.Echo&quot;/&gt;</div><div class="line">        &lt;/feature&gt;</div><div class="line">    &lt;/config-file&gt;</div><div class="line"></div><div class="line">    &lt;source-file src=&quot;src/android/Echo.java&quot; target-dir=&quot;src/org/apache/cordova/plugin&quot; /&gt;</div><div class="line">&lt;/platform&gt;</div></pre></td></tr></table></figure>
<p>Then add the following to the <code>src/android/Echo.java</code> file:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">package org.apache.cordova.plugin;</div><div class="line"></div><div class="line">import org.apache.cordova.CordovaPlugin;</div><div class="line">import org.apache.cordova.CallbackContext;</div><div class="line"></div><div class="line">import org.json.JSONArray;</div><div class="line">import org.json.JSONException;</div><div class="line">import org.json.JSONObject;</div><div class="line"></div><div class="line">/**</div><div class="line">* This class echoes a string called from JavaScript.</div><div class="line">*/</div><div class="line">public class Echo extends CordovaPlugin &#123;</div><div class="line"></div><div class="line">@Override</div><div class="line">public boolean execute(String action, JSONArray args, CallbackContext callbackContext) throws JSONException &#123;</div><div class="line">    if (action.equals(&quot;echo&quot;)) &#123;</div><div class="line">        String message = args.getString(0);</div><div class="line">        this.echo(message, callbackContext);</div><div class="line">        return true;</div><div class="line">    &#125;</div><div class="line">    return false;</div><div class="line">&#125;</div><div class="line"></div><div class="line">private void echo(String message, CallbackContext callbackContext) &#123;</div><div class="line">    if (message != null &amp;&amp; message.length() &gt; 0) &#123;</div><div class="line">        callbackContext.success(message);</div><div class="line">    &#125; else &#123;</div><div class="line">        callbackContext.error(&quot;Expected one non-empty string argument.&quot;);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The necessary imports at the top of the file extends the class from<br><code>CordovaPlugin</code>, whose <code>execute()</code> method it overrides to receive<br>messages from <code>exec()</code>.  The <code>execute()</code> method first tests the value<br>of <code>action</code>, for which in this case there is only one valid <code>echo</code><br>value.  Any other action returns <code>false</code> and results in an<br><code>INVALID_ACTION</code> error, which translates to an error callback invoked<br>on the JavaScript side.</p>
<p>Next, the method retrieves the echo string using the <code>args</code> object’s<br><code>getString</code> method, specifying the first parameter passed to the<br>method.  After the value is passed to a private <code>echo</code> method, it is<br>parameter-checked to make sure it is not <code>null</code> or an empty string, in<br>which case <code>callbackContext.error()</code> invokes JavaScript’s error<br>callback.  If the various checks pass, the <code>callbackContext.success()</code><br>passes the original <code>message</code> string back to JavaScript’s success<br>callback as a parameter.</p>
<h2 id="Android-Integration"><a href="#Android-Integration" class="headerlink" title="Android Integration"></a>Android Integration</h2><p>Android features an <a href="http://developer.android.com/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> system that allows processes to<br>communicate with each other.  Plugins have access to a<br><code>CordovaInterface</code> object, which can access the Android <a href="http://developer.android.com/reference/android/app/Activity.html" target="_blank" rel="external">Activity</a><br>that runs the application.  This is the <a href="http://developer.android.com/reference/android/content/Context.html" target="_blank" rel="external">Context</a> required to launch a<br>new Android <a href="http://developer.android.com/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a>.  The <code>CordovaInterface</code> allows plugins to start<br>an <a href="http://developer.android.com/reference/android/app/Activity.html" target="_blank" rel="external">Activity</a> for a result, and to set the callback plugin for when<br>the <a href="http://developer.android.com/reference/android/content/Intent.html" target="_blank" rel="external">Intent</a> returns to the application.</p>
<p>As of Cordova 2.0, Plugins can no longer directly access the<br><a href="http://developer.android.com/reference/android/content/Context.html" target="_blank" rel="external">Context</a>, and the legacy <code>ctx</code> member is deprecated. All <code>ctx</code><br>methods exist on the <a href="http://developer.android.com/reference/android/content/Context.html" target="_blank" rel="external">Context</a>, so both <code>getContext()</code> and<br><code>getActivity()</code> can return the required object.</p>
<h2 id="Android-Permissions"><a href="#Android-Permissions" class="headerlink" title="Android Permissions"></a>Android Permissions</h2><p>Android permissions until recently have been handled at install-time instead<br>of runtime.  These permissions are required to be declared on an application that uses<br>the permissions, and these permissions need to be added to the Android Manifest.  This can be<br>accomplished by using the <code>config.xml</code> to inject these permissions in the <code>AndroidManifest.xml</code> file.<br>The example below uses the Contacts permission.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;config-file target=&quot;AndroidManifest.xml&quot; parent=&quot;/*&quot;&gt;</div><div class="line">    &lt;uses-permission android:name=&quot;android.permission.READ_CONTACTS&quot; /&gt;</div><div class="line">&lt;/config-file&gt;</div></pre></td></tr></table></figure>
<h3 id="Runtime-Permissions-Cordova-Android-5-0-0"><a href="#Runtime-Permissions-Cordova-Android-5-0-0" class="headerlink" title="Runtime Permissions (Cordova-Android 5.0.0+)"></a>Runtime Permissions (Cordova-Android 5.0.0+)</h3><p>Android 6.0 “Marshmallow” introduced a new permissions model where<br>the user can turn on and off permissions as necessary.  This means that<br>applications must handle these permission changes to be future-proof, which<br>was the focus of the Cordova-Android 5.0.0 release.</p>
<p>The permissions that need to be handled at runtime can be found in the Android Developer<br>documentation <a href="http://developer.android.com/guide/topics/security/permissions.html#perm-groups" target="_blank" rel="external">here</a>.</p>
<p>As far as a plugin is concerned, the permission can be requested by calling the permission method, which signature is as follows:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cordova.requestPermission(CordovaPlugin plugin, int requestCode, String permission);</div></pre></td></tr></table></figure>
<p>To cut down on verbosity, it’s standard practice to assign this to a local static variable:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">public static final String READ = Manifest.permission.READ_CONTACTS;</div></pre></td></tr></table></figure>
<p>It is also standard practice to define the requestCode as follows:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">public static final int SEARCH_REQ_CODE = 0;</div></pre></td></tr></table></figure>
<p>Then, in the exec method, the permission should be checked:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">if(cordova.hasPermission(READ))</div><div class="line">&#123;</div><div class="line">    search(executeArgs);</div><div class="line">&#125;</div><div class="line">else</div><div class="line">&#123;</div><div class="line">    getReadPermission(SEARCH_REQ_CODE);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>In this case, we just call requestPermission:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">protected void getReadPermission(int requestCode)</div><div class="line">&#123;</div><div class="line">    cordova.requestPermission(this, requestCode, READ);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>This will call the activity and cause a prompt to appear asking for the permission.  Once the user has the permission, the result must be handled with the <code>onRequestPermissionResult</code> method, which<br>every plugin should override.  An example of this can be found below:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">public void onRequestPermissionResult(int requestCode, String[] permissions,</div><div class="line">                                         int[] grantResults) throws JSONException</div><div class="line">&#123;</div><div class="line">    for(int r:grantResults)</div><div class="line">    &#123;</div><div class="line">        if(r == PackageManager.PERMISSION_DENIED)</div><div class="line">        &#123;</div><div class="line">            this.callbackContext.sendPluginResult(new PluginResult(PluginResult.Status.ERROR, PERMISSION_DENIED_ERROR));</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    switch(requestCode)</div><div class="line">    &#123;</div><div class="line">        case SEARCH_REQ_CODE:</div><div class="line">            search(executeArgs);</div><div class="line">            break;</div><div class="line">        case SAVE_REQ_CODE:</div><div class="line">            save(executeArgs);</div><div class="line">            break;</div><div class="line">        case REMOVE_REQ_CODE:</div><div class="line">            remove(executeArgs);</div><div class="line">            break;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The switch statement above would return from the prompt and depending on the requestCode that was passed in, it would call the method.  It should be noted that permission prompts may stack if the execution is not handled correctly, and that this should be avoided.</p>
<p>In addition to asking for permission for a single permission, it is also possible to request permissions for an entire group by defining the permissions array, as what is done with the Geolocation plugin:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">String [] permissions = &#123; Manifest.permission.ACCESS_COARSE_LOCATION, Manifest.permission.ACCESS_FINE_LOCATION &#125;;</div></pre></td></tr></table></figure>
<p>Then when requesting the permission, all that needs to be done is the following:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cordova.requestPermissions(this, 0, permissions);</div></pre></td></tr></table></figure>
<p>This requests the permissions specified in the array.  It’s a good idea to provide a publicly accessible permissions array since this can be used by plugins that use your plugin as a<br>dependency, although this is not required.</p>
<h2 id="Debugging-Android-Plugins"><a href="#Debugging-Android-Plugins" class="headerlink" title="Debugging Android Plugins"></a>Debugging Android Plugins</h2><p>Android debugging can be done with either Eclipse or Android Studio, although Android<br>studio is recommended.  Since Cordova-Android is currently used as a library project,<br>and plugins are supported as source code, it is possible to debug the Java code inside<br>a Cordova application just like a native Android application.</p>
<h2 id="Launching-Other-Activities"><a href="#Launching-Other-Activities" class="headerlink" title="Launching Other Activities"></a>Launching Other Activities</h2><p>There are special considerations to be made if your plugin launches an Activity<br>that pushes the Cordova <a href="http://developer.android.com/reference/android/app/Activity.html" target="_blank" rel="external">Activity</a> to the background. The Android OS will destroy<br>Activities in the background if the device is running low on memory. In that<br>case, the <code>CordovaPlugin</code> instance will be destroyed as well. If your plugin is<br>waiting on a result from the <a href="http://developer.android.com/reference/android/app/Activity.html" target="_blank" rel="external">Activity</a> it launched, a new instance of your plugin<br>will be created when the Cordova <a href="http://developer.android.com/reference/android/app/Activity.html" target="_blank" rel="external">Activity</a> is brought back to the foreground and<br>the result is obtained. However, state for the plugin will not be automatically<br>saved or restored and the <code>CallbackContext</code> for the plugin will be lost. There are<br>two methods that your <code>CordovaPlugin</code> may implement to handle this situation:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * Called when the Activity is being destroyed (e.g. if a plugin calls out to an</div><div class="line"> * external Activity and the OS kills the CordovaActivity in the background).</div><div class="line"> * The plugin should save its state in this method only if it is awaiting the</div><div class="line"> * result of an external Activity and needs to preserve some information so as</div><div class="line"> * to handle that result; onRestoreStateForActivityResult() will only be called</div><div class="line"> * if the plugin is the recipient of an Activity result</div><div class="line"> *</div><div class="line"> * @return  Bundle containing the state of the plugin or null if state does not</div><div class="line"> *          need to be saved</div><div class="line"> */</div><div class="line">public Bundle onSaveInstanceState() &#123;&#125;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Called when a plugin is the recipient of an Activity result after the</div><div class="line"> * CordovaActivity has been destroyed. The Bundle will be the same as the one</div><div class="line"> * the plugin returned in onSaveInstanceState()</div><div class="line"> *</div><div class="line"> * @param state             Bundle containing the state of the plugin</div><div class="line"> * @param callbackContext   Replacement Context to return the plugin result to</div><div class="line"> */</div><div class="line">public void onRestoreStateForActivityResult(Bundle state, CallbackContext callbackContext) &#123;&#125;</div></pre></td></tr></table></figure>
<p>It is important to note that the above methods should only be used if your<br>plugin launches an <a href="http://developer.android.com/reference/android/app/Activity.html" target="_blank" rel="external">Activity</a> for a result and should only restore the state<br>necessary to handle that Activity result. The state of the plugin will <em>NOT</em> be<br>restored except in the case where an Activity result is obtained that your<br>plugin requested using the <code>CordovaInterface</code>‘s <code>startActivityForResult()</code> method<br>and the Cordova Activity was destroyed by the OS while in the background.</p>
<p>As part of <code>onRestoreStateForActivityResult()</code>, your plugin will be passed a<br>replacement CallbackContext. It is important to realize that this<br>CallbackContext <em>IS NOT</em> the same one that was destroyed with the Activity. The<br>original callback is lost, and will not be fired in the javascript application.<br>Instead, this replacement <code>CallbackContext</code> will return the result as part of the<br><a href="https://cordova.apache.org/docs/en/latest/cordova/events/events.html#resume" target="_blank" rel="external"><code>resume</code></a> event that is fired when the application resumes. The<br>payload of the <a href="https://cordova.apache.org/docs/en/latest/cordova/events/events.html#resume" target="_blank" rel="external"><code>resume</code></a> event follows this structure:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    action: &quot;resume&quot;,</div><div class="line">    pendingResult: &#123;</div><div class="line">        pluginServiceName: string,</div><div class="line">        pluginStatus: string,</div><div class="line">        result: any</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><code>pluginServiceName</code> will match the <a href="https://cordova.apache.org/docs/en/latest/plugin_ref/spec.html#name" target="_blank" rel="external">name element</a> from your plugin.xml.</li>
<li><code>pluginStatus</code> will be a String describing the status of the PluginResult<br>  passed to the CallbackContext. See PluginResult.java for the String values<br>  that correspond to plugin statuses</li>
<li><code>result</code> will be whatever result the plugin passes to the CallbackContext<br>  (e.g. a String, a number, a JSON object, etc.)</li>
</ul>
<p>This <a href="https://cordova.apache.org/docs/en/latest/cordova/events/events.html#resume" target="_blank" rel="external"><code>resume</code></a> payload will be passed to any callbacks that the javascript<br>application has registered for the <a href="https://cordova.apache.org/docs/en/latest/cordova/events/events.html#resume" target="_blank" rel="external"><code>resume</code></a> event. This means that the result is<br>going <em>directly</em> to the Cordova application; your plugin will not have a chance<br>to process the result with javascript before the application receives it.<br>Consequently, you should strive to make the result returned by the native code<br>as complete as possible and not rely on any javascript callbacks when launching<br>activities.</p>
<p>Be sure to communicate how the Cordova application should interpret the result<br>they receive in the <a href="https://cordova.apache.org/docs/en/latest/cordova/events/events.html#resume" target="_blank" rel="external"><code>resume</code></a> event. It is up to the Cordova application to<br>maintain their own state and remember what requests they made and what arguments<br>they provided if necessary. However, you should still clearly communicate the<br>meaning of <code>pluginStatus</code> values and what sort of data is being returned in the<br><a href="https://cordova.apache.org/docs/en/latest/cordova/events/events.html#resume" target="_blank" rel="external"><code>resume</code></a> field as part of your plugin’s API.</p>
<p>The complete sequence of events for launching an Activity is as follows</p>
<ol>
<li>The Cordova application makes a call to your plugin</li>
<li>Your plugin launches an Activity for a result</li>
<li><p>The Android OS destroys the Cordova Activity and your plugin instance</p>
<ul>
<li><em><code>onSaveInstanceState()</code> is called</em></li>
</ul>
</li>
<li><p>The user interacts with your Activity and the Activity finishes</p>
</li>
<li><p>The Cordova Activity is recreated and the Activity result is received</p>
<ul>
<li><em><code>onRestoreStateForActivityResult()</code> is called</em></li>
</ul>
</li>
<li><p><code>onActivityResult()</code> is called and your plugin passes a result to the new<br>CallbackContext</p>
</li>
<li>The <a href="https://cordova.apache.org/docs/en/latest/cordova/events/events.html#resume" target="_blank" rel="external"><code>resume</code></a> event is fired and received by the Cordova application</li>
</ol>
<p>Android provides a developer setting for debugging Activity destruction on low<br>memory. Enable the “Don’t keep activities” setting in the Developer Options menu<br>on your device or emulator to simulate low memory scenarios. If your plugin<br>launches external activities, you should always do some testing with this<br>setting enabled to ensure that you are properly handling low memory scenarios.</p>

        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2017-11-05T08:22:17.000Z" itemprop="dateUpdated">2017-11-05 16:22:17</time>
</span><br>


        
        这里可以写作者留言，标签和 hexo 中所有变量及辅助函数等均可调用，示例：<a href="/Cordova/2014-06-09-cordova-android-plugin.html" target="_blank" rel="external">http://blog.inching.org/Cordova/2014-06-09-cordova-android-plugin.html</a>
        
    </div>
    <footer>
        <a href="http://blog.inching.org">
            <img src="/img/avatar.png" alt="Cody Fei">
            Cody Fei
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cordova/">cordova</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/phonegap/">phonegap</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.inching.org/Cordova/2014-06-09-cordova-android-plugin.html&title=《Cordova Android Plugin》 — Balance&pic=http://blog.inching.org/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.inching.org/Cordova/2014-06-09-cordova-android-plugin.html&title=《Cordova Android Plugin》 — Balance&source=This section provides details for how to implement native plugin codeon the A..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.inching.org/Cordova/2014-06-09-cordova-android-plugin.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Cordova Android Plugin》 — Balance&url=http://blog.inching.org/Cordova/2014-06-09-cordova-android-plugin.html&via=http://blog.inching.org" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.inching.org/Cordova/2014-06-09-cordova-android-plugin.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/Node/2014-06-09-node-best-practice.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Node 最佳实践</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/OS/2014-06-09-eclipse.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Eclipse</h4>
      </a>
    </div>
  
</nav>



    











</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢大爷~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.JPG" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.JPG" data-alipay="/img/alipay.JPG">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top" style="display:none">
        

        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>footer.license</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Cody Fei &copy; 2012 - 2017</span>
            <span style="display:none">
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.inching.org/Cordova/2014-06-09-cordova-android-plugin.html&title=《Cordova Android Plugin》 — Balance&pic=http://blog.inching.org/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.inching.org/Cordova/2014-06-09-cordova-android-plugin.html&title=《Cordova Android Plugin》 — Balance&source=This section provides details for how to implement native plugin codeon the A..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.inching.org/Cordova/2014-06-09-cordova-android-plugin.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Cordova Android Plugin》 — Balance&url=http://blog.inching.org/Cordova/2014-06-09-cordova-android-plugin.html&via=http://blog.inching.org" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.inching.org/Cordova/2014-06-09-cordova-android-plugin.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACrElEQVR42u3aQW7DIBAF0Nz/0uk2XQT/mQHXlZ5XketgHpWA/OH1iq/3x/XtfvLXb09+Pr/+7uvEhYeHhzfo+rfm1oA1df05edf6zsUQ4OHh4R3jJdP0uovJglEdpqQ/FxY8PDy8B/CSb/XazDf0eHh4eP+Rl/zqz5eZfBuNh4eH9xxeEkasG8rjjGocnIe8eHh4ePfw8k3tcz4fqe/h4eHhjavqvQJVb4rvtXzxXjw8PLwDvF7Q0ItWJ9vf/Hk8PDy807zJoYHkThLF5u2XDyLg4eHh3cir/rrPg4weOwdHlT08PDy8MS9pLi9r5UWvfOtc7SEeHh7ead5kYZgvMxPwRTt4eHh4x3j5Qai8wF8toSW9Khfe8PDw8A7wqgFBMqHvLZL1At9CBQ8PDw9vwOuloHtbqB7bShYtPDw8vHt4vSB1XsqahxGF/xseHh5ei5cHDdXYYj6J94ptvz7j4eHhHeBtKDIFMcSugwWjVQ4PDw9vE2++2e1N2XsXofKhKzw8PLwBL48bkpCiF7/OF61IgYeHh7eJ1wtJq4wcmR+xSvqGh4eHd4KXl7uSjXVviq9GDOWe4OHh4R3g5d2aR7HJwPXegoeHh3cPb75FTor3+QDtKs59PRmBh4eHN+blZa1kgp7fmcQThTIYHh4e3pjXOxzQK5Llz8wHDg8PD++veNVX9kKEvYe0CgsDHh4e3oCXbJcnHZ1HDM0LDw8PbyvvXbyqG9x8yPKwozDEeHh4eAd4vTm2d7Bg3cVkKPceAsPDw8Ob8HYtBgmp+uSk/IaHh4d3mpcUwPaGsCeu0dEBPDw8vGO8/BhBnqYmA9rcauPh4eE9gFc9RpB3KyElATEeHh7ePbxeIJuAE0ZeNku+hYeHh3eal//I70361W1x77jAhgwDDw8P75r3A/jQfYLwAK9tAAAAAElFTkSuQmCC" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="/js/main.min.js?v=1.6.17"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.6.17" async></script>










</body>
</html>
