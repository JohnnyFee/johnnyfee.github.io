<!DOCTYPE html>
<html>
<head>
    
<!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-43567748-2', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<!-- End Google Analytics -->


    

    



    <meta charset="utf-8">
    
    <meta name="google-site-verification" content="true">
    
    
    
    <title>Angular i18n | Balance | 大道至简</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="i18n,angular">
    <meta name="description" content="i18n and l10nMany web applications need to support multiple languages. The process of building in this support in a piece of software can be split in two parts: Getting it technically ready to support">
<meta property="og:type" content="article">
<meta property="og:title" content="Angular i18n">
<meta property="og:url" content="http://blog.inching.org/Angular/2015-03-02-angular-i18n.html">
<meta property="og:site_name" content="Balance">
<meta property="og:description" content="i18n and l10nMany web applications need to support multiple languages. The process of building in this support in a piece of software can be split in two parts: Getting it technically ready to support">
<meta property="og:updated_time" content="2017-11-05T08:22:17.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Angular i18n">
<meta name="twitter:description" content="i18n and l10nMany web applications need to support multiple languages. The process of building in this support in a piece of software can be split in two parts: Getting it technically ready to support">
    
        <link rel="alternate" type="application/atom+xml" title="Balance" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/style/style.css?v=1.6.17">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Cody Fei</h5>
          <a href="mailto:inchingcode@gmail.com" title="inchingcode@gmail.com" class="mail">inchingcode@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                Home
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags/android"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories/Android/"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/inchingorg" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://www.weibo.com/CodyFee" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://www.inesoi.com" target="_blank" >
                <i class="icon icon-lg icon-shopping-bag"></i>
                Shopping Bag
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Angular i18n</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Angular i18n</h1>
        <h5 class="subtitle">
            
                <time datetime="2015-03-01T16:00:00.000Z" itemprop="datePublished" class="page-time">
  2015-03-02
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Angular/">Angular</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#i18n-and-l10n"><span class="post-toc-text">i18n and l10n</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#什么是区域id（locale-id）"><span class="post-toc-text">什么是区域id（locale id）?</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#I18n-and-L10n-in-AngularJS"><span class="post-toc-text">I18n and L10n in AngularJS</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#angular-对-18n、L10n-的支持？"><span class="post-toc-text">angular 对 18n、L10n 的支持？</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#angular-支持的-locale"><span class="post-toc-text">angular 支持的 locale</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#在-angular-中定制-locale-规则"><span class="post-toc-text">在 angular 中定制 locale 规则</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#预先绑定的规则集合（Pre-bundled-rule-sets）"><span class="post-toc-text">预先绑定的规则集合（Pre-bundled rule sets）</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#包含-locale-js-脚本到-index-html-页"><span class="post-toc-text">包含 locale js 脚本到 index.html 页</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#陷阱（“Gotchas”）"><span class="post-toc-text">陷阱（“Gotchas”）</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#货币符号陷阱"><span class="post-toc-text">货币符号陷阱</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#翻译长度陷阱"><span class="post-toc-text">翻译长度陷阱</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#时区"><span class="post-toc-text">时区</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#自定义国际化和本地化机制"><span class="post-toc-text">自定义国际化和本地化机制</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#The-basics"><span class="post-toc-text">The basics</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Improving-the-architecture"><span class="post-toc-text">Improving the architecture</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Adding-functionality-interpolation"><span class="post-toc-text">Adding functionality: interpolation</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Adding-functionality-pluralization"><span class="post-toc-text">Adding functionality: pluralization</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Conclusion"><span class="post-toc-text">Conclusion</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#angular-translate"><span class="post-toc-text">angular-translate</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Is-there-a-way-to-get-the-current-used-language-in-a-controller-without-translateProvider"><span class="post-toc-text">Is there a way to get the current used language in a controller (without $translateProvider)?</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Ref"><span class="post-toc-text">Ref</span></a></li></ol>
        </nav>
    </aside>
    
<article id="post-angular-i18n"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Angular i18n</h1>
        <div class="post-meta">
            <time class="post-time" title="2015-03-02 00:00:00" datetime="2015-03-01T16:00:00.000Z"  itemprop="datePublished">2015-03-02</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Angular/">Angular</a></li></ul>



            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h2 id="i18n-and-l10n"><a href="#i18n-and-l10n" class="headerlink" title="i18n and l10n"></a>i18n and l10n</h2><p>Many web applications need to support multiple languages. The process of building in this support in a piece of software can be split in two parts: Getting it technically ready to support multiple languages/regions, and getting it ready for a particular language/region. The first part is called <em>internationalization</em>, often abbreviated to i18n (18 being the number of characters left out in the abbreviation). The second part is called <em>localization</em>, abbreviated as L10n. In this blog post, we’ll see how we can support i18n in an AngularJS-based web application. There is an example project available containing all source code. It’s a Maven project based on Tomcat 7 (Servlet API 3.0) and JDK 6, and can be downloaded <a href="http://blog.trifork.com/wp-content/uploads/2014/03/i18n-angular.zip" target="_blank" rel="external">here</a>. The example builds on a an example case I created as part of a <a href="http://blog.trifork.com/2014/03/20/web-forms-with-java-angularjs-and-other-approaches" target="_blank" rel="external">previous blog</a> on AngularJS.</p>
<a id="more"></a>
<p>It’s useful to start by quickly reviewing what i18n includes, and what aspects of it we’re going to implement. At a most basic level, we should eliminate hard coded texts. Instead, pieces of text should be identified by a label or unique key. The translation of this label to an actual piece of text will be dependent on the language. For each supported language, there is a translation table containing the actual texts for each label. In the Java world, this table is known as a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/ResourceBundle.html" target="_blank" rel="external">ResourceBundle</a>. This is the most elementary type of i18n, and we will see it in action in our example application.</p>
<p>It turns out that in actual applications, simply serving a static string for each label doesn’t cut it. Consider the message “The compiler found 8 errors.”. Here, the number 8 is obviously not a fixed part of the text. This should be a dynamic parameter of the message. The process of creating the actual message from a kind of template and a set of parameters is often called <em>interpolation</em>. But what if there is only 1 error? Then the text should read “1 error.” and not “1 errors.”. Getting this aspect right is called <em>pluralization</em>. In the Java world, both interpolation and pluralization can be done by the <a href="http://docs.oracle.com/javase/7/docs/api/java/text/MessageFormat.html" target="_blank" rel="external">MessageFormat</a> class. We’ll see how these can be handled through AngularJS in our example application.</p>
<p>When doing interpolation, a specific aspect that is language-dependent is the formatting of the parameters. For instance, in case the parameter is of a number type, the decimal separator is a point (“.”) in English but it’s a comma (“,”) in Dutch. A much more complex case is formatting dates in long form. This involves translating a technical representation of a date/time (for instance, an ISO8601 date like ‘2014-03-16’) to its natural language representation (March 16th, 2014). This is an aspect that isn’t included in our example project, although it could be handled along the same lines.</p>
<p>In addition to the things described above, there are some i18n fringe phenomena that I won’t really cover in the discussion. One of those things is displaying the right currency sign. I personally believe this issue is wrongly placed under the i18n umbrella; if you have an international application dealing with money, currency handling is a business logic issue and not merely a presentation thing. Other things are time zones, i18n of non-text resources (e.g., images) and non-Western languages that use a direction of writing other than left-to-right.</p>
<h3 id="什么是区域id（locale-id）"><a href="#什么是区域id（locale-id）" class="headerlink" title="什么是区域id（locale id）?"></a>什么是区域id（locale id）?</h3><p>locale 是一个特定地理、政治、文化的地区。最常用的 locale id 由两部分组成：语言代码和国家代码。例如，en-US，en-AU，zh-CN 都是有效的 locale ID，都包含语言代码和国家代码。因为在 locale ID 中指定的国家编码是可选的，locale ID，例如 en、zh 和 sk 都是有效的。查看网站 <a href="http://userguide.icu-project.org/locale" target="_blank" rel="external">ICU</a>，那里有更多关于locale ID的信息。</p>
<h2 id="I18n-and-L10n-in-AngularJS"><a href="#I18n-and-L10n-in-AngularJS" class="headerlink" title="I18n and L10n in AngularJS"></a>I18n and L10n in AngularJS</h2><p>If you look at the <a href="http://docs.angularjs.org/guide/i18n" target="_blank" rel="external">AngularJS developer guide</a>, you’ll see that AngularJS supports some of the things we just described. There’s formatting of date/time, numbers and currency. Also, there is support for pluralization. But there are two important limitations. First, there is no out of the box support for the process of translating a label/key to an actual text for a given language (which in my mind is an i18n requirement that is more basic than formatting dates and numbers). Second, the language to be used for date/time and number formatting must be chosen when the page is initialized and can’t be changed dynamically. Overall, you could say that AngularJS has rather limited i18n support.</p>
<p>Although the out-of-the-box support of i18n by AngularJS is a bit disappointing, doing i18n with AngularJS still has a lot of potential. AngularJS has a filter syntax (things like `{{ 12 | currency }}` producing <code>$12.00</code>), which really seems to fit nicely with i18n. Why not have `{{ 'HORSE' | xlat }}` producing ‘horse’ in English and ‘paard’ in Dutch? Also, handling i18n in AngularJS (and thus in the client/browser) makes for a very nice architecture. i18n would be dealt with as a presentation-layer aspect only, and the server side business logic wouldn’t have to know anything about it.</p>
<p>Looking at 3rd party i18n extensions to AngularJS, one quickly stumbles upon <a href="http://angular-translate.github.io/" target="_blank" rel="external">angular-translate</a>. This is an implementation of the basic idea of using a filter to perform i18n in AngularJS. I’ve used it for a real-world application, and it generally works fine. The problem I have with it though, is caused by the fact that requirements and technical details surrounding i18n vary greatly between applications. For instance: How do you determine the initial language to be used for a user? Where do you store the current language? Where do the translation tables come from? If translation tables are changed/expanded dynamically, when does this take place and how? angular-translate deals with this variety by being very configurable and modular. The result is that I often find myself having to implement a custom implementation of some angular-translate component to get it to do what I need it to do; and that is somewhat tricky.</p>
<p>Just coding what you actually need, directly in AngularJS, may be a lot simpler in many cases. That’s the approach taken in our example project, which we will discuss below.</p>
<h2 id="angular-对-18n、L10n-的支持？"><a href="#angular-对-18n、L10n-的支持？" class="headerlink" title="angular 对 18n、L10n 的支持？"></a>angular 对 18n、L10n 的支持？</h2><p>当前，angular 对 <a href="https://docs.angularjs.org/api/ng/filter/date" target="_blank" rel="external">date</a>, <a href="https://docs.angularjs.org/api/ng/filter/number" target="_blank" rel="external">number</a> and<br><a href="https://docs.angularjs.org/api/ng/filter/currency" target="_blank" rel="external">currency</a> 过滤器提供 I18n、L10n 支持。</p>
<p>此外，angular通过 <a href="http://docs.angularjs.org/api/ng.directive:ngPluralize" target="_blank" rel="external">ngPluralize directive</a>支持多元化的本地化。</p>
<p>所有可本地化的控件都依赖于通过 <code>$locale</code> 服务管理的区域设定特性规则集。</p>
<p>为了让读者看到实际例子，官方准备了一些网页例子，展示如何通过区域规则集合变量使用 angular 过滤器。我们可以在 <a href="https://github.com/angular/angular.js/tree/master/i18n/e2e" target="_blank" rel="external">e2e directory</a> 中找到对应的例子。</p>
<h3 id="angular-支持的-locale"><a href="#angular-支持的-locale" class="headerlink" title="angular 支持的 locale"></a>angular 支持的 locale</h3><p>Angular separates number and datetime format rule sets into different files, each file for a<br>particular locale. You can find a list of currently supported locales<br><a href="https://github.com/angular/angular.js/tree/master/src/ngLocale" target="_blank" rel="external">here</a></p>
<h2 id="在-angular-中定制-locale-规则"><a href="#在-angular-中定制-locale-规则" class="headerlink" title="在 angular 中定制 locale 规则"></a>在 angular 中定制 locale 规则</h2><p>在angular中定制locale有两个方式：</p>
<h3 id="预先绑定的规则集合（Pre-bundled-rule-sets）"><a href="#预先绑定的规则集合（Pre-bundled-rule-sets）" class="headerlink" title="预先绑定的规则集合（Pre-bundled rule sets）"></a>预先绑定的规则集合（Pre-bundled rule sets）</h3><p>我们可以通过将locale-specific的文件连接到 angular.js 或者 angular.min.js 之后，实现将angular和预先绑定（pre-bundle）期望的locale文件。</p>
<p>例如，在 *nix 中，我们可以通过以下命令来创建一个包含德国区域本地化规则的文件的angular.js文件：</p>
<pre><code>cat angular.js i18n/angular-locale_de-ge.js &gt; angular_de-ge.js
</code></pre><p>当从应用程序使用 angular_de-ge.js 脚本代替一般的 angular.js 脚本开始，angular 开始自动预先配置（pre-configured）德国地区的本地化规则。</p>
<h3 id="包含-locale-js-脚本到-index-html-页"><a href="#包含-locale-js-脚本到-index-html-页" class="headerlink" title="包含 locale js 脚本到 index.html 页"></a>包含 locale js 脚本到 index.html 页</h3><p>我们也可以包含指定区域的js文件到页面当中。例如，如果一个客户端需要德国区域文件，我们可以提供类似以下的页面：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">ng-app</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    ...</div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"i18n/angular-locale_de-ge.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    ...</div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    ...</div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>上述两种方法，都要求我们为本地化而提供各个区域的不同的 index.html 页或者 js 文件。我们还需要配置我们的服务器提供正确的、符合期望的区域设置文件。</p>
<p>然而，第二种方式（包含区域设置文件到页面中）会比较慢，因为需要多加载一个脚本。</p>
<h2 id="陷阱（“Gotchas”）"><a href="#陷阱（“Gotchas”）" class="headerlink" title="陷阱（“Gotchas”）"></a>陷阱（“Gotchas”）</h2><h3 id="货币符号陷阱"><a href="#货币符号陷阱" class="headerlink" title="货币符号陷阱"></a>货币符号陷阱</h3><p>angular 的 currency filter 允许我们从 locale service 中使用默认的货币符号，我们也可以提供自定义的货币符号。如果我们的应用只在一个区域中使用，那么我们可以依赖（设置）默认货币符号。但是，如果我们预料到其他区域的用户也会使用到我们的应用的话，我们应该提供我们自定义的货币符号，确保用户能够明白实际的值。</p>
<p>例如，如果我们想通过绑定currency filter来显示账户余额为1000元：`{{ 1000 | currency}}`，我们的应用当前是使用en-US的区域设置，那么将会显示”$1000.00”。然而，如果一些其他区域（例如中国大陆）的用户访问我们的应用，用户浏览器会指定区域设置为“中国大陆”，然后余额将显示为“￥1000.00”（很悲催的错误啊，汇率…）。</p>
<p>在这个例子中，当我们需要设置filter的时候，我们需要通过对currency filter（<a href="http://docs.angularjs.org/api/ng.filter:currency）提供货币符号作为参数来重写默认货币符号，参数如：USD$。这样，angular会忽略任何区域设置的变化，一直显示余额为“USD$1000.00”。" target="_blank" rel="external">http://docs.angularjs.org/api/ng.filter:currency）提供货币符号作为参数来重写默认货币符号，参数如：USD$。这样，angular会忽略任何区域设置的变化，一直显示余额为“USD$1000.00”。</a></p>
<h3 id="翻译长度陷阱"><a href="#翻译长度陷阱" class="headerlink" title="翻译长度陷阱"></a>翻译长度陷阱</h3><p>记住，翻译字符串、事件格式时，长度的变化可能会很大。例如“June 3, 1977”翻译为西班牙语时变为“3 de junio de 1977”。当然，还可能会有更加极端的状况。因此，当我们对应用进行国际化时，我们需要设置相应的CSS规则并且进行全面测试，确保UI组件不会折行（变型）。</p>
<h3 id="时区"><a href="#时区" class="headerlink" title="时区"></a>时区</h3><p>记住，angular的datetime filter是使用浏览器端设置的时区的。所以，同一个应用将根据运行应用的计算机的时区设置而显示不同的时间信息，而不是取决于javascript或者angular的开发者指定的时区。</p>
<h2 id="自定义国际化和本地化机制"><a href="#自定义国际化和本地化机制" class="headerlink" title="自定义国际化和本地化机制"></a>自定义国际化和本地化机制</h2><h3 id="The-basics"><a href="#The-basics" class="headerlink" title="The basics"></a>The basics</h3><p>The first thing we want to achieve is to have language-agnostic labels being translated into a language-specific text by a filter. In our HTML form, we want to write something like:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;% raw %&#125;</div><div class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!-- The raw label 'FIRST_NAME' will</span></div><div class="line">     serve as input to the 'xlat' filter function. --&gt;</div><div class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span>&#123;&#123; 'FIRST_NAME' | xlat &#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">data-ng-model</span>=<span class="string">"data.firstName"</span> <span class="attr">type</span>=<span class="string">"text"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">&#123;% endraw %&#125;</div></pre></td></tr></table></figure>
<p>The basic task we need to achieve is to implement the <code>xlat</code> filter. A very rough implementation could be like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">formApp.filter(<span class="string">'xlat'</span>, [<span class="string">'$rootScope'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$rootScope</span>) </span>&#123;</div><div class="line">  <span class="comment">// The code here executes only once, during initialization.</span></div><div class="line">  <span class="comment">// We'll return the actual filter function that's executed</span></div><div class="line">  <span class="comment">// many times.</span></div><div class="line">  <span class="keyword">var</span> tables = &#123;</div><div class="line">    <span class="string">'en'</span>: &#123; <span class="string">'FIRST_NAME'</span>: <span class="string">'First name:'</span> &#125;,</div><div class="line">    <span class="string">'nl'</span>: &#123; <span class="string">'FIRST_NAME'</span>: <span class="string">'Voornaam:'</span> &#125;</div><div class="line">  &#125;;</div><div class="line">  $rootScope.currentLanguage = <span class="string">'en'</span>;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">label</span>) </span>&#123;</div><div class="line">    <span class="comment">// tables is a nested map; by first selecting the</span></div><div class="line">    <span class="comment">// current language (kept in the $rootScope as a</span></div><div class="line">    <span class="comment">// global variable), and selecting the label,</span></div><div class="line">    <span class="comment">// we get the correct value.</span></div><div class="line">    <span class="keyword">return</span> tables[$rootScope.currentLanguage][label];</div><div class="line">  &#125;;</div><div class="line">&#125;]);</div></pre></td></tr></table></figure>
<p>Here, the translation table is hard coded into the filter function. We’re creating a <code>$rootScope</code> variable (which is like a “global” variable) to keep track of the selected language. And this filter is part of the the same AngularJS module as our form itself. So there is room for improvement as far as software architecture goes. But the basic idea works fine. We cannot only use this filter in the `{{ ... }}` context, but also in other places where AngularJS expressions occur, such as in the <code>ng-options</code> attribute of a select input:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&#123;% raw %&#125;</div><div class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span>&#123;&#123; 'FAV_COLOR' | xlat &#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span> </div><div class="line">  <span class="comment">&lt;!-- AngularJS will create the HTML &lt;option&gt;s dynamically</span></div><div class="line">   based on the ng-options attribute. It supports many</div><div class="line">   different syntaxes, and we may simply use our filter</div><div class="line">   within it. --&gt;</div><div class="line">  <span class="tag">&lt;<span class="name">select</span> </span></div><div class="line">      <span class="attr">data-ng-model</span>=<span class="string">"data.color"</span> </div><div class="line">      <span class="attr">data-ng-options</span>=<span class="string">"('COLOR_' + opt | xlat) </span></div><div class="line">                       for opt in colorOptions"&gt;</div><div class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">&#123;% endraw %&#125;</div></pre></td></tr></table></figure>
<h3 id="Improving-the-architecture"><a href="#Improving-the-architecture" class="headerlink" title="Improving the architecture"></a>Improving the architecture</h3><p>i18n is a shared concern among many parts of our application. It’s best placed in a separate module, in its own JavaScript file. The actual logic of the i18n can be put in an AngularJS service factory. This service can be injected as a dependency into the filter (for doing translations) and in controllers (for having the user change the current language). The initial translation tables can be retrieved from a separate file (maybe generated dynamically by the server). The new <code>xlat.js</code> module looks like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// We'll create a separate module that we can depend on</span></div><div class="line"><span class="comment">// in our main application module.</span></div><div class="line"><span class="keyword">var</span> xlat = angular.module(<span class="string">'xlat'</span>, []);</div><div class="line"></div><div class="line">xlat.factory(<span class="string">'xlatService'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// This function will be executed once. We use it as</span></div><div class="line">  <span class="comment">// a scope to keep our current language in (thus avoiding</span></div><div class="line">  <span class="comment">// the ugly use of root scope).</span></div><div class="line">  <span class="keyword">var</span> currentLanguage = <span class="string">'en'</span>;</div><div class="line">  <span class="comment">// We copy the initial translation table that we included</span></div><div class="line">  <span class="comment">// in a separate file to our scope. (As may might change</span></div><div class="line">  <span class="comment">// this dynamically, it's good practice to make a deep copy</span></div><div class="line">  <span class="comment">// rather than just refer to it.)</span></div><div class="line">  <span class="keyword">var</span> tables = $.extend(<span class="literal">true</span>, &#123;&#125;, initialXlatTables);</div><div class="line">  <span class="comment">// We return the service object that will be injected into</span></div><div class="line">  <span class="comment">// both our filter and our application module.</span></div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">setCurrentLanguage</span>: <span class="function"><span class="keyword">function</span>(<span class="params">newCurrentLanguage</span>) </span>&#123;</div><div class="line">      currentLanguage = newCurrentLanguage;</div><div class="line">    &#125;,    </div><div class="line">    <span class="attr">getCurrentLanguage</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">return</span> currentLanguage;</div><div class="line">    &#125;,    </div><div class="line">    <span class="attr">xlat</span>: <span class="function"><span class="keyword">function</span>(<span class="params">label, parameters</span>) </span>&#123;</div><div class="line">      <span class="comment">// This is where we will add more functionality</span></div><div class="line">      <span class="comment">// once we start to do something more than</span></div><div class="line">      <span class="comment">// simply look up a label.</span></div><div class="line">      <span class="keyword">return</span> tables[currentLanguage][label];</div><div class="line">    &#125;    </div><div class="line">  &#125;;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// The filter itself has now a very short definition; it simply</span></div><div class="line"><span class="comment">// acts as a proxy to the xlatService's xlat function.</span></div><div class="line">xlat.filter(<span class="string">'xlat'</span>, [<span class="string">'xlatService'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">xlatService</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">label</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> xlatService.xlat(label);</div><div class="line">  &#125;;</div><div class="line">&#125;]);</div></pre></td></tr></table></figure>
<p>And to support switching languages in the form, we modify our form.js module like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">formApp.controller(&apos;FormController&apos;,</div><div class="line">// We inject the xlatService in out controller.</div><div class="line">    [&apos;$scope&apos;, ..., &apos;xlatService&apos;,</div><div class="line">     function($scope, ..., xlatService) &#123;</div><div class="line">  ...</div><div class="line">// So we can create a $scope function that can be linked</div><div class="line">// to the click of a change-language button.</div><div class="line">  $scope.setCurrentLanguage = function(language) &#123;</div><div class="line">    xlatService.setCurrentLanguage(language);</div><div class="line">  &#125;;</div></pre></td></tr></table></figure>
<p>Now, everything is neatly factored out and the xlat functionality doesn’t mess up our other modules and controllers.</p>
<h3 id="Adding-functionality-interpolation"><a href="#Adding-functionality-interpolation" class="headerlink" title="Adding functionality: interpolation"></a>Adding functionality: interpolation</h3><p>AngularJS itself has interpolation as one of its core functions. It’s used to translate AngularJS expressions in <code>{{ ... }}</code> to text. Luckily, AngularJS exposes this functionality to the programmer as the <code>$interpolate</code> service. In a certain sense,<br><code>$interpolate</code> will be our AngularJS, client-side alternative to Java’s <code>MessageFormat</code>. But how do we get the parameters to our filter function? AngularJS’s filters support filter arguments, to be presented after a colon following the filter name.</p>
<p>As an example, consider the label</p>

    'AGE_MAX': 'Age cannot be higher than {{years}}.'

<p>Whenever the server returns an AGE_MAX message, it will return as well the value of the years parameter. We’ll make sure the server returns a JSON message array like this:</p>
<pre><code>[ { &quot;label&quot;: &quot;AGE_MAX&quot;, &quot;parameters&quot;: { &quot;years&quot;: 130 } } ]
</code></pre><p>To support interpolation, we’ll include the following in the HTML:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&#123;% raw %&#125;</div><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!-- Here, m is an object with properties 'label' and</span></div><div class="line">     'parameters'. 'm.label' is the regular filter</div><div class="line">     input, and 'm.parameters' is additional filter</div><div class="line">     input provided after the colon. --&gt;</div><div class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-ng-repeat</span>=<span class="string">"m in messages"</span>&gt;</span></div><div class="line">    &#123;&#123;m.label | xlat:(m.parameters)&#125;&#125;</div><div class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">&#123;% endraw %&#125;</div></pre></td></tr></table></figure>
<p>We have to modify our xlat filter to support the parameters argument:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Still just a proxy, but now including both the standard</span></div><div class="line"><span class="comment">// and additional arguments.</span></div><div class="line">xlat.filter(<span class="string">'xlat'</span>, [<span class="string">'xlatService'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">xlatService</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">label, parameters</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> xlatService.xlat(label, parameters);</div><div class="line">  &#125;;</div><div class="line">&#125;]);</div></pre></td></tr></table></figure>
<p>And finally, the xlatService will need to support this as well. Here, we’ll inject the $interpolate service and modify our xlat function:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">xlat.factory(<span class="string">'xlatService'</span>, [<span class="string">'$interpolate'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$interpolate</span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">    xlat: <span class="function"><span class="keyword">function</span>(<span class="params">label, parameters</span>) </span>&#123;</div><div class="line">      <span class="keyword">if</span>(parameters == <span class="literal">null</span> || $.isEmptyObject(parameters)) &#123;</div><div class="line">        <span class="comment">// No parameters, so we don't have to worry about</span></div><div class="line">        <span class="comment">// interpolation.</span></div><div class="line">        <span class="keyword">return</span> tables[currentLanguage][label];</div><div class="line">      &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="comment">// We got parameters. We'll provide our text to the</span></div><div class="line">        <span class="comment">// $interpolate service, that will return a function.</span></div><div class="line">        <span class="comment">// Applying the parameters to this function will give</span></div><div class="line">        <span class="comment">// us the actual text.</span></div><div class="line">        <span class="keyword">return</span> $interpolate(</div><div class="line">                 tables[currentLanguage][label])(</div><div class="line">                   parameters);</div><div class="line">      &#125;</div><div class="line">    &#125;    </div><div class="line">  &#125;;</div><div class="line">&#125;]);</div></pre></td></tr></table></figure>
<p>After building this, I found it remarkably simple. There is not much going on here besides wiring together the filter syntax with the existing <code>$interpolate</code> service.</p>
<h3 id="Adding-functionality-pluralization"><a href="#Adding-functionality-pluralization" class="headerlink" title="Adding functionality: pluralization"></a>Adding functionality: pluralization</h3><p>Pluralization (and related stuff like ‘genderization’) is a pretty complex topic if you think it through. The readme of the <a href="https://github.com/SlexAxton/messageformat.js" target="_blank" rel="external">messageformat.js</a> project gives a nice impression of the complexity involved. I wanted to do something powerful enough to handle most of the cases, yet simple enough to to be implemented in just a couple of lines of code.</p>
<p>The solution I’ve chosen is that the value contained in a translation table for a particular label, may be a function rather than a text. If it’s a function, the xlat function will evaluate this function against the parameters. The result will be treated as the new label. Some example data to see it in action:</p>

undefined


<p>The intention here is to correctly distinguish between “field was” and “fields were” depending on the number of fields. To use this in our xlat function, we simply add the following three lines of code:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// If our supposed text is actually a function, we will apply</span></div><div class="line"><span class="comment">// this function to the parameters to obtain a new label. The</span></div><div class="line"><span class="comment">// text belonging to this label may be a function as well, so</span></div><div class="line"><span class="comment">// we keep following our functions until we have something that</span></div><div class="line"><span class="comment">// is not a function.</span></div><div class="line"><span class="keyword">while</span>($.isFunction(tables[currentLanguage][label])) &#123;</div><div class="line">  label = tables[currentLanguage][label](parameters);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>This completes our ‘tour’ of the code in the example project. The code you’ll find in there is slightly more elaborate than this, as it has been made resilient against the case of missing texts for labels (in that case, the label itself will be shown). Also, the example project includes the server-side stuff making the form actually work as well; this part is straightforward Java / Spring MVC and hasn’t been discussed here.</p>
<p>I’ve really come to like the idea of dealing with i18n client-side in AngularJS. The combination of the power of AngularJS and that of JavaScript as a dynamic language supporting function values, makes this surprisingly easy. Functionally, we get something great as well: language can change on the fly while keeping all other state of the web page. Given that it’s so easy, and that this area always has many application-specific details, I would generally prefer to build it myself rather than use a pre-existing framework.</p>
<h2 id="angular-translate"><a href="#angular-translate" class="headerlink" title="angular-translate"></a>angular-translate</h2><p>See <a href="http://angular-translate.github.io/" target="_blank" rel="external">angular translate - i18n for your Angular apps, made easy.</a></p>
<h3 id="Is-there-a-way-to-get-the-current-used-language-in-a-controller-without-translateProvider"><a href="#Is-there-a-way-to-get-the-current-used-language-in-a-controller-without-translateProvider" class="headerlink" title="Is there a way to get the current used language in a controller (without $translateProvider)?"></a>Is there a way to get the current used language in a controller (without $translateProvider)?</h3><p>See <a href="http://stackoverflow.com/questions/20444578/get-current-language-with-angular-translate" target="_blank" rel="external">angularjs - Get current language with angular-translate - Stack Overflow</a></p>
<p><code>$translate.use()</code> is a getter and setter.</p>
<p>See this demo found in links of docs: <a href="http://jsfiddle.net/PascalPrecht/eUGWJ/7/" target="_blank" rel="external">http://jsfiddle.net/PascalPrecht/eUGWJ/7/</a></p>
<h2 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h2><ul>
<li><a href="https://code.angularjs.org/1.0.2/docs/guide/i18n" target="_blank" rel="external">AngularJS: i18n and l10n</a></li>
<li><a href="http://www.cnblogs.com/lcllao/archive/2012/09/20/2696195.html" target="_blank" rel="external">AngularJs学习笔记–I18n/L10n - Lcllao - 博客园</a></li>
<li><a href="http://blog.trifork.com/2014/04/10/internationalization-with-angularjs/" target="_blank" rel="external">Internationalization with AngularJS « Trifork Blog / Trifork: Enterprise Java, Open Source, software solutions</a></li>
</ul>

        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2017-11-05T08:22:17.000Z" itemprop="dateUpdated">2017-11-05 16:22:17</time>
</span><br>


        
        这里可以写作者留言，标签和 hexo 中所有变量及辅助函数等均可调用，示例：<a href="/Angular/2015-03-02-angular-i18n.html" target="_blank" rel="external">http://blog.inching.org/Angular/2015-03-02-angular-i18n.html</a>
        
    </div>
    <footer>
        <a href="http://blog.inching.org">
            <img src="/img/avatar.png" alt="Cody Fei">
            Cody Fei
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/angular/">angular</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/i18n/">i18n</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.inching.org/Angular/2015-03-02-angular-i18n.html&title=《Angular i18n》 — Balance&pic=http://blog.inching.org/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.inching.org/Angular/2015-03-02-angular-i18n.html&title=《Angular i18n》 — Balance&source=i18n and l10nMany web applications need to support multiple languages. The pr..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.inching.org/Angular/2015-03-02-angular-i18n.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Angular i18n》 — Balance&url=http://blog.inching.org/Angular/2015-03-02-angular-i18n.html&via=http://blog.inching.org" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.inching.org/Angular/2015-03-02-angular-i18n.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/HTML5/2015-03-02-html5-storage-indexeddb.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Html5 Storage —— IndexedDB</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/Android/2015-02-06-android-decompile.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">APK 反编译</h4>
      </a>
    </div>
  
</nav>



    











</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢大爷~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.JPG" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.JPG" data-alipay="/img/alipay.JPG">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top" style="display:none">
        

        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>footer.license</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Cody Fei &copy; 2012 - 2017</span>
            <span style="display:none">
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.inching.org/Angular/2015-03-02-angular-i18n.html&title=《Angular i18n》 — Balance&pic=http://blog.inching.org/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.inching.org/Angular/2015-03-02-angular-i18n.html&title=《Angular i18n》 — Balance&source=i18n and l10nMany web applications need to support multiple languages. The pr..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.inching.org/Angular/2015-03-02-angular-i18n.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Angular i18n》 — Balance&url=http://blog.inching.org/Angular/2015-03-02-angular-i18n.html&via=http://blog.inching.org" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.inching.org/Angular/2015-03-02-angular-i18n.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACL0lEQVR42u3aS27DMAxF0ex/0+4CDDv3kWoLUVejIlEdHQ8IfvT54HWBdd/59Em6c9mSIUPGtoz0cPfPyZPv+/nz388mQ4aMcxhPh3ja8x5Gyc6U+uXMMmTIkAEOkSZ5/d+VIUOGDBJw08QuxcuQIUNGWsSS5C/F/0MtLkOGjA0ZvOv+93//ynxDhgwZWzGucJG2GnkF/BN0KhkyZIxm8ACXpmgkuewEXBkyZJzDSBttqy5hdMLxggmDDBkytmLUilXeLEvbarU9MmTImM2oDQvTsFgLvsGpZMiQMZpBitX3g9ZKU14A83GpDBkypjI6h+tczgh6gTyflSFDxlBGGnD5iJGPCvhL4YmjDBkyJjFqDa9aEbsqHQzabTJkyBjBqCVnrclDuKf2vzJkyJjE6FybqAXfdDgajAFkyJAxlJE23XhpmgbZ9AyPYVeGDBnjGLwFlpaUncFAPAyQIUPGYQzOS8cJncHDlzRRhgwZoxn8x9LmGm+3kZCKElAZMmQczFjV3eqPP7/EWBkyZBzG6CRzabjsp48yZMg4h8FLRx6gL7A6LbkPz2dlyJCxLeMKF3krtdI0vfaBQq0MGTJGMPiqBU3e7udlcDzglCFDxgjGqiPyb9OxBHqmDBkyDmDwwMevZZDj1orYoGsoQ4aMIxmE1HkFxTJVhgwZMkrhslPo8vRRhgwZ5zBIERtc0sJPRmnf2nabDBkyNmSkeVft2hZv55GrGwvSRxkyZOzB+AHhrkHP/0D7kQAAAABJRU5ErkJggg==" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="/js/main.min.js?v=1.6.17"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.6.17" async></script>










</body>
</html>
