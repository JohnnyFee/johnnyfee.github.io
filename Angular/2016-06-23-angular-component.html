<!DOCTYPE html>
<html>
<head>
    
<!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-43567748-2', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<!-- End Google Analytics -->


    

    



    <meta charset="utf-8">
    
    <meta name="google-site-verification" content="true">
    
    
    
    <title>Angular Component | Balance | 大道至简</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="angular,component,directive">
    <meta name="description" content="Understanding ComponentsIn Angular, a Component is a special kind of directive that uses a simpler configuration which is suitable for a component-based application structure.
This makes it easier to">
<meta property="og:type" content="article">
<meta property="og:title" content="Angular Component">
<meta property="og:url" content="http://blog.inching.org/Angular/2016-06-23-angular-component.html">
<meta property="og:site_name" content="Balance">
<meta property="og:description" content="Understanding ComponentsIn Angular, a Component is a special kind of directive that uses a simpler configuration which is suitable for a component-based application structure.
This makes it easier to">
<meta property="og:image" content="https://docs.angularjs.org/img/tutorial/tutorial_03.png">
<meta property="og:updated_time" content="2017-11-05T08:22:17.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Angular Component">
<meta name="twitter:description" content="Understanding ComponentsIn Angular, a Component is a special kind of directive that uses a simpler configuration which is suitable for a component-based application structure.
This makes it easier to">
<meta name="twitter:image" content="https://docs.angularjs.org/img/tutorial/tutorial_03.png">
    
        <link rel="alternate" type="application/atom+xml" title="Balance" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/style/style.css?v=1.6.17">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Cody Fei</h5>
          <a href="mailto:inchingcode@gmail.com" title="inchingcode@gmail.com" class="mail">inchingcode@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                Home
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags/android"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories/Android/"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/inchingorg" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://www.weibo.com/CodyFee" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://www.inesoi.com" target="_blank" >
                <i class="icon icon-lg icon-shopping-bag"></i>
                Shopping Bag
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Angular Component</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Angular Component</h1>
        <h5 class="subtitle">
            
                <time datetime="2016-06-22T16:00:00.000Z" itemprop="datePublished" class="page-time">
  2016-06-23
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Angular/">Angular</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Understanding-Components"><span class="post-toc-text">Understanding Components</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Creating-and-configuring-a-Component"><span class="post-toc-text">Creating and configuring a Component</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Comparison-between-Directive-definition-and-Component-definition"><span class="post-toc-text">Comparison between Directive definition and Component definition</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Component-based-application-architecture"><span class="post-toc-text">Component-based application architecture</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Example-of-a-component-tree"><span class="post-toc-text">Example of a component tree</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Components-as-route-templates"><span class="post-toc-text">Components as route templates</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Intercomponent-Communication"><span class="post-toc-text">Intercomponent Communication</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Unit-testing-Component-Controllers"><span class="post-toc-text">Unit-testing Component Controllers</span></a></li></ol>
        </nav>
    </aside>
    
<article id="post-angular-component"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Angular Component</h1>
        <div class="post-meta">
            <time class="post-time" title="2016-06-23 00:00:00" datetime="2016-06-22T16:00:00.000Z"  itemprop="datePublished">2016-06-23</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Angular/">Angular</a></li></ul>



            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h2 id="Understanding-Components"><a href="#Understanding-Components" class="headerlink" title="Understanding Components"></a>Understanding Components</h2><p>In Angular, a Component is a special kind of <a href="https://docs.angularjs.org/guide/directive" target="_blank" rel="external">directive</a> that uses a simpler configuration which is suitable for a component-based application structure.</p>
<p>This makes it easier to write an app in a way that’s similar to using Web Components or using Angular 2’s style of application architecture.</p>
<a id="more"></a>
<p>Advantages of Components:</p>
<ul>
<li>simpler configuration than plain directives</li>
<li>promote sane defaults and best practices</li>
<li>optimized for component-based architecture</li>
<li>writing component directives will make it easier to upgrade to Angular 2</li>
</ul>
<p>When not to use Components:</p>
<ul>
<li>for directives that rely on DOM manipulation, adding event listeners etc, because the compile and link functions are unavailable</li>
<li>when you need advanced directive definition options like priority, terminal, multi-element </li>
<li>when you want a directive that is triggered by an attribute or CSS class, rather than an element</li>
</ul>
<h2 id="Creating-and-configuring-a-Component"><a href="#Creating-and-configuring-a-Component" class="headerlink" title="Creating and configuring a Component"></a>Creating and configuring a Component</h2><p>Components can be registered using the <code>.component()</code> method of an Angular module (returned by <a href="https://docs.angularjs.org/guide/module" target="_blank" rel="external"><code>angular.module()</code></a>). The method takes two arguments:</p>
<ul>
<li>The name of the Component (as string).</li>
<li>The Component config object. (Note that, unlike the <code>.directive()</code> method, this method does <strong>not</strong> take a factory function.)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">angular.module(<span class="string">'heroApp'</span>, []).controller(<span class="string">'mainCtrl'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.hero = &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'Spawn'</span></div><div class="line">  &#125;;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">HeroDetailController</span>(<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">angular.module(<span class="string">'heroApp'</span>).component(<span class="string">'heroDetail'</span>, &#123;</div><div class="line">  <span class="attr">templateUrl</span>: <span class="string">'heroDetail.html'</span>,</div><div class="line">  <span class="attr">controller</span>: HeroDetailController,</div><div class="line">  <span class="attr">bindings</span>: &#123;</div><div class="line">    <span class="attr">hero</span>: <span class="string">'='</span></div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- components match only elements --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">"mainCtrl as ctrl"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">b</span>&gt;</span>Hero<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">hero-detail</span> <span class="attr">hero</span>=<span class="string">"ctrl.hero"</span>&gt;</span><span class="tag">&lt;/<span class="name">hero-detail</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>It’s also possible to add components via <a href="https://docs.angularjs.org/api/ng/provider/$compileProvider#component" target="_blank" rel="external"><code>$compileProvider</code></a> in a module’s config phase.</p>
<h2 id="Comparison-between-Directive-definition-and-Component-definition"><a href="#Comparison-between-Directive-definition-and-Component-definition" class="headerlink" title="Comparison between Directive definition and Component definition"></a>Comparison between Directive definition and Component definition</h2><table>
<thead>
<tr>
<th>&nbsp;</th>
<th>Directive</th>
<th>Component                       </th>
</tr>
</thead>
<tbody>
<tr>
<td>bindings</td>
<td>No</td>
<td>Yes (binds to controller)       </td>
</tr>
<tr>
<td>bindToController</td>
<td>Yes (default: false)</td>
<td>No (use bindings instead)       </td>
</tr>
<tr>
<td>compile function</td>
<td>Yes</td>
<td>No                              </td>
</tr>
<tr>
<td>controller</td>
<td>Yes</td>
<td>Yes (default <code>function() {}</code>)   </td>
</tr>
<tr>
<td>controllerAs</td>
<td>Yes (default: false)</td>
<td>Yes (default: <code>$ctrl</code>)          </td>
</tr>
<tr>
<td>link functions</td>
<td>Yes</td>
<td>No                              </td>
</tr>
<tr>
<td>multiElement</td>
<td>Yes</td>
<td>No                              </td>
</tr>
<tr>
<td>priority</td>
<td>Yes</td>
<td>No                              </td>
</tr>
<tr>
<td>require</td>
<td>Yes</td>
<td>Yes                             </td>
</tr>
<tr>
<td>restrict</td>
<td>Yes</td>
<td>No (restricted to elements only)</td>
</tr>
<tr>
<td>scope</td>
<td>Yes (default: false)</td>
<td>No (scope is always isolate)    </td>
</tr>
<tr>
<td>template</td>
<td>Yes</td>
<td>Yes, injectable                 </td>
</tr>
<tr>
<td>templateNamespace</td>
<td>Yes</td>
<td>No                              </td>
</tr>
<tr>
<td>templateUrl</td>
<td>Yes</td>
<td>Yes, injectable                 </td>
</tr>
<tr>
<td>terminal</td>
<td>Yes</td>
<td>No                              </td>
</tr>
<tr>
<td>transclude</td>
<td>Yes (default: false)</td>
<td>Yes (default: false)            </td>
</tr>
</tbody>
</table>
<h2 id="Component-based-application-architecture"><a href="#Component-based-application-architecture" class="headerlink" title="Component-based application architecture"></a>Component-based application architecture</h2><p>As already mentioned, the component helper makes it easier to structure your application with<br>a component-based architecture. But what makes a component beyond the options that<br>the component helper has?</p>
<ul>
<li><p><strong>Components only control their own View and Data:</strong><br>  Components should never modify any data or DOM that is out of their own scope. Normally, in Angular it is possible to modify data anywhere in the application through scope inheritance and watches. This is practical, but can also lead to problems when it is not clear which part of the application is responsible for modifying the data. That is why component directives use an isolate scope, so a whole class of scope manipulation is not possible.</p>
<p>  <img src="https://docs.angularjs.org/img/tutorial/tutorial_03.png" alt=""></p>
<p>  See more <a href="https://docs.angularjs.org/tutorial/step_03" target="_blank" rel="external">AngularJS: Tutorial: 3 - Components</a></p>
</li>
<li><p><strong>Components have a well-defined public API - Inputs and Outputs:</strong><br>  However, scope isolation only goes so far, because Angular uses two-way binding. So if you pass<br>  an object to a component like this - <code>bindings: {item: &#39;=&#39;}</code>, and modify one of its properties, the<br>  change will be reflected in the parent component. For components however, only the component that owns<br>  the data should modify it, to make it easy to reason about what data is changed, and when. For that reason,<br>  components should follow a few simple conventions:</p>
<ul>
<li><p>Inputs should be using <code>&lt;</code> and <code>@</code> bindings. The <code>&lt;</code> symbol denotes <a href="https://docs.angularjs.org/api/ng/service/$compile#-scope-" target="_blank" rel="external">one-way bindings</a> which are<br>  available since 1.5. The difference to <code>=</code> is that the bound properties in the component scope are not watched, which means<br>  if you assign a new value to the property in the component scope, it will not update the parent scope. Note however, that both parent<br>  and component scope reference the same object, so if you are changing object properties or array elements in the<br>  component, the parent will still reflect that change.<br>  The general rule should therefore be to never change an object or array property in the component scope.<br>  <code>@</code> bindings can be used when the input is a string, especially when the value of the binding doesn’t change.</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">bindings: &#123;</div><div class="line">  <span class="attr">hero</span>: <span class="string">'&lt;'</span>,</div><div class="line">  <span class="attr">comment</span>: <span class="string">'@'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>Outputs are realized with <code>&amp;</code> bindings, which function as callbacks to component events.</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">bindings: &#123;</div><div class="line">  <span class="attr">onDelete</span>: <span class="string">'&amp;'</span>,</div><div class="line">  <span class="attr">onUpdate</span>: <span class="string">'&amp;'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>Instead of manipulating Input Data, the component calls the correct Output Event with the changed data.<br>  For a deletion, that means the component doesn’t delete the <code>hero</code> itself, but sends it back to<br>  the owner component via the correct event.</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- note that we use kebab-case for bindings in the template as usual --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">editable-field</span> <span class="attr">on-update</span>=<span class="string">"$ctrl.update('location', value)"</span>&gt;</span><span class="tag">&lt;/<span class="name">editable-field</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">ng-click</span>=<span class="string">"$ctrl.onDelete(&#123;hero: $ctrl.hero&#125;)"</span>&gt;</span>Delete<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>That way, the parent component can decide what to do with the event (e.g. delete an item or update the properties)</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">ctrl.deleteHero(hero) &#123;</div><div class="line">  $http.delete(...).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> idx = ctrl.list.indexOf(hero);</div><div class="line">    <span class="keyword">if</span> (idx &gt;= <span class="number">0</span>) &#123;</div><div class="line">      ctrl.list.splice(idx, <span class="number">1</span>);</div><div class="line">    &#125;</div><div class="line">  &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><strong>Components have a well-defined lifecycle</strong><br>  Each component can implement “lifecycle hooks”. These are methods that will be called at certain points in the life<br>  of the component. The following hook methods can be implemented:</p>
<ul>
<li><code>$onInit()</code> - Called on each controller after all the controllers on an element have been constructed and<br>  had their bindings initialized (and before the pre &amp; post linking functions for the directives on<br>  this element). This is a good place to put initialization code for your controller.</li>
<li><code>$onChanges(changesObj)</code> - Called whenever one-way bindings are updated. The <code>changesObj</code> is a hash whose keys<br>  are the names of the bound properties that have changed, and the values are an object of the form<br>  <code>{ currentValue, previousValue, isFirstChange() }</code>. Use this hook to trigger updates within a component such as<br>  cloning the bound value to prevent accidental mutation of the outer value.</li>
<li><code>$onDestroy()</code> - Called on a controller when its containing scope is destroyed. Use this hook for releasing<br>  external resources, watches and event handlers.</li>
<li><code>$postLink()</code> - Called after this controller’s element and its children have been linked. Similar to the post-link<br>  function this hook can be used to set up DOM event handlers and do direct DOM manipulation.<br>  Note that child elements that contain <code>templateUrl</code> directives will not have been compiled and linked since<br>  they are waiting for their template to load asynchronously and their own compilation and linking has been<br>  suspended until that occurs.<br>  This hook can be considered analogous to the <code>ngAfterViewInit</code> and <code>ngAfterContentInit</code> hooks in Angular 2.<br>  Since the compilation process is rather different in Angular 1 there is no direct mapping and care should<br>  be taken when upgrading.</li>
</ul>
</li>
</ul>
<p>By implementing these methods, your component can hook into its lifecycle.</p>
<ul>
<li><strong>An application is a tree of components:</strong><br>  Ideally, the whole application should be a tree of components that implement clearly defined inputs<br>  and outputs, and minimize two-way data binding. That way, it’s easier to predict when data changes and what the state<br>  of a component is.</li>
</ul>
<h2 id="Example-of-a-component-tree"><a href="#Example-of-a-component-tree" class="headerlink" title="Example of a component tree"></a>Example of a component tree</h2><p>The following example expands on the simple component example and incorporates the concepts we introduced<br>above:</p>
<p>Instead of an ngController, we now have a heroList component that holds the data of<br>different heroes, and creates a heroDetail for each of them.</p>
<p>The heroDetail component now contains new functionality:</p>
<ul>
<li>a delete button that calls the bound <code>onDelete</code> function of the heroList component</li>
<li>an input to change the hero location, in the form of a reusable editableField component. Instead of manipulating the hero object itself, it sends a changeset upwards to the heroDetail, which sends it upwards to the heroList component, which updates the original data.</li>
</ul>
<p>The following example expands on the simple component example and incorporates the concepts we introduced above:</p>
<p>Instead of an ngController, we now have a heroList component that holds the data of different heroes, and creates a heroDetail for each of them.</p>
<p>The heroDetail component now contains new functionality:</p>
<ul>
<li>a delete button that calls the bound <code>onDelete</code> function of the heroList component</li>
<li>an input to change the hero location, in the form of a reusable editableField component. Instead of manipulating the hero object itself, it sends a changeset upwards to the heroDetail, which sends it upwards to the heroList component, which updates the original data.</li>
</ul>
<iframe style="width: 100%; height: 600px" src="https://embed.plnkr.co/23OVhJ7YuiBtCugD6CLl/" frameborder="0" allowfullscren="allowfullscren"></iframe>

<h2 id="Components-as-route-templates"><a href="#Components-as-route-templates" class="headerlink" title="Components as route templates"></a>Components as route templates</h2><p>Components are also useful as route templates (e.g. when using <a href="https://docs.angularjs.org/api/ngRoute" target="_blank" rel="external">ngRoute</a>). In a component-based<br>application, every view is a component:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myMod = angular.module(<span class="string">'myMod'</span>, [<span class="string">'ngRoute'</span>]);</div><div class="line">myMod.component(<span class="string">'home'</span>, &#123;</div><div class="line">  <span class="attr">template</span>: <span class="string">'&lt;h1&gt;Home&lt;/h1&gt;&lt;p&gt;Hello, &#123;&#123; $ctrl.user.name &#125;&#125; !&lt;/p&gt;'</span>,</div><div class="line">  <span class="attr">controller</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.user = &#123;<span class="attr">name</span>: <span class="string">'world'</span>&#125;;</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line">myMod.config(<span class="function"><span class="keyword">function</span>(<span class="params">$routeProvider</span>) </span>&#123;</div><div class="line">  $routeProvider.when(<span class="string">'/'</span>, &#123;</div><div class="line">    <span class="attr">template</span>: <span class="string">'&lt;home&gt;&lt;/home&gt;'</span></div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>When using <a href="https://docs.angularjs.org/api/ngRoute/provider/$routeProvider" target="_blank" rel="external">$routeProvider</a>, you can often avoid some<br>boilerplate, by passing the resolved route dependencies directly to the component. Since 1.5,<br>ngRoute automatically assigns the resolves to the route scope property <code>$resolve</code> (you can also<br>configure the property name via <code>resolveAs</code>). When using components, you can take advantage of this and pass resolves<br>directly into your component without creating an extra route controller:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myMod = angular.module(<span class="string">'myMod'</span>, [<span class="string">'ngRoute'</span>]);</div><div class="line">myMod.component(<span class="string">'home'</span>, &#123;</div><div class="line">  <span class="attr">template</span>: <span class="string">'&lt;h1&gt;Home&lt;/h1&gt;&lt;p&gt;Hello, &#123;&#123; $ctrl.user.name &#125;&#125; !&lt;/p&gt;'</span>,</div><div class="line">  <span class="attr">bindings</span>: &#123;</div><div class="line">    <span class="attr">user</span>: <span class="string">'&lt;'</span></div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line">myMod.config(<span class="function"><span class="keyword">function</span>(<span class="params">$routeProvider</span>) </span>&#123;</div><div class="line">  $routeProvider.when(<span class="string">'/'</span>, &#123;</div><div class="line">    <span class="attr">template</span>: <span class="string">'&lt;home user="$resolve.user"&gt;&lt;/home&gt;'</span>,</div><div class="line">    <span class="attr">resolve</span>: &#123;</div><div class="line">      <span class="attr">user</span>: <span class="function"><span class="keyword">function</span>(<span class="params">$http</span>) </span>&#123; <span class="keyword">return</span> $http.get(<span class="string">'...'</span>); &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="Intercomponent-Communication"><a href="#Intercomponent-Communication" class="headerlink" title="Intercomponent Communication"></a>Intercomponent Communication</h2><p>Directives can require the controllers of other directives to enable communication<br>between each other. This can be achieved in a component by providing an<br>object mapping for the <code>require</code> property. The object keys specify the property names under which<br>the required controllers (object values) will be bound to the requiring component’s controller.</p>
<p>Note that the required controllers will not be available during the instantiation of the controller,<br>but they are guaranteed to be available just before the <code>$onInit</code> method is executed!</p>
<p>Here is a tab pane example built from components:</p>
<iframe style="width: 100%; height: 600px" src="https://embed.plnkr.co/08gW1UJTnDyTFpyLjXki/" frameborder="0" allowfullscren="allowfullscren"></iframe>

<h2 id="Unit-testing-Component-Controllers"><a href="#Unit-testing-Component-Controllers" class="headerlink" title="Unit-testing Component Controllers"></a>Unit-testing Component Controllers</h2><p>The easiest way to unit-test a component controller is by using the <a href="https://docs.angularjs.org/api/ngMock/service/$componentController" target="_blank" rel="external">$componentController</a><br>that is included in <a href="https://docs.angularjs.org/api/ngMock" target="_blank" rel="external"><code>ngMock</code></a>. The advantage of this method is that you do not have<br>to create any DOM elements. The following example shows how to do this for the <code>heroDetail</code> component<br>from above.</p>
<p>The examples use the <a href="http://jasmine.github.io/" target="_blank" rel="external">Jasmine</a> testing framework.</p>
<p><strong>Controller Test:</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">describe(<span class="string">'component: heroDetail'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> component, scope, hero, $componentController;</div><div class="line"></div><div class="line">  beforeEach(<span class="built_in">module</span>(<span class="string">'heroApp'</span>));</div><div class="line"></div><div class="line">  beforeEach(inject(<span class="function"><span class="keyword">function</span>(<span class="params">$rootScope, _$componentController_</span>) </span>&#123;</div><div class="line">    scope = $rootScope.$<span class="keyword">new</span>();</div><div class="line">    $componentController = _$componentController_;</div><div class="line">    hero = &#123;<span class="attr">name</span>: <span class="string">'Wolverine'</span>&#125;;</div><div class="line">  &#125;));</div><div class="line"></div><div class="line">  it(<span class="string">'should assign the name bindings to the hero object'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// Here we are passing actual bindings to the component</span></div><div class="line">    component = $componentController(<span class="string">'heroDetail'</span>,</div><div class="line">      <span class="literal">null</span>,</div><div class="line">      &#123;<span class="attr">hero</span>: hero&#125;</div><div class="line">    );</div><div class="line">    expect(component.hero.name).toBe(<span class="string">'Wolverine'</span>);</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  it(<span class="string">'should call the onDelete binding when a hero is deleted'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> deleteSpy = jasmine.createSpy(<span class="string">'deleteSpy'</span>);</div><div class="line">    component = $componentController(<span class="string">'heroDetail'</span>,</div><div class="line">      <span class="literal">null</span>,</div><div class="line">      &#123;<span class="attr">hero</span>: hero, <span class="attr">onDelete</span>: deleteSpy&#125;</div><div class="line">    );</div><div class="line"></div><div class="line">    component.onDelete(&#123;<span class="attr">hero</span>: component.hero&#125;);</div><div class="line">    expect(deleteSpy).toHaveBeenCalledWith(&#123;<span class="attr">hero</span>: component.hero&#125;);</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2017-11-05T08:22:17.000Z" itemprop="dateUpdated">2017-11-05 16:22:17</time>
</span><br>


        
        这里可以写作者留言，标签和 hexo 中所有变量及辅助函数等均可调用，示例：<a href="/Angular/2016-06-23-angular-component.html" target="_blank" rel="external">http://blog.inching.org/Angular/2016-06-23-angular-component.html</a>
        
    </div>
    <footer>
        <a href="http://blog.inching.org">
            <img src="/img/avatar.png" alt="Cody Fei">
            Cody Fei
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/angular/">angular</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/component/">component</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/directive/">directive</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.inching.org/Angular/2016-06-23-angular-component.html&title=《Angular Component》 — Balance&pic=http://blog.inching.org/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.inching.org/Angular/2016-06-23-angular-component.html&title=《Angular Component》 — Balance&source=Understanding ComponentsIn Angular, a Component is a special kind of directiv..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.inching.org/Angular/2016-06-23-angular-component.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Angular Component》 — Balance&url=http://blog.inching.org/Angular/2016-06-23-angular-component.html&via=http://blog.inching.org" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.inching.org/Angular/2016-06-23-angular-component.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/React/2016-06-28-react-tutorial.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">React Native Tutorial</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/Angular/2016-06-22-angular-expression.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Angular Expression</h4>
      </a>
    </div>
  
</nav>



    











</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢大爷~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.JPG" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.JPG" data-alipay="/img/alipay.JPG">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top" style="display:none">
        

        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>footer.license</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Cody Fei &copy; 2012 - 2017</span>
            <span style="display:none">
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.inching.org/Angular/2016-06-23-angular-component.html&title=《Angular Component》 — Balance&pic=http://blog.inching.org/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.inching.org/Angular/2016-06-23-angular-component.html&title=《Angular Component》 — Balance&source=Understanding ComponentsIn Angular, a Component is a special kind of directiv..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.inching.org/Angular/2016-06-23-angular-component.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Angular Component》 — Balance&url=http://blog.inching.org/Angular/2016-06-23-angular-component.html&via=http://blog.inching.org" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.inching.org/Angular/2016-06-23-angular-component.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACtElEQVR42u3awa7aQAwFUP7/p9ttqzZwr53JY3GyQiIMc4I0NrZfr/j69cfVvnt1/7+vr95t168vPDw8vMXWr5a72sT7zSWfTa6EffkI8PDw8I7x8uP76ouLrwy+KwkY79fBw8PD+2ZeHhLa1d7vAQ8PD+/7efmiSXKc34OHh4f3nbx2Q7NCRh4G8uB0W60FDw8Pb14ZeLXp9fOvj/T38PDw8NZd9c1BPysrzMLP5W7x8PDwDvA2aXG+9X3sylPw/9yPh4eH9wgvKfJuBqpmwSMn4eHh4T3D2xRV9wFmk4LfFlXw8PDwAl5ycLeDBZtQ0Q4ofPhJ8PDw8H6IlweS9pHNxhSKsTA8PDy8w7y2837vyFS+WrEmHh4e3gFePgrQlnfblVtwsR88PDy8W3ltIpsPQiXsvBiRFyzw8PDwnuTlzfh2cKodzGoHGoqhATw8PLybeLNrFiryRzYr/v71Gg8PD+8wr81IkyN+NijQtsQ+FHDx8PDwDvDaOc/kQE/KE+3AQV3IwMPDwzvGy7++LTQUo6XlnVFpAw8PD+8Abzbq1HadZsXiTUkXDw8P7xxvdqy3B307oDCbB4h+MTw8PLw1r21itYB8dGBWColCFx4eHt4BXtusyptYszR6P6bwIQbi4eHhrXltg3/Gy0ey2pGCD5/Fw8PDO8a7txQ7S8rbQkOyMh4eHt5pXt5eSkoAbRhI1m8bcnh4eHinebOEuN1c/ihnrTg8PDy8c7z9Ru8q17aNtOhTeHh4eAd4m7Gq/BBP2v9tqGjLJXh4eHj38jatqX15Yv/uh8eHh4eHd4yXt7VmiXWSEO+vqNaCh4eH9wW8vAyRp+azUTA8PDy87+S1hYnNUNdsD3h4eHjP8NqDeJZAt+MI7Y9xGRjw8PDwbuUN/+SXhddZgWM2WICHh4d3jPcbBFBk4dyjtxgAAAAASUVORK5CYII=" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="/js/main.min.js?v=1.6.17"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.6.17" async></script>










</body>
</html>
