layout: post
title: "Windows Hosts 文件"
description: ""
category: OS
tags: [os, windows, hosts]
---

## 作用

- 加快域名解析

    对于要经常访问的网站，我们可以通过在Hosts中配置域名和IP的映射关系，这样当我们输入域名计算机就能很快解析出IP，而不用请求网络上的DNS服务器。

- 方便局域网用户

    在很多单位的局域网中，会有服务器提供给用户使用。但由于局域网中一般很少架设DNS服务器，访问这些服务要输入难记的IP地址，对不少人来说相当麻烦。现在可以分别给这些服务器取个容易记住的名字，然后在Hosts中建立IP映射，这样以后访问的时候我们输入这个服务器的名字就行了。

<!-- more -->

- 屏蔽网站

    现在有很多网站不经过用户同意就将各种各样的插件安装到你的计算机中，有些说不定就是木马或病毒。对于这些网站我们可以利用Hosts把该网站的域名映射到错误的IP或自己计算机的IP，这样就不用访问了。比如不想访问http://www.163.com，那我们在Hosts写上以下内容：

    如:

        127.0.0.1 http://www.163.com#屏蔽的网站
        0.0.0.0 http://www.163.com#屏蔽的网站

    这样计算机解析域名就解析到本机或错误的IP，达到了屏蔽的目的。

- 顺利连接系统

    对于Lotus的服务器和一些数据库服务器，在访问时如果直接输入IP地址那是不能访问的，只能输入服务器名才能访问。那么我们配置好Hosts文件，这样输入服务器名就能顺利连接了。

    最后要指出的是，Hosts文件配置的映射是静态的，如果网络上的计算机更改了请及时更新IP地址，否则将不能访问。

## 工作原理

网络上访问网站，要首先通过DNS服务器把网络域名 <http://www.163.com> 解析成 61.XXX.XXX.XXX 的IP地址后，我们的计算机才能访问。要是对于每个域名请求我们都要等待域名服务器解析后返回IP信息，这样访问网络的效率就会降低，而Hosts文件就能提高解析效率。根据Windows系统规定，在进行DNS请求以前，Windows系统会先检查自己的Hosts文件中是否有这个地址映射关系，如果有则调用这个IP地址映射，如果没有再向已知的DNS服务器提出域名解析。也就是说Hosts的请求级别比DNS高。

## 实际工作中需要的更改

在实际工作中，有时候客户提供给我们服务器的名字与程序中的服务器名字不一样。这样我们就可以通过Host文件来配置，这样可以避免对程序的修改。配置方法是，在host文件中建立一个server（程序中使用的服务器名）与客户提供服务器的ip地址的映射。这样就可以在不修改程序的前提下顺利访问服务器。而客户的服务器名仍然可以通过DNS服务器连接到服务器。
