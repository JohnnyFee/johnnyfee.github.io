<!DOCTYPE html>
<html>
<head>
    
<!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-43567748-2', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<!-- End Google Analytics -->


    

    



    <meta charset="utf-8">
    
    <meta name="google-site-verification" content="true">
    
    
    
    <title>Java Exception | Balance | 大道至简</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="">
    <meta name="description" content="What is an Exception?Exceptions are events that occurs when executing the programs that will disrupt or terminate the normal flow of the program. In Java, an exception is an object that contains the t">
<meta property="og:type" content="article">
<meta property="og:title" content="Java Exception">
<meta property="og:url" content="http://blog.inching.org/Java/2016-11-30-java-exception.html">
<meta property="og:site_name" content="Balance">
<meta property="og:description" content="What is an Exception?Exceptions are events that occurs when executing the programs that will disrupt or terminate the normal flow of the program. In Java, an exception is an object that contains the t">
<meta property="og:image" content="http://howtodoinjava.files.wordpress.com/2013/04/exceptionhierarchy3.png">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/44770-c9d31b45bfab862c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:updated_time" content="2017-11-05T08:22:17.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Java Exception">
<meta name="twitter:description" content="What is an Exception?Exceptions are events that occurs when executing the programs that will disrupt or terminate the normal flow of the program. In Java, an exception is an object that contains the t">
<meta name="twitter:image" content="http://howtodoinjava.files.wordpress.com/2013/04/exceptionhierarchy3.png">
    
        <link rel="alternate" type="application/atom+xml" title="Balance" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/style/style.css?v=1.6.17">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Cody Fei</h5>
          <a href="mailto:inchingcode@gmail.com" title="inchingcode@gmail.com" class="mail">inchingcode@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                Home
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags/android"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories/Android/"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/inchingorg" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://www.weibo.com/CodyFee" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://www.inesoi.com" target="_blank" >
                <i class="icon icon-lg icon-shopping-bag"></i>
                Shopping Bag
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Java Exception</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Java Exception</h1>
        <h5 class="subtitle">
            
                <time datetime="2016-11-30T06:22:00.000Z" itemprop="datePublished" class="page-time">
  2016-11-30
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Java/">Java</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#What-is-an-Exception"><span class="post-toc-text">What is an Exception?</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Exception-Hierarchy"><span class="post-toc-text">Exception Hierarchy</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#How-to-Handle-Exceptions"><span class="post-toc-text">How to Handle Exceptions?</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#try-and-catch"><span class="post-toc-text">try and catch</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#finally"><span class="post-toc-text">finally</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#throw"><span class="post-toc-text">throw</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#throws"><span class="post-toc-text">throws</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#User-defined-custom-exceptions"><span class="post-toc-text">User defined custom exceptions</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Improvements-in-Java-7"><span class="post-toc-text">Improvements in Java 7</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Multiple-Exceptions-in-Catch-Block"><span class="post-toc-text">Multiple Exceptions in Catch Block</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Try-with-Resources-statement"><span class="post-toc-text">Try with Resources statement</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Suppressed-Exceptions-Handling-in-Java-7"><span class="post-toc-text">Suppressed Exceptions Handling in Java 7</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Best-Practice"><span class="post-toc-text">Best Practice</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#不要在-catch-语句块中压制-吞噬异常"><span class="post-toc-text">不要在 catch 语句块中压制/吞噬异常</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#要在方法定义分句中定义具体的异常"><span class="post-toc-text">要在方法定义分句中定义具体的异常</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#捕获具体的异常"><span class="post-toc-text">捕获具体的异常</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#记得在finally语句块中释放资源"><span class="post-toc-text">记得在finally语句块中释放资源</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用标准异常"><span class="post-toc-text">使用标准异常</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#正确得包装异常类型"><span class="post-toc-text">正确得包装异常类型</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#避免在finally语句块中抛出异常"><span class="post-toc-text">避免在finally语句块中抛出异常</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#不要使用异常控制程序的流程"><span class="post-toc-text">不要使用异常控制程序的流程</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#不要捕获-Throwable-类"><span class="post-toc-text">不要捕获 Throwable 类</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#为异常记录合适的文档"><span class="post-toc-text">为异常记录合适的文档</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Either-log-the-exception-or-throw-it-but-never-do-the-both"><span class="post-toc-text">Either log the exception or throw it but never do the both</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Always-catch-only-those-exceptions-that-you-can-actually-handle"><span class="post-toc-text">Always catch only those exceptions that you can actually handle</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Don’t-use-printStackTrace-statement-or-similar-methods"><span class="post-toc-text">Don’t use printStackTrace() statement or similar methods</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Use-finally-blocks-instead-of-catch-blocks-if-you-are-not-going-to-handle-exception"><span class="post-toc-text">Use finally blocks instead of catch blocks if you are not going to handle exception</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Remember-“Throw-early-catch-late”-principle"><span class="post-toc-text">Remember “Throw early catch late” principle</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Validate-user-input-to-catch-adverse-conditions-very-early-in-request-processing"><span class="post-toc-text">Validate user input to catch adverse conditions very early in request processing</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Always-terminate-the-thread-which-it-is-interrupted"><span class="post-toc-text">Always terminate the thread which it is interrupted</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#See"><span class="post-toc-text">See</span></a></li></ol>
        </nav>
    </aside>
    
<article id="post-java-exception"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Java Exception</h1>
        <div class="post-meta">
            <time class="post-time" title="2016-11-30 14:22:00" datetime="2016-11-30T06:22:00.000Z"  itemprop="datePublished">2016-11-30</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Java/">Java</a></li></ul>



            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h2 id="What-is-an-Exception"><a href="#What-is-an-Exception" class="headerlink" title="What is an Exception?"></a>What is an Exception?</h2><p>Exceptions are events that occurs when executing the programs that will disrupt or terminate the normal flow of the program. In Java, an exception is an object that contains the type of the exception and details of the root cause for that exception.</p>
<ol>
<li>The exception can be JDK library exception (built-in with JDK API) or user defined custom exception.</li>
<li>In general practice, we can use the <code>printStackTrace()</code> for printing the complete details of the exception. This method will be print the origin of the exception and path of the exception propagation.</li>
<li>The exceptions can be thrown because of programmatic errors or environment issues.</li>
</ol>
<h2 id="Exception-Hierarchy"><a href="#Exception-Hierarchy" class="headerlink" title="Exception Hierarchy"></a>Exception Hierarchy</h2><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://howtodoinjava.files.wordpress.com/2013/04/exceptionhierarchy3.png" alt="Exception Hierarchy in java" title="Exception">
                </div>
                <div class="image-caption">Exception</div>
            </figure>
<ul>
<li><p><strong>Checked exceptions</strong> are exceptions that must be declared in the throws clause of a method. They extend Exception and are intended to be an “in your face” type of exceptions. Java wants you to handle them because they somehow are dependent on external factors outside your program. A checked exception indicates an expected problem that can occur during normal system operation. Mostly these exception happen when you try to use external systems over network or in file system. Mostly, the correct response to a checked exception should be to try again later, or to prompt the user to modify his input.</p>
</li>
<li><p><strong>Unchecked exceptions</strong> are exceptions that do not need to be declared in a throws clause. JVM simply doesn’t force you to handle them as they are mostly generated at runtime due to programmatic errors. They extend RuntimeException. The most common example is a NullPointerException [Quite scary.. Isn’t it?]. An unchecked exception probably shouldn’t be retried, and the correct action should be usually to do nothing, and let it come out of your method and through the execution stack. At a high level of execution, this type of exceptions should be logged.</p>
</li>
<li><p><strong>Errors</strong> are serious runtime environment problems that are almost certainly not recoverable. Some examples are OutOfMemoryError, LinkageError, and StackOverflowError. They generally crash you program or part of program. Only a good logging practice will help you in determining the exact causes of errors.</p>
</li>
</ul>
<h2 id="How-to-Handle-Exceptions"><a href="#How-to-Handle-Exceptions" class="headerlink" title="How to Handle Exceptions?"></a>How to Handle Exceptions?</h2><p>Java provides keywords <code>try</code>,<code>catch</code>,<code>finally</code>,<code>throw</code> and <code>throws</code> for handling the exceptions. We will go through each one in detail and how to use them in your Java program.</p>
<h3 id="try-and-catch"><a href="#try-and-catch" class="headerlink" title="try and catch"></a>try and catch</h3><p>The try and catch block is used for writing the code that might throw an exception. In simple words, put the code that would throw exceptions inside the try and catch block. </p>
<p>Every try block must be followed by a catch or finally block. It is perfectly valid for a try block to ignore catch and have only a finally block. </p>
<p>A try block may have more than one catch or finally block.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span></span>&#123;</div><div class="line">  <span class="keyword">try</span>&#123;</div><div class="line">  	<span class="comment">//statements here</span></div><div class="line">  &#125;<span class="keyword">catch</span> (Exception e)&#123;</div><div class="line">  	e.printStackTrace();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="finally"><a href="#finally" class="headerlink" title="finally"></a>finally</h3><p>Finally blocks are executed always even there is exception thrown by the applications. It is good practice to put the code which must be executed for cleaning up the resources, etc. For example : If you want to close the database connection or close the file operations, finally block is the right place to write that code.</p>
<p>Finally block appears after the try or catch block. <strong>The syntax for the finally block looks like this:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span>&#123;</div><div class="line">   <span class="comment">//Protected code</span></div><div class="line">&#125;<span class="keyword">catch</span>(Exception e1)&#123;</div><div class="line">   <span class="comment">//Catch block</span></div><div class="line">&#125;<span class="keyword">catch</span>(Exception e2)&#123;</div><div class="line">   <span class="comment">//Catch block</span></div><div class="line">&#125;<span class="keyword">catch</span>(Exception e3)&#123;</div><div class="line">   <span class="comment">//Catch block</span></div><div class="line">&#125;<span class="keyword">finally</span>&#123;</div><div class="line">   <span class="comment">//The finally block always executes.</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="throw"><a href="#throw" class="headerlink" title="throw"></a>throw</h3><p><code>throw</code> is used for invoking the exception explicitly. When throw statement is encountered in your program, the next statement is not executed. The control is immediatlely transferred to catch block to see if the thrown exception is handled there.</p>
<p>If none of the catch block is handling the exception, the thrown exception will be shown to the user. We can use <code>throw</code> keyword for throwing new exception or re-throwing the exception caught in the catch block.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExceptionExample</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			<span class="keyword">new</span> ExceptionExample().method2();</div><div class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">			System.out.println(<span class="string">"Exception handled in this method : "</span></div><div class="line">					+ e.getMessage());</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span></span>&#123;</div><div class="line">		File file = <span class="keyword">new</span> File(<span class="string">"wrongfile.txt"</span>);</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			FileInputStream fin = <span class="keyword">new</span> FileInputStream(file);</div><div class="line">			System.out.println(fin.read());</div><div class="line">		&#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</div><div class="line">			<span class="keyword">throw</span> e;</div><div class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">			<span class="keyword">throw</span> e;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method2</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">		method1();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>In the above example exceptions are re-thrown from the catch block and handled in another method. </p>
<h3 id="throws"><a href="#throws" class="headerlink" title="throws"></a>throws</h3><p><code>throws</code> is used for postponing the exception handling and can be used as the alternative for try and catch block. Throws is declared at the end of method signature.If the method might throw multiple exceptions, all the exception can be declared in the method signature with coma separated.  </p>
<p>Suppose, one method is declaring the <code>throws</code> clause in the method signature, then calling method must handle those exceptions.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method2</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">	method1();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Using the throws clause is that we are just avoiding the try and catch but the actual handling is propagated to caller method. If you declare an exception in the throws clause, then the caller method muse handle the exception. Otherwise code will not compile.</p>
<h2 id="User-defined-custom-exceptions"><a href="#User-defined-custom-exceptions" class="headerlink" title="User defined custom exceptions"></a>User defined custom exceptions</h2><p>Custom exceptions are the exceptions that are application specific exceptions. These exceptions are not part of the Java’s built-in <strong>exception hierarchy</strong>. If you are working on a Java application, there would be a requirement to write your own custom exceptions to handle the application specific errors which will be more convenient for the application to understand and interpret the messages to the users in-case of any error.</p>
<p>Note that if you want to write checked exception, please extend your exception class with <code>java.lang.Exception</code> or if you want to write runtime exception, then please extend your exception class with <code>java.lang.RuntimeException</code>.</p>
<p>I have written a very simple custom exception that would explain you the real purpose for writing our own exception. Let’s look at the below code:</p>
<p>Anytime when user feels that he wants to use its own application specific exception for some reasons, he can create a new class extending appropriate super class (mostly its Exception.java) and start using it in appropriate places. These user defined exceptions can be used in two ways:</p>
<p><strong>1)</strong> Either directly throw the custom exception when something goes wrong in application</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">throw new DaoObjectNotFoundException(&quot;Couldn&apos;t find dao with id &quot; + id);</div></pre></td></tr></table></figure>
<p><strong>2)</strong> Or wrap the original exception inside custom exception and throw it</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">catch (NoSuchMethodException e) &#123;</div><div class="line">  throw new DaoObjectNotFoundException(&quot;Couldn&apos;t find dao with id &quot; + id, e);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Wrapping an exception can provide extra information to the user by adding your own message/ context information, while still preserving the stack trace and message of the original exception. It also allows you to hide the implementation details of your code, which is the most important reason to wrap exceptions.</p>
<p>Now lets start exploring the best practices followed for exception handling industry wise.</p>
<h2 id="Improvements-in-Java-7"><a href="#Improvements-in-Java-7" class="headerlink" title="Improvements in Java 7"></a>Improvements in Java 7</h2><h3 id="Multiple-Exceptions-in-Catch-Block"><a href="#Multiple-Exceptions-in-Catch-Block" class="headerlink" title="Multiple Exceptions in Catch Block"></a>Multiple Exceptions in Catch Block</h3><p>There are lot of new features introduces as part of the <a href="http://www.javabeat.net/new-features-in-java-7-0-part-1/" target="_blank" rel="external">Java 7 release</a> (<a href="http://www.javabeat.net/whats-new-in-java-7-features-as-part-of-project-coin/" target="_blank" rel="external">some more</a>). One of them is the catching multiple exceptions in the single catch block. Prior to <a href="http://www.javabeat.net/java-7/" target="_blank" rel="external">Java 7</a>, a catch block can catch only one exception at a time. With the Java 7 release, developers can add multiple exceptions using the “|” symbol.</p>
<p><strong>Let’s look at a simple example:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">	File file = <span class="keyword">new</span> File(<span class="string">"wrongfile.txt"</span>);</div><div class="line">	<span class="keyword">try</span> &#123;</div><div class="line">		FileInputStream fin = <span class="keyword">new</span> FileInputStream(file);</div><div class="line">		System.out.println(fin.read());</div><div class="line">	&#125; <span class="keyword">catch</span> (IOException | NullPointerException  e) &#123;</div><div class="line">		<span class="keyword">throw</span> e;</div><div class="line">	&#125; </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ol>
<li>But, you can not declare the same exception hierarchy in the same catch block. For example, <code>IOException</code> and <code>FileNotFoundException</code> can not be in the same catch block since both are of the same type. You would get the error message something like : <code>The exception FileNotFoundException is already caught by alternative exception IOException</code>.</li>
<li>Another point is that when you handle more than one exception in single catch block, the exception variable used in the catch block is implicitly <code>final</code>. You can not assign any value to the variable <code>e</code>.</li>
</ol>
<h3 id="Try-with-Resources-statement"><a href="#Try-with-Resources-statement" class="headerlink" title="Try with Resources statement"></a><strong>Try with Resources statement</strong></h3><p>Another improvement in Java 7 is introduction of try-with-resource statement for auto-closing the resource instances. A resource is an object, that must be closed after it finished the operation. Any object that implements the class <code>java.lang.AutoCloseable</code> or <code>java.io.Closeable</code> can be used as a resource.</p>
<p>This classes will override the method <code>close</code> that will be invoked automatically at the time of closing the operation. Prior to java 7, this method will be invoked in the <code>finally</code> block. But, if there is any exception in the finally block, that also has to be handle. This handling become much easier in Java 7.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span> ( Resource myResource2 = <span class="keyword">new</span> Resource(<span class="string">"TRY-WITH-RESOURCE"</span>))&#123;</div><div class="line">  myResource2.useResource();</div><div class="line">&#125;<span class="keyword">catch</span> ( SomeException | IOException ex)&#123;</div><div class="line">  ex.printStackTrace();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>If you want to read more about this feature, please our previous tutorial on <a href="http://try%20%28%20resource%20myresource2%20%3D%20new%20resource%28/" target="_blank" rel="external">try-with-resource block</a> or <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/language/try-with-resources.html" target="_blank" rel="external">official documentation</a>.</p>
<h3 id="Suppressed-Exceptions-Handling-in-Java-7"><a href="#Suppressed-Exceptions-Handling-in-Java-7" class="headerlink" title="Suppressed Exceptions Handling in Java 7"></a>Suppressed Exceptions Handling in Java 7</h3><p>Another nice feature introduced in the Java 7 release is the handling of suppressed exception while using the try-with-resource block. Prior to java 7, second exception thrown while closing the resource was suppressed and not shown to the user.</p>
<p>With the improvements, lot of code has been reduced and Java itself handles the suppressed exception. Here is the more detailed tutorial on <a href="http://www.javabeat.net/java-suppressed-exceptions/" target="_blank" rel="external">suppressed exceptions used in Java 7 with multiple scenarios</a>.</p>
<h2 id="Best-Practice"><a href="#Best-Practice" class="headerlink" title="Best Practice"></a>Best Practice</h2><h3 id="不要在-catch-语句块中压制-吞噬异常"><a href="#不要在-catch-语句块中压制-吞噬异常" class="headerlink" title="不要在 catch 语句块中压制/吞噬异常"></a>不要在 catch 语句块中压制/吞噬异常</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExceptionExample</span> </span>&#123;</div><div class="line"> <span class="function"><span class="keyword">public</span> FileInputStream <span class="title">testMethod1</span><span class="params">()</span></span>&#123;</div><div class="line">     File file = <span class="keyword">new</span> File(<span class="string">"test.txt"</span>);</div><div class="line">     FileInputStream fileInputStream = <span class="keyword">null</span>;</div><div class="line">     <span class="keyword">try</span>&#123;</div><div class="line">         fileInputStream = <span class="keyword">new</span> FileInputStream(file);</div><div class="line">         fileInputStream.read();</div><div class="line">     &#125;<span class="keyword">catch</span> (IOException e)&#123;            </div><div class="line">         <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">     &#125;</div><div class="line">     <span class="keyword">return</span> fileInputStream;</div><div class="line"> &#125;</div><div class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">     ExceptionExample instance1 = <span class="keyword">new</span> ExceptionExample();</div><div class="line">     instance1.testMethod1();</div><div class="line"> &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在异常处理时进行异常压制是非常不好的编程习惯，上面的例子中，无论抛出什么异常都会被忽略，以至没有留下任何问题线索。如果在这一层次不知道如何处理异常，最好将异常重新抛出，由上层决定如何处理异常。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExceptionExample</span> </span>&#123;</div><div class="line"> <span class="function"><span class="keyword">public</span> FileInputStream <span class="title">testMethod1</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>&#123;</div><div class="line">     File file = <span class="keyword">new</span> File(<span class="string">"test.txt"</span>);</div><div class="line">     FileInputStream fileInputStream = <span class="keyword">null</span>;</div><div class="line">     <span class="keyword">try</span>&#123;</div><div class="line">         fileInputStream = <span class="keyword">new</span> FileInputStream(file);</div><div class="line">         fileInputStream.read();</div><div class="line">     &#125;<span class="keyword">catch</span> (IOException e)&#123;            </div><div class="line">         <span class="keyword">throw</span> e;</div><div class="line">     &#125;</div><div class="line">     <span class="keyword">return</span> fileInputStream;</div><div class="line"> &#125;</div><div class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException</span>&#123;</div><div class="line">     ExceptionExample instance1 = <span class="keyword">new</span> ExceptionExample();</div><div class="line">     instance1.testMethod1();</div><div class="line"> &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="要在方法定义分句中定义具体的异常"><a href="#要在方法定义分句中定义具体的异常" class="headerlink" title="要在方法定义分句中定义具体的异常"></a>要在方法定义分句中定义具体的异常</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> FileInputStream <span class="title">testMethod1</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span></div></pre></td></tr></table></figure>
<p>按照这种写法，表示该方法会抛出所有受检查异常，这不是一个良好的编程习惯。在这种情况下，我们最好抛出足够具体的异常，以便调用者进行合适的捕获和处理，例如</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> FileInputStream <span class="title">testMethod1</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span></div></pre></td></tr></table></figure>
<p>Relevancy is important to keep application clean. A method which tries to read a file; if throws NullPointerException then it will not give any relevant information to user. Instead it will be better if such exception is wrapped inside custom exception e.g. NoSuchFileFoundException then it will be more useful for users of that method.</p>
<h3 id="捕获具体的异常"><a href="#捕获具体的异常" class="headerlink" title="捕获具体的异常"></a>捕获具体的异常</h3><p>在调用其他模块时，最好捕获由该模块抛出的具体的异常。如果某个被调用模块抛出了多个异常，那么只捕获这些异常的父类是不好的编程习惯。  </p>
<p>例如，如果一个模块抛出 <em>FileNotFoundException</em> 和 <em>IOException</em>，那么调用这个模块的代码最好写两个 <code>catch</code> 语句块分别捕获这两个异常，而不要只写一个捕获 <code>Exception</code> 的 <code>catch</code> 语句块。  </p>
<p>正确的写法如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">    <span class="comment">//some statements</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span>(FileNotFoundException e)&#123;</div><div class="line">    <span class="comment">//handle here</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span>(IOException e)&#123;</div><div class="line">    <span class="comment">//handle here</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>你最好不要这么写：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">    <span class="comment">//some statements</span></div><div class="line">&#125;<span class="keyword">catch</span>(Exception e)&#123;</div><div class="line">    <span class="comment">//handle here</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="记得在finally语句块中释放资源"><a href="#记得在finally语句块中释放资源" class="headerlink" title="记得在finally语句块中释放资源"></a>记得在finally语句块中释放资源</h3><p>If you are using resources like database connections or network connections, make sure you clean them up. If the API you are invoking uses only unchecked exceptions, you should still clean up resources after use, with try – finally blocks. Inside try block access the resource and inside finally close the resource. Even if any exception occur in accessing the resource, then also resource will be closed gracefully.</p>
<p>为了避免这种情况发生，可以使用Java 7 的语句</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span>(open the resources) &#123;</div><div class="line">  deal with resources</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>，如果你还是习惯这种老式写法，则可以按照如下方式写：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">finally</span> &#123;</div><div class="line">     <span class="keyword">try</span> &#123;</div><div class="line">        </div><div class="line">     &#125; <span class="keyword">catch</span> (SQLException sqlee) &#123;</div><div class="line">          <span class="keyword">if</span> (con != <span class="keyword">null</span>) &#123;</div><div class="line">             con.close();</div><div class="line">         &#125;</div><div class="line">         <span class="keyword">if</span> (stat != <span class="keyword">null</span>) &#123;</div><div class="line">             stat.close();</div><div class="line">         &#125;</div><div class="line">     &#125;</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<ol>
<li>异常会影响性能  </li>
</ol>
<p><img src="http://upload-images.jianshu.io/upload_images/44770-c9d31b45bfab862c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="">  </p>
<p>异常处理的性能成本非常高，每个Java程序员在开发时都应牢记这句话。创建一个异常非常慢，抛出一个异常又会消耗1~5ms，当一个异常在应用的多个层级之间传递时，会拖累整个应用的性能。</p>
<ul>
<li>仅在异常情况下使用异常；</li>
<li>在可恢复的异常情况下使用异常；</li>
</ul>
<p>尽管使用异常有利于Java开发，但是在应用中最好不要捕获太多的调用栈，因为在很多情况下都不需要打印调用栈就知道哪里出错了。因此，异常消息应该提供恰到好处的信息。</p>
<h3 id="使用标准异常"><a href="#使用标准异常" class="headerlink" title="使用标准异常"></a>使用标准异常</h3><p>如果使用内建的异常可以解决问题，就不要定义自己的异常。Java API提供了上百种针对不同情况的异常类型，在开发中首先尽可能使用Java API提供的异常，如果标准的异常不能满足你的要求，这时候创建自己的定制异常。尽可能得使用标准异常有利于新加入的开发者看懂项目代码。</p>
<h3 id="正确得包装异常类型"><a href="#正确得包装异常类型" class="headerlink" title="正确得包装异常类型"></a>正确得包装异常类型</h3><p>当需要在应用重新抛出异常时，应该正确得包装原始异常，否则会丢失原始异常，例如下面的例子中：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span></span>&#123;</div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String []args)</span> <span class="keyword">throws</span> Exception</span>&#123;</div><div class="line">     <span class="keyword">try</span>&#123;</div><div class="line">         <span class="keyword">throw</span> <span class="keyword">new</span> IOException(<span class="string">"IOException"</span>);    </div><div class="line">     &#125;<span class="keyword">catch</span> (IOException e)&#123;</div><div class="line">         <span class="keyword">throw</span> <span class="keyword">new</span> ExampleException1(<span class="string">"Example Exception and "</span> + e.getMessage());</div><div class="line">     &#125;</div><div class="line"></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ExampleException1</span> <span class="keyword">extends</span> <span class="title">Exception</span></span>&#123;</div><div class="line"> <span class="function"><span class="keyword">public</span> <span class="title">ExampleException1</span><span class="params">(String s, Throwable t)</span></span>&#123;</div><div class="line">     <span class="keyword">super</span>(s,t);</div><div class="line"> &#125;</div><div class="line"> <span class="function"><span class="keyword">public</span> <span class="title">ExampleException1</span><span class="params">(String s)</span></span>&#123;</div><div class="line">     <span class="keyword">super</span>(s);</div><div class="line"> &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这个程序的输出为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Exception in thread &quot;main&quot; ExampleException1: Example Exception and IOException</div><div class="line">     at HelloWorld.main(HelloWorld.java:8)</div></pre></td></tr></table></figure>
<p>这里发现，IOException的调用栈已经丢失了，因为我们在catch语句块中没有正确包装IOException。若将catch语句块修改成下面这样，这可以发现原始异常的调用栈也被打印出来了。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">catch</span> (IOException e)&#123;</div><div class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> ExampleException1(<span class="string">"Example Exception"</span>,e);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这时候的输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Exception in thread &quot;main&quot; ExampleException1: Example Exception                </div><div class="line">     at HelloWorld.main(HelloWorld.java:8)</div><div class="line">Caused by: java.io.IOException: IOException                                    </div><div class="line">     at HelloWorld.main(HelloWorld.java:6)</div></pre></td></tr></table></figure>
<h3 id="避免在finally语句块中抛出异常"><a href="#避免在finally语句块中抛出异常" class="headerlink" title="避免在finally语句块中抛出异常"></a>避免在finally语句块中抛出异常</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">    method();  <span class="comment">//here throws first exception</span></div><div class="line">&#125; <span class="keyword">finally</span> &#123;</div><div class="line">    shutdown(); <span class="comment">//If finally blockthrew any exception the first exception will be lost forever</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在上面的这个代码片段中，<code>finally</code> 代码块也可能再次抛出异常。如果同时抛出两个异常，则第一个异常的调用栈会丢失。在 <code>finally</code> 语句块中最好只做打印错误信息或者关闭资源等操作，避免在finally语句块中再次抛出异常。</p>
<h3 id="不要使用异常控制程序的流程"><a href="#不要使用异常控制程序的流程" class="headerlink" title="不要使用异常控制程序的流程"></a>不要使用异常控制程序的流程</h3><p>不应该使用异常控制应用的执行流程，例如，本应该使用 <code>if</code> 语句进行条件判断的情况下，你却使用异常处理，这是非常不好的习惯，会严重影响应用的性能。</p>
<h3 id="不要捕获-Throwable-类"><a href="#不要捕获-Throwable-类" class="headerlink" title="不要捕获 Throwable 类"></a>不要捕获 Throwable 类</h3><p>在应用中不应捕获Throwable类，Error是Throwable类的子类，当应用抛出Errors的时候，一般都是不可恢复的情况。</p>
<h3 id="为异常记录合适的文档"><a href="#为异常记录合适的文档" class="headerlink" title="为异常记录合适的文档"></a>为异常记录合适的文档</h3><p>为应用中定义的异常定义合适的文档，如果你写了一个自定义的异常却没有文档，其他开发者会不清楚这个异常的含义，为你定义的异常配备对应的文档是一个非常好的习惯。</p>
<h3 id="Either-log-the-exception-or-throw-it-but-never-do-the-both"><a href="#Either-log-the-exception-or-throw-it-but-never-do-the-both" class="headerlink" title="Either log the exception or throw it but never do the both"></a>Either log the exception or throw it but never do the both</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">catch</span> (NoSuchMethodException e) &#123;</div><div class="line">   LOGGER.error(<span class="string">"Some information"</span>, e);</div><div class="line">   <span class="keyword">throw</span> e;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>As in above example code, logging and throwing will result in multiple log messages in log files, for a single problem in the code, and makes life hell for the engineer who is trying to dig through the logs.</p>
<h3 id="Always-catch-only-those-exceptions-that-you-can-actually-handle"><a href="#Always-catch-only-those-exceptions-that-you-can-actually-handle" class="headerlink" title="Always catch only those exceptions that you can actually handle"></a>Always catch only those exceptions that you can actually handle</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">catch</span> (NoSuchMethodException e) &#123;</div><div class="line">   <span class="keyword">throw</span> e; <span class="comment">//Avoid this as it doesn't help anything</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Well this is most important concept. Don’t catch any exception just for the sake of catching it. Catch any exception only if you want to handle it or, you want to provide additional contextual information in that exception. If you can’t handle it in catch block, then best advice is just don’t catch it only to re-throw it.</p>
<h3 id="Don’t-use-printStackTrace-statement-or-similar-methods"><a href="#Don’t-use-printStackTrace-statement-or-similar-methods" class="headerlink" title="Don’t use printStackTrace() statement or similar methods"></a>Don’t use printStackTrace() statement or similar methods</h3><p>Never leave printStackTrace() after finishing your code. Chances are one of your fellow colleague will get one of those stack traces eventually, and have exactly zero knowledge as to what to do with it because it will not have any contextual information appended to it.</p>
<h3 id="Use-finally-blocks-instead-of-catch-blocks-if-you-are-not-going-to-handle-exception"><a href="#Use-finally-blocks-instead-of-catch-blocks-if-you-are-not-going-to-handle-exception" class="headerlink" title="Use finally blocks instead of catch blocks if you are not going to handle exception"></a>Use finally blocks instead of catch blocks if you are not going to handle exception</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">  someMethod();  <span class="comment">//Method 2</span></div><div class="line">&#125; <span class="keyword">finally</span> &#123;</div><div class="line">  cleanUp();    <span class="comment">//do cleanup here</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>This is also a good practice. If inside your method you are accessing some method 2, and method 2 throw some exception which you do not want to handle in method 1, but still want some cleanup in case exception occur, then do this cleanup in finally block. Do not use catch block.</p>
<h3 id="Remember-“Throw-early-catch-late”-principle"><a href="#Remember-“Throw-early-catch-late”-principle" class="headerlink" title="Remember “Throw early catch late” principle"></a>Remember “Throw early catch late” principle</h3><p>This is probably the most famous principle about Exception handling. It basically says that you should throw an exception as soon as you can, and catch it late as much as possible. You should wait until you have all the information to handle it properly.</p>
<p>This principle implicitly says that you will be more likely to throw it in the low-level methods, where you will be checking if single values are null or not appropriate. And you will be making the exception climb the stack trace for quite several levels until you reach a sufficient level of abstraction to be able to handle the problem.</p>
<h3 id="Validate-user-input-to-catch-adverse-conditions-very-early-in-request-processing"><a href="#Validate-user-input-to-catch-adverse-conditions-very-early-in-request-processing" class="headerlink" title="Validate user input to catch adverse conditions very early in request processing"></a>Validate user input to catch adverse conditions very early in request processing</h3><p>Always validate user input in very early stage, even before it reached to actual controller. It will help you to minimize the exception handling code in your core application logic. It also helps you in making application consistent if there is some error in user input.</p>
<p>For example: If in user registration application, you are following below logic:</p>
<ol>
<li>Validate User  </li>
<li>Insert User  </li>
<li>Validate address  </li>
<li>Insert address  </li>
<li>If problem the Rollback everything</li>
</ol>
<p>This is very incorrect approach. It can leave you database in inconsistent state in various scenarios. Rather validate everything in first place and then take the user data in dao layer and make DB updates. Correct approach is:</p>
<ol>
<li>Validate User  </li>
<li>Validate address  </li>
<li>Insert User  </li>
<li>Insert address  </li>
<li>If problem the Rollback everything</li>
</ol>
<h3 id="Always-terminate-the-thread-which-it-is-interrupted"><a href="#Always-terminate-the-thread-which-it-is-interrupted" class="headerlink" title="Always terminate the thread which it is interrupted"></a>Always terminate the thread which it is interrupted</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</div><div class="line">  <span class="keyword">try</span> &#123;</div><div class="line">    Thread.sleep(<span class="number">100000</span>);</div><div class="line">  &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;&#125; <span class="comment">//Don't do this</span></div><div class="line">  doSomethingCool();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>InterruptedException is a clue to your code that it should stop whatever it’s doing. Some common use cases for a thread getting interrupted are the active transaction timing out, or a thread pool getting shut down. Instead of ignoring the InterruptedException, your code should do its best to finish up what it’s doing, and finish the current thread of execution. So to correct the example above:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</div><div class="line">  <span class="keyword">try</span> &#123;</div><div class="line">    Thread.sleep(<span class="number">100000</span>);</div><div class="line">  &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">    <span class="keyword">break</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">doSomethingCool();</div></pre></td></tr></table></figure>
<h2 id="See"><a href="#See" class="headerlink" title="See"></a>See</h2><ul>
<li><a href="http://javabeat.net/java-exceptions/" target="_blank" rel="external">Java Exceptions Tutorial</a></li>
<li><a href="http://howtodoinjava.com/best-practices/java-exception-handling-best-practices/" target="_blank" rel="external">Top 20 Java Exception Handling Best Practices - HowToDoInJava</a></li>
<li><a href="http://javabeat.net/java-exception-best-practices/" target="_blank" rel="external">Top 11 Java Exception Best Practices</a> / <a href="http://www.jianshu.com/p/38c5ba78db57" target="_blank" rel="external">【译】11条Java异常处理的最佳实践 - 简书</a></li>
</ul>

        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2017-11-05T08:22:17.000Z" itemprop="dateUpdated">2017-11-05 16:22:17</time>
</span><br>


        
        这里可以写作者留言，标签和 hexo 中所有变量及辅助函数等均可调用，示例：<a href="/Java/2016-11-30-java-exception.html" target="_blank" rel="external">http://blog.inching.org/Java/2016-11-30-java-exception.html</a>
        
    </div>
    <footer>
        <a href="http://blog.inching.org">
            <img src="/img/avatar.png" alt="Cody Fei">
            Cody Fei
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            

            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.inching.org/Java/2016-11-30-java-exception.html&title=《Java Exception》 — Balance&pic=http://blog.inching.org/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.inching.org/Java/2016-11-30-java-exception.html&title=《Java Exception》 — Balance&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.inching.org/Java/2016-11-30-java-exception.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Java Exception》 — Balance&url=http://blog.inching.org/Java/2016-11-30-java-exception.html&via=http://blog.inching.org" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.inching.org/Java/2016-11-30-java-exception.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/Android/2016-12-02-android-architecture-mvp.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Android Architecture MVP</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/Android/2016-11-26-android-process.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Android Process</h4>
      </a>
    </div>
  
</nav>



    











</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢大爷~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.JPG" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.JPG" data-alipay="/img/alipay.JPG">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top" style="display:none">
        

        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>footer.license</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Cody Fei &copy; 2012 - 2017</span>
            <span style="display:none">
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.inching.org/Java/2016-11-30-java-exception.html&title=《Java Exception》 — Balance&pic=http://blog.inching.org/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.inching.org/Java/2016-11-30-java-exception.html&title=《Java Exception》 — Balance&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.inching.org/Java/2016-11-30-java-exception.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Java Exception》 — Balance&url=http://blog.inching.org/Java/2016-11-30-java-exception.html&via=http://blog.inching.org" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.inching.org/Java/2016-11-30-java-exception.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACJUlEQVR42u3aQU7EMAwF0Ln/pUFiBYKWb7uDGPdlVU3bSV4Xlh3n8YjH28f4fP39l/O7R+PomcczBgYGxssy8mnOYUd3e9R8bRgYGPdhJEG2uuhk+iR8n68NAwMDI5ns/H+qC8LAwMC4KuAWkra43sTAwMA4Z+TbYZPEcV7cXlCLY2BgvCCj1xj4m+un9zcwMDD+PeNtPOblazXI/vAWBgbGasZRQjYJykkDYN4w+GV6DAyMdYzeAYhqeE0+XF6mRhU5BgbGOka1rVhtSVbbBuXGAAYGxlJGsrjJgbD5LlmUJmJgYKxmTILdvIWZBOJmCxMDA2MRYxJwq9PnW3Llf8DAwFjNuKDeLYbOPNWrtg0wMDB2M/IkrJfA9YrVagKKgYGxlZEvd5IUlr9ocXsOAwNjNyNJBPMF5QlctVQedV8xMDCWMqpHIvJAOUkxC1EZAwNjESPfiM8PW1RnyZPOw3kxMDBuw3hGIzNJB3tbcl+uMTAwVjN6JWi1AJ4UzIXPh4GBcQNGL+GrPtkL5eVSFgMDYykjLyx7yHxZvRkxMDB2M/K2Yp5E5gc4Lm4wYGBgrGP0NryqyV+1SVkuYjEwMFYz8jE5yFUNtdc2UDEwMHYwJo3DeVKY341yWwwMjNWMPPDlRen8+FchAcXAwMCIN+PmxW31XQwMDIze0YreL6PKGwMD4waMa49cVJuXFxzywMDAWM2YNwZ6sGoQrzZWMTAwVjDeAWIUA/HCQfAKAAAAAElFTkSuQmCC" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="/js/main.min.js?v=1.6.17"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.6.17" async></script>










</body>
</html>
