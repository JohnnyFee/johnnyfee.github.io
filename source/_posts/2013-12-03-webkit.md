---
layout: post
title: "WebKit发展史"
description: ""
category: Webkit
tags: [webkit]
--- 
## PC市场浏览器内核

PC市场主流的浏览器及其内核的对应关系如下：

- Microsoft IE/Trident
- Mozilla Firefox/Gecko
- Google Chrome/Blink，Blink产生之前使用WebView。
- Safari/WebKit

<!--more-->

## 移动市场浏览器内核

在移动市场中，IOS和Android系统占统治地位，而**这两个系统默认浏览器均使用WebKit内核**。

## WebKit的发展

WebKit最初由KDE的KHTML和KJS发展而来，随后由Apple和Google共同维护。由于两个团队产生意见分歧，Google Fork了Webkit，发展到Blink；Apple将WebKit发展到Webkit2。至于谁将代表未来，现在未见分晓，可以参考Librehat的文章，[Blink和WebKit2，谁代表下一代WebKit？](
https://www.librehat.com/blink-and-webkit-2-who-represents-the-next-generation-of-webkit/)。

### WebKit

WebKit 主要包含WebCore 排版引擎和 JavaScriptCore，分别来源于KDE的KHTML和KJS。其中WebCore包含了对HTML，CSS等很多W3C规范的实现；JavaScriptCore是对JavaSript支持的实现，可以理解为JavaScript引擎。关于WebKit的架构可参考李嘉昱同学的[这篇文章](http://www.cnblogs.com/jyli/archive/2010/01/31/1660355.html)。

JavaScript通过IDL机制实现和内核（C/C++）之间通信，可以参考[这篇文章](http://blog.csdn.net/cutesource/article/details/8862287)。

**WebKit2**

由Webkit发展而来，WebKit2 是 WebKit 的一个新的 API 层，支持多进程模型。WebKit、WebKit2、Chromium WebKit的进程模型可以参考[这篇文章](http://trac.webkit.org/wiki/WebKit2)，对应的[中文翻译](http://elastos.org/elorg_files/misc/tongji-ssec/webkit2%E7%AE%80%E4%BB%8B.pdf)。

### Blink

Blink从WebKit继承而来。在产生Blink之前，Google Chrome/Chromium 从创始至今一直使用 WebKit(WebCore) 作为 HTML/CSS 渲染引擎。

2010 年WebKit2诞生，由于 WebKit2 在 WebCore 层面上实现的进程隔离在一定程度上与 Google Chrome/Chromium 自己的沙箱设计存在冲突，故 Google Chrome/Chromium 一直停留在 WebKit，使用 Backport 的方式实现和主线 WebKit2 的兼容。随后，Google 决定从 WebKit fork 出自己的 Blink Web 引擎。

Blink为Chromium使用的渲染引擎，使用JavaScript的解析引擎为**V8**。

据放飞梦想同学的文章[Webkit for Android分析](http://mogoweb.net/archives/182)可知Android4.0的WebView使用的也是V8引擎。

## Chromium和Chrome

### Chromium
Chromium是一个建立在WebKit之上的浏览器开源项目，由Google发起的。Chromium使用的是V8 JavaScript解析器。Chromium是一个开源项目，它也是Chrome浏览器的核心。它不仅负责HTML渲染，而且还是WEB平台的一个完整实现——从网络栈到多媒体框架。

### Chrome
Chrome是Google公司的浏览器产品，它基于chromium开源项目，一般选择稳定的版本作为它的基础，它和chromium的不同点在于chromium是开源试验场，会尝试很多新的东西，当这些东西稳定之后，chrome才会集成进来，这也就是说chrome的版本会落后于chromium。另外一个就是，chrome里面会加入一些私有的codec，这些仅在chrome中才会出现。再次，chrome还会整合Google的很多服务， 最后chrome还会有自动更新的功能，这也是chromium所没有的。

## Chromium和WebKit的比较

以下是Qt团队通过对两者调研后得出的结论：

* Chromium关注于跨平台建设，其浏览器能够运行在所有主流桌面平台和Android上；与此同时，WebKit则不那么专注。我们自己的项目则必须支持所有的OS平台。
* Chromium中对很多事情都提供了支持，在WebKit下同样支持这些东西则需要耗费大量精力。例如，我们可以简单地重用平台/OS的适配代码。多媒体以及如WebRTC这样的新HTML5特性，都是直接可用的，无需特别的Qt代码。
* 使用Chromium可以简化OS集成工作，这使得我们可以有更多精力关注于更高层面，提供一个可以无缝集成于Qt之中并且简单而强大的API。
* 我们注意到Chromium的开发处于代码质量的严格控制之中。这简化了我们的测试工作，有利于提供更稳定和高质量的Web引擎。
* 比起WebKit，Chromium允许我们构建更好更高效的组件和Qt Quick scene graph。

所以，“我们将在Chromium基础之上建立未来的Web引擎——Qt WebEngine。”——Qt研发团队。

参考：[Qt将引入Qt WebEngine | Qt Chinese blog](http://blog.qt.digia.com/cn/2013/09/25/introducing-the-qt-webengine/)

## 性能测试

- http://dromaeo.com/
	- [wiki](https://wiki.mozilla.org/Dromaeo)
- [SunSpider 1.0.2 JavaScript Benchmark](https://www.webkit.org/perf/sunspider/sunspider.html)

## 参考
- [Yongsheng关于Webkit的系列文章](http://blog.csdn.net/milado_nju/article/category/1060499)
- [Blink: Chromium的新渲染引擎](http://blog.csdn.net/doon/article/details/9253453)