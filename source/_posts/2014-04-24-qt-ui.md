---
layout: post
title: "Qt UI"
description: ""
category: Qt
tags: [qt, thread]
--- 

## 创建主窗口

QMainWindow类提供了一个程序主窗口基本框架。其框架图如下：

可以调用setCentralWidget().设置中央窗口部件。

### 创建菜单

menuBar()返回了窗口的[QMenuBar](file:///C:/Users/huanghaining/Desktop/qmenubar.html)，可以调用[QMenuBar::addMenu](file:///C:/Users/huanghaining/Desktop/qmenubar.html#addMenu)()给窗口添加新的菜单。QMainWindow自带有默认菜单栏，如果你想实现自己的菜单栏，你也可以调用setMenuBar()设置自己的菜单栏。例如：

	void MainWindow::createMenus()
	{
		fileMenu = menuBar()->addMenu(tr("&File"));
		fileMenu->addAction(newAct);
		fileMenu->addAction(openAct);
		fileMenu->addAction(saveAct);
	｝

<!--more-->

### 创建工具栏

可以调用addToolBar()给窗口添加工具栏，而且可以指定[Qt::ToolBarArea](file:///C:/Users/huanghaining/Desktop/qt.html#ToolBarArea-enum)控制工具栏的起始位置。可以通过[QToolBar::setAllowedAreas](file:///C:/Users/huanghaining/Desktop/qtoolbar.html#allowedAreas-prop)() and [QToolBar::setMovable](file:///C:/Users/huanghaining/Desktop/qtoolbar.html#movable-prop)()限制布局。

    void MainWindow::createToolBars()
    {
         fileToolBar = addToolBar(tr("File"));
         fileToolBar->addAction(newAct);
	｝

### 创建停靠窗体

调用addDockWidget()给窗口添加停靠窗体。

    QDockWidget *dockWidget = new QDockWidget(tr("Dock Widget"), this);
    dockWidget->setAllowedAreas(Qt::LeftDockWidgetArea |
                                    Qt::RightDockWidgetArea);
    dockWidget->setWidget(dockWidgetContents);
    addDockWidget(Qt::LeftDockWidgetArea, dockWidget);

### 状态栏

QMainWindow有默认的状态栏，可以调用statusBar()获取默认的状态栏，也可以调用setStatusBar()设置自己的状态栏。可以调用saveState()和restoreState()保存和获取其布局状态。

## 对话框使用

QDialog是Qt所以对话框的基类，我们可以继承QDialog实现自定义的对话框。QDialog分为模态和非模态对话框，有返回值，默认按钮。如果有parent，其默认的位置为parent的中部。

### 模态对话框

模态对话框分两种：应用程序模态对话框和窗口模态对话框。应用程序模态对话框会阻塞整个应用程序，而窗口模态对话框只阻塞与对话框关联的窗口，用户依然可以使用程序的其他窗口。

我们通常调用[exec](file:///C:/Users/huanghaining/Desktop/qdialog.html#exec)() 来显示模态对话框，关闭对话框时，[exec](file:///C:/Users/huanghaining/Desktop/qdialog.html#exec)() 会有一个返回值。

### 非模态对话框

我们通常调用[show](file:///C:/Users/huanghaining/Desktop/qwidget.html#show)()显示非模态对话框。如果隐藏了一个对话框后再次调用[show](file:///C:/Users/huanghaining/Desktop/qwidget.html#show)()，对话框将显示在其原始的位置。

### 默认按钮

当用户按下Enter（Return）键时默认按钮将被按下。这表示用胡接受了对话框设置并将关闭对话框。可以用[QPushButton::setDefault](file:///C:/Users/huanghaining/Desktop/qpushbutton.html#default-prop)(), [QPushButton::isDefault](file:///C:/Users/huanghaining/Desktop/qpushbutton.html#default-prop)() 和 [QPushButton::autoDefault](file:///C:/Users/huanghaining/Desktop/qpushbutton.html#autoDefault-prop)()设置控制对话框默认按钮。

### Qt标准对话框

[QColorDialog](file:///C:/Users/huanghaining/Desktop/qcolordialog.html)

Dialog widget for specifying colors

[QFileDialog](file:///C:/Users/huanghaining/Desktop/qfiledialog.html)

Dialog that allow users to select files or directories

[QFontDialog](file:///C:/Users/huanghaining/Desktop/qfontdialog.html)

Dialog widget for selecting a font

[QInputDialog](file:///C:/Users/huanghaining/Desktop/qinputdialog.html)

Simple convenience dialog to get a single value from the user

[QMessageBox](file:///C:/Users/huanghaining/Desktop/qmessagebox.html)

Modal dialog for informing the user or for asking the user a question and receiving an answer

[QPageSetupDialog](file:///C:/Users/huanghaining/Desktop/qpagesetupdialog.html)

Configuration dialog for the page-related options on a printer

[QPrintDialog](file:///C:/Users/huanghaining/Desktop/qprintdialog.html)

Dialog for specifying the printer's configuration

[QPrintPreviewDialog](file:///C:/Users/huanghaining/Desktop/qprintpreviewdialog.html)

Dialog for previewing and configuring page layouts for printer output

[QProgressDialog](file:///C:/Users/huanghaining/Desktop/qprogressdialog.html)

Feedback on the progress of a slow operation

## 布局管理

管理窗口部件布局的三种方法：绝对位置法，人工布局法和布局管理器法。

### 绝对位置法

绝对位置法：在构造函数中，各个子窗口部件通过调用SetGeometry()函数来分配固定的大小和位置实现。

绝对位置法的缺点：

1. 用户无法改变窗口的大小
2. 如果用户选择了一种不常用的大字体，或者当应用程序被翻译成另外一种语言时，也许会把一些文本截断。
3. 对于某些风格的平台，这些窗口部件可能会有不合适的尺寸大小。
4. 必须人工的计算位置和大小。

### 人工布局法

人工布局法：通过重新实现窗体的resizeEvent()函数，在该函数中各个子窗口部件通过调用SetGeometry()来设置几何形状实现的。利用这种方法给子窗口部件设置的大小尺寸总是可以和窗口的大小成比例。

### 布局管理器法

布局管理器会为每种类型的窗口部件提供一些合理的默认值，并且会考虑每一个窗口部件的大小提示，会自动调整布局来响应字体的变化，内容的改变以及窗口大小的调整。Qt提供了三种布局管理器：QHBoxLayout,QVBoxLayout和QGridLayout。

## Qt Quick

Qt Quick 是一种高级用户界面技术，使用它可轻松地创建供移动和嵌入式设备使用的动态触摸式界面和轻量级应用程序。三种全新的技术共同构成了 Qt Quick 用户界面创建工具包：一个改进的Qt Creator IDE、一种新增的简便易学的语言 (QML) 和一个新加入 Qt 库中名为 QtDeclarative 的模块，这些使得 Qt 更加便于不熟悉 C++ 的开发人员和设计人员使用。

## Qt Qml

“近9个月来，我们对QML引擎底层做了大量的工作，这在Qt 5.2中已有了一定成效。Qt Qml现在使用我们自己内建的Javascript引擎，而不再依赖V8，因此QtJSBackend动态库已经被移除。新的引擎执行纯Javascript要略慢于V8。”——[Qt 5.2 Alpha可用了 | Qt Chinese blog](http://blog.qt.digia.com/cn/2013/10/04/qt-5-2-alpha-available/)

__控制台调试__：[调试Qt Quick 2 – 控制台API | Qt Chinese blog](http://blog.qt.digia.com/cn/2012/03/08/debugging-qt-quick-2-console-api/)

### UI

- [Qt Quick布局介绍 | Qt Chinese blog](http://blog.qt.digia.com/cn/2013/05/18/introducing-qt-quick-layouts/)
- [Qt Quick新特性概览 | Qt Chinese blog](http://blog.qt.digia.com/cn/2013/06/24/overview-of-the-new-features-in-qt-quick/)

## Widget

- [Qt Weekly #5: Widgets on a QHeaderView](http://blog.qt.digia.com/blog/2014/04/11/qt-weekly-5-widgets-on-a-qheaderview/?-weekly-5-widgets-on-a-qheaderview)

## 动画

- [qt4 qml Flipable、Flickable和状态与动画](http://blog.csdn.net/luck_good/article/details/6992795)

## 虚拟键盘

- [New Virtual Keyboard for Qt Enterprise | Qt Blog](http://blog.qt.digia.com/blog/2014/02/04/new-virtual-keyboard-for-qt-enterprise/)

## 参考

- [Qt开发基础 - hai200501019的专栏 - 博客频道 - CSDN.NET](http://blog.csdn.net/hai200501019/article/details/17613411)