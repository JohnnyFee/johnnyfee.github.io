<!DOCTYPE html>
<html>
<head>
    
<!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-43567748-2', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<!-- End Google Analytics -->


    

    



    <meta charset="utf-8">
    
    <meta name="google-site-verification" content="true">
    
    
    
    <title>PHP Tutorial | Balance | 大道至简</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="tutorial,php">
    <meta name="description" content="See 《Modern PHP》 and 《Learning PHP, MySQL &amp;amp; JavaScript, 4th Edition》.
Basic SyntaxBy default, PHP documents end with the extension .php. When a web server encounters this extension in a requested">
<meta property="og:type" content="article">
<meta property="og:title" content="PHP Tutorial">
<meta property="og:url" content="http://blog.inching.org/PHP/2015-05-25-php-tutorial.html">
<meta property="og:site_name" content="Balance">
<meta property="og:description" content="See 《Modern PHP》 and 《Learning PHP, MySQL &amp;amp; JavaScript, 4th Edition》.
Basic SyntaxBy default, PHP documents end with the extension .php. When a web server encounters this extension in a requested">
<meta property="og:updated_time" content="2017-11-05T08:22:17.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="PHP Tutorial">
<meta name="twitter:description" content="See 《Modern PHP》 and 《Learning PHP, MySQL &amp;amp; JavaScript, 4th Edition》.
Basic SyntaxBy default, PHP documents end with the extension .php. When a web server encounters this extension in a requested">
    
        <link rel="alternate" type="application/atom+xml" title="Balance" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/style/style.css?v=1.6.17">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Cody Fei</h5>
          <a href="mailto:inchingcode@gmail.com" title="inchingcode@gmail.com" class="mail">inchingcode@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                Home
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags/android"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories/Android/"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/inchingorg" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://www.weibo.com/CodyFee" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://www.inesoi.com" target="_blank" >
                <i class="icon icon-lg icon-shopping-bag"></i>
                Shopping Bag
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">PHP Tutorial</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">PHP Tutorial</h1>
        <h5 class="subtitle">
            
                <time datetime="2015-05-24T16:00:00.000Z" itemprop="datePublished" class="page-time">
  2015-05-25
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/PHP/">PHP</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Basic-Syntax"><span class="post-toc-text">Basic Syntax</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Comments"><span class="post-toc-text">Comments</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#String"><span class="post-toc-text">String</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#String-concatenation"><span class="post-toc-text">String concatenation</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#String-types"><span class="post-toc-text">String types</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Escaping-characters"><span class="post-toc-text">Escaping characters</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Multiple-Line-Strings"><span class="post-toc-text">Multiple-Line Strings</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Multibyte-Strings"><span class="post-toc-text">Multibyte Strings</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Character-Encoding"><span class="post-toc-text">Character Encoding</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Functions"><span class="post-toc-text">Functions</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Variables"><span class="post-toc-text">Variables</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Implicit-and-Explicit-Casting"><span class="post-toc-text">Implicit and Explicit Casting</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Constants"><span class="post-toc-text">Constants</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Predefined-Constants"><span class="post-toc-text">Predefined Constants</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Global-variables"><span class="post-toc-text">Global variables</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Static-variables"><span class="post-toc-text">Static variables</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Superglobal-variables"><span class="post-toc-text">Superglobal variables</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Arrays"><span class="post-toc-text">Arrays</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Numerically-Indexed-Arrays"><span class="post-toc-text">Numerically Indexed Arrays</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Associative-Arrays"><span class="post-toc-text">Associative Arrays</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Assignment-Using-the-array-Keyword"><span class="post-toc-text">Assignment Using the array Keyword</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#The-foreach…as-Loop"><span class="post-toc-text">The foreach…as Loop</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Using-Array-Functions"><span class="post-toc-text">Using Array Functions</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#printf"><span class="post-toc-text">printf</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#echo-and-print"><span class="post-toc-text">echo and print</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Precision-Setting"><span class="post-toc-text">Precision Setting</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#String-Padding"><span class="post-toc-text">String Padding</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Using-sprintf"><span class="post-toc-text">Using sprintf</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Date-and-Time"><span class="post-toc-text">Date and Time</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Dates-Times-and-Time-Zones"><span class="post-toc-text">Dates, Times, and Time Zones</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Set-a-Default-Time-Zone"><span class="post-toc-text">Set a Default Time Zone</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#The-DateTime-Class"><span class="post-toc-text">The DateTime Class</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#The-DateInterval-Class"><span class="post-toc-text">The DateInterval Class</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#The-DateTimeZone-Class"><span class="post-toc-text">The DateTimeZone Class</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#The-DatePeriod-Class"><span class="post-toc-text">The DatePeriod Class</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#The-nesbot-carbon-Component"><span class="post-toc-text">The nesbot/carbon Component</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Using-Regular-Expressions-in-PHP"><span class="post-toc-text">Using Regular Expressions in PHP</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Including-and-Requiring-Files"><span class="post-toc-text">Including and Requiring Files</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#PHP-Version-Compatibility"><span class="post-toc-text">PHP Version Compatibility</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Logger-Interface"><span class="post-toc-text">Logger Interface</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#COMMAND-LINE-SCRIPTS-WITH-PHP"><span class="post-toc-text">COMMAND-LINE SCRIPTS WITH PHP</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Built-in-HTTP-server"><span class="post-toc-text">Built-in HTTP server</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Start-the-Server"><span class="post-toc-text">Start the Server</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Configure-the-Server"><span class="post-toc-text">Configure the Server</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Router-Scripts"><span class="post-toc-text">Router Scripts</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Detect-the-Built-in-Server"><span class="post-toc-text">Detect the Built-in Server</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#PaaS"><span class="post-toc-text">PaaS</span></a></li></ol>
        </nav>
    </aside>
    
<article id="post-php-tutorial"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">PHP Tutorial</h1>
        <div class="post-meta">
            <time class="post-time" title="2015-05-25 00:00:00" datetime="2015-05-24T16:00:00.000Z"  itemprop="datePublished">2015-05-25</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/PHP/">PHP</a></li></ul>



            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p>See <a href="http://www.salttiger.com/modern-php/" target="_blank" rel="external">《Modern PHP》</a> and <a href="http://www.salttiger.com/learning-php-mysql-javascript-4th-edition/" target="_blank" rel="external">《Learning PHP, MySQL &amp; JavaScript, 4th Edition》</a>.</p>
<h2 id="Basic-Syntax"><a href="#Basic-Syntax" class="headerlink" title="Basic Syntax"></a>Basic Syntax</h2><p>By default, PHP documents end with the extension .php. When a web server encounters this extension in a requested file, it automatically passes it to the PHP processor. </p>
<p>To trigger the PHP commands, you need to learn a new tag. Here is the first part:</p>
<a id="more"></a>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">    The first thing you may notice is that the tag has not been closed. This is because entire sections of PHP can be placed inside this tag, <span class="keyword">and</span> they finish only when the closing part is encountered, which looks like this:</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<p>A small PHP “Hello World” program:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">  <span class="keyword">echo</span> <span class="string">"Hello world"</span>;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<p>The way you use this tag is quite flexible. Some programmers open the tag at the start of a document and close it right at the end, outputting any HTML directly from PHP commands. </p>
<p>By the way, there is a slight variation to the PHP syntax, but should be discouraged.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?</span></div><div class="line">  <span class="keyword">echo</span> <span class="string">"Hello world"</span>;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<p>PHP is quite a simple language with roots in C and Perl, yet it looks more like Java. It is also very flexible, but there are a few rules that you need to learn about its syntax and structure.</p>
<ul>
<li>PHP commands ended with a semicolon, like <code>$x += 10;</code></li>
<li><p>In PHP, however, you must place a $ in front of all variables. This is required to make the PHP parser faster, as it instantly knows whenever it comes across a variable. Whether your variables are numbers, strings, or arrays, they should all look something like those:</p>
<pre><code>&lt;?php
  $mycounter = 1;
  $mystring  = &quot;Hello&quot;;
  $myarray   = array(&quot;One&quot;, &quot;Two&quot;, &quot;Three&quot;);
?&gt;
</code></pre></li>
</ul>
<h3 id="Comments"><a href="#Comments" class="headerlink" title="Comments"></a>Comments</h3><p>There are two ways in which you can add comments to your PHP code.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line"></div><div class="line"><span class="comment">// echo "X equals $x";</span></div><div class="line"></div><div class="line"><span class="comment">/* This is a section</span></div><div class="line">   of multiline comments</div><div class="line">   which will not be</div><div class="line">   interpreted */</div><div class="line"></div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h3 id="String"><a href="#String" class="headerlink" title="String"></a>String</h3><h4 id="String-concatenation"><a href="#String-concatenation" class="headerlink" title="String concatenation"></a>String concatenation</h4><p>String concatenation uses the period (<code>.</code>) to append one string of characters to another. The simplest way to do this is as follows:</p>
<pre><code>echo &quot;You have &quot; . $msgs . &quot; messages.&quot;;
</code></pre><p>Just as you can add a value to a numeric variable with the <code>+=</code> operator, you can append one string to another using <em>.=</em>, like this:</p>
<pre><code>$bulletin .= $newsflash;
</code></pre><h4 id="String-types"><a href="#String-types" class="headerlink" title="String types"></a>String types</h4><p>PHP supports two types of strings that are denoted by the type of quotation mark that you use. If you wish to assign a literal string, preserving the exact contents, you should use the single quotation mark (apostrophe), like this:</p>
<pre><code>$info = &apos;Preface variables with a $ like this: $variable&apos;;
</code></pre><p>In this case, every character within the single-quoted string is assigned to <code>$info</code>. If you had used double quotes, PHP would have attempted to evaluate <code>$variable</code> as a variable.</p>
<p>On the other hand, when you want to include the value of a variable inside a string, you do so by using double-quoted strings:</p>
<pre><code>echo &quot;This week $count people have viewed your profile&quot;;
</code></pre><p>As you will realize, this syntax also offers a simpler form of concatenation in which you don’t need to use a period, or close and reopen quotes, to append one string to another. This is called <em>variable substitution</em>, and you will notice some applications using it extensively and others not using it at all.</p>
<h4 id="Escaping-characters"><a href="#Escaping-characters" class="headerlink" title="Escaping characters"></a>Escaping characters</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">$text = <span class="string">'My spelling\'s still atroshus'</span>;</div><div class="line">$text = <span class="string">"She wrote upon it, \"Return to sender\"."</span>;</div><div class="line">$heading = <span class="string">"Date\tName\tPayment"</span>;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h4 id="Multiple-Line-Strings"><a href="#Multiple-Line-Strings" class="headerlink" title="Multiple-Line Strings"></a>Multiple-Line Strings</h4><p>There are times when you need to output quite a lot of text from PHP, and using several <code>echo</code> (or <code>print</code>) statements would be time-consuming and messy. To overcome this, PHP offers two conveniences. The first is just to put multiple lines between quotes:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">  $author = "Steve Ballmer";</div><div class="line"></div><div class="line">  echo "Developers, Developers, developers, developers, developers,</div><div class="line">  developers, developers, developers, developers!</div><div class="line"></div><div class="line">  - $author.";</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>PHP also offers a multiline sequence using the <code>&lt;&lt;&lt;</code> operator—commonly referred to as a <em>here-document</em> or <em>heredoc</em>—as a way of specifying a string literal, preserving the line breaks and other whitespace (including indentation) in the text.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">  $author = <span class="string">"Brian W. Kernighan"</span>;</div><div class="line"></div><div class="line">  <span class="keyword">echo</span> <span class="string">&lt;&lt;&lt;_END</span></div><div class="line">  Debugging is twice as hard as writing the code in the first place.</div><div class="line">  Therefore, if you write the code as cleverly as possible, you are,</div><div class="line">  by definition, not smart enough to debug it.</div><div class="line"></div><div class="line">  - <span class="subst">$author</span>.</div><div class="line">_END;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<p>using the <code>&lt;&lt;&lt;_END..._END;</code> heredoc construct, you don’t have to add <code>\n</code> linefeed characters to send a linefeed—just press Return and start a new line. Also, unlike either a double-quote- or single-quote-delimited string, you are free to use all the single and double quotes you like within a heredoc, without escaping them by preceding them with a slash (<code>\</code>).</p>
<h3 id="Multibyte-Strings"><a href="#Multibyte-Strings" class="headerlink" title="Multibyte Strings"></a>Multibyte Strings</h3><p>PHP assumes each character in a string is an 8-bit character that occupies a single byte of memory. Unfortunately, this is a naive assumption that breaks down as soon as you work with non-English characters. You might localize your PHP application for international users. Your blog might receive comments written in Spanish, German, or Norwegian. Your users’ names might contain accented characters. My point is that you’ll often encounter <em>multibyte</em> characters, and you must accommodate them correctly.</p>
<p>When I say <em>multibyte character</em>, I mean any character that is not one of the 128 characters in the traditional ASCII character set. Some examples are <code>ñ</code>, <code>ë</code>, <code>â</code>, <code>ô</code>, <code>à</code>, <code>æ</code>, and <code>ø</code>. There are many others. PHP’s default string-manipulation functions assume all strings use only 8-bit characters. If you manipulate a Unicode string that contains multibyte characters with PHP’s native string functions, you will get incorrect and unexpected results.</p>
<p>You can avoid multibyte string errors by installing the <a href="http://php.net/manual/book.mbstring.php" target="_blank" rel="external"><code>mbstring</code></a> PHP extension. This extension introduces multibyte-aware string functions that replace most of PHP’s native string-manipulation functions. For example, use the multibyte-aware <code>mb_strlen()</code> function instead of PHP’s native <code>strlen()</code> function.</p>
<p>To this day I’m still training myself to use the <code>mbstring</code> multibyte string functions instead of PHP’s default string functions. It’s a tough habit to form, but you must use the multibyte string functions if you work with Unicode strings. Otherwise, it’s easy for multibyte Unicode data to become malformed.</p>
<h3 id="Character-Encoding"><a href="#Character-Encoding" class="headerlink" title="Character Encoding"></a>Character Encoding</h3><p>UTF-8, is the most popular character encoding and is supported by all modern web browsers.</p>
<p>Tom Scott provides <a href="http://bit.ly/ts-unicode" target="_blank" rel="external">the best explanation of Unicode and UTF-8 that I’ve seen</a>. Joel Spolsky also <a href="http://bit.ly/jspolsky" target="_blank" rel="external">writes a nice explanation of character encodings on his website</a>.</p>
<p>The <code>mbstring</code> extension doesn’t just manipulate Unicode strings. It also converts multibyte strings between various character encodings. This is useful when clients export Excel spreadsheet data with a Windows-specific character encoding when what I really want is UTF-8 encoded data. Use the <code>mb_detect_encoding()</code> and <code>mb_convert_encoding()</code> functions to convert Unicode strings from one character encoding to another.</p>
<p>When you work with multibyte characters, it is important that you tell PHP you are working with the UTF-8 character encoding. It’s easiest to do this in your <em>php.ini</em> file like this:</p>
<pre><code>default_charset = &quot;UTF-8&quot;;
</code></pre><p>The default character set is used by many PHP functions, including <code>htmlentities()</code>, <code>html_entity_decode()</code>, <code>htmlspecialchars()</code>, and the <code>mbstring</code> functions. This value is also added to the default <code>Content-Type</code> header returned by PHP unless explicitly specified with the <code>header()</code> function like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">header(&apos;Content-Type: application/json;charset=utf-8&apos;);</div></pre></td></tr></table></figure>
<p>You cannot use the <code>header()</code> function after <em>any</em> output is returned from PHP.</p>
<p>I also recommend you include this <code>meta</code> tag in your HTML document header:</p>
<pre><code>&lt;meta charset=&quot;UTF-8&quot;/&gt;
</code></pre><h3 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h3><p>To create a function:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">longdate</span><span class="params">($timestamp)</span></span></div><div class="line">  &#123;</div><div class="line">    <span class="keyword">return</span> date(<span class="string">"l F jS Y"</span>, $timestamp);</div><div class="line">  &#125;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h2 id="Variables"><a href="#Variables" class="headerlink" title="Variables"></a>Variables</h2><p>You must enclose each string in either quotation marks or apostrophes (single quotes).</p>
<pre><code>$username = &quot;Fred Smith&quot;;
</code></pre><p>You can assign it to another variable:</p>
<pre><code>$current_user = $username;
</code></pre><p>You can print it out:</p>
<pre><code>echo $username;
</code></pre><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">    <span class="comment">// number</span></div><div class="line">    $count = <span class="number">17</span>;</div><div class="line"></div><div class="line">    <span class="comment">// array</span></div><div class="line">    $team = <span class="keyword">array</span>(<span class="string">'Bill'</span>, <span class="string">'Mary'</span>, <span class="string">'Mike'</span>, <span class="string">'Chris'</span>, <span class="string">'Anne'</span>);</div><div class="line">    <span class="keyword">echo</span> $team[<span class="number">3</span>]; <span class="comment">// Displays the name Chris</span></div><div class="line"></div><div class="line">    <span class="comment">// two-dimensional arrays</span></div><div class="line">    $oxo = <span class="keyword">array</span>(<span class="keyword">array</span>(<span class="string">'x'</span>, <span class="string">' '</span>, <span class="string">'o'</span>),</div><div class="line">               <span class="keyword">array</span>(<span class="string">'o'</span>, <span class="string">'o'</span>, <span class="string">'x'</span>),</div><div class="line">               <span class="keyword">array</span>(<span class="string">'x'</span>, <span class="string">'o'</span>, <span class="string">' '</span>));</div><div class="line">    <span class="keyword">echo</span> $oxo[<span class="number">1</span>][<span class="number">2</span>];</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<p>PHP is a very loosely typed language. This means  that variables do not have to be declared before they are used, and that PHP always converts variables to the type required by their context when they are accessed.</p>
<p>For example, you can create a multiple-digit number and extract the nth digit from it simply by assuming it to be a string. </p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">  $number = <span class="number">12345</span> * <span class="number">67890</span>;</div><div class="line">  <span class="keyword">echo</span> substr($number, <span class="number">3</span>, <span class="number">1</span>);</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<p>The same goes for turning a string into a number, and so on. </p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">  $pi     = <span class="string">"3.1415927"</span>;</div><div class="line">  $radius = <span class="number">5</span>;</div><div class="line">  <span class="keyword">echo</span> $pi * ($radius * $radius);</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h3 id="Implicit-and-Explicit-Casting"><a href="#Implicit-and-Explicit-Casting" class="headerlink" title="Implicit and Explicit Casting"></a>Implicit and Explicit Casting</h3><p>PHP is a loosely typed language that allows you to declare a variable and its type simply by using it. It also automatically converts values from one type to another whenever required. This is called implicit casting.</p>
<p>However, at times PHP’s implicit casting may not be what you want.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">  $a = <span class="number">56</span>;</div><div class="line">  $b = <span class="number">12</span>;</div><div class="line">  $c = $a / $b;</div><div class="line"></div><div class="line">  <span class="keyword">echo</span> $c;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<p>But what if we had wanted <code>$c</code> to be an integer instead? There are various ways in which we could achieve this, one of which is to force the result of <code>$a</code>/<code>$b</code> to be cast to an integer value using the integer cast type <code>(int)</code>, like this:</p>
<pre><code>$c = (int) ($a / $b);
</code></pre><p>You can explicitly cast to the types shown in flowing table, but you can usually avoid having to use a cast by calling one of PHP’s built-in functions. For example, to obtain an integer value, you could use the <code>intval</code> function. As with some other sections in this book, this one is mainly here to help you understand third-party code that you may encounter.</p>
<table>
<thead>
<tr>
<th>Cast type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>(int)</td>
<td>(integer) Cast to an integer by dropping the decimal portion</td>
</tr>
<tr>
<td>(bool)</td>
<td>(boolean)    Cast to a Boolean</td>
</tr>
<tr>
<td>(float)</td>
<td>(double) (real) Cast to a floating-point number</td>
</tr>
<tr>
<td>(string)</td>
<td>Cast to a string</td>
</tr>
<tr>
<td>(array)</td>
<td>Cast to an array</td>
</tr>
<tr>
<td>(object)</td>
<td>Cast to an object</td>
</tr>
</tbody>
</table>
<h3 id="Constants"><a href="#Constants" class="headerlink" title="Constants"></a>Constants</h3><p>Constants are similar to variables, holding information to be accessed later, except that they are what they sound like—constant. In other words, once you have defined one, its value is set for the remainder of the program and cannot be altered.</p>
<p>One example of a use for a constant is to hold the location of your server root (the folder with the main files of your website). You would define such a constant like this:</p>
<pre><code>define(&quot;ROOT_LOCATION&quot;, &quot;/usr/local/www/&quot;);
</code></pre><p>Then, to read the contents of the variable, you just refer to it like a regular variable (but it isn’t preceded by a dollar sign):</p>
<pre><code>$directory = ROOT_LOCATION;
</code></pre><p>The main two things you have to remember about constants are that they must <em>not</em> be prefaced with a <code>$</code> (as with regular variables), and that you can define them only using the <code>define</code> function.</p>
<h3 id="Predefined-Constants"><a href="#Predefined-Constants" class="headerlink" title="Predefined Constants"></a>Predefined Constants</h3><p>PHP comes ready-made with dozens of predefined constants that you generally will be unlikely to use as a beginner to PHP. However, there are a few—known as the magic constants—that you will find useful. The names of the magic constants always have two underscores at the beginning and two at the end, so that you won’t accidentally try to name one of your own constants with a name that is already taken.</p>
<table>
<thead>
<tr>
<th>Magic constant</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>LINE</strong></td>
<td>The current line number of the file.</td>
</tr>
<tr>
<td><strong>FILE</strong></td>
<td>The full path and filename of the file. If used inside an include, the name of the included file is returned. In PHP 4.0.2, <strong>FILE</strong> always contains an absolute path with symbolic links resolved, whereas in older versions it might contain a relative path under some circumstances.</td>
</tr>
<tr>
<td><strong>DIR</strong></td>
<td>The directory of the file. If used inside an include, the directory of the included file is returned. This is equivalent to dirname(<strong>FILE</strong>). This directory name does not have a trailing slash unless it is the root directory. (Added in PHP 5.3.0.)</td>
</tr>
<tr>
<td><strong>FUNCTION</strong></td>
<td>The function name. (Added in PHP 4.3.0.) As of PHP 5, returns the function name as it was declared (case-sensitive). In PHP 4, its value is always lowercase.</td>
</tr>
<tr>
<td><strong>CLASS</strong></td>
<td>The class name. (Added in PHP 4.3.0.) As of PHP 5, returns the class name as it was declared (case-sensitive). In PHP 4, its value is always lowercased.</td>
</tr>
<tr>
<td><strong>METHOD</strong></td>
<td>The class method name. (Added in PHP 5.0.0.) The method name is returned as it was declared (case-sensitive).</td>
</tr>
<tr>
<td><strong>NAMESPACE</strong></td>
<td>The name of the current namespace (case-sensitive). This constant is defined at compile time. (Added in PHP 5.3.0.)</td>
</tr>
</tbody>
</table>
<h3 id="Global-variables"><a href="#Global-variables" class="headerlink" title="Global variables"></a>Global variables</h3><p>To declare a variable as having global scope, use the keyword <code>global</code>. Let’s assume that you have a way of logging your users into your website and want all your code to know whether it is interacting with a logged-in user or a guest. One way to do this is to create a global variable such as <code>$is_logged_in</code>:</p>
<pre><code>global $is_logged_in;
</code></pre><p>Sometimes I adopt the convention of making all global variable names uppercase (just as it’s recommended that constants should be uppercase) so that I can see at a glance the scope of a variable.</p>
<h3 id="Static-variables"><a href="#Static-variables" class="headerlink" title="Static variables"></a>Static variables</h3><p>Here’s an interesting case. What if you have a local variable inside a function that you don’t want any other parts of your code to have access to, but you would also like to keep its value for the next time the function is called? Why? Perhaps because you want a counter to track how many times a function is called. The solution is to declare a static variable.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">()</span></span></div><div class="line">  &#123;</div><div class="line">    <span class="keyword">static</span> $count = <span class="number">0</span>;</div><div class="line">    <span class="keyword">echo</span> $count;</div><div class="line">    $count++;</div><div class="line">  &#125;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<p>If you plan to use static variables, you should note that you cannot assign the result of an expression in their definitions. They can be initialized only with predetermined values:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">  <span class="keyword">static</span> $int = <span class="number">0</span>;         <span class="comment">// Allowed</span></div><div class="line">  <span class="keyword">static</span> $int = <span class="number">1</span>+<span class="number">2</span>;       <span class="comment">// Disallowed (will produce a Parse error)</span></div><div class="line">  <span class="keyword">static</span> $int = sqrt(<span class="number">144</span>); <span class="comment">// Disallowed</span></div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h3 id="Superglobal-variables"><a href="#Superglobal-variables" class="headerlink" title="Superglobal variables"></a>Superglobal variables</h3><p>Starting with PHP 4.1.0, several predefined variables are available. These are known as superglobal variables, which means that they are provided by the PHP environment but are global within the program, accessible absolutely everywhere.<br>These superglobals contain lots of useful information about the currently running program and its environment:</p>
<table>
<thead>
<tr>
<th>Superglobal name</th>
<th>Contents</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$GLOBALS</code></td>
<td>All variables that are currently defined in the global scope of the script. The variable names are the keys of the array.</td>
</tr>
<tr>
<td><code>$_SERVER</code></td>
<td>Information such as headers, paths, and script locations. The entries in this array are created by the web server, and there is no guarantee that every web server will provide any or all of these.</td>
</tr>
<tr>
<td><code>$_GET</code></td>
<td>Variables passed to the current script via the HTTP Get method.</td>
</tr>
<tr>
<td><code>$_POST</code></td>
<td>Variables passed to the current script via the HTTP Post method.</td>
</tr>
<tr>
<td><code>$_FILES</code></td>
<td>Items uploaded to the current script via the HTTP Post method.</td>
</tr>
<tr>
<td><code>$_COOKIE</code></td>
<td>Variables passed to the current script via HTTP cookies.</td>
</tr>
<tr>
<td><code>$_SESSION</code></td>
<td>Session variables available to the current script.</td>
</tr>
<tr>
<td><code>$_REQUEST</code></td>
<td>Contents of information passed from the browser; by default, $_GET, $_POST, and $_COOKIE.</td>
</tr>
<tr>
<td><code>$_ENV</code></td>
<td>Variables passed to the current script via the environment method.</td>
</tr>
</tbody>
</table>
<p>All of the superglobals (except for <code>$GLOBALS</code>) are named with a single initial underscore and only capital letters; therefore, you should avoid naming your own variables in this manner to avoid potential confusion.</p>
<p>A word of caution is in order before you start using superglobal variables, because they are often used by hackers trying to find exploits to break into your website. What they do is load up <code>$_POST</code>, <code>$_GET</code>, or other superglobals with malicious code, such as Unix or MySQL commands that can damage or display sensitive data if you naïvely access them.Therefore, you should always sanitize superglobals before using them. One way to do this is via the PHP <code>htmlentities</code> function. It converts all characters into HTML entities. For example, less-than and greater-than characters (<code>&lt;</code> and <code>&gt;</code>) are transformed into the strings <code>&amp;lt;</code> and <code>&amp;gt;</code> so that they are rendered harmless, as are all quotes and backslashes, and so on.</p>
<p>Therefore, here is a much better way to access <code>$_SERVER</code> (and other superglobals) is:</p>
<pre><code>$came_from = htmlentities($_SERVER[&apos;HTTP_REFERER&apos;]);
</code></pre><p>Using the <code>htmlentities</code> function for sanitization is an important practice in any circumstance where user or other third-party data is being processed for output, not just with superglobals.</p>
<h2 id="Arrays"><a href="#Arrays" class="headerlink" title="Arrays"></a>Arrays</h2><p>Some arrays are referenced by numeric indices; others allow alphanumeric identifiers. </p>
<h3 id="Numerically-Indexed-Arrays"><a href="#Numerically-Indexed-Arrays" class="headerlink" title="Numerically Indexed Arrays"></a>Numerically Indexed Arrays</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">  $paper[] = &quot;Copier&quot;;</div><div class="line">  $paper[] = &quot;Inkjet&quot;;</div><div class="line">  $paper[] = &quot;Laser&quot;;</div><div class="line">  $paper[] = &quot;Photo&quot;;</div><div class="line"></div><div class="line">  print_r($paper);</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>In this example, each time you assign a value to the array <code>$paper</code>, the first empty location within that array is used to store the value, and a pointer internal to PHP is incremented to point to the next free location, ready for future insertions.</p>
<p>The previous code could also have been written:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">  $paper[0] = &quot;Copier&quot;;</div><div class="line">  $paper[1] = &quot;Inkjet&quot;;</div><div class="line">  $paper[2] = &quot;Laser&quot;;</div><div class="line">  $paper[3] = &quot;Photo&quot;;</div><div class="line"></div><div class="line">  print_r($paper);</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>So unless you wish to specify a different order, it’s usually better to simply let PHP handle the actual location numbers.</p>
<h3 id="Associative-Arrays"><a href="#Associative-Arrays" class="headerlink" title="Associative Arrays"></a>Associative Arrays</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">  $paper[&apos;copier&apos;] = &quot;Copier &amp; Multipurpose&quot;;</div><div class="line">  $paper[&apos;inkjet&apos;] = &quot;Inkjet Printer&quot;;</div><div class="line">  $paper[&apos;laser&apos;]  = &quot;Laser Printer&quot;;</div><div class="line">  $paper[&apos;photo&apos;]  = &quot;Photographic Paper&quot;;</div><div class="line"></div><div class="line">  echo $paper[&apos;laser&apos;];</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>In place of a number (which doesn’t convey any useful information, aside from the position of the item in the array), each item now has a unique name that you can use to reference it elsewhere.</p>
<p>This very powerful feature of PHP is often used when you are extracting information from XML and HTML. For example, an HTML parser such as those used by a search engine could place all the elements of a web page into an associative array whose names reflect the page’s structure:</p>
<pre><code>$html[&apos;title&apos;] = &quot;My web page&quot;;
$html[&apos;body&apos;]  = &quot;... body of web page ...&quot;;
</code></pre><p>The program would also probably break down all the links found within a page into another array, and all the headings and subheadings into another. When you use associative rather than numeric arrays, the code to refer to all of these items is easy to write and debug.</p>
<h3 id="Assignment-Using-the-array-Keyword"><a href="#Assignment-Using-the-array-Keyword" class="headerlink" title="Assignment Using the array Keyword"></a>Assignment Using the array Keyword</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">  $p1 = array(&quot;Copier&quot;, &quot;Inkjet&quot;, &quot;Laser&quot;, &quot;Photo&quot;);</div><div class="line"></div><div class="line">  echo &quot;p1 element: &quot; . $p1[2] . &quot;&lt;br&gt;&quot;;</div><div class="line"></div><div class="line">  $p2 = array(&apos;copier&apos; =&gt; &quot;Copier &amp; Multipurpose&quot;,</div><div class="line">              &apos;inkjet&apos; =&gt; &quot;Inkjet Printer&quot;,</div><div class="line">              &apos;laser&apos;  =&gt; &quot;Laser Printer&quot;,</div><div class="line">              &apos;photo&apos;  =&gt; &quot;Photographic Paper&quot;);</div><div class="line"></div><div class="line">  echo &quot;p2 element: &quot; . $p2[&apos;inkjet&apos;] . &quot;&lt;br&gt;&quot;;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>The first half of this snippet assigns the old, shortened product descriptions to the array <code>$p1</code>. There are four items, so they will occupy slots 0 through 3. </p>
<p>The second half assigns associative identifiers and accompanying longer product descriptions to the array <code>$p2</code> using the format <em><code>index</code></em> <code>=&gt;</code> <em><code>value</code></em>.</p>
<h3 id="The-foreach…as-Loop"><a href="#The-foreach…as-Loop" class="headerlink" title="The foreach…as Loop"></a>The foreach…as Loop</h3><p>Numberic array:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">  $paper = array(&quot;Copier&quot;, &quot;Inkjet&quot;, &quot;Laser&quot;, &quot;Photo&quot;);</div><div class="line">  $j = 0;</div><div class="line"></div><div class="line">  foreach($paper as $item)</div><div class="line">  &#123;</div><div class="line">    echo &quot;$j: $item&lt;br&gt;&quot;;</div><div class="line">    ++$j;</div><div class="line">  &#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>Now let’s see how foreach works with an associative array:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">  $paper = array(&apos;copier&apos; =&gt; &quot;Copier &amp; Multipurpose&quot;,</div><div class="line">                 &apos;inkjet&apos; =&gt; &quot;Inkjet Printer&quot;,</div><div class="line">                 &apos;laser&apos;  =&gt; &quot;Laser Printer&quot;,</div><div class="line">                 &apos;photo&apos;  =&gt; &quot;Photographic Paper&quot;);</div><div class="line"></div><div class="line">  foreach($paper as $item =&gt; $description)</div><div class="line">    echo &quot;$item: $description&lt;br&gt;&quot;;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>Each item of the array <code>$paper</code> is fed into the key/value pair of variables <code>$item</code> and <code>$description</code>, from which they are printed out. </p>
<p>As an alternative syntax to <code>foreach...as</code>, you can use the <code>list</code> function in conjunction with the <code>each</code> function:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">  $paper = array(&apos;copier&apos; =&gt; &quot;Copier &amp; Multipurpose&quot;,</div><div class="line">                 &apos;inkjet&apos; =&gt; &quot;Inkjet Printer&quot;,</div><div class="line">                 &apos;laser&apos;  =&gt; &quot;Laser Printer&quot;,</div><div class="line">                 &apos;photo&apos;  =&gt; &quot;Photographic Paper&quot;);</div><div class="line"></div><div class="line">  while (list($item, $description) = each($paper))</div><div class="line">    echo &quot;$item: $description&lt;br&gt;&quot;;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>A <code>while</code> loop is set up and will continue looping until <code>each</code> returns a value of <code>FALSE</code>. The <code>each</code> function acts like <code>foreach</code>: it returns an array containing a key/value pair from the array <code>$paper</code> and then moves its built-in pointer to the next pair in that array. When there are no more pairs to return, <code>each</code> returns <code>FALSE</code>.</p>
<p>The <code>list</code> function takes an array as its argument (in this case, the key/value pair returned by the function <code>each</code>) and then assigns the values of the array to the variables listed within parentheses.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">  list($a, $b) = array(&apos;Alice&apos;, &apos;Bob&apos;);</div><div class="line">  echo &quot;a=$a b=$b&quot;;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>So you can take your pick when walking through arrays. Use <code>foreach...as</code> to create a loop that extracts values to the variable following the <code>as</code>, or use the <code>each</code> function and create your own looping system.</p>
<h3 id="Using-Array-Functions"><a href="#Using-Array-Functions" class="headerlink" title="Using Array Functions"></a>Using Array Functions</h3><p>See <a href="http://php.net/manual/en/ref.array.php" target="_blank" rel="external">PHP: Array Functions - Manual</a></p>
<h2 id="printf"><a href="#printf" class="headerlink" title="printf"></a>printf</h2><h3 id="echo-and-print"><a href="#echo-and-print" class="headerlink" title="echo and print"></a>echo and print</h3><p>The two commands are quite similar, but <code>print</code> is a function-like construct that takes a single parameter and has a return value (which is always <code>1</code>), whereas <code>echo</code> is purely a PHP language construct. </p>
<p>By and large, the <code>echo</code> command will be a tad faster than <code>print</code> in general text output, because it doesn’t set a return value. On the other hand, because it isn’t implemented like a function, <code>echo</code> cannot be used as part of a more complex expression, whereas <code>print</code> can. Here’s an example to output whether the value of a variable is <code>TRUE</code> or <code>FALSE</code> using <code>print</code>, something you could not perform in the same manner with <code>echo</code>, because it would display a <code>Parse error</code> message:</p>
<pre><code>$b ? print &quot;TRUE&quot; : print &quot;FALSE&quot;;
</code></pre><p>A much more powerful function, <code>printf</code>, controls the format of the output by letting you put special formatting characters in a string.</p>
<p>For instance, the following example uses the <code>%d</code> conversion specifier to display the value <code>3</code> in decimal:</p>
<pre><code>printf(&quot;There are %d items in your basket&quot;, 3);
</code></pre><p>If you replace the <code>%d</code> with <code>%b</code>, the value <code>3</code> would be displayed in binary (<code>11</code>). </p>
<table>
<thead>
<tr>
<th>Specifier</th>
<th>Conversion action on argument arg</th>
<th>Example (for an arg of 123)</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>%</code></td>
<td>Display a % character (no arg required)</td>
<td>%</td>
</tr>
<tr>
<td><code>b</code></td>
<td>Display arg as a binary integer</td>
<td>1111011</td>
</tr>
<tr>
<td><code>c</code></td>
<td>Display ASCII character for the arg</td>
<td>{</td>
</tr>
<tr>
<td><code>d</code></td>
<td>Display arg as a signed decimal integer</td>
<td>123</td>
</tr>
<tr>
<td><code>e</code></td>
<td>Display arg using scientific notation</td>
<td>1.23000e+2</td>
</tr>
<tr>
<td><code>f</code></td>
<td>Display arg as floating point</td>
<td>123.000000</td>
</tr>
<tr>
<td><code>o</code></td>
<td>Display arg as an octal integer</td>
<td>173</td>
</tr>
<tr>
<td><code>s</code></td>
<td>Display arg as a string</td>
<td>123</td>
</tr>
<tr>
<td><code>u</code></td>
<td>Display arg as an unsigned decimal</td>
<td>123</td>
</tr>
<tr>
<td><code>x</code></td>
<td>Display arg in lowercase hexadecimal</td>
<td>7b</td>
</tr>
<tr>
<td><code>X</code></td>
<td>Display arg in uppercase hexadecimal</td>
<td>7B</td>
</tr>
</tbody>
</table>
<p>You can have as many specifiers as you like in a <code>printf</code> function, as long as you pass a matching number of arguments, and as long as each specifier is prefaced by a <code>%</code> symbol. Therefore, the following code is valid, and will output <code>&quot;My name is Simon. I&#39;m 33 years old, which is 21 in hexadecimal&quot;</code>:</p>
<pre><code>printf(&quot;My name is %s. I&apos;m %d years old, which is %X in hexadecimal&quot;, &apos;Simon&apos;, 33, 33);
</code></pre><p>A more practical example of <code>printf</code> sets colors in HTML using decimal. For example, suppose you know you want a color that has a triplet value of 65 red, 127 green, and 245 blue, but don’t want to convert this to hexadecimal yourself. Here’s an easy solution is:</p>
<pre><code>printf(&quot;&lt;span style=&apos;color:#%X%X%X&apos;&gt;Hello&lt;/span&gt;&quot;, 65, 127, 245);
</code></pre><p>Check the format of the color specification between the apostrophes (<code>&#39;&#39;</code>) carefully. First comes the pound, or hash, sign (<code>#</code>) expected by the color specification. Then come three <code>%X</code> format specifiers, one for each of your numbers. The resulting output from this command is as follows:</p>
<pre><code>&lt;span style=&apos;color:#417FF5&apos;&gt;Hello&lt;/span&gt;
</code></pre><h3 id="Precision-Setting"><a href="#Precision-Setting" class="headerlink" title="Precision Setting"></a>Precision Setting</h3><p>Not only can you specify a conversion type, but you can also set the precision of the displayed result. </p>
<pre><code>printf(&quot;The result is: $%.2f&quot;, 123.42 / 12); // The result is $10.29
</code></pre><p>You can also specify whether to pad output with either zeros or spaces by prefacing the specifier with certain values.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">  <span class="keyword">echo</span> <span class="string">"&lt;pre&gt;"</span>; <span class="comment">// Enables viewing of the spaces</span></div><div class="line"></div><div class="line">  <span class="comment">// Pad to 15 spaces</span></div><div class="line">  printf(<span class="string">"The result is $%15f\n"</span>, <span class="number">123.42</span> / <span class="number">12</span>); <span class="comment">//  $      10.285000</span></div><div class="line"></div><div class="line">  <span class="comment">// Pad to 15 spaces, fill with zeros</span></div><div class="line">  printf(<span class="string">"The result is $%015f\n"</span>, <span class="number">123.42</span> / <span class="number">12</span>); <span class="comment">// $00000010.285000</span></div><div class="line"></div><div class="line">  <span class="comment">// Pad to 15 spaces, 2 decimal places precision</span></div><div class="line">  printf(<span class="string">"The result is $%15.2f\n"</span>, <span class="number">123.42</span> / <span class="number">12</span>); <span class="comment">// $          10.29</span></div><div class="line"></div><div class="line">  <span class="comment">// Pad to 15 spaces, 2 decimal places precision, fill with zeros</span></div><div class="line">  printf(<span class="string">"The result is $%015.2f\n"</span>, <span class="number">123.42</span> / <span class="number">12</span>); <span class="comment">// $000000000010.29</span></div><div class="line"></div><div class="line">  <span class="comment">// Pad to 15 spaces, 2 decimal places precision, fill with # symbol</span></div><div class="line">  printf(<span class="string">"The result is $%'#15.2f\n"</span>, <span class="number">123.42</span> / <span class="number">12</span>); <span class="comment">// $##########10.29</span></div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h3 id="String-Padding"><a href="#String-Padding" class="headerlink" title="String Padding"></a>String Padding</h3><p>You can also pad strings to required lengths (as you can with numbers), select different padding characters, and even choose between left and right justification.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">  <span class="keyword">echo</span> <span class="string">"&lt;pre&gt;"</span>; <span class="comment">// Enables viewing of the spaces</span></div><div class="line"></div><div class="line">  $h = <span class="string">'Rasmus'</span>;</div><div class="line"></div><div class="line">  <span class="comment">// [Rasmus]</span></div><div class="line">  printf(<span class="string">"[%s]\n"</span>,         $h); <span class="comment">// Standard string output</span></div><div class="line">  </div><div class="line">  <span class="comment">// [      Rasmus]</span></div><div class="line">  printf(<span class="string">"[%12s]\n"</span>,       $h); <span class="comment">// Right justify with spaces to width 12</span></div><div class="line"></div><div class="line">  <span class="comment">// [Rasmus      ]</span></div><div class="line">  printf(<span class="string">"[%-12s]\n"</span>,      $h); <span class="comment">// Left justify with spaces</span></div><div class="line"></div><div class="line">  <span class="comment">// [000000Rasmus]</span></div><div class="line">  printf(<span class="string">"[%012s]\n"</span>,      $h); <span class="comment">// Zero padding</span></div><div class="line"></div><div class="line">  <span class="comment">// [######Rasmus]</span></div><div class="line">  printf(<span class="string">"[%'#12s]\n\n"</span>,   $h); <span class="comment">// Use the custom padding character '#'</span></div><div class="line"></div><div class="line">  $d = <span class="string">'Rasmus Lerdorf'</span>;        <span class="comment">// The original creator of PHP</span></div><div class="line"></div><div class="line">  <span class="comment">// [    Rasmus L]</span></div><div class="line">  printf(<span class="string">"[%12.8s]\n"</span>,     $d); <span class="comment">// Right justify, cutoff of 8 characters</span></div><div class="line"></div><div class="line">  <span class="comment">// [Rasmus Lerdo]</span></div><div class="line">  printf(<span class="string">"[%-12.12s]\n"</span>,   $d); <span class="comment">// Left justify, cutoff of 12 characters</span></div><div class="line"></div><div class="line">  <span class="comment">// [Rasmus Ler@@]</span></div><div class="line">  printf(<span class="string">"[%-'@12.10s]\n"</span>, $d); <span class="comment">// Left justify, pad '@', cutoff 10 chars</span></div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h3 id="Using-sprintf"><a href="#Using-sprintf" class="headerlink" title="Using sprintf"></a>Using sprintf</h3><p>Often, you don’t want to output the result of a conversion but need it to use elsewhere in your code. This is where the <code>sprintf</code> function comes in. With it, you can send the output to another variable rather than to the browser.You might use it to make a conversion, as in the following example, which returns the hexadecimal string value for the RGB color group 65, 127, 245 in <code>$hexstring</code>:</p>
<pre><code>$hexstring = sprintf(&quot;%X%X%X&quot;, 65, 127, 245);
</code></pre><p>Or you may wish to store output ready to display later on:</p>
<pre><code>$out = sprintf(&quot;The result is: $%.2f&quot;, 123.42 / 12);
echo $out;
</code></pre><h2 id="Date-and-Time"><a href="#Date-and-Time" class="headerlink" title="Date and Time"></a>Date and Time</h2><p>To keep track of the date and time, PHP uses standard Unix timestamps, which are simply the number of seconds since the start of January 1, 1970. To determine the current timestamp, you can use the <code>time</code> function:</p>
<pre><code>echo time();
</code></pre><p>Because the value is stored as seconds, to obtain the timestamp for this  time next week, you would use the following, which adds 7 days times 24 hours times 60 minutes times 60 seconds to the returned value:</p>
<pre><code>echo time() + 7 * 24 * 60 * 60;
</code></pre><p>If you wish to create a timestamp for a given date, you can use the <code>mktime</code> function. Its output is the timestamp <code>946684800</code> for the first second of the first minute of the first hour of the first day of the year 2000:</p>
<pre><code>echo mktime(0, 0, 0, 1, 1, 2000); // (hour, minute, seconds, month, day, year)
</code></pre><p>To display the date, use the <code>date</code> function, which supports a plethora of formatting options, enabling you to display the date any way you wish. The format is as follows:</p>
<pre><code>date($format, $timestamp);
</code></pre><p>The parameter <code>$format</code> should be a string containing formatting specifiers as bellowing, and <code>$timestamp</code> should be a Unix timestamp. See <a href="http://php.net/manual/en/function.date.php" target="_blank" rel="external">PHP: date - Manual</a>.</p>
<table>
<thead>
<tr>
<th>Format</th>
<th>Description</th>
<th>Returned value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Day specifiers</td>
<td></td>
<td></td>
</tr>
<tr>
<td>d</td>
<td>Day of month, two digits, with leading zeros</td>
<td>01 to 31</td>
</tr>
<tr>
<td>D</td>
<td>Day of the week, three letters</td>
<td>Mon to Sun</td>
</tr>
<tr>
<td>j</td>
<td>Day of the month, no leading zeros</td>
<td>1 to 31</td>
</tr>
<tr>
<td>l</td>
<td>Day of week, full names Sunday to Saturday</td>
</tr>
<tr>
<td>N</td>
<td>Day of week, numeric, Monday to Sunday</td>
<td>1 to 7</td>
</tr>
<tr>
<td>S</td>
<td>Suffix for day of month (useful with specifier j)</td>
<td>st, nd, rd, or th</td>
</tr>
<tr>
<td>w</td>
<td>Day of week, numeric, Sunday to Saturday</td>
<td>0 to 6</td>
</tr>
<tr>
<td>z</td>
<td>Day of year</td>
<td>0 to 365</td>
</tr>
<tr>
<td>Week specifier</td>
<td></td>
<td></td>
</tr>
<tr>
<td>W</td>
<td>Week number of year</td>
<td>01 to 52</td>
</tr>
<tr>
<td>Month specifiers</td>
<td></td>
<td></td>
</tr>
<tr>
<td>F</td>
<td>Month name</td>
<td>January to December</td>
</tr>
<tr>
<td>m</td>
<td>Month number with leading zeros</td>
<td>01 to 12</td>
</tr>
<tr>
<td>M</td>
<td>Month name, three letters</td>
<td>Jan to Dec</td>
</tr>
<tr>
<td>n</td>
<td>Month number, no leading zeros</td>
<td>1 to 12</td>
</tr>
<tr>
<td>t</td>
<td>Number of days in given month</td>
<td>28 to 31</td>
</tr>
<tr>
<td>Year specifiers</td>
<td></td>
<td></td>
</tr>
<tr>
<td>L</td>
<td>Leap year</td>
<td>1 = Yes, 0 = No</td>
</tr>
<tr>
<td>y</td>
<td>Year, 2 digits</td>
<td>00 to 99</td>
</tr>
<tr>
<td>Y</td>
<td>Year, 4 digits</td>
<td>0000 to 9999</td>
</tr>
<tr>
<td>Time specifiers</td>
<td></td>
<td></td>
</tr>
<tr>
<td>a</td>
<td>Before or after midday, lowercase</td>
<td>am or pm</td>
</tr>
<tr>
<td>A</td>
<td>Before or after midday, uppercase</td>
<td>AM or PM</td>
</tr>
<tr>
<td>g</td>
<td>Hour of day, 12-hour format, no leading zeros</td>
<td>1 to 12</td>
</tr>
<tr>
<td>G</td>
<td>Hour of day, 24-hour format, no leading zeros</td>
<td>00 to 23</td>
</tr>
<tr>
<td>h</td>
<td>Hour of day, 12-hour format, with leading zeros</td>
<td>01 to 12</td>
</tr>
<tr>
<td>H</td>
<td>Hour of day, 24-hour format, with leading zeros</td>
<td>00 to 23</td>
</tr>
<tr>
<td>i</td>
<td>Minutes, with leading zeros</td>
<td>00 to 59</td>
</tr>
<tr>
<td>s</td>
<td>Seconds, with leading zeros</td>
<td>00 to 59</td>
</tr>
</tbody>
</table>
<h3 id="Dates-Times-and-Time-Zones"><a href="#Dates-Times-and-Time-Zones" class="headerlink" title="Dates, Times, and Time Zones"></a>Dates, Times, and Time Zones</h3><p>Working with dates and times is hard. Pretty much every PHP developer has, at one time or another, made a mistake working with dates and times. This is precisely why I recommend you do not manage dates and times on your own. There are too many considerations to juggle, including date formats, time zones, daylight saving, leap years, leap seconds, and months with variable numbers of days. It’s too easy for your own calculations to become inaccurate. Instead, use the <code>DateTime</code>, <code>DateInterval</code>, and <code>DateTimeZone</code> classes introduced in PHP 5.2.0. These helpful classes provide a simple object-oriented interface to accurately create and manipulate dates, times, and timezones.</p>
<h3 id="Set-a-Default-Time-Zone"><a href="#Set-a-Default-Time-Zone" class="headerlink" title="Set a Default Time Zone"></a>Set a Default Time Zone</h3><p>The first thing you should do is declare a default time zone for PHP’s date and time functions. If you don’t set a default time zone, PHP shows an <code>E_WARNING</code> message. There are two ways to set the default time zone. You can declare the default time zone in the <em>php.ini</em> file like this:</p>
<pre><code>date.timezone = &apos;America/New_York&apos;;
</code></pre><p>You can also declare the default time zone during runtime with the <code>date_default_timezone_set()</code> function.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">date_default_timezone_set(&apos;America/New_York&apos;);</div></pre></td></tr></table></figure>
<p>Either solution requires a valid time-zone identifier. You can find a complete list of PHP time-zone identifiers at <a href="http://php.net/manual/timezones.php" target="_blank" rel="external">http://php.net/manual/timezones.php</a>.</p>
<h3 id="The-DateTime-Class"><a href="#The-DateTime-Class" class="headerlink" title="The DateTime Class"></a>The DateTime Class</h3><p>The <code>DateTime</code> class provides an object-oriented interface to manage date and time values. A single <code>DateTime</code> instance represents a specific date and time. The <code>DateTime</code> class constructor is the simplest way to create a new <code>DateTime</code> instance.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">$datetime = new DateTime();</div></pre></td></tr></table></figure>
<p>Without arguments, the <code>DateTime</code> class constructor creates an instance that represents the current date and time. You can pass a string argument into the <code>DateTime</code> class constructor to specify a custom date and time (Example 5-11). The string argument must use one of the valid date and time formats listed at <a href="http://php.net/manual/datetime.formats.php" target="_blank" rel="external">http://php.net/manual/datetime.formats.php</a>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">$datetime = new DateTime(&apos;2014-04-27 5:03 AM&apos;);</div></pre></td></tr></table></figure>
<p>In an ideal world, you are given date and time data in a format that PHP understands. Unfortunately, this is not always the case. Sometimes you must work with date and time values in different and unexpected formats. I experience this problem on a daily basis. Many of my clients send Excel spreadsheets with data to import into an application, and each client provides date and time values in wildly different formats. The <code>DateTime</code> class makes this a nonissue.</p>
<p>Use the <code>DateTime::createFromFormat()</code> static method to create a <code>DateTime</code> instance with a date and time string that uses a custom format. This method’s first argument is the date and time string <em>format</em>. The second argument is the date and time string that uses said format:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">$datetime = DateTime::createFromFormat(&apos;M j, Y H:i:s&apos;, &apos;Jan 2, 2014 23:04:12&apos;);</div></pre></td></tr></table></figure>
<p>The <code>DateTime::createFromFormat()</code> static method accepts the same date and time formats as the <code>date()</code> function. Valid date and time formats are available at <a href="http://php.net/manual/datetime.createfromformat.php" target="_blank" rel="external">http://php.net/manual/datetime.createfromformat.php</a>.</p>
<h3 id="The-DateInterval-Class"><a href="#The-DateInterval-Class" class="headerlink" title="The DateInterval Class"></a>The DateInterval Class</h3><p>The <code>DateInterval</code> class is pretty much prerequisite knowledge for manipulating <code>DateTime</code> instances. A <code>DateInterval</code> instance represents a fixed length of time (e.g., “two days”) or a relative length of time (e.g., “yesterday”). You use <code>DateInterval</code> instances to modify <code>DateTime</code> instances. For example, the <code>DateTime</code> class provides <code>add()</code> and <code>sub()</code> methods to manipulate a <code>DateTime</code> instance’s value. Both methods accept a <code>DateInterval</code> argument that specifies the amount of time added to or subtracted from a <code>DateTime</code> instance.</p>
<p>Instantiate the <code>DateInterval</code> class with its constructor. The <code>DateInterval</code> class constructor accepts a string argument that provides an <em>interval specification</em>. Interval specifications are a little tricky at first, but there’s not much to them. First, an interval specification is a string that begins with the letter <code>P</code>. Next, you append an integer. And last, you append a <em>period designator</em> that qualifies the preceding integer value. Valid period designators are:* <code>Y</code> (years)</p>
<ul>
<li><code>M</code> (months)</li>
<li><code>D</code> (days)</li>
<li><code>W</code> (weeks)</li>
<li><code>H</code> (hours)</li>
<li><code>M</code> (minutes)</li>
<li><code>S</code> (seconds)</li>
</ul>
<p>An interval specification can include both date and time values. If you include a time value, separate the date and time parts with the letter <code>T</code>. For example, the interval specification <code>P2D</code> means <em>two days</em>. The interval specification <code>P2DT5H2M</code> means <em>two days, five hours, and two minutes</em>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">// Create DateTime instance</div><div class="line">$datetime = new DateTime(&apos;2014-01-01 14:00:00&apos;);</div><div class="line"></div><div class="line">// Create two weeks interval</div><div class="line">$interval = new DateInterval(&apos;P2W&apos;);</div><div class="line"></div><div class="line">// Modify DateTime instance</div><div class="line">$datetime-&gt;add($interval);</div><div class="line">echo $datetime-&gt;format(&apos;Y-m-d H:i:s&apos;);</div></pre></td></tr></table></figure>
<p>You can create an <em>inverted</em> <code>DateInterval</code>, too. This lets you traverse a <code>DatePeriod</code> instance in reverse chronology!</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$dateStart = new \DateTime();</div><div class="line">$dateInterval = \DateInterval::createFromDateString(&apos;-1 day&apos;);</div><div class="line">$datePeriod = new \DatePeriod($dateStart, $dateInterval, 3);</div><div class="line">foreach ($datePeriod as $date) &#123;</div><div class="line">    echo $date-&gt;format(&apos;Y-m-d&apos;), PHP_EOL;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>This outputs:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">2014-12-08</div><div class="line">2014-12-07</div><div class="line">2014-12-06</div><div class="line">2014-12-05</div></pre></td></tr></table></figure>
<h3 id="The-DateTimeZone-Class"><a href="#The-DateTimeZone-Class" class="headerlink" title="The DateTimeZone Class"></a>The DateTimeZone Class</h3><p>If your application caters to an international clientele, you’ve probably wrestled with time zones. Time zones are tricky, and they are a constant source of confusion for many PHP developers.</p>
<p>PHP represents time zones with the <code>DateTimeZone</code> class. All you have to do is pass a valid time-zone identifier into the <code>DateTimeZone</code> class constructor:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">$timezone = new DateTimeZone(&apos;America/New_York&apos;);</div></pre></td></tr></table></figure>
<p>Find a complete list of valid time-zone identifiers at <a href="http://php.net/manual/timezones.php" target="_blank" rel="external">http://php.net/manual/timezones.php</a>.</p>
<p>You often use <code>DateTimeZone</code> instances when creating <code>DateTime</code> instances. The <code>DateTime</code> class constructor’s optional second argument is a <code>DateTimeZone</code> instance. The <code>DateTime</code> instance’s value, and all modifications to its value, are now relative to the specified time zone. If you omit the constructor’s second argument, the time zone is determined by your default time-zone setting:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">$timezone = new DateTimeZone(&apos;America/New_York&apos;);</div><div class="line">$datetime = new DateTime(&apos;2014-08-20&apos;, $timezone);</div></pre></td></tr></table></figure>
<p>You can change a <code>DateTime</code> instance’s time zone after instantiation with the <code>setTimezone()</code> method:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">$timezone = new DateTimeZone(&apos;America/New_York&apos;);</div><div class="line">$datetime = new \DateTime(&apos;2014-08-20&apos;, $timezone);</div><div class="line">$datetime-&gt;setTimezone(new DateTimeZone(&apos;Asia/Hong_Kong&apos;));</div></pre></td></tr></table></figure>
<p>I find it easiest if I always work in the <code>UTC</code> time zone. My server’s time zone is <code>UTC</code>, and my PHP default time zone is <code>UTC</code>. If I persist date and time values into a database, I save them as the <code>UTC</code> timezone. I convert the <code>UTC</code> date and time values to the appropriate time zone when I display the data to application users.</p>
<h3 id="The-DatePeriod-Class"><a href="#The-DatePeriod-Class" class="headerlink" title="The DatePeriod Class"></a>The DatePeriod Class</h3><p>Sometimes you need to iterate a sequence of dates and times that recur over a specific interval of time. Repeating calendar events are a good example. The <code>DatePeriod</code> class solves this problem. The <code>DatePeriod</code> class constructor accepts three required arguments:* A <code>DateTime</code> instance that represents the date and time from which iteration begins</p>
<ul>
<li>A <code>DateInterval</code> instance that represents the interval of time between subsequent dates and times </li>
<li>An integer that represents the number of total iterations A <code>DatePeriod</code> instance is an iterator, and each iteration yields a <code>DateTime</code> instance. </li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">$start = new DateTime();</div><div class="line">$interval = new DateInterval(&apos;P2W&apos;);</div><div class="line">$period = new DatePeriod($start, $interval, 3);</div><div class="line"></div><div class="line">foreach ($period as $nextDateTime) &#123;</div><div class="line">    echo $nextDateTime-&gt;format(&apos;Y-m-d H:i:s&apos;), PHP_EOL;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The <code>DatePeriod</code> class constructor accepts an optional fourth argument that specifies the period’s explicit end date and time. If you want to exclude the start date from the period’s iteration, pass the <code>DatePeriod::EXCLUDE_START_DATE</code> constant as the final constructor argument.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">$start = new DateTime();</div><div class="line">$interval = new DateInterval(&apos;P2W&apos;);</div><div class="line">$period = new DatePeriod(</div><div class="line">    $start,</div><div class="line">    $interval,</div><div class="line">    3,</div><div class="line">    DatePeriod::EXCLUDE_START_DATE</div><div class="line">);</div><div class="line"></div><div class="line">foreach ($period as $nextDateTime) &#123;</div><div class="line">    echo $nextDateTime-&gt;format(&apos;Y-m-d H:i:s&apos;), PHP_EOL;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="The-nesbot-carbon-Component"><a href="#The-nesbot-carbon-Component" class="headerlink" title="The nesbot/carbon Component"></a>The nesbot/carbon Component</h3><p>If you work with dates and times more often than not, you should use Brian Nesbitt’s <a href="https://github.com/briannesbitt/Carbon" target="_blank" rel="external"><code>nesbot/carbon</code></a> PHP component. Carbon provides a simple user interface with many useful methods for working with date and time values.</p>
<h2 id="Using-Regular-Expressions-in-PHP"><a href="#Using-Regular-Expressions-in-PHP" class="headerlink" title="Using Regular Expressions in PHP"></a>Using Regular Expressions in PHP</h2><p>The most common regular expression functions that you are likely to use in PHP are <code>preg_match</code>, <code>preg_match_all</code>, and <code>preg_replace</code>.</p>
<p>To test whether the word <em>cats</em> appears anywhere within a string, in any combination of upper- and lowercase, you could use <code>preg_match</code> like this:</p>
<pre><code>$n = preg_match(&quot;/cats/i&quot;, &quot;Cats are crazy. I like cats.&quot;);
</code></pre><p>Because PHP uses <code>1</code> for <code>TRUE</code> and <code>0</code> for <code>FALSE</code>, the preceding statement sets <code>$n</code> to <code>1</code>. The first argument is the regular expression, and the second is the text to match. But <code>preg_match</code> is actually a good deal more powerful and complicated, because it takes a third argument that shows what text matched:</p>
<pre><code>$n = preg_match(&quot;/cats/i&quot;, &quot;Cats are curious. I like cats.&quot;, $match);
echo &quot;$n Matches: $match[0]&quot;;
</code></pre><p>The third argument is an array (here, given the name <code>$match</code>). The function puts the text that matches into the first element, so if the match is successful, you can find the text that matched in <code>$match[0]</code>. In this example, the output lets us know that the matched text was capitalized:</p>
<pre><code>**1 Matches: Cats**
</code></pre><p>If you wish to locate all matches, you use the <code>preg_match_all</code> function, like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$n = preg_match_all(&quot;/cats/i&quot;, &quot;Cats are strange. I like cats.&quot;, $match);</div><div class="line">echo &quot;$n Matches: &quot;;</div><div class="line">for ($j=0 ; $j &lt; $n ; ++$j) echo $match[0][$j].&quot; &quot;;</div></pre></td></tr></table></figure>
<p>As before, <code>$match</code> is passed to the function and the element <code>$match[0]</code> is assigned the matches made, but this time as a subarray. To display the subarray, this example iterates through it with a <code>for</code> loop.</p>
<p>When you want to replace part of a string, you can use <code>preg_replace</code> as shown here. This example replaces all occurrences of the word <em>cats</em> with the word <em>dogs</em>, regardless of case:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">echo preg_replace(&quot;/cats/i&quot;, &quot;dogs&quot;, &quot;Cats are furry. I like cats.&quot;);</div></pre></td></tr></table></figure>
<h2 id="Including-and-Requiring-Files"><a href="#Including-and-Requiring-Files" class="headerlink" title="Including and Requiring Files"></a>Including and Requiring Files</h2><p>As you progress in your use of PHP programming, you are likely to start building a library of functions that you think you will need again. You’ll also probably start using libraries created by other programmers.There’s no need to copy and paste these functions into your code. You can save them in separate files and use commands to pull them in. There are two types of command to perform this action: <code>include</code> and <code>require</code>.</p>
<p>Using <code>include</code>, you can tell PHP to fetch a particular file and load all its contents. </p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">  <span class="keyword">include</span> <span class="string">"library.php"</span>;</div><div class="line"></div><div class="line">  <span class="comment">// Your code goes here</span></div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<p>Each time you issue the <code>include</code> directive, it includes the requested file again, even if you’ve already inserted it. For instance, suppose that <em>library.php</em> contains a lot of useful functions, so you include it in your file, but also include another library that includes <em>library.php</em>. Through nesting, you’ve inadvertently included <em>library.php</em> twice. This will produce error messages, because you’re trying to define the same constant or function multiple times. So you should use <code>include_once</code> instead. </p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">  <span class="keyword">include_once</span> <span class="string">"library.php"</span>;</div><div class="line"></div><div class="line">  <span class="comment">// Your code goes here</span></div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<p>Then, whenever another <code>include</code> or <code>include_once</code> is encountered, if it has already been executed, it will be completely ignored. To determine whether the file has already been executed, the absolute file path is matched after all relative paths are resolved and the file is found in your <code>include</code> path.</p>
<p>In general, it’s probably best to stick with <code>include_once</code> and ignore the basic <code>include</code> statement. That way, you will never have the problem of files being included multiple times.</p>
<p>A potential problem with <code>include</code> and <code>include_once</code> is that PHP will only <em>attempt</em> to include the requested file. Program execution continues even if the file is not found.</p>
<p>When it is absolutely essential to include a file, <code>require</code> it. For the same reasons I gave for using <code>include_once</code>, I recommend that you generally stick with <code>require_once</code> whenever you need to <code>require</code> a file:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">  <span class="keyword">require_once</span> <span class="string">"library.php"</span>;</div><div class="line"></div><div class="line">  <span class="comment">// Your code goes here</span></div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h2 id="PHP-Version-Compatibility"><a href="#PHP-Version-Compatibility" class="headerlink" title="PHP Version Compatibility"></a>PHP Version Compatibility</h2><p>PHP is in an ongoing process of development, and there are multiple versions. If you need to check whether a particular function is available to your code, you can use the <code>function_exists</code> function, which checks all predefined and user-created functions.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">  <span class="keyword">if</span> (function_exists(<span class="string">"array_combine"</span>))</div><div class="line">  &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">"Function exists"</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">else</span></div><div class="line">  &#123;</div><div class="line">    <span class="keyword">echo</span> <span class="string">"Function does not exist - better write our own"</span>;</div><div class="line">  &#125;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<p>Using code such as this, you can take advantage of features in newer versions of PHP and yet still have your code run on earlier versions, as long as you replicate any features that are missing. Your functions may be slower than the built-in ones, but at least your code will be much more portable.</p>
<p>You can also use the <code>phpversion</code> function to determine which version of PHP your code is running on. The returned result will be similar to the following, depending on the version:</p>
<pre><code>**5.5.11**
</code></pre><h2 id="Logger-Interface"><a href="#Logger-Interface" class="headerlink" title="Logger Interface"></a>Logger Interface</h2><p>The third PHP-FIG recommendation is not a set of guidelines like its predecessors. PSR-3 is an interface, and it prescribes methods that can be implemented by PHP logger components.</p>
<p>Many PHP frameworks implement logging in some capacity. Before the PHP-FIG, each framework solved logging differently, often with a proprietary implementation. In the spirit of interoperability and specialization—recurring motifs in modern PHP—the PHP-FIG established the PSR-3 logger interface. Frameworks that accept PSR-3 compatible loggers accomplish two important things: logging concerns are delegated to a third party, and end users can provide their preferred logger component. It’s a win-win for everyone.</p>
<p>A PHP logger component compatible with the PSR-3 recommendation must include a PHP class that implements the interface named Psr\Log\LoggerInterface. The PSR-3 interface replicates the RFC 5424 syslog protocol and prescribes nine methods:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">namespace Psr\Log;</div><div class="line"></div><div class="line">interface LoggerInterface</div><div class="line">&#123;</div><div class="line">    public function emergency($message, array $context = array());</div><div class="line">    public function alert($message, array $context = array());</div><div class="line">    public function critical($message, array $context = array());</div><div class="line">    public function error($message, array $context = array());</div><div class="line">    public function warning($message, array $context = array());</div><div class="line">    public function notice($message, array $context = array());</div><div class="line">    public function info($message, array $context = array());</div><div class="line">    public function debug($message, array $context = array());</div><div class="line">    public function log($level, $message, array $context = array());</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Each interface method maps to a corresponding RFC 5424 protocol level and accepts two arguments. The first <code>$message</code> argument must be a string or an object with a <code>__toString()</code> method. The second <code>$context</code> argument is optional and provides an array of placeholder values that replace tokens in the first argument.</p>
<p>Use the <code>$context</code> argument to construct complicated logger messages. You use <em>placeholders</em> in the message text. A placeholder looks like <code>{placeholder_name}</code>; it contains a <code>{</code>, the placeholder name, and a <code>}</code>. A placeholder does not contain spaces. The <code>$context</code> argument is an associative array; its keys are placeholder names (without brackets), and its values replace the related placeholders in the message text.</p>
<p>To write a PSR-3 logger, create a new PHP class that implements the <code>Psr\Log\LoggerInterface</code> interface and provide a concrete implementation for each interface method.</p>
<p>If you are creating your own PSR-3 logger, stop and reconsider if you are spending your time wisely. I strongly discourage you from writing your own logger. Why? Because there are some truly amazing PHP logger components already available!</p>
<p>If you need a PSR-3 logger, just use <a href="https://packagist.org/packages/monolog/monolog" target="_blank" rel="external"><code>monolog/monolog</code></a>. Don’t waste time looking elsewhere. The Monolog PHP component fully implements the PSR-3 interface, and it’s easily extended with custom message formatters and handlers. Monolog’s message handlers let you send log messages to text files, syslog, email, HipChat, Slack, networked servers, remote APIs, databases, and pretty much anywhere else you can imagine. In the very unlikely event Monolog does not provide a handler for your desired output destination, it’s super-easy to write and integrate your own Monolog message handler. Example 3-1 demonstrates how easy it is to setup Monolog and log messages to a text file.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">use Monolog\Logger;</div><div class="line">use Monolog\Handler\StreamHandler;</div><div class="line"></div><div class="line">// Prepare logger</div><div class="line">$log = new Logger(&apos;myApp&apos;);</div><div class="line">$log-&gt;pushHandler(new StreamHandler(&apos;logs/development.log&apos;, Logger::DEBUG));</div><div class="line">$log-&gt;pushHandler(new StreamHandler(&apos;logs/production.log&apos;, Logger::WARNING));</div><div class="line"></div><div class="line">// Use logger</div><div class="line">$log-&gt;debug(&apos;This is a debug message&apos;);</div><div class="line">$log-&gt;warning(&apos;This is a warning message&apos;);</div></pre></td></tr></table></figure>
<h2 id="COMMAND-LINE-SCRIPTS-WITH-PHP"><a href="#COMMAND-LINE-SCRIPTS-WITH-PHP" class="headerlink" title="COMMAND-LINE SCRIPTS WITH PHP"></a>COMMAND-LINE SCRIPTS WITH PHP</h2><ul>
<li><a href="http://php.net/manual/en/wrappers.php.php" target="_blank" rel="external">PHP: php:// - Manual</a></li>
<li><a href="https://php.net/manual/en/reserved.variables.argv.php" target="_blank" rel="external">PHP: $argv - Manual</a></li>
<li><a href="https://php.net/manual/reserved.variables.argc.php" target="_blank" rel="external">PHP: $argc - Manual</a></li>
</ul>
<h2 id="Built-in-HTTP-server"><a href="#Built-in-HTTP-server" class="headerlink" title="Built-in HTTP server"></a>Built-in HTTP server</h2><p>This is another hidden gem unknown to PHP developers who assume they need Apache or nginx to preview PHP applications. You shouldn’t use it for production, but PHP’s built-in web server is a perfect tool for local development.</p>
<p>I use PHP’s built-in web server every day, whether I’m writing PHP or not. I use it to preview <a href="http://laravel.com" target="_blank" rel="external">Laravel</a> and <a href="http://slimframework.com" target="_blank" rel="external">Slim Framework</a> applications. I use it while building websites with the Drupal content-management framework. I also use it to preview static HTML and CSS if I’m just building out markup.</p>
<p>PHP’s built-in web server should not be used for production. It is for local development only. If you use the PHP built-in web server on a production machine, be prepared for a lot of disappointed users and a flood of <a href="https://www.pingdom.com" target="_blank" rel="external">Pingdom</a> downtime notifications.</p>
<ul>
<li>The built-in server performs suboptimally because it handles one request at a time, and each HTTP request is blocking. Your web application will stall if a PHP file must wait on a slow database query or remote API response.</li>
<li>The built-in server supports only a <a href="http://bit.ly/built-in-ws" target="_blank" rel="external">limited number of mimetypes</a>.</li>
<li>The built-in server has limited URL rewriting with router scripts. You’ll need Apache or nginx for more advanced URL rewrite behavior.</li>
</ul>
<h3 id="Start-the-Server"><a href="#Start-the-Server" class="headerlink" title="Start the Server"></a>Start the Server</h3><p>It’s easy to start the PHP web server. Open your terminal application, navigate to your project’s document root directory, and execute this command:</p>
<pre><code>php -S localhost:4000
</code></pre><p>Sometimes it’s useful to access the PHP web server from other machines on your local network (e.g., for previewing on your iPad or local Windows box). To do this, tell the PHP web server to listen on all interfaces by using <code>0.0.0.0</code> instead of <code>localhost</code>:</p>
<pre><code>php -S 0.0.0.0:4000
</code></pre><h3 id="Configure-the-Server"><a href="#Configure-the-Server" class="headerlink" title="Configure the Server"></a>Configure the Server</h3><p>It’s not uncommon for an application to require its own PHP INI configuration file, especially if it has unique requirements for memory usage, file uploads, profiling, or bytecode caching. You can tell the PHP built-in server to use a specific INI file with the <code>-c</code> option:</p>
<pre><code>php -S localhost:8000 -c app/config/php.ini
</code></pre><p>It’s a good idea to keep the custom INI file beneath the application’s root directory and, optionally, version-control the INI file if it should be shared with other developers on your team.</p>
<h3 id="Router-Scripts"><a href="#Router-Scripts" class="headerlink" title="Router Scripts"></a>Router Scripts</h3><p>The PHP built-in server has one glaring omission. Unlike Apache or nginx, it doesn’t support .htaccess files. This makes it difficult to use front controllers that are common in many popular PHP frameworks.</p>
<p>A front controller is a single PHP file to which all HTTP requests are forwarded (via .htaccess files or rewrite rules). The front-controller PHP file is responsible for routing the request and dispatching the appropriate PHP code. This is a common pattern used by Symfony and other popular frameworks.</p>
<p>The PHP built-in server mitigates this omission with <em>router scripts</em>. The router script is executed before every HTTP request. If the router script returns false, the static asset referenced by the current HTTP request URI is returned. Otherwise, the output of the router script is returned as the HTTP response body. In other words, if you use a router script you’re effectively hardcoding the same functionality as an <em>.htaccess</em> file.</p>
<p>Using a router script is easy. Just pass the PHP script file path as a an argument when you start up the PHP built-in server:</p>
<pre><code>php -S localhost:8000 router.php
</code></pre><h3 id="Detect-the-Built-in-Server"><a href="#Detect-the-Built-in-Server" class="headerlink" title="Detect the Built-in Server"></a>Detect the Built-in Server</h3><p>Sometimes it’s helpful to know if your PHP script is served by PHP’s built-in web server versus a traditional web server like Apache or nginx. Perhaps you need to set specific headers for nginx (e.g., <code>Status:</code>) that should not be set for the PHP web server. You can detect the PHP web server with the <code>php_sapi_name()</code> function. This function returns the string <code>cli-server</code> if the current script is served with the PHP built-in server:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">if (php_sapi_name() === &apos;cli-server&apos;) &#123;</div><div class="line">    // PHP web server</div><div class="line">&#125; else &#123;</div><div class="line">    // Other web server</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="PaaS"><a href="#PaaS" class="headerlink" title="PaaS"></a>PaaS</h2><p>Platforms as a service (PaaS) are a quick way to launch your PHP application, and—unlike with a virtual private or dedicated server—you don’t have to manage a PaaS. All you have to do is log into your PaaS provider’s control panel and click a few buttons. Some PaaS providers have a command-line or HTTP API with which you can deploy and manage your hosted PHP applications. Popular PHP PaaS providers include:</p>
<ul>
<li><a href="https://appfog.com/" target="_blank" rel="external">AppFog</a></li>
<li><a href="http://aws.amazon.com/elasticbeanstalk/" target="_blank" rel="external">AWS Elastic Beanstalk</a></li>
<li><a href="https://www.engineyard.com/products/cloud" target="_blank" rel="external">Engine Yard</a></li>
<li><a href="http://fortrabbit.com/" target="_blank" rel="external">Fortrabbit</a></li>
<li><a href="http://bit.ly/g-app-engine" target="_blank" rel="external">Google App Engine</a></li>
<li><a href="https://devcenter.heroku.com/categories/php" target="_blank" rel="external">Heroku</a></li>
<li><a href="http://www.windowsazure.com/" target="_blank" rel="external">Microsoft Azure</a></li>
<li><a href="https://pagodabox.com/" target="_blank" rel="external">Pagoda Box</a></li>
<li><a href="http://openshift.com/" target="_blank" rel="external">Red Hat OpenShift</a></li>
<li><a href="http://bit.ly/z-dev-cloud" target="_blank" rel="external">Zend Developer Cloud</a></li>
</ul>
<p>PaaS pricing varies by provider but is similar to virtual private servers: $10–100/month. You pay for the system resources allocated to your PHP application. System resources can be scaled up or down on demand. I recommend PaaS hosting plans for developers who do not want to manage their own servers.</p>

        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2017-11-05T08:22:17.000Z" itemprop="dateUpdated">2017-11-05 16:22:17</time>
</span><br>


        
        这里可以写作者留言，标签和 hexo 中所有变量及辅助函数等均可调用，示例：<a href="/PHP/2015-05-25-php-tutorial.html" target="_blank" rel="external">http://blog.inching.org/PHP/2015-05-25-php-tutorial.html</a>
        
    </div>
    <footer>
        <a href="http://blog.inching.org">
            <img src="/img/avatar.png" alt="Cody Fei">
            Cody Fei
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/php/">php</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tutorial/">tutorial</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.inching.org/PHP/2015-05-25-php-tutorial.html&title=《PHP Tutorial》 — Balance&pic=http://blog.inching.org/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.inching.org/PHP/2015-05-25-php-tutorial.html&title=《PHP Tutorial》 — Balance&source=See 《Modern PHP》 and 《Learning PHP, MySQL &amp; JavaScript, 4th Edition》.
Bas..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.inching.org/PHP/2015-05-25-php-tutorial.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《PHP Tutorial》 — Balance&url=http://blog.inching.org/PHP/2015-05-25-php-tutorial.html&via=http://blog.inching.org" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.inching.org/PHP/2015-05-25-php-tutorial.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/PHP/2015-05-26-php-io.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">PHP IO</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/PhotoShop/2015-05-20-photoshop-filter.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">PhotoShop 滤镜</h4>
      </a>
    </div>
  
</nav>



    











</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢大爷~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.JPG" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.JPG" data-alipay="/img/alipay.JPG">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top" style="display:none">
        

        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>footer.license</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Cody Fei &copy; 2012 - 2017</span>
            <span style="display:none">
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.inching.org/PHP/2015-05-25-php-tutorial.html&title=《PHP Tutorial》 — Balance&pic=http://blog.inching.org/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.inching.org/PHP/2015-05-25-php-tutorial.html&title=《PHP Tutorial》 — Balance&source=See 《Modern PHP》 and 《Learning PHP, MySQL &amp; JavaScript, 4th Edition》.
Bas..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.inching.org/PHP/2015-05-25-php-tutorial.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《PHP Tutorial》 — Balance&url=http://blog.inching.org/PHP/2015-05-25-php-tutorial.html&via=http://blog.inching.org" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.inching.org/PHP/2015-05-25-php-tutorial.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACJUlEQVR42u3aSW7DQAwFUd//0so2QOBWfVIOYLK0Mjy1nhc0p9cLX9ev692r5/eTz55PeeCSIUPG1zKu48XfQ/BnTOtcGTJkLGCQUHj+avLqGXx+fHPPMmTIkIFJ/EafSihlyJAho0YiSBkyZMhIGSTh4wUn74nV0lAZMmRsY/Cu+/8//sh8Q4YMGV/FuMKLN/c7ITi+KxkyZIxm8ACXFqJpuy0NuDJkyNjJIOGSL4c9NTAISlYZMmSMZvCDa6+SZlln4UOGDBmzGeeErFbEpqle/Hv//awMGTJGM9IClbfb+BCUkMjpMmTImMogB5PDgrBYCs03p8iQIWM0o/hWfKN8wSseWJLgK0OGjEEMEnDTdLD/PenQQoYMGRsY6QAgPiYM7vFnZciQMZTBFyxqgDS8kqIXjQRkyJAxiJEuY6Wtt9qooDhakCFDxgIGScI6pSZp5JEW282/hwwZMoYy0kWu2jiTB9PWQoYMGTJGM3iKlsJqDbW4iJUhQ8ZoRq3IrIXmdAgRLHnIkCFjAaN2PL9FPuysPSNDhozNjKcSu7SITQefMmTImMq4wou31dLnW2moDBkyRjPS8MrDYvozkYYd/yllyJAxj9FZyaoVwGkqicYDMmTIWMCoDSN5yUrSwTT0y5AhQwZf2wrCIsakxbAMGTJkkIEiCbidUehN0ilDhowFDD4M4MsQabePjxxkyJCxjZGuVvCFrc4QtFNay5AhYxDjB2H4apiilHUUAAAAAElFTkSuQmCC" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="/js/main.min.js?v=1.6.17"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.6.17" async></script>










</body>
</html>
