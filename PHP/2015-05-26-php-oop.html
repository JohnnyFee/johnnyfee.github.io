<!DOCTYPE html>
<html>
<head>
    
<!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-43567748-2', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<!-- End Google Analytics -->


    

    



    <meta charset="utf-8">
    
    <meta name="google-site-verification" content="true">
    
    
    
    <title>PHP OOP | Balance | 大道至简</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="tutorial,php">
    <meta name="description" content="See 《Modern PHP》 and 《Learning PHP, MySQL &amp;amp; JavaScript, 4th Edition》.
ClassDeclaring a Class1234567891011121314&amp;lt;?php  $object = new User;  print_r($object);  class User  &amp;#123;    public $name,">
<meta property="og:type" content="article">
<meta property="og:title" content="PHP OOP">
<meta property="og:url" content="http://blog.inching.org/PHP/2015-05-26-php-oop.html">
<meta property="og:site_name" content="Balance">
<meta property="og:description" content="See 《Modern PHP》 and 《Learning PHP, MySQL &amp;amp; JavaScript, 4th Edition》.
ClassDeclaring a Class1234567891011121314&amp;lt;?php  $object = new User;  print_r($object);  class User  &amp;#123;    public $name,">
<meta property="og:updated_time" content="2017-11-05T08:22:17.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="PHP OOP">
<meta name="twitter:description" content="See 《Modern PHP》 and 《Learning PHP, MySQL &amp;amp; JavaScript, 4th Edition》.
ClassDeclaring a Class1234567891011121314&amp;lt;?php  $object = new User;  print_r($object);  class User  &amp;#123;    public $name,">
    
        <link rel="alternate" type="application/atom+xml" title="Balance" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/style/style.css?v=1.6.17">

    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-2846834382442028",
        enable_page_level_ads: true
      });
    </script>

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Cody Fei</h5>
          <a href="mailto:inchingcode@gmail.com" title="inchingcode@gmail.com" class="mail">inchingcode@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                Home
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags/android"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories/Android/"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/inchingorg" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://www.weibo.com/CodyFee" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://www.inesoi.com" target="_blank" >
                <i class="icon icon-lg icon-shopping-bag"></i>
                Shopping Bag
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">PHP OOP</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">PHP OOP</h1>
        <h5 class="subtitle">
            
                <time datetime="2015-05-25T16:00:00.000Z" itemprop="datePublished" class="page-time">
  2015-05-26
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/PHP/">PHP</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Class"><span class="post-toc-text">Class</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Declaring-a-Class"><span class="post-toc-text">Declaring a Class</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Constructors"><span class="post-toc-text">Constructors</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PHP-5-Destructors"><span class="post-toc-text">PHP 5 Destructors</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Writing-Methods"><span class="post-toc-text">Writing Methods</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Static-Properties-and-Methods-in-PHP-5"><span class="post-toc-text">Static Properties and Methods in PHP 5</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Declaring-Properties"><span class="post-toc-text">Declaring Properties</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Declaring-Constants"><span class="post-toc-text">Declaring Constants</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Property-and-Method-Scope-in-PHP-5"><span class="post-toc-text">Property and Method Scope in PHP 5</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Object"><span class="post-toc-text">Object</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Creating-an-Object"><span class="post-toc-text">Creating an Object</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Accessing-Objects"><span class="post-toc-text">Accessing Objects</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Cloning-Objects"><span class="post-toc-text">Cloning Objects</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Inheritance"><span class="post-toc-text">Inheritance</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#The-parent-operator"><span class="post-toc-text">The parent operator</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Subclass-constructors"><span class="post-toc-text">Subclass constructors</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Final-methods"><span class="post-toc-text">Final methods</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Interface"><span class="post-toc-text">Interface</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Traits"><span class="post-toc-text">Traits</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Create-a-Trait"><span class="post-toc-text">Create a Trait</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Use-a-Trait"><span class="post-toc-text">Use a Trait</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Generators"><span class="post-toc-text">Generators</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Closures"><span class="post-toc-text">Closures</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Create"><span class="post-toc-text">Create</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Attach-State"><span class="post-toc-text">Attach State</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#PSR-4-Autoloaders"><span class="post-toc-text">PSR-4: Autoloaders</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#The-PSR-4-Autoloader-Strategy"><span class="post-toc-text">The PSR-4 Autoloader Strategy</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#How-to-Write-a-PSR-4-Autoloader"><span class="post-toc-text">How to Write a PSR-4 Autoloader</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Namespaces"><span class="post-toc-text">Namespaces</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Declaration"><span class="post-toc-text">Declaration</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Import-and-Alias"><span class="post-toc-text">Import and Alias</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Multiple-imports"><span class="post-toc-text">Multiple imports</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Multiple-namespaces-in-one-file"><span class="post-toc-text">Multiple namespaces in one file</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Global-namespace"><span class="post-toc-text">Global namespace</span></a></li></ol></li></ol>
        </nav>
    </aside>
    
<article id="post-php-oop"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">PHP OOP</h1>
        <div class="post-meta">
            <time class="post-time" title="2015-05-26 00:00:00" datetime="2015-05-25T16:00:00.000Z"  itemprop="datePublished">2015-05-26</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/PHP/">PHP</a></li></ul>



            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p>See <a href="http://www.salttiger.com/modern-php/" target="_blank" rel="external">《Modern PHP》</a> and <a href="http://www.salttiger.com/learning-php-mysql-javascript-4th-edition/" target="_blank" rel="external">《Learning PHP, MySQL &amp; JavaScript, 4th Edition》</a>.</p>
<h2 id="Class"><a href="#Class" class="headerlink" title="Class"></a>Class</h2><h3 id="Declaring-a-Class"><a href="#Declaring-a-Class" class="headerlink" title="Declaring a Class"></a>Declaring a Class</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">  $object = <span class="keyword">new</span> User;</div><div class="line">  print_r($object);</div><div class="line"></div><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">User</span></span></div><div class="line">  &#123;</div><div class="line">    <span class="keyword">public</span> $name, $password;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">save_user</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">      <span class="keyword">echo</span> <span class="string">"Save User code goes here"</span>;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<a id="more"></a>
<p>Here I have also used an invaluable function called <code>print_r</code>. It asks PHP to display information about a variable in human-readable form. The <code>_r</code> stands for <em>in human-readable format</em>. In the case of the new object <code>$object</code>, it prints the following:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">User Object</div><div class="line">(</div><div class="line">  [name]     =&gt;</div><div class="line">  [password] =&gt;</div><div class="line">)</div></pre></td></tr></table></figure>
<p>However, a browser compresses all the whitespace, so the output in a browser is slightly harder to read:</p>
<pre><code>User Object ( [name] =&gt; [password] =&gt; )
</code></pre><p>In any case, the output says that <code>$object</code> is a user-defined object that has the properties <code>name</code> and <code>password</code>.</p>
<h3 id="Constructors"><a href="#Constructors" class="headerlink" title="Constructors"></a>Constructors</h3><p>When creating a new object, you can pass a list of arguments to the class being called. These are passed to a special method within the class, called the <em>constructor</em>, which initializes various properties.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">User</span></span></div><div class="line">  &#123;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">User</span><span class="params">($param1, $param2)</span></span></div><div class="line">    &#123;</div><div class="line">      <span class="comment">// Constructor statements go here</span></div><div class="line">      <span class="keyword">public</span> $username = <span class="string">"Guest"</span>;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<p>However, PHP 5 provides a more logical approach to naming the constructor, which is to use the function name <code>__construct</code> (that is, <code>construct</code> preceded by two underscore characters):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">  class User</div><div class="line">  &#123;</div><div class="line">    function __construct($param1, $param2)</div><div class="line">    &#123;</div><div class="line">      // Constructor statements go here</div><div class="line">      public $username = &quot;Guest&quot;;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h3 id="PHP-5-Destructors"><a href="#PHP-5-Destructors" class="headerlink" title="PHP 5 Destructors"></a>PHP 5 Destructors</h3><p>Also new in PHP 5 is the ability to create <em>destructor</em> methods. This ability is useful when code has made the last reference to an object or when a script reaches the end.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">  class User</div><div class="line">  &#123;</div><div class="line">    function __destruct()</div><div class="line">    &#123;</div><div class="line">      // Destructor code goes here</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h3 id="Writing-Methods"><a href="#Writing-Methods" class="headerlink" title="Writing Methods"></a>Writing Methods</h3><p>declaring a method is similar to declaring a function, but there are a few differences. For example, method names beginning with a double underscore (<code>__</code>) are reserved, and you should not create any of this form.</p>
<p>You also have access to a special variable called <code>$this</code>, which can be used to access the current object’s properties.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">  class User</div><div class="line">  &#123;</div><div class="line">    public $name, $password;</div><div class="line"></div><div class="line">    function get_password()</div><div class="line">    &#123;</div><div class="line">      return $this-&gt;password;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>Note how the preceding <code>$</code> of the property <code>$password</code> is omitted when we use the <code>-&gt;</code> operator.</p>
<h3 id="Static-Properties-and-Methods-in-PHP-5"><a href="#Static-Properties-and-Methods-in-PHP-5" class="headerlink" title="Static Properties and Methods in PHP 5"></a>Static Properties and Methods in PHP 5</h3><p>If you are using PHP 5, you can also define a method as <em>static</em>, which means that it is called on a class, not on an object. A static method has no access to any object properties.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">  User::pwd_string();</div><div class="line"></div><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">User</span></span></div><div class="line">  &#123;</div><div class="line">    <span class="keyword">static</span> $static_property = <span class="string">"I'm static"</span>;</div><div class="line"></div><div class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">pwd_string</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">      <span class="keyword">echo</span> <span class="string">"Please enter your password"</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">get_sp</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">       <span class="keyword">return</span> <span class="keyword">self</span>::$static_property;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<p>Note how we call the class itself, along with the static method, using a double colon (also known as the <em>scope resolution</em> operator), not <code>-&gt;</code>.</p>
<p>Note how the method <code>get_sp</code> accesses <code>$static_property</code> using the keyword <code>self</code>. This is how a static property or constant can be directly accessed within a class.</p>
<h3 id="Declaring-Properties"><a href="#Declaring-Properties" class="headerlink" title="Declaring Properties"></a>Declaring Properties</h3><p>It is not necessary to explicitly declare properties within classes, as they can be implicitly defined when first used.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">  $object1       = new User();</div><div class="line">  $object1-&gt;name = &quot;Alice&quot;;</div><div class="line"></div><div class="line">  echo $object1-&gt;name;</div><div class="line"></div><div class="line">  class User &#123;&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>It is not necessary to explicitly declare properties within classes, as they can be implicitly defined when first used. </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">  $object1       = new User();</div><div class="line">  $object1-&gt;name = &quot;Alice&quot;;</div><div class="line"></div><div class="line">  echo $object1-&gt;name;</div><div class="line"></div><div class="line">  class User &#123;&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>But this kind of programming can lead to bugs that are infuriatingly difficult to discover, because <code>name</code> was declared from outside the class.</p>
<p>Also, when you declare a property within a class, you may assign a default value to it. The value you use must be a constant and not the result of a function or expression.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">  class Test</div><div class="line">  &#123;</div><div class="line">    public $name  = &quot;Paul Smith&quot;; // Valid</div><div class="line">    public $age   = 42;           // Valid</div><div class="line">    public $time  = time();       // Invalid - calls a function</div><div class="line">    public $score = $level * 2;   // Invalid - uses an expression</div><div class="line">  &#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h3 id="Declaring-Constants"><a href="#Declaring-Constants" class="headerlink" title="Declaring Constants"></a>Declaring Constants</h3><p>In the same way that you can create a global constant with the define function, you can define constants inside classes. The generally accepted practice is to use uppercase letters to make them stand out.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">  Translate::lookup();</div><div class="line"></div><div class="line">  class Translate</div><div class="line">  &#123;</div><div class="line">    const ENGLISH = 0;</div><div class="line">    const SPANISH = 1;</div><div class="line">    const FRENCH  = 2;</div><div class="line">    const GERMAN  = 3;</div><div class="line">    // ...</div><div class="line"></div><div class="line">    static function lookup()</div><div class="line">    &#123;</div><div class="line">      echo self::SPANISH;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>You can reference constants directly, using the <code>self</code> keyword and double colon operator.</p>
<h3 id="Property-and-Method-Scope-in-PHP-5"><a href="#Property-and-Method-Scope-in-PHP-5" class="headerlink" title="Property and Method Scope in PHP 5"></a>Property and Method Scope in PHP 5</h3><p>PHP 5 provides three keywords for controlling the scope of properties and methods:</p>
<ul>
<li><p>public</p>
<p>  These properties are the default when you are declaring a variable using the <code>var</code> or <code>public</code> keywords, or when a variable is implicitly declared the first time it is used. The keywords <code>var</code> and <code>public</code> are interchangeable because, although deprecated, <code>var</code> is retained for compatibility with previous versions of PHP. Methods are assumed to be <code>public</code> by default. </p>
</li>
<li><p>protected</p>
<p>  These properties and methods (<em>members</em>) can be referenced only by the object’s class methods and those of any subclasses.</p>
</li>
<li><p>private</p>
<p>  These members can be referenced only by methods within the same class—not by subclasses.</p>
</li>
</ul>
<p>Here’s how to decide which you need to use:</p>
<ul>
<li><p>Use <code>public</code> when outside code <em>should</em> access this member and extending classes <em>should</em> also inherit it.</p>
</li>
<li><p>Use <code>protected</code> when outside code <em>should not</em> access this member but extending classes <em>should</em> inherit it.</p>
</li>
<li><p>Use <code>private</code> when outside code <em>should not</em> access this member and extending classes also <em>should not</em> inherit it.</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">  class Example</div><div class="line">  &#123;</div><div class="line">    var $name   = &quot;Michael&quot;; // Same as public but deprecated</div><div class="line">    public $age = 23;        // Public property</div><div class="line">    protected $usercount;    // Protected property</div><div class="line"></div><div class="line">    private function admin() // Private method</div><div class="line">    &#123;</div><div class="line">      // Admin code goes here</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h2 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h2><h3 id="Creating-an-Object"><a href="#Creating-an-Object" class="headerlink" title="Creating an Object"></a>Creating an Object</h3><p>To create an object with a specified class, use the <code>new</code> keyword, like this: <code>object = new Class</code>. Here are a couple of ways in which we could do this:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">    $object = <span class="keyword">new</span> User;</div><div class="line">    $temp   = <span class="keyword">new</span> User(<span class="string">'name'</span>, <span class="string">'password'</span>);</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h3 id="Accessing-Objects"><a href="#Accessing-Objects" class="headerlink" title="Accessing Objects"></a>Accessing Objects</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">  $object = <span class="keyword">new</span> User;</div><div class="line">  print_r($object); <span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</div><div class="line"></div><div class="line">  $object-&gt;name     = <span class="string">"Joe"</span>;</div><div class="line">  $object-&gt;password = <span class="string">"mypass"</span>;</div><div class="line">  print_r($object); </div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<p>You should note that the example <code>property</code> and <code>method</code> do not have <code>$</code> signs in front of them. If you were to preface them with <code>$</code> signs, the code would not work, as it would try to reference the value inside a variable. For example, the expression <code>$object-&gt;$property</code> would attempt to look up the value assigned to a variable named <code>$property</code> (let’s say that value is the string <code>brown</code>) and then attempt to reference the property <code>$object-&gt;brown</code>. If <code>$property</code> is undefined, an attempt to reference <code>$object-&gt;NULL</code> would occur and cause an error.</p>
<p>You can place functions and class definitions anywhere in your code, before or after statements that use them. Generally, though, it is considered good practice to place them toward the end of a file.</p>
<h3 id="Cloning-Objects"><a href="#Cloning-Objects" class="headerlink" title="Cloning Objects"></a>Cloning Objects</h3><p>Once you have created an object, it is passed by reference when you pass it as a parameter. To avoid this confusion, you can use the clone operator, which creates a new instance of the class and copies the property values from the original instance to the new instance.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">  $object1       = <span class="keyword">new</span> User();</div><div class="line">  $object1-&gt;name = <span class="string">"Alice"</span>;</div><div class="line">  $object2       = <span class="keyword">clone</span> $object1;</div><div class="line">  $object2-&gt;name = <span class="string">"Amy"</span>;</div><div class="line"></div><div class="line">  <span class="keyword">echo</span> <span class="string">"object1 name = "</span> . $object1-&gt;name . <span class="string">"&lt;br&gt;"</span>;</div><div class="line">  <span class="keyword">echo</span> <span class="string">"object2 name = "</span> . $object2-&gt;name;</div><div class="line"></div><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">User</span></span></div><div class="line">  &#123;</div><div class="line">    <span class="keyword">public</span> $name;</div><div class="line">  &#125;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h2 id="Inheritance"><a href="#Inheritance" class="headerlink" title="Inheritance"></a>Inheritance</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">  $object           = <span class="keyword">new</span> Subscriber;</div><div class="line">  $object-&gt;name     = <span class="string">"Fred"</span>;</div><div class="line">  $object-&gt;password = <span class="string">"pword"</span>;</div><div class="line">  $object-&gt;phone    = <span class="string">"012 345 6789"</span>;</div><div class="line">  $object-&gt;email    = <span class="string">"fred@bloggs.com"</span>;</div><div class="line">  $object-&gt;display();</div><div class="line"></div><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">User</span></span></div><div class="line">  &#123;</div><div class="line">    <span class="keyword">public</span> $name, $password;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">save_user</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">      <span class="keyword">echo</span> <span class="string">"Save User code goes here"</span>;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Subscriber</span> <span class="keyword">extends</span> <span class="title">User</span></span></div><div class="line">  &#123;</div><div class="line">    <span class="keyword">public</span> $phone, $email;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">display</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">      <span class="keyword">echo</span> <span class="string">"Name:  "</span> . <span class="keyword">$this</span>-&gt;name     . <span class="string">"&lt;br&gt;"</span>;</div><div class="line">      <span class="keyword">echo</span> <span class="string">"Pass:  "</span> . <span class="keyword">$this</span>-&gt;password . <span class="string">"&lt;br&gt;"</span>;</div><div class="line">      <span class="keyword">echo</span> <span class="string">"Phone: "</span> . <span class="keyword">$this</span>-&gt;phone    . <span class="string">"&lt;br&gt;"</span>;</div><div class="line">      <span class="keyword">echo</span> <span class="string">"Email: "</span> . <span class="keyword">$this</span>-&gt;email;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h3 id="The-parent-operator"><a href="#The-parent-operator" class="headerlink" title="The parent operator"></a>The parent operator</h3><p>If you write a method in a subclass with the same name as one in its parent class, its statements will override those of the parent class. Sometimes this is not the behavior you want, and you need to access the parent’s method. To do this, you can use the <code>parent</code> operator:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">  $object = <span class="keyword">new</span> Son;</div><div class="line">  $object-&gt;test();</div><div class="line">  $object-&gt;test2();</div><div class="line"></div><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Dad</span></span></div><div class="line">  &#123;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">      <span class="keyword">echo</span> <span class="string">"[Class Dad] I am your Father&lt;br&gt;"</span>;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Dad</span></span></div><div class="line">  &#123;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">      <span class="keyword">echo</span> <span class="string">"[Class Son] I am Luke&lt;br&gt;"</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">test2</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">      <span class="keyword">parent</span>::test();</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<p>If you wish to ensure that your code calls a method from the current class, you can use the <code>self</code> keyword, like this:</p>
<pre><code>self::method();
</code></pre><h3 id="Subclass-constructors"><a href="#Subclass-constructors" class="headerlink" title="Subclass constructors"></a>Subclass constructors</h3><p>When you extend a class and declare your own constructor, you should be aware that PHP will not automatically call the constructor method of the parent class. If you want to be certain that all initialization code is executed, subclasses should always call the parent constructors.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;?php</span></div><div class="line">  $object = <span class="keyword">new</span> Tiger();</div><div class="line"></div><div class="line">  <span class="keyword">echo</span> <span class="string">"Tigers have...&lt;br&gt;"</span>;</div><div class="line">  <span class="keyword">echo</span> <span class="string">"Fur: "</span> . $object-&gt;fur . <span class="string">"&lt;br&gt;"</span>;</div><div class="line">  <span class="keyword">echo</span> <span class="string">"Stripes: "</span> . $object-&gt;stripes;</div><div class="line"></div><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Wildcat</span></span></div><div class="line">  &#123;</div><div class="line">    <span class="keyword">public</span> $fur; <span class="comment">// Wildcats have fur</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">      <span class="keyword">$this</span>-&gt;fur = <span class="string">"TRUE"</span>;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Tiger</span> <span class="keyword">extends</span> <span class="title">Wildcat</span></span></div><div class="line">  &#123;</div><div class="line">    <span class="keyword">public</span> $stripes; <span class="comment">// Tigers have stripes</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">      <span class="keyword">parent</span>::__construct(); <span class="comment">// Call parent constructor first</span></div><div class="line">      <span class="keyword">$this</span>-&gt;stripes = <span class="string">"TRUE"</span>;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"><span class="meta">?&gt;</span></div></pre></td></tr></table></figure>
<h3 id="Final-methods"><a href="#Final-methods" class="headerlink" title="Final methods"></a>Final methods</h3><p>When you wish to prevent a subclass from overriding a superclass method, you can use the <code>final</code> keyword.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">  class User</div><div class="line">  &#123;</div><div class="line">    final function copyright()</div><div class="line">    &#123;</div><div class="line">      echo &quot;This class was written by Joe Smith&quot;;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h2 id="Interface"><a href="#Interface" class="headerlink" title="Interface"></a>Interface</h2><p>Interface definition:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">interface Documentable</div><div class="line">&#123;</div><div class="line">    public function getId();</div><div class="line"></div><div class="line">    public function getContent();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>This interface definition says that any object implementing the <code>Documentable</code> interface must provide a public <code>getId()</code> method and a public <code>getContent()</code> method.</p>
<p>This shows an implementation that can fetch HTML from a remote URL with curl:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">class HtmlDocument implements Documentable</div><div class="line">&#123;</div><div class="line">    protected $url;</div><div class="line"></div><div class="line">    public function __construct($url)</div><div class="line">    &#123;</div><div class="line">        $this-&gt;url = $url;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public function getId()</div><div class="line">    &#123;</div><div class="line">        return $this-&gt;url;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public function getContent()</div><div class="line">    &#123;</div><div class="line">        $ch = curl_init();</div><div class="line">        curl_setopt($ch, CURLOPT_URL, $this-&gt;url);</div><div class="line">        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);</div><div class="line">        curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 3);</div><div class="line">        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);</div><div class="line">        curl_setopt($ch, CURLOPT_MAXREDIRS, 3);</div><div class="line">        $html = curl_exec($ch);</div><div class="line">        curl_close($ch);</div><div class="line"></div><div class="line">        return $html;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>How we can use the DocumentStore class with our three document-collecting implementations:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">$documentStore = new DocumentStore();</div><div class="line"></div><div class="line">// Add HTML document</div><div class="line">$htmlDoc = new HtmlDocument(&apos;https://php.net&apos;);</div><div class="line">$documentStore-&gt;addDocument($htmlDoc);</div><div class="line"></div><div class="line">// Add stream document</div><div class="line">$streamDoc = new StreamDocument(fopen(&apos;stream.txt&apos;, &apos;rb&apos;));</div><div class="line">$documentStore-&gt;addDocument($streamDoc);</div><div class="line"></div><div class="line">// Add terminal command document</div><div class="line">$cmdDoc = new CommandOutputDocument(&apos;cat /etc/hosts&apos;);</div><div class="line">$documentStore-&gt;addDocument($cmdDoc);</div><div class="line"></div><div class="line">print_r($documentStore-&gt;getDocuments());</div></pre></td></tr></table></figure>
<h2 id="Traits"><a href="#Traits" class="headerlink" title="Traits"></a>Traits</h2><p>The PHP language uses a classical inheritance model. This means you start with a single generalized root class that provides a base implementation. You extend the root class to create more specialized classes that inherit their immediate parent’s implementation. This is called an inheritance hierarchy, and it is a common pattern used by many programming languages.</p>
<p>The classical inheritance model works well most of the time. However, what do we do if two unrelated PHP classes need to exhibit similar behavior? For example, a PHP class <code>RetailStore</code> and another PHP class <code>Car</code> are very different classes and don’t share a common parent in their inheritance hierarchies. However, both classes should be geocodable into latitude and longitude coordinates for display on a map.</p>
<p>Traits were created for exactly this purpose. They enable modular implementations that can be injected into otherwise unrelated classes. Traits also encourage code reuse.</p>
<p>My first (bad) reaction is to create a common parent class <code>Geocodable</code> that both <code>RetailStore</code> and <code>Car</code> extend. This is a <em>bad</em> solution because it forces two otherwise unrelated classes to share a common ancestor that does not naturally belong in either inheritance hierarchy.</p>
<p>My second (better) reaction is to create a <code>Geocodable</code> interface that defines which methods are required to implement the geocoding behavior. The <code>RetailStore</code> and <code>Car</code> classes can both implement the <code>Geocodable</code> interface. This is a good solution that allows each class to retain its natural inheritance hierarchy, but it requires us to duplicate the same geocoding behavior in both classes. This is not a DRY solution.</p>
<p>My third (best) reaction is to create a <code>Geocodable</code> trait that defines <em>and</em> implements the geocodable methods. I can then mix the <code>Geocodable</code> trait into both the <code>RetailStore</code> and <code>Car</code> classes without polluting their natural inheritance hierarchies.</p>
<h3 id="Create-a-Trait"><a href="#Create-a-Trait" class="headerlink" title="Create a Trait"></a>Create a Trait</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">trait MyTrait &#123;</div><div class="line">    // Trait implementation goes here</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Let’s return to our <code>Geocodable</code> example to better demonstrate traits in practice. We agree both <code>RetailStore</code> and <code>Car</code> classes need to provide geocodable behavior, and we’ve decided inheritance and interfaces are not the best solution. Instead, we create a <code>Geocodable</code> trait that returns latitude and longitude coordinates that we can plot on a map.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">trait Geocodable &#123;</div><div class="line">    /** @var string */</div><div class="line">    protected $address;</div><div class="line"></div><div class="line">    /** @var \Geocoder\Geocoder */</div><div class="line">    protected $geocoder;</div><div class="line"></div><div class="line">    /** @var \Geocoder\Result\Geocoded */</div><div class="line">    protected $geocoderResult;</div><div class="line"></div><div class="line">    public function setGeocoder(\Geocoder\GeocoderInterface $geocoder)</div><div class="line">    &#123;</div><div class="line">        $this-&gt;geocoder = $geocoder;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public function setAddress($address)</div><div class="line">    &#123;</div><div class="line">        $this-&gt;address = $address;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public function getLatitude()</div><div class="line">    &#123;</div><div class="line">        if (isset($this-&gt;geocoderResult) === false) &#123;</div><div class="line">            $this-&gt;geocodeAddress();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        return $this-&gt;geocoderResult-&gt;getLatitude();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public function getLongitude()</div><div class="line">    &#123;</div><div class="line">        if (isset($this-&gt;geocoderResult) === false) &#123;</div><div class="line">            $this-&gt;geocodeAddress();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        return $this-&gt;geocoderResult-&gt;getLongitude();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    protected function geocodeAddress()</div><div class="line">    &#123;</div><div class="line">        $this-&gt;geocoderResult = $this-&gt;geocoder-&gt;geocode($this-&gt;address);</div><div class="line"></div><div class="line">        return true;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The <code>Geocodable</code> trait defines only the properties and methods necessary to implement the geocodable behavior. It does not do anything else.</p>
<p>Our <code>Geocodable</code> trait defines three class properties: an address (string), a geocoder object (an instance of <code>\Geocoder\Geocoder</code> from the excellent <a href="http://geocoder-php.org" target="_blank" rel="external"><code>willdurand/geocoder</code></a> component by William Durand), and a geocoder result object (an instance of <code>\Geocoder\Result\Geocoded</code>).</p>
<h3 id="Use-a-Trait"><a href="#Use-a-Trait" class="headerlink" title="Use a Trait"></a>Use a Trait</h3><p>Using a PHP trait is easy. Add the code <code>use MyTrait;</code> inside a PHP class definition. Here’s an example. Obviously, replace <code>MyTrait</code> with the appropriate PHP trait name:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">class MyClass</div><div class="line">&#123;</div><div class="line">    use MyTrait;</div><div class="line"></div><div class="line">    // Class implementation goes here</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Both namespaces and traits are imported with the <code>use</code> keyword. <em>Where</em> they are imported is different. We import namespaces, classes, interfaces, functions, and constants <em>outside</em> of a class definition. We import traits <em>inside</em> a class definition. The difference is subtle but important.</p>
<p>The RetailStore class definition:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">class RetailStore</div><div class="line">&#123;</div><div class="line">    use Geocodable;</div><div class="line"></div><div class="line">    // Class implementation goes here</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>That’s all we have to do. Now each <code>RetailStore</code> instance can use the properties and methods provided by the <code>Geocodable</code> trait:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">$geocoderAdapter = new \Geocoder\HttpAdapter\CurlHttpAdapter();</div><div class="line">$geocoderProvider = new \Geocoder\Provider\GoogleMapsProvider($geocoderAdapter);</div><div class="line">$geocoder = new \Geocoder\Geocoder($geocoderProvider);</div><div class="line"></div><div class="line">$store = new RetailStore();</div><div class="line">$store-&gt;setAddress(&apos;420 9th Avenue, New York, NY 10001 USA&apos;);</div><div class="line">$store-&gt;setGeocoder($geocoder);</div><div class="line"></div><div class="line">$latitude = $store-&gt;getLatitude();</div><div class="line">$longitude = $store-&gt;getLongitude();</div><div class="line">echo $latitude, &apos;:&apos;, $longitude;</div></pre></td></tr></table></figure>
<h2 id="Generators"><a href="#Generators" class="headerlink" title="Generators"></a>Generators</h2><p>PHP generators are an underutilized yet remarkably helpful feature introduced in PHP 5.5.0. I think many PHP developers are unaware of generators because their purpose is not immediately obvious. <em>Generators are simple iterators</em>. That’s it.</p>
<p>Unlike your standard PHP iterator, PHP generators don’t require you to implement the <code>Iterator</code> interface in a heavyweight class. Instead, generators <em>compute and yield iteration values on-demand</em>. This has profound implications for application performance. Think about it. A standard PHP iterator often iterates in-memory, precomputed data sets. This is inefficient, especially with large and formulaic data sets that can be computed instead. This is why we use generators to compute and yield subsequent values on the fly without commandeering valuable memory.</p>
<p>PHP generators are not a panacea for your iteration needs. Because generators never know the <em>next</em> iteration value until asked, it’s impossible to rewind or fast-forward a generator. You can iterate in only one direction—forward. Generators are also a once-and-done deal. You can’t iterate the same generator more than once. However, you are free to rebuild or clone a generator if necessary.</p>
<p>Generators are easy to create because they are just PHP functions that use the <code>yield</code> keyword one or more times. Unlike regular PHP functions, generators never return a value. They only <em>yield</em> values.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">function myGenerator() &#123;</div><div class="line">    yield &apos;value1&apos;;</div><div class="line">    yield &apos;value2&apos;;</div><div class="line">    yield &apos;value3&apos;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>When you invoke the generator function, PHP returns an object that belongs to the <code>Generator</code> class. This object can be iterated with the <code>foreach()</code> function. During each iteration, PHP asks the <code>Generator</code> instance to compute and provide the next iteration value. What’s neat is that the generator pauses its internal state whenever it yields a value. The generator resumes internal state when it is asked for the next value. The generator continues pausing and resuming until it reaches the end of its function definition or an empty <code>return;</code> statement.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">foreach (myGenerator() as $yieldedValue) &#123;</div><div class="line">    echo $yieldedValue, PHP_EOL;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Closures"><a href="#Closures" class="headerlink" title="Closures"></a>Closures</h2><p><em>Closures</em> and <em>anonymous functions</em> were introduced in PHP 5.3.0, and they’re two of my favorite and most used PHP features. They sound scary (at least <em>I</em> thought so when I first learned about them), but they’re actually pretty simple to understand. They’re extremely useful tools that every PHP developer should have in the toolbox.</p>
<p>A closure is a function that encapsulates its surrounding state at the time it is created. The encapsulated state exists inside the closure even when the closure lives after its original environment ceases to exist. This is a difficult concept to grasp, but once you do it’ll be a life-changing moment.</p>
<p>Closures and anonymous functions are, in theory, separate things. However, PHP considers them to be one and the same. So when I say closure, I also mean anonymous function. And vice versa.</p>
<p>PHP closures and anonymous functions use the same syntax as a function, but don’t let them fool you. They’re actually objects <em>disguised</em> as PHP functions. If you  inspect a PHP closure or anonymous function, you’ll find they are instances of the <code>Closure</code> class. Closures are considered first-class value types, just like a string or integer.</p>
<h3 id="Create"><a href="#Create" class="headerlink" title="Create"></a>Create</h3><p>So we know PHP closures look like functions.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">$closure = function ($name) &#123;</div><div class="line">    return sprintf(&apos;Hello %s&apos;, $name);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">echo $closure(&quot;Josh&quot;);</div><div class="line">// Outputs --&gt; &quot;Hello Josh&quot;</div></pre></td></tr></table></figure>
<p>It looks like a standard PHP function: it uses the same syntax, it accepts arguments, and it returns a value. However, it does not have a name.</p>
<p>We can invoke the <code>$closure</code> variable because the variable’s value is a closure, and closure objects implement the <code>\__invoke()</code> magic method. PHP looks for and calls the <code>__invoke()</code> method whenever <code>()</code> follows a variable name.</p>
<p>I typically use PHP closure objects as function and method callbacks. Many PHP functions expect callback functions, like <code>array_map()</code> and <code>preg_replace_callback()</code>. This is a perfect opportunity to use PHP anonymous functions! Remember, closures can be passed into other PHP functions as arguments, just like any other value.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">$numbersPlusOne = array_map(function ($number) &#123;</div><div class="line">    return $number + 1;</div><div class="line">&#125;, [1,2,3]);</div><div class="line">print_r($numbersPlusOne);</div><div class="line">// Outputs --&gt; [2,3,4]</div></pre></td></tr></table></figure>
<h3 id="Attach-State"><a href="#Attach-State" class="headerlink" title="Attach State"></a>Attach State</h3><p>So far I’ve demonstrated nameless (or <em>anonymous</em>) functions used as callbacks. Let’s explore how to attach and enclose state with a PHP closure. JavaScript developers might be confused by PHP closures because they do not automatically enclose application state like true JavaScript closures. Instead, you must manually attach state to a PHP closure with the closure object’s <code>bindTo()</code> method or the <code>use</code> keyword.</p>
<p>It’s far more common to attach closure state with the <code>use</code> keyword. When you attach a variable to a closure via the <code>use</code> keyword, the attached variable<br>retains the value assigned to it <em>at the time it is attached to the closure</em>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">function enclosePerson($name) &#123;</div><div class="line">    return function ($doCommand) use ($name) &#123;</div><div class="line">        return sprintf(&apos;%s, %s&apos;, $name, $doCommand);</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// Enclose &quot;Clay&quot; string in closure</div><div class="line">$clay = enclosePerson(&apos;Clay&apos;);</div><div class="line"></div><div class="line">// Invoke closure with command</div><div class="line">echo $clay(&apos;get me sweet tea!&apos;);</div><div class="line">// Outputs --&gt; &quot;Clay, get me sweet tea!&quot;</div></pre></td></tr></table></figure>
<p>The <code>enclosePerson()</code> named function accepts a <code>$name</code> argument, and it returns a closure object that <em>encloses</em> the <code>$name</code> argument. The returned closure object preserves the <code>$name</code> argument’s value even after the closure exits the <code>enclosePerson()</code> function’s scope. The <code>$name</code> variable still exists in the closure!</p>
<p>You can pass multiple arguments into a closure with the <code>use</code> keyword.<br>Separate multiple arguments with a comma, just as you do with<br>any PHP function or method arguments.</p>
<p>Don’t forget, PHP closures are objects. Each closure instance has its own internal state that is accessible with the <code>$this</code> keyword just like any other PHP object. A closure object’s default state is pretty boring; it has a magic <code>__invoke()</code> method and a <code>bindTo()</code> method. That’s it.</p>
<p>However, the <code>bindTo()</code> method opens the door to some interesting possibilities. This method lets us <em>bind</em> a <code>Closure</code> object’s internal state to a <em>different object</em>. The <code>bindTo()</code> method accepts an important second argument that specifies the PHP class of the object to which the closure is bound. This lets the closure access protected and private member variables of the object to which it is bound.</p>
<p>You’ll find the <code>bindTo()</code> method is often used by PHP frameworks that map route URLs to anonymous callback functions. Frameworks accept an anonymous function and bind it to the application object. This lets you reference the primary application object inside the anonymous function with the <code>$this</code> keyword.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"> &lt;?php</div><div class="line">class App</div><div class="line">&#123;</div><div class="line">    protected $routes = array();</div><div class="line">    protected $responseStatus = &apos;200 OK&apos;;</div><div class="line">    protected $responseContentType = &apos;text/html&apos;;</div><div class="line">    protected $responseBody = &apos;Hello world&apos;;</div><div class="line"></div><div class="line">    public function addRoute($routePath, $routeCallback)</div><div class="line">    &#123;</div><div class="line">        $this-&gt;routes[$routePath] = $routeCallback-&gt;bindTo($this, __CLASS__);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public function dispatch($currentPath)</div><div class="line">    &#123;</div><div class="line">        foreach ($this-&gt;routes as $routePath =&gt; $callback) &#123;</div><div class="line">            if ($routePath === $currentPath) &#123;</div><div class="line">                $callback();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        header(&apos;HTTP/1.1 &apos; . $this-&gt;responseStatus);</div><div class="line">        header(&apos;Content-type: &apos; . $this-&gt;responseContentType);</div><div class="line">        header(&apos;Content-length: &apos; . mb_strlen($this-&gt;responseBody));</div><div class="line">        echo $this-&gt;responseBody;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Pay close attention to the <code>addRoute()</code> method. It accepts a route path (e.g., <code>/users/josh</code>) and a route callback. The <code>dispatch()</code> method accepts the current HTTP request path and invokes the matching route callback. The magic happens on line 11 when we bind the route callback to the current <code>App</code> instance. This lets us create a callback function that can manipulate the <code>App</code> instance state:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">$app = new App();</div><div class="line">$app-&gt;addRoute(&apos;/users/josh&apos;, function () &#123;</div><div class="line">    $this-&gt;responseContentType = &apos;application/json;charset=utf8&apos;;</div><div class="line">    $this-&gt;responseBody = &apos;&#123;&quot;name&quot;: &quot;Josh&quot;&#125;&apos;;</div><div class="line">&#125;);</div><div class="line">$app-&gt;dispatch(&apos;/users/josh&apos;);</div></pre></td></tr></table></figure>
<h2 id="PSR-4-Autoloaders"><a href="#PSR-4-Autoloaders" class="headerlink" title="PSR-4: Autoloaders"></a>PSR-4: Autoloaders</h2><p>The fourth PHP-FIG recommendation describes a standardized autoloader strategy. An autoloader is a strategy for finding a PHP class, interface, or trait and loading it into the PHP interpreter on-demand at runtime. PHP components and frameworks that support the PSR-4 autoloader standard can be located by and loaded into the PHP interpreter with only one autoloader. This is a big deal given the modern PHP ecosystem’s affinity for many interoperable components.</p>
<p>How often have you seen code like this at the top of your PHP files?</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">include &apos;path/to/file1.php&apos;;</div><div class="line">include &apos;path/to/file2.php&apos;;</div><div class="line">include &apos;path/to/file3.php&apos;;</div></pre></td></tr></table></figure>
<p>All too often, right? You’re probably familiar with the <code>require()</code>, <code>require_once()</code>, <code>include()</code>, and <code>include_once()</code> functions. These functions load an external PHP file into the current script, and they work wonderfully if you have only a few PHP scripts. However, what if you need to include a hundred PHP scripts? What if you need to include a thousand PHP scripts? The <code>require()</code> and <code>include()</code> functions do not scale well, and this is why PHP autoloaders are important. An autoloader is a strategy for finding a PHP class, interface, or trait and loading it into the PHP interpreter on-demand at runtime, without explicitly including files as the example does.</p>
<p>Before the PHP-FIG introduced its PSR-4 recommendation, PHP component and framework authors used the <code>__autoload()</code> and <code>spl_autoload_register()</code> functions to register custom autoloader strategies. Unfortunately, each PHP component and framework used a unique autoloader, and every autoloader used different logic to locate and load PHP classes, interfaces, and traits. Developers using these components and frameworks were obliged to invoke each component’s autoloader when bootstrapping a PHP application. I use Sensio Labs’<a href="http://twig.sensiolabs.org" target="_blank" rel="external">Twig</a> template component all the time. It’s awesome. Without PSR-4, however, I have to read Twig’s documentation and figure out how to register its custom autoloader in my application’s bootstrap file, like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">require_once &apos;/path/to/lib/Twig/Autoloader.php&apos;;</div><div class="line">Twig_Autoloader::register();</div></pre></td></tr></table></figure>
<p>Imagine having to research and register unique autoloaders for every PHP component in your application. The PHP-FIG recognized this problem and proposed the PSR-4 autoloader recommendation to facilitate component interoperability. Thanks to PSR-4, we can autoload all of our application’s PHP components with only one autoloader. This is amazing. Most modern PHP components and frameworks are compatible with PSR-4. If you write and distribute your own components, make sure they are compatible with PSR-4, too! Participating components include Symfony, Doctrine, Monolog, Twig, Guzzle, SwiftMailer, PHPUnit, Carbon, and many others.</p>
<h3 id="The-PSR-4-Autoloader-Strategy"><a href="#The-PSR-4-Autoloader-Strategy" class="headerlink" title="The PSR-4 Autoloader Strategy"></a>The PSR-4 Autoloader Strategy</h3><p>Like any PHP autoloader, PSR-4 describes a strategy to locate and load PHP classes, interfaces, and traits during runtime. The PSR-4 recommendation does not require you to change your code’s implementation. Instead, PSR-4 only suggests how your code is organized into filesystem directories and PHP namespaces. The PSR-4 autoloader strategy relies on PHP namespaces and filesystem directories to locate and load PHP classes, interfaces, and traits.</p>
<p>The essence of PSR-4 is mapping a top-level namespace prefix to a specific filesystem directory. For example, I can tell PHP that classes, interfaces, or traits beneath the <code>\Oreilly\ModernPHP</code> namespace live beneath the <em>src/</em> physical filesystem directory. PHP now knows that any classes, interfaces, or traits that use the  <code>\Oreilly\ModernPHP</code> namespace prefix correspond to directories and files beneath the <em>src/</em> directory. For example, the <code>\Oreilly\ModernPHP\Chapter1</code> namespace corresponds to the <em>src/Chapter1</em> directory, and the <code>\Oreilly\ModernPHP\Chapter1\Example</code> class corresponds to the <em>src/Chapter1/Example.php</em> file.</p>
<p>PSR-4 lets you map a namespace prefix to a filesystem directory. The namespace prefix can be one top-level namespace. The namespace prefix can also be a top-level namespace and any number of subnamespaces. It’s quite flexible.</p>
<h3 id="How-to-Write-a-PSR-4-Autoloader"><a href="#How-to-Write-a-PSR-4-Autoloader" class="headerlink" title="How to Write a PSR-4 Autoloader"></a>How to Write a PSR-4 Autoloader</h3><p>We know that PSR-4 compatible code has a namespace prefix that maps to a base filesystem directory. We also know that subnamespaces beneath the namespace prefix map to subdirectories beneath the base filesystem directory. The following example shows an autoloader implementation, borrowed from the PHP-FIG website, that finds and loads classes, interfaces, and traits based on the PSR-4 autoloader strategy.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">/**</div><div class="line"> * An example of a project-specific implementation.</div><div class="line"> *</div><div class="line"> * After registering this autoload function with SPL, the following line</div><div class="line"> * would cause the function to attempt to load the \Foo\Bar\Baz\Qux class</div><div class="line"> * from /path/to/project/src/Baz/Qux.php:</div><div class="line"> *</div><div class="line"> *      new \Foo\Bar\Baz\Qux;</div><div class="line"> *</div><div class="line"> * @param string $class The fully qualified class name.</div><div class="line"> * @return void</div><div class="line"> */</div><div class="line">spl_autoload_register(function ($class) &#123;</div><div class="line"></div><div class="line">    // project-specific namespace prefix</div><div class="line">    $prefix = &apos;Foo\\Bar\\&apos;;</div><div class="line"></div><div class="line">    // base directory for the namespace prefix</div><div class="line">    $base_dir = __DIR__ . &apos;/src/&apos;;</div><div class="line"></div><div class="line">    // does the class use the namespace prefix?</div><div class="line">    $len = strlen($prefix);</div><div class="line">    if (strncmp($prefix, $class, $len) !== 0) &#123;</div><div class="line">        // no, move to the next registered autoloader</div><div class="line">        return;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    // get the relative class name</div><div class="line">    $relative_class = substr($class, $len);</div><div class="line"></div><div class="line">    // replace the namespace prefix with the base directory, replace namespace</div><div class="line">    // separators with directory separators in the relative class name, append</div><div class="line">    // with .php</div><div class="line">    $file = $base_dir . str_replace(&apos;\\&apos;, &apos;/&apos;, $relative_class) . &apos;.php&apos;;</div><div class="line"></div><div class="line">    // if the file exists, require it</div><div class="line">    if (file_exists($file)) &#123;</div><div class="line">        require $file;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>Copy and paste this into your application, change the <code>$prefix</code> and <code>$base_dir</code> variables, and you have yourself a working PSR-4 autoloader. However, if you find yourself writing your own PSR-4 autoloader, stop and ask yourself if what you are doing is really necessary. Why? Because we can use PSR-4 autoloaders that are automagically generated by the Composer dependency manager.</p>
<h2 id="Namespaces"><a href="#Namespaces" class="headerlink" title="Namespaces"></a>Namespaces</h2><p>Let’s see how a real-world PHP component uses namespaces. The Symfony Framework’s own  <a href="https://github.com/symfony/HttpFoundation" target="_blank" rel="external"><code>symfony/httpfoundation</code></a> is a popular PHP component that manages HTTP requests and responses. More important, the <code>symfony/httpfoundation</code> component uses common PHP class names like <code>Request</code>, <code>Response</code>, and <code>Cookie</code>.  I guarantee you there are many other PHP components that use these same class names.  How can we use the <code>symfony/httpfoundation</code> PHP component if other PHP code uses the same class names? We can safely use the <code>symfony/httpfoundation</code> component precisely because its code is sandboxed beneath the unique <code>Symfony</code> vendor namespace.</p>
<h3 id="Declaration"><a href="#Declaration" class="headerlink" title="Declaration"></a>Declaration</h3><p>Every PHP class, interface, function, and constant lives beneath a namespace (or subnamespace). Namespaces are declared at the top of a PHP file on a new line immediately after the opening <code>&lt;?php</code> tag. The namespace declaration begins with <code>namespace</code>, then a space character, then the namespace name, and then a closing semicolon <code>;</code> character.</p>
<p>Remember that namespaces are often used to establish a top-level vendor name.<br>This example namespace declaration establishes the <code>Oreilly</code> vendor name:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">namespace Oreilly;</div></pre></td></tr></table></figure>
<p>All PHP classes, interfaces, functions, or constants declared beneath this namespace declaration live in the <code>Oreilly</code> namespace and are, in some way, related to O’Reilly Media. What if we wanted to organize code related to this book? We use a subnamespace.</p>
<p>Subnamespaces are declared exactly the same as in the previous example. The only difference is that we separate namespace and subnamespace names with the <code>\</code> character. The following example declares a subnamespace named <code>ModernPHP</code> that lives beneath the topmost <code>Oreilly</code> vendor namespace:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">namespace Oreilly\ModernPHP;</div></pre></td></tr></table></figure>
<p>All classes in the same namespace or subnamespace don’t have to be declared in the same PHP file. You can specify a namespace or subnamespace at the top of any PHP file, and that file’s code becomes a part of that namespace or subnamespace. This makes it possible to write multiple classes in separate files that belong to a common namespace.</p>
<p>Unlike your operating system’s physical filesystem, PHP namespaces are a virtual concept and do not necessarily map 1:1 with filesystem directories. That being said, most PHP components do, in fact, map subnamespaces to filesystem directories for compatibility with the popular PSR-4 autoloader standard.</p>
<h3 id="Import-and-Alias"><a href="#Import-and-Alias" class="headerlink" title="Import and Alias"></a>Import and Alias</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">use Symfony\Component\HttpFoundation\Response;</div><div class="line"></div><div class="line">$response = new Response(&apos;Oops&apos;, 400);</div><div class="line">$response-&gt;send();</div></pre></td></tr></table></figure>
<p>We tell PHP we intend to use the <code>Symfony\Component\HttpFoundation\Response</code> class with the <code>use</code> keyword. We type the long, fully qualified class name once. Then we can instantiate the <code>Response</code> class without using its fully namespaced class name.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">use Symfony\Component\HttpFoundation\Response as Res;</div><div class="line"></div><div class="line">$r = new Res(&apos;Oops&apos;, 400);</div><div class="line">$r-&gt;send();</div></pre></td></tr></table></figure>
<p>In this example, I changed the import line to import the <code>Response</code> class. I also appended <code>as Res</code> to the end of the import line; this tells PHP to consider <code>Res</code> an alias for the <code>Response</code> class. If we don’t append the <code>as Res</code> alias to the import line, PHP assumes a default alias that is the same as the imported class name.</p>
<p>As of PHP 5.6, it’s possible to import functions and constants. This requires a tweak to the use keyword syntax. To import a function, change use to use func:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">use func Namespace\functionName;</div><div class="line"></div><div class="line">functionName();</div></pre></td></tr></table></figure>
<p>To import a constant, change <code>use</code> to <code>use constant</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">use constant Namespace\CONST_NAME;</div><div class="line"></div><div class="line">echo CONST_NAME;</div></pre></td></tr></table></figure>
<p>Function and constant aliases work the same as classes</p>
<h3 id="Multiple-imports"><a href="#Multiple-imports" class="headerlink" title="Multiple imports"></a>Multiple imports</h3><p>If you import multiple classes, interfaces, functions, or constants into a single PHP file, you’ll end up with multiple <code>use</code> statements at the top of your PHP file. PHP accepts a shorthand import syntax that combines multiple <code>use</code> statements on a single line like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">use Symfony\Component\HttpFoundation\Request,</div><div class="line">    Symfony\Component\HttpFoundation\Response,</div><div class="line">    Symfony\Component\HttpFoundation\Cookie;</div></pre></td></tr></table></figure>
<p>Don’t do this. It’s confusing and easy to mess up. I recommend you keep each use statement on its own line like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">use Symfony\Component\HttpFoundation\Request;</div><div class="line">use Symfony\Component\HttpFoundation\Response;</div><div class="line">use Symfony\Component\HttpFoundation\Cookie;</div></pre></td></tr></table></figure>
<p>You’ll type a few extra characters, but your code is easier to read and troubleshoot.</p>
<h3 id="Multiple-namespaces-in-one-file"><a href="#Multiple-namespaces-in-one-file" class="headerlink" title="Multiple namespaces in one file"></a>Multiple namespaces in one file</h3><p>PHP lets you define multiple namespaces in a single PHP file like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">namespace Foo &#123;</div><div class="line">    // Declare classes, interfaces, functions, and constants here</div><div class="line">&#125;</div><div class="line"></div><div class="line">namespace Bar &#123;</div><div class="line">    // Declare classes, interfaces, functions, and constants here</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>This is confusing and violates the recommended one class per file good practice. Use only one namespace per file to make your code simpler and easier to troubleshoot</p>
<h3 id="Global-namespace"><a href="#Global-namespace" class="headerlink" title="Global namespace"></a>Global namespace</h3><p>If you reference a class, interface, function, or constant <em>without a namespace</em>, PHP assumes the class, interface, function, or constant lives in the current namespace. If this assumption is wrong, PHP attempts to resolve the class, interface, function, or constant. If you need to reference a namespaced class, interface, function, or constant <em>inside another namespace</em>, you must use the fully qualified PHP class name (namespace + class name).</p>
<p>Some code might not have a namespace and, therefore, lives in the <em>global namespace</em>. The native <code>Exception</code> class is a good example. You can reference globally namespaced code inside another namespace by prepending a <code>\</code> character to the class, interface, function, or constant name.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">namespace My\App;</div><div class="line"></div><div class="line">class Foo</div><div class="line">&#123;</div><div class="line">    public function doSomething()</div><div class="line">    &#123;</div><div class="line">        $exception = new Exception();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Add a <code>\</code> prefix to the <code>Exception</code> class name. This tells PHP to look for the <code>Exception</code> class in the global namespace instead of the current namespace.</p>

        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2017-11-05T08:22:17.000Z" itemprop="dateUpdated">2017-11-05 16:22:17</time>
</span><br>


        
        这里可以写作者留言，标签和 hexo 中所有变量及辅助函数等均可调用，示例：<a href="/PHP/2015-05-26-php-oop.html" target="_blank" rel="external">http://blog.inching.org/PHP/2015-05-26-php-oop.html</a>
        
    </div>
    <footer>
        <a href="http://blog.inching.org">
            <img src="/img/avatar.png" alt="Cody Fei">
            Cody Fei
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/php/">php</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tutorial/">tutorial</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.inching.org/PHP/2015-05-26-php-oop.html&title=《PHP OOP》 — Balance&pic=http://blog.inching.org/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.inching.org/PHP/2015-05-26-php-oop.html&title=《PHP OOP》 — Balance&source=See 《Modern PHP》 and 《Learning PHP, MySQL &amp; JavaScript, 4th Edition》.
Cla..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.inching.org/PHP/2015-05-26-php-oop.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《PHP OOP》 — Balance&url=http://blog.inching.org/PHP/2015-05-26-php-oop.html&via=http://blog.inching.org" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.inching.org/PHP/2015-05-26-php-oop.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/PHP/2015-05-27-php-form.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">PHP Form</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/Database/2015-05-26-database-mysql.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">MySQL Tutorial</h4>
      </a>
    </div>
  
</nav>



    











</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢大爷~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.JPG" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.JPG" data-alipay="/img/alipay.JPG">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top" style="display:none">
        

        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>footer.license</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Cody Fei &copy; 2012 - 2018</span>
            <span style="display:none">
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.inching.org/PHP/2015-05-26-php-oop.html&title=《PHP OOP》 — Balance&pic=http://blog.inching.org/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.inching.org/PHP/2015-05-26-php-oop.html&title=《PHP OOP》 — Balance&source=See 《Modern PHP》 and 《Learning PHP, MySQL &amp; JavaScript, 4th Edition》.
Cla..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.inching.org/PHP/2015-05-26-php-oop.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《PHP OOP》 — Balance&url=http://blog.inching.org/PHP/2015-05-26-php-oop.html&via=http://blog.inching.org" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.inching.org/PHP/2015-05-26-php-oop.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACPElEQVR42u3aSW7EMAwF0b7/pZ1tA47l+qISQFR5ZTQ86CkAYw6fDz6ur+P7l/s19+vv946feb9y2SFDhoxtGdfwIMsivz9R+RPGmyJDhowTGE8RjAfTNODyd42vlyFDhoy54Dj+1BvDZMiQIWMtgz+Hp8EyZMiQUUliyevJ5+BcGrwsF5chQ8aGDF51///zP+lvyJAhYyvGFR48XPJl8fD6+BYZMmS0ZvAAVy+l8aGKufXIkCGjK2OcFvJ0cdW9fLNQPU+GDBmNGPxxaaORtwdKzQkZMmS0ZswllqtCbX2hMmTIOIGRLq5yzremNGYhQ4aMdow0lU1HMXhTgSx9WUYuQ4aMrRg8TU0LbfWJiODfgAwZMg5gkCDLU1Y+hJEW416qhjJkyGjN4B9hkwFx6os1uFeGDBkHMyqjYGlinG6HDBkyzmFURivIIuYKc7yo98vfRIYMGe0Y9eQzXVw62BEMW8iQIaM1I01lK6NdlULe47tkyJDRmkGKWekiSGCtDKWh9qoMGTLaMVAIW9t0LAR3VDuUIUNGUwZZ0FzSy5sE/JfSvsqQIWNzRiU48lBLkljyfNTfkCFDxuaMKzzmBrz4YEdakvuQ/qcMGTI2Z6TpImkoVkp1pM1QSn1lyJCxLWNuJCtlrArEQblNhgwZ7Rh8hIKH17VJ7EvxToYMGTLCc16eS+clXjJyGTJkyMAtyfFz0gwbbZAMGTIOYPCBiRTPPwF5gJYhQ8ZpDJ46Vl62qi1aamrKkCFjP8YPhRvRPzxWqSwAAAAASUVORK5CYII=" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="/js/main.min.js?v=1.6.17"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.6.17" async></script>










</body>
</html>
