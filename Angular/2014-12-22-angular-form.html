<!DOCTYPE html>
<html>
<head>
    
<!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-43567748-2', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<!-- End Google Analytics -->


    

    



    <meta charset="utf-8">
    
    <meta name="google-site-verification" content="true">
    
    
    
    <title>Angular Form | Balance | 大道至简</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="tutorial,angular">
    <meta name="description" content="本文基于 Mastering Web Application Development with AngularJS 的读书笔记。
Understanding the input directivesYou can use all the standard HTML input types in your forms. The input directives work with the ngMod">
<meta property="og:type" content="article">
<meta property="og:title" content="Angular Form">
<meta property="og:url" content="http://blog.inching.org/Angular/2014-12-22-angular-form.html">
<meta property="og:site_name" content="Balance">
<meta property="og:description" content="本文基于 Mastering Web Application Development with AngularJS 的读书笔记。
Understanding the input directivesYou can use all the standard HTML input types in your forms. The input directives work with the ngMod">
<meta property="og:image" content="http://johnnyimages.qiniudn.com/angular-form-select-data-source.jpg">
<meta property="og:image" content="http://johnnyimages.qiniudn.com/angular-form-ng-modelController.jpg">
<meta property="og:image" content="http://johnnyimages.qiniudn.com/ng-form-ngmodel-transfrom.jpg">
<meta property="og:updated_time" content="2017-11-05T08:22:17.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Angular Form">
<meta name="twitter:description" content="本文基于 Mastering Web Application Development with AngularJS 的读书笔记。
Understanding the input directivesYou can use all the standard HTML input types in your forms. The input directives work with the ngMod">
<meta name="twitter:image" content="http://johnnyimages.qiniudn.com/angular-form-select-data-source.jpg">
    
        <link rel="alternate" type="application/atom+xml" title="Balance" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/style/style.css?v=1.6.17">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Cody Fei</h5>
          <a href="mailto:inchingcode@gmail.com" title="inchingcode@gmail.com" class="mail">inchingcode@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                Home
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags/android"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories/Android/"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/inchingorg" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://www.weibo.com/CodyFee" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://www.inesoi.com" target="_blank" >
                <i class="icon icon-lg icon-shopping-bag"></i>
                Shopping Bag
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Angular Form</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Angular Form</h1>
        <h5 class="subtitle">
            
                <time datetime="2014-12-21T16:00:00.000Z" itemprop="datePublished" class="page-time">
  2014-12-22
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Angular/">Angular</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Understanding-the-input-directives"><span class="post-toc-text">Understanding the input directives</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Using-checkbox-inputs"><span class="post-toc-text">Using checkbox inputs</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Using-radio-inputs"><span class="post-toc-text">Using radio inputs</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Using-select-inputs"><span class="post-toc-text">Using select inputs</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ngOptions"><span class="post-toc-text">ngOptions</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#dataSource"><span class="post-toc-text">dataSource</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#optionBinding-expression"><span class="post-toc-text">optionBinding expression</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Using-empty-options-with-the-select-directive"><span class="post-toc-text">Using empty options with the select directive</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#select-and-object-equivalence"><span class="post-toc-text">select and object equivalence</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Selecting-multiple-options"><span class="post-toc-text">Selecting multiple options</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Working-with-traditional-HTML-hidden-input-fields"><span class="post-toc-text">Working with traditional HTML hidden input fields</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ngModelController"><span class="post-toc-text">ngModelController</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Transforming-the-value-between-the-model-and-the-view"><span class="post-toc-text">Transforming the value between the model and the view</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Tracking-whether-the-value-has-changed"><span class="post-toc-text">Tracking whether the value has changed</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Tracking-input-field-validity"><span class="post-toc-text">Tracking input field validity</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Demo"><span class="post-toc-text">Demo</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ngFormController"><span class="post-toc-text">ngFormController</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Using-the-name-attribute-to-attach-forms-to-the-scope"><span class="post-toc-text">Using the name attribute to attach forms to the scope</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Adding-dynamic-behavior-to-the-User-Information-Form"><span class="post-toc-text">Adding dynamic behavior to the User Information Form</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Showing-validation-errors"><span class="post-toc-text">Showing validation errors</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Disabling-the-save-button"><span class="post-toc-text">Disabling the save button</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Disabling-native-browser-validation"><span class="post-toc-text">Disabling native browser validation</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Nesting-forms-in-other-forms"><span class="post-toc-text">Nesting forms in other forms</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Repeating-subforms"><span class="post-toc-text">Repeating subforms</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Handling-traditional-HTML-form-submission"><span class="post-toc-text">Handling traditional HTML form submission</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Submitting-forms-directly-to-the-server"><span class="post-toc-text">Submitting forms directly to the server</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Handling-form-submission-events"><span class="post-toc-text">Handling form submission events</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Using-ngSubmit-to-handle-form-submission"><span class="post-toc-text">Using ngSubmit to handle form submission</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Using-ngClick-to-handle-form-submission"><span class="post-toc-text">Using ngClick to handle form submission</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Resetting-the-User-Info-form"><span class="post-toc-text">Resetting the User Info form</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ngMessage"><span class="post-toc-text">ngMessage</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Tutorial"><span class="post-toc-text">Tutorial</span></a></li></ol>
        </nav>
    </aside>
    
<article id="post-angular-form"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Angular Form</h1>
        <div class="post-meta">
            <time class="post-time" title="2014-12-22 00:00:00" datetime="2014-12-21T16:00:00.000Z"  itemprop="datePublished">2014-12-22</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Angular/">Angular</a></li></ul>



            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p>本文基于 <a href="http://www.salttiger.com/mastering-web-application-development-angularjs/" target="_blank" rel="external">Mastering Web Application Development with AngularJS</a> 的读书笔记。</p>
<h2 id="Understanding-the-input-directives"><a href="#Understanding-the-input-directives" class="headerlink" title="Understanding the input directives"></a>Understanding the input directives</h2><p>You can use all the standard HTML input types in your forms. The input directives work with the <code>ngModel</code> directive to support additional functionality, such as validation or binding to the model. The AngularJS <code>input</code> directive checks the <code>type</code> attribute to identify what kind of functionality to add to the input element.</p>
<p>All the basic input directives support the use of the <code>required</code> (or <code>ngRequired</code>) attribute. </p>
<a id="more"></a>
<p>If you type into the e-mail input, the e-mail field in the model is blank until the input box contains a valid e-mail string. This means that your model never contains an invalid e-mail address. This is one of the benefits of decoupling the model from the view.</p>
<p>In addition to these validations all the text-based directives allow you to specify minimum and maximum lengths for the text as well as an arbitrary regular expression that must match. This is done with the ngMinLength, ngMaxLength, and ngPattern directives:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">ng-model</span>=<span class="string">"user.password"</span></span></div><div class="line">  <span class="attr">ng-minlength</span>=<span class="string">"3"</span> <span class="attr">ng-maxlength</span>=<span class="string">"10"</span></div><div class="line">  <span class="attr">ng-pattern</span>=<span class="string">"/^.*(?=.*\d)(?=.*[a-zA-Z]).*$/"</span>&gt;</div></pre></td></tr></table></figure>
<p>Note that these built-in validation features do not stop the user from entering an invalid string. The input directive just clears the model field if the string is invalid.</p>
<h3 id="Using-checkbox-inputs"><a href="#Using-checkbox-inputs" class="headerlink" title="Using checkbox inputs"></a>Using checkbox inputs</h3><p>Checkboxes simply indicate a boolean input. In our form, the input directive assigns <code>true</code> or <code>false</code> to the model field that is specified by <code>ngModel</code>. You can see this happening in our User Info Form for the “Is Administrator” field.</p>
<pre><code>&lt;input type=&quot;checkbox&quot; ng-model=&quot;user.admin&quot;&gt;
</code></pre><p>The value of <code>user.admin</code> is set to <code>true</code> if the checkbox is checked and <code>false</code> otherwise. Conversely, the checkbox will be ticked if the value of <code>user.admin</code> is <code>true</code>.</p>
<p>You can also specify different strings for <code>true</code> and <code>false</code> values to be used in the model. For example, we could have used <code>admin</code> and <code>basic</code> in a role field.</p>
<pre><code>&lt;input type=&quot;checkbox&quot; ng-model=&quot;user.role&quot; ng-true-value=&quot;admin&quot; ng-false-value=&quot;basic&quot;&gt;
</code></pre><p>In this case, the <code>user.role</code> model, would contain either <code>admin</code> or <code>basic</code> depending on whether the checkbox was ticked or not.</p>
<h3 id="Using-radio-inputs"><a href="#Using-radio-inputs" class="headerlink" title="Using radio inputs"></a>Using radio inputs</h3><p>Radio buttons provide a fixed group of choices for a field. AngularJS makes this really simple to implement: Just bind all the radio buttons in a group to the same model field. The standard HTML <code>value</code> attribute is then used to specify what value to put in the model when the radio is selected:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;label&gt;&lt;input type=&quot;radio&quot; ng-model=&quot;user.sex&quot; value=&quot;male&quot;&gt; Male&lt;/label&gt;</div><div class="line">&lt;label&gt;&lt;input type=&quot;radio&quot; ng-model=&quot;user.sex&quot; value=&quot;female&quot;&gt; Female&lt;/label&gt;</div></pre></td></tr></table></figure>
<h3 id="Using-select-inputs"><a href="#Using-select-inputs" class="headerlink" title="Using select inputs"></a>Using select inputs</h3><p>The <code>select</code> input directive allows you to create a drop-down list, from which the user can select one or more items. AngularJS lets you specify options for the drop down statically or from an array on the scope.</p>
<p>If you have a static list of options from which to select you can simply provide them as <code>option</code> elements below the <code>select</code> element:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">ng-model</span>=<span class="string">"sex"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"m"</span> <span class="attr">ng-selected</span>=<span class="string">"sex=='m'"</span>&gt;</span>Male<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"f"</span> <span class="attr">ng-selected</span>=<span class="string">"sex=='f'"</span>&gt;</span>Female<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></div></pre></td></tr></table></figure>
<p>Be aware that since the <code>value</code> attribute can only take a string, the value to which you bind can only be a string.</p>
<p>AngularJS provides an additional syntax for dynamically defining a complex list of options for a <code>select</code> directive. If you want to bind the value of a <code>select</code> directive to an object, rather than a simple string, then use <code>ngOptions</code>. This attribute accepts a <span class="strong"><strong>comprehension expression</strong></span> that defines what options are to be displayed. The form of this expression is:</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://johnnyimages.qiniudn.com/angular-form-select-data-source.jpg" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<p>The <code>dataSource</code> expression describes the source of the information about the options to be displayed. It describes elements in an array or properties on an object. One select option will be generated for each item in the <code>dataSource expression</code>.</p>
<p>The <code>optionBinding</code> expression describes what should be extracted from each data source item and how that item should be bound to the <code>select</code> option.</p>
<h4 id="ngOptions"><a href="#ngOptions" class="headerlink" title="ngOptions"></a>ngOptions</h4><p><strong>Using array data sources:</strong></p>
<p>Select a user object with user.email as the label:</p>
<pre><code>ng-options=&quot;user.email for user in users&quot;
</code></pre><p>Select a user object with a computed label (the function would be defined on the scope):</p>
<pre><code>ng-options=&quot;getFullName(user) for user in users&quot;
</code></pre><p>Select a user’s e-mail rather than the whole user object, with their full name as the label:</p>
<pre><code>ng-options=&quot;user.email as getFullName(user) for user in users
</code></pre><p>Select a user object with the list grouped by sex:</p>
<pre><code>ng-options=&quot;getFullName(user) group by user.sex for user in users&quot;
</code></pre><p><strong>Using object data sources</strong></p>
<p>Let’s provide two objects that relate country names to codes:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">$scope.countriesByCode = &#123;</div><div class="line">  <span class="string">'AF'</span> : <span class="string">'AFGHANISTAN'</span>,</div><div class="line">  <span class="string">'AX'</span> : <span class="string">'ÅLAND ISLANDS'</span>,</div><div class="line">  ...</div><div class="line">&#125;;</div><div class="line">$scope.countriesByName = &#123;</div><div class="line">  <span class="string">'AFGHANISTAN'</span> : <span class="string">'AF'</span>,</div><div class="line">  <span class="string">'ÅLAND ISLANDS'</span> : <span class="string">'AX'</span>,</div><div class="line">  ...</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>To select a country code by country name, ordered by country code:</p>
<pre><code>ng-options=&quot;code as name for (code, name) in countriesByCode&quot;
</code></pre><p>To select a country code by country name, ordered by country name:</p>
<pre><code>ng-options=&quot;code as name for (name, code) in countriesByName&quot;
</code></pre><h4 id="dataSource"><a href="#dataSource" class="headerlink" title="dataSource"></a>dataSource</h4><p>If the data source will be an array then the <code>arrayExpression</code> should evaluate to an array. The directive will iterate over each of the items in the array, assigning the current item in the array to the <code>value</code> variable.</p>
<p>The list of select options will be displayed in the same order as the items appear in the array.</p>
<p>If the data source will be an object then the <code>objectExpression</code> should evaluate to an object. The directive will iterate over each property of the object, assigning the value of the property to the <code>value</code> variable and the key of the member to the <code>key</code> variable.</p>
<p>The list of select options will be ordered alphabetically by the value of the key.</p>
<h4 id="optionBinding-expression"><a href="#optionBinding-expression" class="headerlink" title="optionBinding expression"></a>optionBinding expression</h4><p>The <code>optionBinding</code> expression defines how to get the label and value for each option and how to group the options from the items provided by the <code>dataSource expression</code>. This expression can take advantage of all the AngularJS expression syntax, including the use of filters. The general syntax is:</p>
<pre><code>value as label group by grouping
</code></pre><p>If the <code>value</code> expression is not provided then the data item itself will be used as the value to assign to the model when this item is selected. If you provide a grouping expression, it should evaluate to the name of the group for the given option.</p>
<h4 id="Using-empty-options-with-the-select-directive"><a href="#Using-empty-options-with-the-select-directive" class="headerlink" title="Using empty options with the select directive"></a>Using empty options with the select directive</h4><p>What should the <code>select</code> directive do when the bound model value doesn’t match with any of the values in the option list? In this case, the <code>select</code> directive will show an empty option at the top of the list of options.</p>
<p>The empty option will be selected whenever the model does not match any of the options. If the user manually selects the empty option then the model will be set to <code>null</code>. It will not be set to <code>undefined</code>.</p>
<p>You can define an empty option by adding an <code>option</code> element as a child of the <code>select</code> element that has an empty string for its value:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">ng-model</span>=<span class="string">"..."</span> <span class="attr">ng-options</span>=<span class="string">"..."</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">""</span>&gt;</span>-- No Selection --<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></div></pre></td></tr></table></figure>
<p>Here, we defined an empty option, which will display the <code>-- No Selection --</code> label.</p>
<p>If you define your own empty option then it will always be shown in the list of options and can be selected by the user.</p>
<p>If you do not define your own empty option in the declaration of the <code>select</code> directive it will generate its own.</p>
<p>If the directive generates the empty option, it will be shown only when the model does not match any items in the list. So the user will not be able to manually set the <code>select</code> value to <code>null/undefined</code>.</p>
<p>It is possible to hide the empty option by defining your own and setting its style to <code>display: none</code>.</p>
<pre><code>&lt;option style=&quot;display:none&quot; value=&quot;&quot;&gt;&lt;/option&gt;
</code></pre><p>In this case the <code>select</code> directive will use our empty option but the browser will not show it. Now, if the model does not match any options the <code>select</code> directive will be blank and invalid but there will not be a blank option shown in the list.</p>
<h4 id="select-and-object-equivalence"><a href="#select-and-object-equivalence" class="headerlink" title="select and object equivalence"></a>select and object equivalence</h4><p>The <code>select</code> directive matches the model value to the <code>option</code> value using the object equivalence operator (<code>===</code>). This means that if your option values are objects and not simply values (like numbers and strings) you must use a reference to the actual option value for your model value. Otherwise the <code>select</code> directive will think that the objects are different and will not match it to the option.</p>
<p>In a controller we might set up the options and selected items as an array of objects:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">app.controller(<span class="string">'MainCtrl'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>) </span>&#123;</div><div class="line">  $scope.sourceList = [</div><div class="line">    &#123;<span class="string">'id'</span>: <span class="string">'10005'</span>, <span class="string">'name'</span>: <span class="string">"Anne"</span>&#125;,</div><div class="line">    &#123;<span class="string">'id'</span>: <span class="string">'10006'</span>, <span class="string">'name'</span>: <span class="string">"Brian"</span>&#125;,</div><div class="line">    &#123;<span class="string">'id'</span>: <span class="string">'10007'</span>, <span class="string">'name'</span>: <span class="string">"Charlie"</span>&#125;</div><div class="line">  ];</div><div class="line">  $scope.selectedItemExact = $scope.sourceList[<span class="number">0</span>];</div><div class="line">  $scope.selectedItemSimilar = &#123;<span class="string">'id'</span>: <span class="string">'10005'</span>, <span class="string">'name'</span>: <span class="string">"Anne"</span>&#125;;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>Here, <code>selectedItemExact</code> actually references the first item in the <code>sourceList</code>, while <code>selectedItemSimilar</code> is a different object, even though the fields are identical:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">select</span></span></div><div class="line">  <span class="attr">ng-model</span>=<span class="string">"selectedItemExact"</span></div><div class="line">  <span class="attr">ng-options</span>=<span class="string">" item.name for item in sourceList"</span>&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">select</span></span></div><div class="line">  <span class="attr">ng-model</span>=<span class="string">"selectedItemSimilar"</span></div><div class="line">  <span class="attr">ng-options</span>=<span class="string">"item.name for item in sourceList"</span>&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></div></pre></td></tr></table></figure>
<p>Here, we create two <code>select</code> directives that are bound to these values. The one bound to <code>selectedItemSimilar</code> will not have an option selected. Therefore, you should always bind the value of the select to an item in the <code>ng-options</code> array. You may have to search the array for the appropriate option.</p>
<h4 id="Selecting-multiple-options"><a href="#Selecting-multiple-options" class="headerlink" title="Selecting multiple options"></a>Selecting multiple options</h4><p>If you want to select multiple items, you simply apply the <code>multiple</code> attribute to the <code>select</code> directive. The <code>ngModel</code> bound to this directive is then an array containing a reference to the value of each selected option.</p>
<p>AngularJS provides the <code>ngMultiple</code> directive, which takes an expression to decide whether to allow multiple selections. Currently, the <code>select</code> directive does not watch changes as to whether it accepts multiple selections, so the <code>ngMultiple</code> directive has limited use.</p>
<h3 id="Working-with-traditional-HTML-hidden-input-fields"><a href="#Working-with-traditional-HTML-hidden-input-fields" class="headerlink" title="Working with traditional HTML hidden input fields"></a>Working with traditional HTML hidden input fields</h3><p>In AngularJS, we store all our model data in the scope so that there is rarely any need to use hidden input fields. Therefore, AngularJS has no hidden input directive. There are two cases where you might use hidden input fields: embedding values from the server and supporting traditional HTML form submission.</p>
<p><strong>Embedding values from the server</strong></p>
<p>You use a server-side templating engine to create the HTML and you pass data from the server to AngularJS via the template. In this case, it is enough to put an <code>ng-init</code> directive into the HTML that is generated by the server, which will add values to the scope:</p>
<pre><code>&lt;form ng-init=&quot;user.hash=&apos;13513516&apos;&quot;&gt;
</code></pre><p>Here the HTML sent from the server contains a form element that includes an <code>ng-init</code> directive that will initialize <code>user</code>, <code>hash</code> on the scope of the form.</p>
<p><strong>Submitting a traditional HTML form</strong></p>
<p>Traditionally, you might have wanted to submit values to the server that are not in the view, that is, not a visible input control. This would have been achieved by adding hidden fields to your form. In AngularJS, we work from a model that is decoupled from the form, so we do not need these hidden fields. We simply add such values to the scope and then simulate the form submission using the $http service.</p>
<h2 id="ngModelController"><a href="#ngModelController" class="headerlink" title="ngModelController"></a>ngModelController</h2><p>Each <code>ngModel</code> directive creates an instance of <code>ngModelController</code>. This controller is made available to all the directives on the <code>input</code> element.</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://johnnyimages.qiniudn.com/angular-form-ng-modelController.jpg" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<p>The <code>ngModelController</code> is responsible for managing the data binding between the value stored in the model (specified by <code>ngModel</code>) and the value displayed by the <code>input</code> element.</p>
<p>The <code>ngModelController</code> also tracks whether the view value is valid and whether it has been modified by the input element.</p>
<h3 id="Transforming-the-value-between-the-model-and-the-view"><a href="#Transforming-the-value-between-the-model-and-the-view" class="headerlink" title="Transforming the value between the model and the view"></a>Transforming the value between the model and the view</h3><p>The <code>ngModelController</code> has a transformation pipeline that it applies each time the data binding is updated. This consists of two arrays: <code>$formatters</code> that transforms from model into view and <code>$parsers</code> that transforms from view to model. Each directive on the <code>input</code> element can add in their own formatters and parsers to this pipeline in order to modify what happens to the data binding as shown in the following image:</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://johnnyimages.qiniudn.com/ng-form-ngmodel-transfrom.jpg" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<p>Here two directives are adding to the transformation pipeline. The <code>date</code> directive is parsing and formatting dates. The <code>ng-required</code> directive is checking that the value is not missing.</p>
<h3 id="Tracking-whether-the-value-has-changed"><a href="#Tracking-whether-the-value-has-changed" class="headerlink" title="Tracking whether the value has changed"></a>Tracking whether the value has changed</h3><p>Along with transforming the value between the model and the view, the <code>ngModelController</code> tracks whether the value has changed since it was initialized and whether the value is valid.</p>
<p>When it is first initialized the <code>ngModelController</code> marks the value as pristine, that is, it has not been modified. It exposes this as an <code>ng-pristine</code> CSS class on the input element. When the view changes, say through typing in an input box, the value is marked as dirty. It replaces the <code>ng-pristine</code> CSS class with the <code>ng-dirty</code> CSS class.</p>
<p>By providing CSS styles for these classes, we can change the appearance of the input element based on whether the user has entered or modified the data:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">.ng-pristine &#123; border: solid black 1px; &#125;</div><div class="line">.ng-dirty &#123; border: solid black 3px; &#125;</div></pre></td></tr></table></figure>
<p>Here we make the border of the element thicker if the user has made changes to the input.</p>
<h3 id="Tracking-input-field-validity"><a href="#Tracking-input-field-validity" class="headerlink" title="Tracking input field validity"></a>Tracking input field validity</h3><p>Directives on an input element can also tell the <code>ngModelController</code> whether they believe the value is <code>valid</code> or <code>invalid</code>. This is normally done by hooking into the transformation pipeline and checking the value rather than transforming it. The <code>ngModelController</code> tracks the validity and applies the <code>ng-valid</code> or <code>ng-invalid</code> CSS classes accordingly. We can provide further styles to change the appearance of the element based on these classes:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.ng-valid</span><span class="selector-class">.ng-dirty</span> &#123; <span class="attribute">border</span>: solid green <span class="number">3px</span>;&#125;</div><div class="line"><span class="selector-class">.ng-invalid</span><span class="selector-class">.ng-dirty</span> &#123; <span class="attribute">border</span>: solid red <span class="number">3px</span>;&#125;</div></pre></td></tr></table></figure>
<p>Here, we are using a combination of <code>pristine</code> and <code>invalid</code> to ensure that only fields that have been changed by user input are styled: thick red border when <code>invalid</code> and thick green border when <code>valid</code>.</p>
<h3 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h3><p>我们以一个确认密码输入验证器的例子为例，当确认密码和输入密码相同时，才认为输入合法。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">name</span>=<span class="string">"passwordForm"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">ng-model</span>=<span class="string">"user.password"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"confirmPassword"</span> <span class="attr">ng-model</span>=<span class="string">"confirmPassword"</span> <span class="attr">validate-equals</span>=<span class="string">"user.password"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">myModule.directive(<span class="string">'validateEquals'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">require</span>: <span class="string">'ngModel'</span>,</div><div class="line">    <span class="attr">link</span>: <span class="function"><span class="keyword">function</span>(<span class="params">scope, elm, attrs, ngModelCtrl</span>) </span>&#123;</div><div class="line">      <span class="function"><span class="keyword">function</span> <span class="title">validateEqual</span>(<span class="params">myValue</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> valid = (myValue === scope.$<span class="built_in">eval</span>(attrs.validateEquals));</div><div class="line">        ngModelCtrl.$setValidity(<span class="string">'equal'</span>, valid);</div><div class="line">        <span class="keyword">return</span> valid ? myValue : <span class="literal">undefined</span>;</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      ngModelCtrl.$parsers.push(validateEqual);</div><div class="line">      ngModelCtrl.$formatters.push(validateEqual);</div><div class="line"></div><div class="line">      scope.$watch(attrs.validateEquals, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        ngModelCtrl.$setViewValue(ngModelCtrl.$viewValue);</div><div class="line">      &#125;);</div><div class="line">    &#125;</div><div class="line">  &#125;;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>我们创建了一个 <code>validateEqual(value)</code> 的函数来比较传入的值和表达式的值。我们这个函数放在 <code>$parsers</code> 和 <code>$formatters</code> 管道中，所以验证函数在模型或者试图的值发生变化时都将被触发。</p>
<p>在这个指令中，我们也必须通过 <code>watch</code> 函数来监听比较的值（<code>attrs.validateEquals</code>）。当监听的值发生变化时，我们通过 <code>$setViewValue()</code> 手动触发 <code>$parsers</code> 管道。这保证了模型一旦发生变化，<code>$parsers</code> 所有函数将会运行。</p>
<p><code>ngModelController</code>  的相关属性和方法：</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$parsers</code></td>
<td>当输入元素的值发生变化时，函数管道将以此运行。</td>
</tr>
<tr>
<td><code>$formatters</code></td>
<td>当模型的值发生变化时，函数管道将依次运行。</td>
</tr>
<tr>
<td><code>$setValidity(validationErrorKey, isValid)</code></td>
<td>A function called to set whether the model is valid for a given kind of validation error.       </td>
</tr>
<tr>
<td><code>$valid</code></td>
<td>True if there is no error.                                                                      </td>
</tr>
<tr>
<td><code>$error</code></td>
<td>An object that contains information about any validation errors on the model.                   </td>
</tr>
</tbody>
</table>
<p><code>$parsers</code> and <code>$formatters</code> 中的函数接收一个值返回一个值，如 <code>function(value) { return value; }</code>。接收的值是管道中的前一个函数的返回值。我们的验证逻辑将放在这些函数中。</p>
<p>我们同样可以使用类似的方式实现远程验证：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">ng-model</span>=<span class="string">"user.email"</span> <span class="attr">unique-email</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">myModule.directive(<span class="string">'uniqueEmail'</span>, [<span class="string">"Users"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">Users</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">require</span>:<span class="string">'ngModel'</span>,</div><div class="line">    <span class="attr">link</span>:<span class="function"><span class="keyword">function</span> (<span class="params">scope, element, attrs, ngModelCtrl</span>) </span>&#123;</div><div class="line">      <span class="keyword">var</span> original;</div><div class="line">      ngModelCtrl.$formatters.unshift(<span class="function"><span class="keyword">function</span>(<span class="params">modelValue</span>) </span>&#123;</div><div class="line">        original = modelValue;</div><div class="line">        <span class="keyword">return</span> modelValue;</div><div class="line">      &#125;);</div><div class="line">      </div><div class="line">      ngModelCtrl.$parsers.push(<span class="function"><span class="keyword">function</span> (<span class="params">viewValue</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (viewValue &amp;&amp; viewValue !== original ) &#123;</div><div class="line">          Users.query(&#123;<span class="attr">email</span>:viewValue&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">users</span>) </span>&#123;</div><div class="line">            <span class="keyword">if</span> (users.length === <span class="number">0</span>) &#123;</div><div class="line">              ngModelCtrl.$setValidity(<span class="string">'uniqueEmail'</span>, <span class="literal">true</span>);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">              ngModelCtrl.$setValidity(<span class="string">'uniqueEmail'</span>, <span class="literal">false</span>);</div><div class="line">            &#125;</div><div class="line">          &#125;);</div><div class="line">          <span class="keyword">return</span> viewValue;</div><div class="line">        &#125;</div><div class="line">      &#125;);</div><div class="line">    &#125;</div><div class="line">  &#125;;</div><div class="line">&#125;]);</div></pre></td></tr></table></figure>
<p>当用户输入发生变化时，我们只在 <code>$parser</code> 中和服务区比较验证。如果值通过设置模型来更新，我们认为应用逻辑保证了 e-mail 的正确性。如编辑一个已经存在的用户，我们认为这里的 e-mail 是正确的。</p>
<p>通常，在验证函数中，如果值是非法的，我们返回 <code>undefined</code>，这可以防止使用一个非法的值来改变模型。在这个例子中，函数返回我们仍不知道值是否合法，所以我们先将值返回，然后在响应的回调函数中设置有效性。</p>
<p>我们为 <code>$formatters</code> 添加一个函数来跟踪设置到 model 的原值。当用户再次输入原值的时候，可以防止和服务器发生交互。</p>
<h2 id="ngFormController"><a href="#ngFormController" class="headerlink" title="ngFormController"></a>ngFormController</h2><p>Each <code>form</code> (or <code>ngForm)</code> directive creates an instance of <code>ngFormController</code>. The <code>ngFormController</code> object manages whether the form is valid or invalid and whether it is pristine or dirty. Importantly, it works with <code>ngModelController</code> to track each <code>ngModel</code> field within the form.</p>
<p>When an <code>ngModelController</code> is created, it registers itself with the first <code>ngFormController</code> it comes across as it traverses up its list of parent elements. This way, the <code>ngFormController</code> knows what input directives it should track. It can check whether these fields are valid/invalid or pristine/dirty and set whether the form is valid/invalid or pristine/dirty accordingly.</p>
<h3 id="Using-the-name-attribute-to-attach-forms-to-the-scope"><a href="#Using-the-name-attribute-to-attach-forms-to-the-scope" class="headerlink" title="Using the name attribute to attach forms to the scope"></a>Using the name attribute to attach forms to the scope</h3><p>You can make the <code>ngFormController</code> appear on the local scope by giving the form a name. Any input elements within the form that also have names will have their <code>ngModelController</code> object attached as a property to this <code>ngFormController</code> object.</p>
<h3 id="Adding-dynamic-behavior-to-the-User-Information-Form"><a href="#Adding-dynamic-behavior-to-the-User-Information-Form" class="headerlink" title="Adding dynamic behavior to the User Information Form"></a>Adding dynamic behavior to the User Information Form</h3><p>Our form allows us to enter values into fields and we can change the appearance of the input elements based on the values entered. But for a more responsive user experience, we would like to show and hide validation messages and change the state of buttons on our form depending upon the state of the form fields.</p>
<p>Having the <code>ngFormController</code> and <code>ngModelControllers</code> objects on our scope allows us to work with the state of the form programmatically. We can use values like <code>$invalid</code> and <code>$dirty</code> to change what is enabled or visible to our user.</p>
<h4 id="Showing-validation-errors"><a href="#Showing-validation-errors" class="headerlink" title="Showing validation errors"></a>Showing validation errors</h4><p>We can show error messages for inputs and for the form as a whole if something is not valid. In the template:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">name</span>=<span class="string">"userInfoForm"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"control-group"</span></span></div><div class="line">       <span class="attr">ng-class</span>=<span class="string">"getCssClasses(userInfoForm.email)"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>E-mail<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"email"</span> <span class="attr">ng-model</span>=<span class="string">"user.email"</span></span></div><div class="line">           <span class="attr">name</span>=<span class="string">"email"</span> <span class="attr">required</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">ng-show</span>=<span class="string">"showError(userInfoForm.email, 'email')"</span> <span class="attr">...</span>&gt;</span></div><div class="line">       You must enter a valid email</div><div class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">ng-show</span>=<span class="string">"showError(userInfoForm.email, 'required')"</span> <span class="attr">...</span>&gt;</span></div><div class="line">       This field is required</div><div class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  ...</div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure>
<p>In the controller:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">app.controller(<span class="string">'MainCtrl'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>) </span>&#123;</div><div class="line">  $scope.getCssClasses = <span class="function"><span class="keyword">function</span>(<span class="params">ngModelContoller</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">error</span>: ngModelContoller.$invalid &amp;&amp; ngModelContoller.$dirty,</div><div class="line">      <span class="attr">success</span>: ngModelContoller.$valid &amp;&amp; ngModelContoller.$dirty</div><div class="line">    &#125;;</div><div class="line">  &#125;;</div><div class="line">  $scope.showError = <span class="function"><span class="keyword">function</span>(<span class="params">ngModelController, error</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> ngModelController.$error[error];</div><div class="line">  &#125;; </div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>This example shows the e-mail input from our User Form. We are using Twitter Bootstrap CSS to style the form, hence the <code>control-group</code> and <code>inline-help</code> CSS classes. We have also created two helper functions in the controller.</p>
<p>The <code>ng-class</code> directive will update the CSS classes on <code>div</code> that contains the label, the input, and the help text. It calls the <code>getCssClasses()</code> method, passing in an object and an error name.</p>
<p>The object parameter is actually the <code>ngModelController</code>, which has been exposed on the <code>ngFormController</code>, which in turn is exposed on the <code>scope.userInfoForm.email</code> scope.</p>
<p>The <code>getCssClasses()</code> method returns an object that defines which CSS classes should be added. The key of each object refers to the name of a CSS class. The value of each member is <code>true</code> if the class is to be added. In this case <code>getCssClasses()</code> will return <code>error</code> if the model is dirty and invalid and <code>success</code> if the model is dirty and valid.</p>
<h4 id="Disabling-the-save-button"><a href="#Disabling-the-save-button" class="headerlink" title="Disabling the save button"></a>Disabling the save button</h4><p>We can disable the save button when the form is not in a state to be saved.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">name</span>=<span class="string">"userInfoForm"</span>&gt;</span></div><div class="line">  ...</div><div class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">ng-disabled</span>=<span class="string">"!canSave()"</span>&gt;</span>Save<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure>
<p>In our view, we add a <code>Save</code> button with an <code>ngDisabled</code> directive. This directive will disable the button whenever its expression evaluates to true. In this case it is negating the result of calling the <code>canSave()</code> method. We provide the <code>canSave()</code> method on the current scope. We will do this in our main controller:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">app.controller(<span class="string">'MainCtrl'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>) </span>&#123;</div><div class="line">  $scope.canSave = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> $scope.userInfoForm.$dirty &amp;&amp;</div><div class="line">           $scope.userInfoForm.$valid;</div><div class="line">  &#125;;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>The <code>canSave()</code> method checks whether the <code>userInfoForm</code> has the <code>$dirty</code> and <code>$valid</code> flags set. If so, the form is ready to save.</p>
<h4 id="Disabling-native-browser-validation"><a href="#Disabling-native-browser-validation" class="headerlink" title="Disabling native browser validation"></a>Disabling native browser validation</h4><p>Modern browsers naturally try to validate the input values in a form. Normally this occurs when the form is submitted. For instance, if you have a required attribute on an input box, the browser will complain independently of AngularJS, if the field does not contain a value when you try to submit the form.</p>
<p>Since we are providing all the validation through AngularJS directives and controllers, we do not want the browser to attempt its own native validation. We can turn off this by applying the HTML5 novalidate attribute to the form element:</p>
<pre><code>&lt;form name=&quot;novalidateForm&quot; novalidate&gt;
</code></pre><p>This form is called <code>novalidateForm</code> and the <code>novalidate</code> attribute will tell the browser not to attempt the validation on any of the inputs in the form.</p>
<h3 id="Nesting-forms-in-other-forms"><a href="#Nesting-forms-in-other-forms" class="headerlink" title="Nesting forms in other forms"></a>Nesting forms in other forms</h3><p>Unlike standard HTML forms, AngularJS forms can be nested inside each other. Since form tags inside other form tags are invalid HTML, AngularJS provides the <code>ngForm</code> directive for nesting forms.</p>
<p>Each form that provides a name will be added to its parent form, or directly to the scope if it has no parent form.</p>
<p>A nested form acts like a composite field that exposes its own validation information based on the fields that it contains. Such forms can be used to reuse as subforms by including them in container forms. Here we group two input boxes together to create a password and password confirmation widget:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/ng-template"</span> <span class="attr">id</span>=<span class="string">"password-form"</span>&gt;</span><span class="xml"></span></div><div class="line">  <span class="tag">&lt;<span class="name">ng-form</span> <span class="attr">name</span>=<span class="string">"passwordForm"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-show</span>=<span class="string">"user.password != user.password2"</span>&gt;</span></div><div class="line">      Passwords do not match</div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>Password<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">ng-model</span>=<span class="string">"user.password"</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">required</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>Confirm Password<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">ng-model</span>=<span class="string">"user.password2"</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">required</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">ng-form</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">name</span>=<span class="string">"form1"</span> <span class="attr">novalidate</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">legend</span>&gt;</span>User Form<span class="tag">&lt;/<span class="name">legend</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span>Name<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">ng-model</span>=<span class="string">"user.name"</span> <span class="attr">required</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">ng-include</span> <span class="attr">src</span>=<span class="string">"'password-form'"</span>&gt;</span><span class="tag">&lt;/<span class="name">ng-include</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure>
<p>We define our subform in a partial template. In this case it is inline in a script block but it could be in a separate file also. Next we have our container form, <code>form1</code>,which includes the subform by using the <code>ngInclude</code> directive.</p>
<p>The subform has its own validity state and related CSS classes. Also, notice that because the subform has a name attribute, it appears as a property on the container form.</p>
<h3 id="Repeating-subforms"><a href="#Repeating-subforms" class="headerlink" title="Repeating subforms"></a>Repeating subforms</h3><p>Sometimes, we have fields in a form that needs to be repeated by an arbitrary number of times based on the data in the model. This is a common situation where you want to provide a single form that can display a one-to-many relationship in the data.</p>
<p>In our SCRUM app, we would like to allow users to have zero or more website URLs in their User Info profile. We can use an <code>ngRepeat</code> directive to set this up:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">  <span class="tag">&lt;<span class="name">form</span> <span class="attr">ng-controller</span>=<span class="string">"MainCtrl"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>User Info<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span>Websites<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-repeat</span>=<span class="string">"website in user.websites"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"url"</span> <span class="attr">ng-model</span>=<span class="string">"website.url"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">ng-click</span>=<span class="string">"remove($index)"</span>&gt;</span>X<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">ng-click</span>=<span class="string">"add()"</span>&gt;</span>Add Website<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure>
<p>The controller initializes the model and provides the helper functions, <code>remove()</code> and <code>add()</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">app.controller(<span class="string">'MainCtrl'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>) </span>&#123;</div><div class="line">  $scope.user = &#123;</div><div class="line">    <span class="attr">websites</span>: [</div><div class="line">      &#123;<span class="attr">url</span>: <span class="string">'http://www.bloggs.com'</span>&#125;,</div><div class="line">      &#123;<span class="attr">url</span>: <span class="string">'http://www.jo-b.com'</span>&#125;</div><div class="line">    ]</div><div class="line">  &#125;;</div><div class="line">  $scope.remove = <span class="function"><span class="keyword">function</span>(<span class="params">index</span>) </span>&#123;</div><div class="line">    $scope.user.websites.splice(index, <span class="number">1</span>);</div><div class="line">  &#125;;</div><div class="line">  $scope.add = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    $scope.user.websites.push(&#123; <span class="attr">url</span>: <span class="string">''</span>&#125;);</div><div class="line">  &#125;;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>In the template, we have an <code>ngRepeat</code> directive that iterates over the websites in the user’s profile. Each input directive in the repeat block is data bound to the appropriate <code>website.url</code> in the <code>user.websites</code> model. The helper functions take care of adding and removing items to and from the array and AngularJS data binding does the rest.</p>
<p>It is tempting for each website item in the website’s array to be a simple string containing the URL. This will not work since, in JavaScript, strings are passed by value and so the reference between the string in the <code>ngRepeat</code> block and the string in the array will be lost when you modify the value of the input box.</p>
<p><strong>Validating repeated inputs</strong></p>
<p>The problem with this approach comes when you want to do work with validation on these repeated fields. We need each input to have a unique name within the form in order to access that field’s validity, <code>$valid</code>, <code>$invalid</code>, <code>$pristine</code>, <code>$dirty</code>, and so on. Unfortunately, AngularJS does not allow you to dynamically generate the name attribute for <code>input</code> directives. The name must be a fixed string.</p>
<p>We solve this problem by using nested forms. Each exposes itself on the current scope, so if we place a nested form inside each repeated block that contains the repeated input directives, we will have access on that scope to the field’s validity.</p>
<p>Template:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">novalidate</span> <span class="attr">ng-controller</span>=<span class="string">"MainCtrl"</span> <span class="attr">name</span>=<span class="string">"userForm"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span>Websites<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-show</span>=<span class="string">"userForm.$invalid"</span>&gt;</span>The User Form is invalid.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-repeat</span>=<span class="string">"website in user.websites"</span> <span class="attr">ng-form</span>=<span class="string">"websiteForm"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"url"</span> <span class="attr">name</span>=<span class="string">"website"</span></span></div><div class="line">           <span class="attr">ng-model</span>=<span class="string">"website.url"</span> <span class="attr">required</span>&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">ng-click</span>=<span class="string">"remove($index)"</span>&gt;</span>X<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">ng-show</span>=<span class="string">"showError(websiteForm.website, 'url')"</span>&gt;</span></div><div class="line">       Pleae must enter a valid url<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">ng-show</span>=<span class="string">"showError(websiteForm.website, 'required')"</span>&gt;</span></div><div class="line">       This field is required<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">ng-click</span>=<span class="string">"addWebsite()"</span>&gt;</span>Add Website<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure>
<p>Controller:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">app.controller('MainCtrl', function($scope) &#123;</div><div class="line">  $scope.showError = function(ngModelController, error) &#123;</div><div class="line">    return ngModelController.$error[error];</div><div class="line">  &#125;;</div><div class="line">  $scope.user = &#123;</div><div class="line">    websites: [</div><div class="line">      &#123;url: 'http://www.bloggs.com'&#125;,</div><div class="line">      &#123;url: 'http://www.jo-b.com'&#125;</div><div class="line">    ]</div><div class="line">  &#125;;  </div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>Here, we are applying the <code>ngForm</code> directive to <code>div</code>, to create a nested form, which is repeated for each website in the array of <code>websites</code> on the scope. Each of the nested forms is called <code>websiteForm</code> and each input in the form is called <code>website</code>. This means that we are able to access the validity of the <code>ngModel</code> for each website from within the <code>ngRepeat</code> scope.</p>
<p>We make use of this to show an error message when the input is invalid. The two <code>ng-show</code> directives will show their error messages when the <code>showError</code> function returns <code>true</code>. The <code>showError</code> function checks the passed in <code>ngModelController</code> to see if it has the relevant validation entry in the <code>$error</code> field. We can pass <code>websiteForm.website</code> to this function since this refers to the <code>ngModelController</code> object for our website input box.</p>
<p>Outside the <code>ngForm</code> we cannot reference the <code>websiteForm</code> (<code>ngFormController</code>) object on the scope or the <code>websiteForm.website</code> (<code>ngModelController</code>) object since they do not exist in this scope. We can, however, access the containing <code>userForm</code> (<code>ngFormController)</code> object. This form’s validity is based upon the validity of all its child inputs and forms. If one of the <code>websiteForms</code> is invalid, so is the <code>userForm</code>. The div at the top of the form displays an overall error message only if <code>userForms.$valid</code> is true.</p>
<h3 id="Handling-traditional-HTML-form-submission"><a href="#Handling-traditional-HTML-form-submission" class="headerlink" title="Handling traditional HTML form submission"></a>Handling traditional HTML form submission</h3><p>In this section we take a look at how AngularJS handles submission of forms. Single Page AJAX Applications, for which AngularJS is perfect, don’t tend to follow the same process of direct submission to the server as traditional web application do. But sometimes your application must support this. Here we show the various submission scenarios that you may wish to implement when submitting form data back to a server.</p>
<h4 id="Submitting-forms-directly-to-the-server"><a href="#Submitting-forms-directly-to-the-server" class="headerlink" title="Submitting forms directly to the server"></a>Submitting forms directly to the server</h4><p>If you include an <code>action</code> attribute on a form in an AngularJS application, then the form will submit as normal to the URL defined in the action:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"get"</span> <span class="attr">action</span>=<span class="string">"http://www.google.com/search"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"q"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure>
<h4 id="Handling-form-submission-events"><a href="#Handling-form-submission-events" class="headerlink" title="Handling form submission events"></a>Handling form submission events</h4><p>If you don’t include an <code>action</code> attribute, then AngularJS assumes that we are going to handle the submission on the client side by calling a function on the scope. In this case, AngularJS will prevent the form trying to directly submit to the server.</p>
<p>We can trigger this client-side function by using the <code>ngClick</code> directive on a <code>button</code> or the <code>ngSubmit</code> directive on the <code>form</code>.</p>
<p>You should not use both the <code>ngSubmit</code> and <code>ngClick</code> directives on the same <code>form</code> because the browser will trigger both directives and you will get double submission.</p>
<h4 id="Using-ngSubmit-to-handle-form-submission"><a href="#Using-ngSubmit-to-handle-form-submission" class="headerlink" title="Using ngSubmit to handle form submission"></a>Using ngSubmit to handle form submission</h4><p>To use <code>ngSubmit</code> on a form, you provide an expression that will be evaluated when the form is submitted. The form submission will happen when the user hits <span class="emphasis"><em>Enter</em></span> in one of the inputs or clicks on one of the buttons:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">ng-submit</span>=<span class="string">"showAlert(q)"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">ng-model</span>=<span class="string">"q"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure>
<p>Here, hitting <em>Enter</em> while in the input will call the <code>showAlert</code>method.</p>
<p>You should use <code>ngSubmit</code> only on a form that has only one input and not more than one button, such as our search form in the example.</p>
<h4 id="Using-ngClick-to-handle-form-submission"><a href="#Using-ngClick-to-handle-form-submission" class="headerlink" title="Using ngClick to handle form submission"></a>Using ngClick to handle form submission</h4><p>To use <code>ngClick</code>, on a <code>button</code> or <code>input[type=submit]</code>, you provide an expression that will be evaluated when the button is clicked:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">ng-model</span>=<span class="string">"q"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">ng-click</span>=<span class="string">"showAlert(q)"</span>&gt;</span>Search<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure>
<p>Here, clicking on the button or hitting <span class="emphasis"><em>Enter</em></span> in the input field will call the <code>showAlert</code> method.</p>
<h3 id="Resetting-the-User-Info-form"><a href="#Resetting-the-User-Info-form" class="headerlink" title="Resetting the User Info form"></a>Resetting the User Info form</h3><p>In our User Info form, we would like to cancel the changes and reset the form back to its original state. We do this by holding a copy of the original model with which we can overwrite any changes that the user has made.</p>
<p>Template:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">name</span>=<span class="string">"userInfoForm"</span>&gt;</span></div><div class="line">  ...</div><div class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">ng-click</span>=<span class="string">"revert()"</span> <span class="attr">ng-disabled</span>=<span class="string">"!canRevert()"</span>&gt;</span>Revert Changes<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure>
<p>Controller:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">app.controller(<span class="string">'MainCtrl'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>) </span>&#123;</div><div class="line">  ...</div><div class="line">  $scope.user = &#123;</div><div class="line">    ...</div><div class="line">  &#125;;</div><div class="line">  $scope.passwordRepeat = $scope.user.password;</div><div class="line"></div><div class="line">  <span class="keyword">var</span> original = angular.copy($scope.user);</div><div class="line">  </div><div class="line">  $scope.revert = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    $scope.user = angular.copy(original);</div><div class="line">    $scope.passwordRepeat = $scope.user.password;</div><div class="line">    $scope.userInfoForm.$setPristine();</div><div class="line">  &#125;;</div><div class="line">  </div><div class="line">  $scope.canRevert = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> !angular.equals($scope.user, original);</div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  $scope.canSave = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> $scope.userInfoForm.$valid &amp;&amp;</div><div class="line">      !angular.equals($scope.user, original);</div><div class="line">  &#125;;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>Here, we have a button to revert the model back to its original state. Clicking on this button calls <code>revert()</code> on the scope. The button is disabled if <code>canRevert()</code> returns <code>false</code>.</p>
<p>In the controller, you can see that we use <code>angular.copy()</code> to make a copy of the model and place it in a local variable. The <code>revert()</code> method copies this original back over to the working <code>user</code> model and sets the form back to a pristine state so that all the CSS classes are no longer set to <code>ng-dirty</code>.</p>
<h2 id="ngMessage"><a href="#ngMessage" class="headerlink" title="ngMessage"></a>ngMessage</h2><p>See <a href="https://docs.angularjs.org/api/ngMessages" target="_blank" rel="external">AngularJS: API: ngMessages</a> and a demo <a href="https://calendee.com/2014/12/26/validation-in-ionic-framework-apps-with-ngmessages/" target="_blank" rel="external">Validation in Ionic Framework Apps with ngMessages</a>.</p>
<h2 id="Tutorial"><a href="#Tutorial" class="headerlink" title="Tutorial"></a>Tutorial</h2><ul>
<li><a href="http://www.ng-newsletter.com/posts/validations.html" target="_blank" rel="external">Form validation with AngularJS</a></li>
</ul>

        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2017-11-05T08:22:17.000Z" itemprop="dateUpdated">2017-11-05 16:22:17</time>
</span><br>


        
        这里可以写作者留言，标签和 hexo 中所有变量及辅助函数等均可调用，示例：<a href="/Angular/2014-12-22-angular-form.html" target="_blank" rel="external">http://blog.inching.org/Angular/2014-12-22-angular-form.html</a>
        
    </div>
    <footer>
        <a href="http://blog.inching.org">
            <img src="/img/avatar.png" alt="Cody Fei">
            Cody Fei
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/angular/">angular</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tutorial/">tutorial</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.inching.org/Angular/2014-12-22-angular-form.html&title=《Angular Form》 — Balance&pic=http://blog.inching.org/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.inching.org/Angular/2014-12-22-angular-form.html&title=《Angular Form》 — Balance&source=本文基于 Mastering Web Application Development with AngularJS 的读书笔记。
Understandin..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.inching.org/Angular/2014-12-22-angular-form.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Angular Form》 — Balance&url=http://blog.inching.org/Angular/2014-12-22-angular-form.html&via=http://blog.inching.org" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.inching.org/Angular/2014-12-22-angular-form.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/HTTP/2014-12-24-javascript-chat.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">HTTP Tutorial</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/JavaScript/2014-12-19-dom-load.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">onLoad and onDOMContentLoaded</h4>
      </a>
    </div>
  
</nav>



    











</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢大爷~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.JPG" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.JPG" data-alipay="/img/alipay.JPG">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top" style="display:none">
        

        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>footer.license</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Cody Fei &copy; 2012 - 2017</span>
            <span style="display:none">
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.inching.org/Angular/2014-12-22-angular-form.html&title=《Angular Form》 — Balance&pic=http://blog.inching.org/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.inching.org/Angular/2014-12-22-angular-form.html&title=《Angular Form》 — Balance&source=本文基于 Mastering Web Application Development with AngularJS 的读书笔记。
Understandin..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.inching.org/Angular/2014-12-22-angular-form.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Angular Form》 — Balance&url=http://blog.inching.org/Angular/2014-12-22-angular-form.html&via=http://blog.inching.org" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.inching.org/Angular/2014-12-22-angular-form.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACLklEQVR42u3aS47DIBBFUe9/0+5ppHTwfQWJRHEZRZaDOB6U6sN14XW/rPcnn56/78D3vL6xZMiQsS3jHi5y6PHO40Pzj/LpHRkyZJzDIIcYh8v0Tc4bn02GDBkySHAkSR5PAWXIkCFjbcBNE7u0iJUhQ4aMNICS5G/mzR/V4jJkyNiQwbvuv//9lfmGDBkytmLc4SL/RWlcOBx9OJUMGTJaM3iAS1M0frhawJUhQ8ZpjFoiyMvX+QsZXyxZZciQsQljvsjkjTDOjoegMmTIaM2YOXR6eSJN+OI9ZciQ0ZTBi0byu/YmD98L2m0yZMjYisGTs1rqNh9wUSkrQ4aM1gze9uKF6PyoIB2jypAhozej1vAiATdtxvF08J8nMmTIaM1ILzGQUJiOB0iOV7xmIUOGjBaMtDSdTxD54CHo+cuQIeMAxqrwt+qdtCEoQ4aMcxjFYBcOElZ19eM7GjJkyGjEqGHSfcj4M55pyJAhoykjLUp5MOXsNKA/7C9DhoymjNodjXE5WhuL1gYVMmTIOIdBksJauUsSwZn0UYYMGWcy0gEkuc5Vu1LGRxQyZMjoyrjDNZ/M1crmhzAtQ4aM1gy+ajwemtNkNBhwypAhowUjTd1qAJ7qFQOuDBkyDmDwwLfqusZMEfvQbpMhQ8bxDN5WWzswKLYTZciQcSRjJhyTfcafCY0wZciQ0ZTBW2mrRphB2re23SZDhowNGWneNd+SqyWFM1c0ZMiQsS3jD0nNiYfXj/2oAAAAAElFTkSuQmCC" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="/js/main.min.js?v=1.6.17"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.6.17" async></script>










</body>
</html>
